==================
4b98393;TW;2018-01-10 07:26:26 +0100;Merge pull request #3520 from pngwjpgh/doc/chunk-seed
Chunk seed is generated per /repository/
==
==================
1820e22;Gregor Kleen;2018-01-09 18:17:46 +0100;Chunk seed is generated per /repository/

==

docs/internals/data-structures.rst
==================
34c4400;TW;2018-01-04 20:20:10 +0100;Merge pull request #3510 from LocutusOfBorg/no-shebang
borg shell completion: remove shebang, useless because scripts are so…
==
==================
2978aad;Gianfranco Costamagna;2018-01-04 14:33:08 +0100;borg shell completion: remove shebang, useless because scripts are sourced

==

scripts/shell_completions/bash/borg
==================
5512db7;TW;2018-01-03 18:17:24 +0100;Merge pull request #3508 from LocutusOfBorg/typo-fix
Typo fix
==
==================
0980d6a;Gianfranco Costamagna;2018-01-03 15:54:52 +0100;fixup allows one to, with suggestions from Dan Christensen

==

docs/internals/data-structures.rst
docs/man/borg-key-import.1
docs/usage/key_import.rst.inc
src/borg/archiver.py
==================
111a19f;Gianfranco Costamagna;2018-01-03 11:42:12 +0100;fix typo: allows to -> allows one to

==

docs/changes.rst
docs/internals/data-structures.rst
docs/man/borg-key-export.1
docs/man/borg-key-import.1
docs/man/borg-recreate.1
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/recreate.rst.inc
scripts/borg.exe.spec
src/borg/archiver.py
==================
1a74326;Gianfranco Costamagna;2018-01-03 11:40:35 +0100;borg: fix typo: explicitely -> explicitly

==

docs/man/borg-compression.1
docs/usage/help.rst.inc
src/borg/archiver.py
==================
dc7eea1;TW;2018-01-02 16:46:23 +0100;Merge pull request #3503 from Abogical/new-year
Happy new year!
==
==================
7638085;Abogical;2018-01-02 16:59:01 +0200;Revert copyright year change in shellpattern

==

src/borg/shellpattern.py
==================
937736c;Abogical;2018-01-02 00:26:57 +0200;Happy new year!

==

LICENSE
docs/conf.py
==================
9f40063;Josh Holland;2017-12-29 00:15:07 +0000;Correct some confusing error messages from `borg init` (#3485)
init: more clear exception messages for borg create, fixes #3465

also: refactor

==

src/borg/repository.py
==================
f83e5b7;TW;2017-12-25 05:34:52 +0100;Merge pull request #3484 from ThomasWaldmann/fix-getfqdn
fix getfqdn
==
==================
9b0d0f3;Thomas Waldmann;2017-12-24 04:46:20 +0100;use patched version of socket.getfqdn(), fixes #3471

==

src/borg/platform/base.py
==================
5e4df77;Thomas Waldmann;2017-12-24 04:12:02 +0100;refactor/move hostname/fqdn related funcs, see #3471
- move stuff to platform.base (should be platform independent according
  to the docs).
- bump platform API version
- parseformat: import fqdn from platform instead of recomputing it

This is not yet fixing #3471, just a preparation for it.

==

src/borg/helpers/checks.py
src/borg/helpers/parseformat.py
src/borg/platform/__init__.py
src/borg/platform/base.py
src/borg/platform/darwin.pyx
src/borg/platform/freebsd.pyx
src/borg/platform/linux.pyx
src/borg/platform/posix.pyx
==================
98052eb;TW;2017-12-23 16:32:35 +0100;Merge pull request #3467 from ThomasWaldmann/borg-base-dir
added BORG_BASE_DIR, s/get_home_dir/get_base_dir/g, docs, fixes #3338
==
==================
83ad973;TW;2017-12-23 16:30:32 +0100;Merge pull request #3477 from SanskritFritz/master
zstd compression method added to fish/bash completions
==
==================
3467e2e;SanskritFritz;2017-12-23 10:49:18 +0100;zstd compression method

==

scripts/shell_completions/bash/borg
scripts/shell_completions/fish/borg.fish
==================
c5a3393;Thomas Waldmann;2017-12-21 06:18:49 +0100;added BORG_BASE_DIR, s/get_home_dir/get_base_dir/g, docs, fixes #3338
also: sorted env var docs by level

==

docs/usage_general.rst.inc
src/borg/helpers/fs.py
src/borg/remote.py
src/borg/testsuite/helpers.py
src/borg/upgrader.py
==================
c4b6f5d;TW;2017-12-23 01:19:18 +0100;Merge pull request #3469 from SanskritFritz/master
Updated bash/fish completions for borg 1.1.3
==
==================
ec8a8c0;TW;2017-12-23 01:18:33 +0100;Merge pull request #3475 from ThomasWaldmann/fix-borg-init-quota
borg init: use given --storage-quota for local repo, fixes #3470
==
==================
1d18d6b;TW;2017-12-23 00:05:00 +0100;Merge pull request #3473 from anowlcalledjosh/quote-repo-path
Properly quote repo path in `borg init` output
==
==================
6fbbbd4;TW;2017-12-23 00:02:09 +0100;Merge pull request #3474 from anowlcalledjosh/fix-docs-typo
docs: Fix missing apostrophe
==
==================
d1cdc14;Thomas Waldmann;2017-12-22 23:50:00 +0100;borg init: use given --storage-quota for local repo, fixes #3470

==

src/borg/archiver.py
==================
95a05db;Josh Holland;2017-12-22 21:44:12 +0000;docs: Fix missing apostrophe

==

docs/internals/security.rst
==================
e780660;Josh Holland;2017-12-22 21:09:49 +0000;Properly quote repo path in `borg init` output
Instead of printing this invalid command:

    borg upgrade --disable-tam '/path/test'repo'

print this valid one:

    borg upgrade --disable-tam '/path/test'"'"'repo'

==

src/borg/archiver.py
==================
60e9263;SanskritFritz;2017-12-22 00:31:49 +0100;Updated bash/fish completions for borg 1.1.3

==

scripts/shell_completions/bash/borg
scripts/shell_completions/fish/borg.fish
==================
79b2f2f;TW;2017-12-20 03:09:54 +0100;Merge pull request #3461 from ThomasWaldmann/docs-lz4-b2-zstd
docs update for lz4 b2 zstd changes
==
==================
3d32407;Thomas Waldmann;2017-12-18 23:21:34 +0100;add zstd to compression help

==

src/borg/archiver.py
==================
2588e50;Thomas Waldmann;2017-12-18 22:53:24 +0100;readme / docs: mention zstd

==

README.rst
docs/faq.rst
docs/internals/data-structures.rst
docs/quickstart.rst
==================
061321b;Thomas Waldmann;2017-12-18 05:44:36 +0100;update requirements and install docs about bundled lz4 and zstd

==

docs/deployment/central-backup-server.rst
docs/global.rst.inc
docs/installation.rst
==================
b627944;TW;2017-12-18 04:21:48 +0100;Merge pull request #3451 from ThomasWaldmann/blake2-ext-building
crypto.low_level ext building (blake2 part)
==
==================
1e9c90d;TW;2017-12-18 01:15:29 +0100;Merge pull request #3450 from ThomasWaldmann/borg-delete-removing-security-dir
also delete security dir when deleting a repo, fixes #3427
==
==================
4a2fec3;Thomas Waldmann;2017-12-17 03:06:12 +0100;crypto.low_level extension: build blake2 like zstd, see #3415

==

setup.py
setup_b2.py
src/borg/algorithms/blake2-libselect.h
==================
b56f6cd;Thomas Waldmann;2017-12-17 03:18:03 +0100;update blake2 reference impl file (cosmetic)
only whitespace changes.

==

src/borg/algorithms/blake2/ref/blake2-impl.h
src/borg/algorithms/blake2/ref/blake2.h
src/borg/algorithms/blake2/ref/blake2b-ref.c
==================
8924d78;Thomas Waldmann;2017-12-17 02:55:41 +0100;move blake2 files to subdir ref/ (as seen in orig. repo)

==

src/borg/algorithms/blake2-libselect.h
src/borg/algorithms/blake2/blake2-impl.h
src/borg/algorithms/blake2/blake2.h
src/borg/algorithms/blake2/blake2b-ref.c
src/borg/algorithms/blake2/ref/blake2-impl.h
src/borg/algorithms/blake2/ref/blake2.h
src/borg/algorithms/blake2/ref/blake2b-ref.c
==================
55ca8a9;TW;2017-12-18 00:55:23 +0100;Merge pull request #3443 from ThomasWaldmann/lz4-ext-building
compress ext building (lz4 part)
==
==================
fe48caf;Thomas Waldmann;2017-12-15 07:08:06 +0100;fix lz4 deprecation warning, require lz4 >= 1.7.0 (r129)
as we bundle lz4 1.8.0 now, platform not having a recent liblz4 can
now just use the bundled code.

==

docs/installation.rst
setup.py
setup_lz4.py
src/borg/compress.pyx
src/borg/helpers/checks.py
==================
9b6924d;Thomas Waldmann;2017-12-15 06:43:56 +0100;rename BORG_LZ4_PREFIX env var to BORG_LIBLZ4_PREFIX
consistency:
we also have BORG_LIBB2_PREFIX and BORG_LIBZSTD_PREFIX.

==

docs/usage_general.rst.inc
setup.py
==================
73a7008;Thomas Waldmann;2017-12-15 06:35:20 +0100;compress extension: build lz4 like zstd, see #3415

==

setup.py
setup_lz4.py
src/borg/algorithms/lz4-libselect.h
src/borg/compress.pyx
src/borg/helpers/checks.py
==================
814be9e;TW;2017-12-17 03:13:10 +0100;Merge pull request #3449 from ThomasWaldmann/check-hangs-fix-master
fix for borg check --repair malfunction, #3444 (master)
==
==================
8f77243;Thomas Waldmann;2017-12-16 22:59:47 +0100;also delete security dir when deleting a repo, fixes #3427

==

src/borg/archiver.py
src/borg/cache.py
==================
57a2d92;Thomas Waldmann;2017-12-16 01:16:05 +0100;check --repair: fix malfunctioning validator, fixes #3444
the major problem was the ('path' in item) expression.
the dict has bytes-typed keys there, so it never succeeded as it
looked for a str key. this is a 1.1 regression, 1.0 was fine.

the dict -> StableDict change is just for being more specific,
the check triggered correctly as StableDict subclasses dict,
it was just a bit too general.

(cherry picked from commit e09892caec8a63d59e909518c4e9c230dbd69774)

==

src/borg/archive.py
==================
0abf42f;Thomas Waldmann;2017-12-16 01:11:40 +0100;modify borg check unit test so it "hangs", see #3444
it doesn't infinitely hang, but slows down considerably.

(cherry picked from commit a68d28bfa4db30561150c83eb6a0dca5efa4d9e8)

==

src/borg/testsuite/archiver.py
==================
c8b2820;Thomas Waldmann;2017-12-15 06:33:04 +0100;bundle lz4 1.8.0 src code, license

==

docs/3rd_party/lz4/LICENSE
src/borg/algorithms/lz4/lib/lz4.c
src/borg/algorithms/lz4/lib/lz4.h
==================
e203b87;TW;2017-12-15 01:55:20 +0100;Merge pull request #3411 from ThomasWaldmann/zstd
add zstd compression
==
==================
50e1759;TW;2017-12-15 00:43:12 +0100;Merge pull request #3433 from ThomasWaldmann/fix-cpp-macros
add parens for C preprocessor macro argument usages
==
==================
7317dc3;TW;2017-12-15 00:41:25 +0100;Merge pull request #3434 from ThomasWaldmann/fix-prune-man-page
fix building the "borg prune" man page, fixes #3398
==
==================
34b92ff;Thomas Waldmann;2017-12-05 04:16:25 +0100;support code to build bundled zstd code into the compress extension
setup_zstd.py modified so it is just amending the Extension() kwargs,
but the Extension is initialized by the caller.

this way, amending can happend multiple times (e.g. for multiple
compression algorithms).

also:
- move include/library dirs processing for system-library case
- move system zstd prefix detection to setup_zstd module
- cosmetic: setup.py whitespace fixes
- prefer system zstd option, document zstd min. requirement

==

setup.py
setup_zstd.py
src/borg/algorithms/zstd-libselect.h
==================
50c0831;Thomas Waldmann;2017-12-04 23:59:35 +0100;add setup_zstd.py from python-zstandard project, as is

==

setup_zstd.py
==================
dc883f6;Thomas Waldmann;2017-12-05 04:18:57 +0100;bundle zstd 1.3.2 source code
only .c and .h files + license

==

docs/3rd_party/zstd/LICENSE
src/borg/algorithms/zstd/lib/common/bitstream.h
src/borg/algorithms/zstd/lib/common/compiler.h
src/borg/algorithms/zstd/lib/common/entropy_common.c
src/borg/algorithms/zstd/lib/common/error_private.c
src/borg/algorithms/zstd/lib/common/error_private.h
src/borg/algorithms/zstd/lib/common/fse.h
src/borg/algorithms/zstd/lib/common/fse_decompress.c
src/borg/algorithms/zstd/lib/common/huf.h
src/borg/algorithms/zstd/lib/common/mem.h
src/borg/algorithms/zstd/lib/common/pool.c
src/borg/algorithms/zstd/lib/common/pool.h
src/borg/algorithms/zstd/lib/common/threading.c
src/borg/algorithms/zstd/lib/common/threading.h
src/borg/algorithms/zstd/lib/common/xxhash.c
src/borg/algorithms/zstd/lib/common/xxhash.h
src/borg/algorithms/zstd/lib/common/zstd_common.c
src/borg/algorithms/zstd/lib/common/zstd_errors.h
src/borg/algorithms/zstd/lib/common/zstd_internal.h
src/borg/algorithms/zstd/lib/compress/fse_compress.c
src/borg/algorithms/zstd/lib/compress/huf_compress.c
src/borg/algorithms/zstd/lib/compress/zstd_compress.c
src/borg/algorithms/zstd/lib/compress/zstd_compress.h
src/borg/algorithms/zstd/lib/compress/zstd_double_fast.c
src/borg/algorithms/zstd/lib/compress/zstd_double_fast.h
src/borg/algorithms/zstd/lib/compress/zstd_fast.c
src/borg/algorithms/zstd/lib/compress/zstd_fast.h
src/borg/algorithms/zstd/lib/compress/zstd_lazy.c
src/borg/algorithms/zstd/lib/compress/zstd_lazy.h
src/borg/algorithms/zstd/lib/compress/zstd_ldm.c
src/borg/algorithms/zstd/lib/compress/zstd_ldm.h
src/borg/algorithms/zstd/lib/compress/zstd_opt.c
src/borg/algorithms/zstd/lib/compress/zstd_opt.h
src/borg/algorithms/zstd/lib/compress/zstdmt_compress.c
src/borg/algorithms/zstd/lib/compress/zstdmt_compress.h
src/borg/algorithms/zstd/lib/decompress/huf_decompress.c
src/borg/algorithms/zstd/lib/decompress/zstd_decompress.c
src/borg/algorithms/zstd/lib/deprecated/zbuff.h
src/borg/algorithms/zstd/lib/deprecated/zbuff_common.c
src/borg/algorithms/zstd/lib/deprecated/zbuff_compress.c
src/borg/algorithms/zstd/lib/deprecated/zbuff_decompress.c
src/borg/algorithms/zstd/lib/dictBuilder/cover.c
src/borg/algorithms/zstd/lib/dictBuilder/divsufsort.c
src/borg/algorithms/zstd/lib/dictBuilder/divsufsort.h
src/borg/algorithms/zstd/lib/dictBuilder/zdict.c
src/borg/algorithms/zstd/lib/dictBuilder/zdict.h
src/borg/algorithms/zstd/lib/legacy/zstd_legacy.h
src/borg/algorithms/zstd/lib/legacy/zstd_v01.c
src/borg/algorithms/zstd/lib/legacy/zstd_v01.h
src/borg/algorithms/zstd/lib/legacy/zstd_v02.c
src/borg/algorithms/zstd/lib/legacy/zstd_v02.h
src/borg/algorithms/zstd/lib/legacy/zstd_v03.c
src/borg/algorithms/zstd/lib/legacy/zstd_v03.h
src/borg/algorithms/zstd/lib/legacy/zstd_v04.c
src/borg/algorithms/zstd/lib/legacy/zstd_v04.h
src/borg/algorithms/zstd/lib/legacy/zstd_v05.c
src/borg/algorithms/zstd/lib/legacy/zstd_v05.h
src/borg/algorithms/zstd/lib/legacy/zstd_v06.c
src/borg/algorithms/zstd/lib/legacy/zstd_v06.h
src/borg/algorithms/zstd/lib/legacy/zstd_v07.c
src/borg/algorithms/zstd/lib/legacy/zstd_v07.h
src/borg/algorithms/zstd/lib/zstd.h
==================
aec36f6;Thomas Waldmann;2017-12-03 05:38:23 +0100;zstd: use own Cython-based binding, remove python-zstandard dep
currently requires an externally available libzstd >= 1.3.0,
no bundled zstd yet.

==

setup.py
src/borg/algorithms/zstd-libselect.h
src/borg/compress.pyx
==================
11b2311;Thomas Waldmann;2017-12-02 22:43:34 +0100;add zstd compression
based on willyvmm's work in PR #3116, but some changes:

- removed any mulithreading changes
- add zstandard in setup.py install_requires
- tests
- fix: minimum compression level is 1 (not 0)
- use 3 for the default compression level
- use ID 03 00 for zstd
- only convert to bytes if we don't have bytes yet
- move zstd code so that code blocks are ordered by ID
- other cosmetic fixes

==

setup.py
src/borg/compress.pyx
src/borg/helpers/checks.py
src/borg/testsuite/compress.py
==================
029d9ac;TW;2017-12-13 04:42:08 +0100;Merge pull request #3435 from ThomasWaldmann/add-missing-borg-config-manpage
git add docs/man/borg-config.1
==
==================
d81ea03;Thomas Waldmann;2017-12-13 04:40:20 +0100;git add docs/man/borg-config.1

==

docs/man/borg-config.1
==================
1f5b8c9;Thomas Waldmann;2017-12-13 04:33:50 +0100;fix building the "borg prune" man page, fixes #3398
will fix all ".. highlight:: none" issues (just killing it).

also a slight punctuation fix, so there is a dot at the end of
the prune man page.

==

setup.py
==================
a3cecf5;Thomas Waldmann;2017-12-13 04:01:59 +0100;add parens for C preprocessor macro argument usages
this is needed for correctness because the preprocessor is just
doing text replacement.

This is the correct way:

#define MUL(x, y) ((x) * (y))

MUL(1+2, 3-4) -> ((1+2) * (3-4))    # not: (1+2 * 3-4)

I didn't put parens around all arg usages for readability.

Some stuff (like index) is not expected to be an expression.

Also, when a arg is only used in another macro or function call,
no parens are needed either.

I reviewed the code: no harm was done (yet) due to this fault.

Thanks to @rciorba who found this.

==

src/borg/_chunker.c
src/borg/_hashindex.c
==================
f99785a;TW;2017-12-13 02:54:45 +0100;Merge pull request #3088 from n-st/list-help-topics
List help topics when invalid topic is requested
==
==================
59ac75c;TW;2017-12-13 00:40:55 +0100;Merge pull request #3429 from pngwjpgh/feat/reverse-fqdn
Add placeholder for fqdn in reverse notation
==
==================
294f06b;Gregor Kleen;2017-12-12 12:44:17 +0100;Refactor: call getfqdn() once per call of replace_placeholders()

==

src/borg/helpers/parseformat.py
==================
85fb38e;Gregor Kleen;2017-12-11 23:00:38 +0100;Add placeholder for fqdn in reverse notation

==

docs/man/borg-placeholders.1
docs/usage/help.rst.inc
src/borg/archiver.py
src/borg/helpers/parseformat.py
==================
e838b48;TW;2017-12-09 22:23:57 +0100;Merge pull request #3421 from ThomasWaldmann/add-config-docs-master
add auto-generated docs for borg config
==
==================
ce92960;Thomas Waldmann;2017-12-09 13:41:03 +0100;add auto-generated docs for borg config
also: move a bit upwards in the use docs
(cherry picked from commit 278ed640e909a50641a8e410d414dd4de9ba8879)

==

docs/usage.rst
docs/usage/config.rst.inc
==================
3f4dfc9;TW;2017-12-03 03:02:29 +0100;Merge pull request #3405 from milkey-mouse/no-borgfs-html-docs
Don't generate HTML docs page for borgfs
==
==================
897c003;Milkey Mouse;2017-12-01 14:21:20 -0800;Don't generate HTML docs page for borgfs (fixes #3404)

==

setup.py
==================
c4e5616;TW;2017-12-02 21:19:12 +0100;Merge pull request #3397 from ThomasWaldmann/port-1.1.3-last-minute-changes
Port 1.1.3 last minute changes
==
==================
5cf48ee;Thomas Waldmann;2017-11-27 04:10:17 +0100;borg mount: fix hardlink processing, fixes #3388
when the result list after stripping was empty,
os.path.join(*emptylist) fails as it want 1+ args.

(cherry picked from commit dc8de361095eea509a28d416ab826850047432ce)

==

src/borg/fuse.py
==================
4fcb413;Thomas Waldmann;2017-11-27 01:01:34 +0100;crc32-slice-by-8.c: fix for C90 compilers
crc32_slice_by_8.c:344:3: error: ISO C90 forbids mixed declarations
and code [-Werror=declaration-after-statement]

(cherry picked from commit 23a1d62b2580f9462c02524eb23af99c04ca65d0)

==

src/borg/algorithms/crc32_slice_by_8.c
==================
209bf2d;Thomas Waldmann;2017-11-26 22:29:41 +0100;move 3rd party docs/license file from package dir to docs/3rd_party
setup.py excludes all .c .h .pyx files from installation, but such
docs / license files would still be copied to the target directory
if they are inside the python "borg" package dir.

(cherry picked from commit 831a06a07d93626b33b094f75c63ae017c09974f)

==

docs/3rd_party/README
docs/3rd_party/blake2/COPYING
docs/3rd_party/blake2/README.md
src/borg/algorithms/blake2/COPYING
src/borg/algorithms/blake2/README.md
==================
75854c1;Thomas Waldmann;2017-11-26 19:51:10 +0100;security: fix enforcement of --restrict-to-path in args processing
Fixes CVE-2017-15914 (affects releases 1.1.0, 1.1.1, 1.1.2,
but not 1.0.x).

Thanks to Florian Apolloner for discovering/reporting this!

Also: added tests for this.
(cherry picked from commit ea0203bb0de557cd29de5ab0a0efe5f6015ca59d)

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
1cf6e1e;TW;2017-12-02 18:02:40 +0100;Merge pull request #3407 from ThomasWaldmann/exclude-broken-pytest330
exclude broken pytest 3.3.0 release
==
==================
43184f2;Thomas Waldmann;2017-12-02 17:43:38 +0100;exclude broken pytest 3.3.0 release
https://github.com/pytest-dev/pytest/issues/2957

==

requirements.d/development.txt
==================
1bf8d43;TW;2017-11-27 00:01:30 +0100;Merge pull request #3387 from ThomasWaldmann/docs-fix-broken-links
docs: fix broken links
==
==================
63bdae8;Thomas Waldmann;2017-11-26 23:56:32 +0100;docs: fix broken links
(cherry picked from commit c7994b598b696d7fb585c21e5a8c489af30a37e4)

==

docs/development.rst
docs/support.rst
==================
510d444;TW;2017-11-26 23:38:29 +0100;Merge pull request #3384 from ThomasWaldmann/link-to-hp-support
link to the homepage for support/service
==
==================
c2521a7;Thomas Waldmann;2017-11-26 23:34:10 +0100;link to the homepage for support/service
otherwise people ONLY reading the docs (and not coming from the
homepage) will miss these options.

(cherry picked from commit 7438cb2ef48e3cad9c220fc25de0a462a425bed8)

==

docs/support.rst
==================
6dd54f9;Michael Rupert;2017-11-25 23:10:22 -0500;fixed support links (#3379)
fixed support links
==

README.rst
docs/development.rst
==================
c312a9a;TW;2017-11-26 04:09:03 +0100;Merge pull request #3377 from milkey-mouse/fix-build-man
Fix build_man issues
==
==================
2a83098;Milkey Mouse;2017-11-25 17:16:28 -0800;Fix build_man issues (fixes #3364)

==

src/borg/archiver.py
==================
c848141;TW;2017-11-26 03:58:01 +0100;Merge pull request #3375 from ThomasWaldmann/docs-fixes
misc. docs fixes / updates
==
==================
6b5b4e4;TW;2017-11-26 02:07:33 +0100;Merge pull request #3376 from milkey-mouse/borg-config-cmd
Reword borg config help
==
==================
559ec00;Milkey Mouse;2017-11-25 17:06:02 -0800;Use name of command for "virtual man page" name
This makes it slightly easier to debug manpage issues without removing
the virtmanpage hack.

==

setup.py
==================
f44335f;Milkey Mouse;2017-11-25 15:53:36 -0800;Reword basic borg config help
It doesn't edit the repo config, but any borg-related config.

==

src/borg/archiver.py
==================
0eaec60;Thomas Waldmann;2017-11-25 20:18:59 +0100;docs: give examples for borg mount exclusion options

==

docs/usage/mount.rst
==================
91ff2f8;Thomas Waldmann;2017-11-25 20:08:33 +0100;docs: move bsdflags tuning comments to notes docs section
the atime comments are already there.

==

docs/usage/notes.rst
src/borg/archiver.py
==================
a107233;Thomas Waldmann;2017-11-25 19:51:33 +0100;docs: document birthtime support on platforms supporting it
stat.st_birthtime, MacOS and (some?) BSDs.

==

docs/usage_general.rst.inc
==================
e3cb7c3;Thomas Waldmann;2017-11-25 19:46:48 +0100;docs: document good and problematic option placements, see #3356

==

docs/usage_general.rst.inc
==================
f2a1539;Thomas Waldmann;2017-11-25 19:29:34 +0100;docs: fix examples with problematic option placements, fixes #3356
have options to the left OR to the right of all positional arguments,
but not on BOTH sides and not in between them.

==

docs/faq.rst
docs/usage/create.rst
docs/usage/tar.rst
==================
f45acbb;TW;2017-11-25 15:27:27 +0100;Merge pull request #3366 from ThomasWaldmann/create-tuning-options
docs: point out tuning options for borg create, fixes #3239
==
==================
520a6a2;Thomas Waldmann;2017-11-25 15:21:43 +0100;docs: point out tuning options for borg create, fixes #3239

==

src/borg/archiver.py
==================
4835dce;TW;2017-11-25 14:53:35 +0100;Merge pull request #3363 from ThomasWaldmann/update-usage-man
update usage / man
==
==================
ef8217a;Thomas Waldmann;2017-11-25 14:38:04 +0100;build_man (master)
also: git add borgfs.1

==

docs/man/borg-benchmark-crud.1
docs/man/borg-benchmark.1
docs/man/borg-break-lock.1
docs/man/borg-change-passphrase.1
docs/man/borg-check.1
docs/man/borg-common.1
docs/man/borg-compression.1
docs/man/borg-create.1
docs/man/borg-delete.1
docs/man/borg-diff.1
docs/man/borg-export-tar.1
docs/man/borg-extract.1
docs/man/borg-info.1
docs/man/borg-init.1
docs/man/borg-key-change-passphrase.1
docs/man/borg-key-export.1
docs/man/borg-key-import.1
docs/man/borg-key-migrate-to-repokey.1
docs/man/borg-key.1
docs/man/borg-list.1
docs/man/borg-mount.1
docs/man/borg-patterns.1
docs/man/borg-placeholders.1
docs/man/borg-prune.1
docs/man/borg-recreate.1
docs/man/borg-rename.1
docs/man/borg-serve.1
docs/man/borg-umount.1
docs/man/borg-upgrade.1
docs/man/borg-with-lock.1
docs/man/borg.1
docs/man/borgfs.1
==================
73fac09;Thomas Waldmann;2017-11-25 14:35:52 +0100;build_usage (master)
also: add new borgfs.rst.inc

==

docs/usage/borgfs.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/common-options.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/extract.rst.inc
docs/usage/help.rst.inc
docs/usage/info.rst.inc
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_export.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
docs/usage/upgrade.rst.inc
docs/usage/with-lock.rst.inc
==================
b9b5c1d;TW;2017-11-25 14:25:13 +0100;Merge pull request #3355 from ThomasWaldmann/package-data
clean up and simplify packaging
==
==================
feb428b;Thomas Waldmann;2017-11-24 05:00:23 +0100;clean up and simplify packaging
1.1.2 was released with a sdist that included quite some files that
did not belong into the package (I tried nuitka at some time).

This was because the old MANIFEST.in / setup.py included all the stuff
in the package dir.

Now, setuptools_scm is to automatically deal with the INCLUDES and
MANIFEST.in only handles the EXCLUDES, so only committed files get
into the sdist (minus some we do not want).

Also, no .c .h .pyx files will be installed - they are not needed as
they have been compiled into binary files.

==

MANIFEST.in
setup.py
==================
71fbac9;Michael Rupert;2017-11-24 21:15:18 -0500;Moved Support to .org (#3360)
docs: moved support options to www.borgbackup.org
==

README.rst
docs/development.rst
docs/man_intro.rst
docs/support.rst
==================
c5dc75a;TW;2017-11-24 16:56:15 +0100;Merge pull request #3312 from milkey-mouse/borg-config-cmd
Add borg config command
==
==================
1e52020;Milkey Mouse;2017-11-21 11:41:36 -0800;Fix borg config flake8 failures
Suppressed E731 so lambdas can be assigned to vars

==

setup.cfg
src/borg/testsuite/archiver.py
==================
5b47cf6;Milkey Mouse;2017-11-10 20:30:02 -0800;Add borg config command (fixes #3304)
This command works similarly to "git config" - it parses repo and
cache configs to get, set, and delete values. It only works on local
repos so a malicious client can't e.g. override their storage quota
or reset the append_only flag.

Add tests for borg config

Add documentation for borg config

Change manual config edits -> borg config

There were a couple places in the documentation where it was advised
to edit the repository or cache config file, a process that is stream-
lined by borg config.

==

docs/faq.rst
docs/quickstart.rst
docs/usage.rst
docs/usage/config.rst
docs/usage/notes.rst
src/borg/archiver.py
src/borg/helpers/parseformat.py
src/borg/testsuite/archiver.py
==================
afc84ca;TW;2017-11-23 22:43:39 +0100;Merge pull request #3300 from ThomasWaldmann/mount-options
borg mount: support exclusion group options and paths, fixes #2138
==
==================
483d3e8;TW;2017-11-23 22:07:15 +0100;Merge pull request #3292 from milkey-mouse/document-ntfsclone
Add instructions for using ntfsclone
==
==================
c0edc60;Milkey Mouse;2017-11-23 11:36:05 -0800;Move image backup-related FAQ entries to a new page

==

docs/deployment.rst
docs/deployment/image-backup.rst
docs/faq.rst
==================
d1e3279;Milkey Mouse;2017-11-22 08:25:49 -0800;Clarify key aliases for borg list --format (#3346)
clarify key aliases for borg list --format, fixes #3111
==

src/borg/helpers/parseformat.py
==================
caece37;Thomas Waldmann;2017-11-22 15:08:08 +0100;borg mount: support --consider-part-files correctly, fixes #3347

==

src/borg/fuse.py
==================
e97deaf;Thomas Waldmann;2017-11-21 01:20:57 +0100;borg mount: support hardlinks correctly, add tests
previous commit did not yet support hardlinks correctly, if the
hardlink master was excluded somehow.

added some tests for this, also refactored related tests slightly.

==

src/borg/fuse.py
src/borg/testsuite/archiver.py
==================
77df1cf;Thomas Waldmann;2017-11-07 17:45:22 +0100;borg mount: support exclusion group options and paths, fixes #2138
borg mount [options] repo_or_archive mountpoint path [paths...]

paths: you can just give some "root paths" (like for borg extract) to
only partially populate the FUSE filesystem.

Similar for these exclusion group options:
--exclude
--exclude-from
--pattern
--patterns-from
--strip-components

==

src/borg/archiver.py
src/borg/fuse.py
==================
759c8f7;Milkey Mouse;2017-11-20 14:18:37 -0800;Mention break-lock in checkpointing FAQ entry (#3340)
Mention break-lock in checkpointing FAQ entry, fixes #3328
==

docs/faq.rst
==================
8e82afe;TW;2017-11-20 14:31:45 +0100;Merge pull request #3336 from aidantwoods/fix/repo-replay-message
Highlight that information is obtained from security dir
==
==================
21a553b;Aidan Woods;2017-11-20 00:58:53 +0000;Highlight that information is obtained from security dir (deleting the cache will not bypass this error in the event the user knows this is a legitimate repo).

==

src/borg/cache.py
==================
22ae15f;TW;2017-11-18 21:01:31 +0100;Merge pull request #3327 from anarcat/faq-remove
add FAQ about removing old files and policies
==
==================
7cb36a2;Milkey Mouse;2017-11-18 11:57:39 -0800;Document sshfs rename workaround (fixes #3315) (#3325)
Document sshfs rename workaround, fixes #3315
==

docs/faq.rst
==================
1a2906a;Antoine Beaupré;2017-11-18 09:08:37 -0500;add FAQ about removing old files and policies
This has been asked twice already this year:

https://mail.python.org/pipermail/borgbackup/2017q3/000796.html
https://mail.python.org/pipermail/borgbackup/2017q4/000891.html

... and I was asked again privately today, so this qualifies as FAQ to
me.

==

docs/faq.rst
==================
72232a9;TW;2017-11-14 18:40:53 +0100;Merge pull request #3319 from ThomasWaldmann/crc32-unaligned
crc32: deal with unaligned buffer, tests, fixes #3317
==
==================
f9cd6f7;Thomas Waldmann;2017-11-13 16:47:03 +0100;crc32: deal with unaligned buffer, tests, fixes #3317
fixing only the (generic) slice-by-8 crc32 implementation,
it is assumed that CPUs supporting CLMUL can also efficiently
and correctly deal with unaligned accesses.

slice-by-8 is used e.g. on ARM cpus and they might not (efficiently)
support unaligned memory access, leading to bus errors or low
performance.

==

src/borg/algorithms/crc32_slice_by_8.c
src/borg/testsuite/checksums.py
==================
b3c11de;TW;2017-11-14 00:29:24 +0100;Merge pull request #3318 from milkey-mouse/borgfs-formatting-test
Check borgfs rst formatting in tests
==
==================
b0141c1;Sam H;2017-11-13 08:55:10 -0500;include item birthtime in archive (where available) (#3313)
include item birthtime in archive, fixes #3272

* use `safe_ns` when reading birthtime into attributes
* proper order for `birthtime` in `ITEM_KEYS` list
* use `bigint` wrapper for consistency
* Add tests to verify that birthtime is normally preserved, but not preserved when `--nobirthtime` is passed to `borg create`.

==

src/borg/archive.py
src/borg/archiver.py
src/borg/constants.py
src/borg/item.pyx
src/borg/testsuite/__init__.py
src/borg/testsuite/archiver.py
==================
9d1c2a6;Milkey Mouse;2017-11-12 18:36:06 -0800;Check borgfs man formatting in tests
I only realized after the first PR was merged that the code used for
finding which man pages to generate was duplicated in the testsuite
(since setup.py can't import from the installed module and vice versa.)
These are essentially the same changes as made to setup.py in #3290.

==

src/borg/testsuite/archiver.py
==================
b8dece0;TW;2017-11-12 16:41:54 +0100;Merge pull request #3290 from milkey-mouse/borgfs-man
Generate usage & man page for borgfs
==
==================
64fb1c8;TW;2017-11-12 12:37:26 +0100;Merge pull request #3314 from scarytom/fewer-not-less
Correct usage of "fewer" in place of "less"
==
==================
c6591a7;Tom Denley;2017-11-11 11:21:45 +0000;Correct usage of "fewer" in place of "less"

==

docs/changes.rst
docs/faq.rst
docs/internals/data-structures.rst
==================
46d0f3e;TW;2017-11-10 21:32:31 +0100;Merge pull request #3285 from olesalscheider/libressl
Fix build with LibreSSL
==
==================
b0d6803;Milkey Mouse;2017-11-09 20:36:39 -0800;Add instructions for zerofree

==

docs/faq.rst
==================
2b254ab;Milkey Mouse;2017-11-05 20:42:44 -0800;Add instructions for ntfsclone (fixes #81)

==

docs/faq.rst
==================
17d5c79;Milkey Mouse;2017-11-05 14:46:25 -0800;Generate man page for borgfs (fixes #3216)

==

docs/usage/borgfs.rst
setup.py
==================
c0fa721;Milkey Mouse;2017-11-10 10:24:08 -0800;Clarify encryption of key for borg key export (#3297)
clarify / fix docs for borg key export, fixes #3296
==

src/borg/archiver.py
==================
7b485c2;Milkey Mouse;2017-11-10 08:44:34 -0800;Clarify create --stats duration vs. wall time (fixes #3301) (#3303)
clarify create --stats duration vs. wall time, fixes #3301
==

docs/faq.rst
==================
cffac7e;Milkey Mouse;2017-11-10 05:20:10 -0800;Show an error message when --dry-run & --stats are used simultaneously (#3305)
show an error when --dry-run & --stats are both used, fixes #3298
==

src/borg/archiver.py
==================
726dbdf;TW;2017-11-06 10:46:55 +0100;Merge pull request #3293 from ThomasWaldmann/release-checklist
update release checklist about security fixes
==
==================
818b619;Thomas Waldmann;2017-11-06 10:38:04 +0100;update release checklist about security fixes

==

docs/development.rst
==================
6f2bc44;Milkey Mouse;2017-11-05 12:21:08 -0800;Don't show sub-command in borgfs help (fixes #3287)

==

src/borg/archiver.py
==================
febb7ff;TW;2017-11-05 22:18:41 +0100;Merge pull request #3288 from ThomasWaldmann/doc-updates2
Doc updates 2
==
==================
915b9ae;TW;2017-11-05 22:16:26 +0100;Merge pull request #3286 from ThomasWaldmann/doc-updates
doc updates
==
==================
e7fd1ff;Thomas Waldmann;2017-11-05 21:35:58 +0100;docs: more than 23 is not supported for CHUNK_MAX_EXP, fixes #3115

==

docs/misc/create_chunker-params.txt
==================
7ddf7c4;Thomas Waldmann;2017-11-05 20:48:49 +0100;docs: borg does not respect nodump flag by default any more

==

src/borg/archiver.py
==================
fe746fa;Thomas Waldmann;2017-11-05 20:06:23 +0100;clarify same-filesystem requirement for borg upgrade, fixes #2083

==

src/borg/archiver.py
==================
61d6c58;Thomas Waldmann;2017-11-05 19:24:49 +0100;update / rephrase cygwin / WSL status, fixes #3174

==

README.rst
docs/installation.rst
==================
dc68e8d;Thomas Waldmann;2017-11-05 19:13:15 +0100;improve docs about --stats, fixes #3260

==

src/borg/archiver.py
==================
cb3b38e;Niels Ole Salscheider;2017-11-05 16:29:37 +0100;Fix build with LibreSSL

==

src/borg/crypto/_crypto_helpers.c
src/borg/crypto/_crypto_helpers.h
==================
410770d;TW;2017-11-05 02:40:25 +0100;Merge pull request #3282 from ThomasWaldmann/fix-checkpoint-stats
stats: do not count data volume twice when checkpointing, fixes #3224
==
==================
c90a39e;TW;2017-11-05 00:57:53 +0100;Merge pull request #3252 from ThomasWaldmann/fix-broken-pipe-handling
borg list: fix broken pipe handling, fixes #3245
==
==================
66cd1cd;Thomas Waldmann;2017-11-05 00:48:17 +0100;stats: do not count data volume twice when checkpointing, fixes #3224

==

src/borg/archive.py
==================
4cbcd98;TW;2017-11-04 23:36:30 +0100;Merge pull request #3281 from SanskritFritz/master
Deleted options from #3226
==
==================
afab6b4;SanskritFritz;2017-11-04 23:25:24 +0100;Deleted options from #3226

==

scripts/shell_completions/bash/borg
scripts/shell_completions/fish/borg.fish
==================
a25b2ac;TW;2017-11-04 23:15:30 +0100;Merge pull request #3278 from ThomasWaldmann/fix-diff-options
borg diff: remove tag-file options, fixes #3226
==
==================
726ef11;Thomas Waldmann;2017-11-03 16:51:12 +0100;borg list: fix broken pipe handling, fixes #3245
always use sys.stdout.write as in main() we have replaced that with a
handler that deals with BrokenPipe exceptions.

all the encode / decode dance was just to remove surrogates,
but that is not needed as format_item already does remove surrogates.

==

src/borg/archiver.py
==================
67f6aaa;Thomas Waldmann;2017-11-04 22:46:28 +0100;borg diff: remove tag-file options, fixes #3226
they are not used for borg diff.

==

src/borg/archiver.py
==================
9ebff91;TW;2017-11-04 21:44:11 +0100;Merge pull request #3267 from ThomasWaldmann/fix-list-options
borg list: remove tag-file options, fixes #3226
==
==================
41ccd3d;TW;2017-11-04 20:10:34 +0100;Merge pull request #3266 from ThomasWaldmann/set-bsdflags-last
set bsdflags last (include immutable flag), fixes #3263
==
==================
fcef52a;TW;2017-11-04 20:07:24 +0100;Merge pull request #3230 from ThomasWaldmann/chunks-healthy-recreate-fix
recreate / chunks_healthy fixes
==
==================
7aafcc5;Thomas Waldmann;2017-10-29 14:49:42 +0100;recreate: move chunks_healthy when excluding hardlink master, fixes #3228

==

src/borg/archive.py
==================
90186ad;Thomas Waldmann;2017-10-29 11:25:11 +0100;get rid of already existing invalid chunks_healthy metadata, see #3218

==

src/borg/archive.py
==================
7211bb2;Thomas Waldmann;2017-10-29 10:53:12 +0100;get rid of chunks_healthy when rechunking, fixes #3218

==

src/borg/archive.py
src/borg/archiver.py
==================
1fb154b;TW;2017-11-04 18:01:23 +0100;Merge pull request #3234 from ThomasWaldmann/this-archive-stats
borg create: fix stats
==
==================
d1d5590;TW;2017-11-04 16:59:17 +0100;Merge pull request #3269 from mrkmg/shell-completion-zsh-1.1.1
Added ZSH Shell Completion Script
==
==================
985d6c5;TW;2017-11-04 16:56:17 +0100;Merge pull request #3268 from SanskritFritz/master
Add bash and fish shell auto-completions.
==
==================
0e67f1b;Kevin;2017-11-04 11:54:21 -0400;Added ZSH Shell Completion Script
Added directly from upstream source at https://github.com/mrkmg/borgbackup-zsh-completion
==

scripts/shell_completions/zsh/_borg
==================
702afa9;Thomas Waldmann;2017-11-04 15:59:33 +0100;borg list: remove tag-file options, fixes #3226
they are not used for borg list.

==

src/borg/archiver.py
==================
d50f0ec;SanskritFritz;2017-11-04 15:56:53 +0100;Added bash and fish shell auto-completions.

==

scripts/shell_completions/bash/borg
scripts/shell_completions/fish/borg.fish
==================
2c6f963;Thomas Waldmann;2017-11-04 15:18:55 +0100;set bsdflags last (include immutable flag), fixes #3263

==

src/borg/archive.py
==================
2e15c4d;TW;2017-11-04 13:44:11 +0100;Merge pull request #3246 from ThomasWaldmann/fix-old-server-hack
remove evil trailing comma, fixes #3244
==
==================
427e2ca;Thomas Waldmann;2017-10-29 14:17:44 +0100;borg create: fix stats
master branch only (not present in 1.1-maint):

stats were computed at 2 different places, but the summing up was missing.

==

src/borg/archive.py
src/borg/archiver.py
==================
117d30d;Thomas Waldmann;2017-11-02 16:03:55 +0100;remove evil trailing comma, fixes #3244
value type of compatMap is a tuple of strings.

due to the trailing comma, this was a 1-tuple of a tuple of strings.

==

src/borg/remote.py
==================
4a58310;TW;2017-11-01 13:40:17 +0100;Merge pull request #3235 from NiklasMM/feat/2886_prune-show-which-rule-keeps-archive
prune: Show which rule was applied to keep archive
==
==================
14782a8;Niklas Meinzer;2017-10-29 16:12:16 +0100;prune: Show which rule was applied to keep archive
Prune now shows for each kept archive:
 * Which rule is responsible for keeping this archive
 * How many archived have been kept by this rule so far

Ref #2886

==

src/borg/archiver.py
src/borg/helpers/misc.py
src/borg/testsuite/archiver.py
src/borg/testsuite/helpers.py
==================
b148a36;Simon Frei;2017-11-01 03:02:25 +0100;fuse: Separate creation of filesystem from implementation of llfuse funcs (#3042)
fuse: Separate creation of filesystem from implementation of llfuse funcs
==

src/borg/fuse.py
==================
ddecd4b;TW;2017-11-01 02:41:02 +0100;Merge pull request #3182 from TBurchfield/master
Removal of |project_name|.
==
==================
c640e38;TW;2017-10-30 06:49:43 +0100;Merge pull request #3236 from narendravardi/borg_config_dir_documentation
Added documentation for BORG_CONFIG_DIR
==
==================
764a62f;narendravardi;2017-10-29 21:52:33 +0530;Added documentation for BORG_CONFIG_DIR

==

docs/usage_general.rst.inc
==================
2b79aad;TW;2017-10-29 11:44:39 +0100;Merge pull request #3231 from ThomasWaldmann/flake8-fix
flake8: add some ignores
==
==================
bb1c7a7;Thomas Waldmann;2017-10-29 11:39:13 +0100;flake8: add some ignores

==

setup.cfg
==================
926b1c6;TW;2017-10-28 13:31:47 +0200;Merge pull request #3212 from ThomasWaldmann/stat-after-match
don't do stat() when not recursing into excluded dir, fixes #3209
==
==================
c0b9058;TW;2017-10-27 11:34:29 +0200;Merge pull request #3217 from narendravardi/add_borg_config_dir
add BORG_CONFIG_DIR env, fixes #3083
==
==================
5b1a170;TW;2017-10-26 07:29:57 +0200;Merge pull request #3219 from milkey-mouse/keyfile-docs
Clarify using a blank passphrase in keyfile mode
==
==================
87a9952;Milkey Mouse;2017-10-25 19:42:02 -0700;Clarify using a blank passphrase in keyfile mode

==

docs/faq.rst
==================
a3f1e6e;Narendra Vardi;2017-10-25 23:07:45 +0530;added unittest for get_config_dir function

==

src/borg/testsuite/helpers.py
==================
56fed4f;Narendra Vardi;2017-10-16 00:07:51 +0530;add BORG_CONFIG_DIR env (#3083)

==

src/borg/helpers/fs.py
==================
36f2a4e;Thomas Waldmann;2017-10-24 02:38:03 +0200;mention "!" (exclude-norecurse) type in patterns help

==

src/borg/archiver.py
==================
0c410e8;Thomas Waldmann;2017-10-24 01:25:53 +0200;don't do stat() when not recursing into excluded dir, fixes #3209
also: fix exception handling for the stat() calls

just moving all these lines into the "try"-block below (like it was in 1.0).

==

src/borg/archiver.py
==================
46c071c;TW;2017-10-23 14:33:18 +0200;Merge pull request #3208 from ThomasWaldmann/fix-3205-master
arg parsing: fix fallback function, refactor, fixes #3205
==
==================
ae91aff;Thomas Waldmann;2017-10-22 17:34:02 +0200;arg parsing: fix fallback function, refactor, fixes #3205
This is a fixup for #3155, which was broken on at least python <= 3.4.2.

Also clarify when to use which *func in set_defaults.

(cherry picked from commit 5ce4fa970413e3cedbc36e2f728863eaa69dad21)

==

src/borg/archiver.py
==================
152bb27;TW;2017-10-22 00:45:35 +0200;Merge pull request #3193 from ThomasWaldmann/fix-4args-open
fix server-side IndexError for 4-arg open() of old clients, fixes #3192
==
==================
1d6ed50;TW;2017-10-20 23:41:04 +0200;Merge pull request #3198 from ThomasWaldmann/keyfile-abspath
fix crash with relative BORG_KEY_FILE, fixes #3197
==
==================
24fefbb;TW;2017-10-20 21:16:51 +0200;Merge pull request #3190 from ThomasWaldmann/show-excluded-dirs
show excluded dir with "x" for tagged dirs / caches, fixes #3189
==
==================
7136e2c;Thomas Waldmann;2017-10-20 21:13:11 +0200;fix crash with relative BORG_KEY_FILE, fixes #3197

==

src/borg/crypto/key.py
==================
c91509e;TW;2017-10-20 18:46:10 +0200;Merge pull request #3194 from Baughn/patch-1
Add Nix/NixOS install command
==
==================
98443f1;Svein Ove Aas;2017-10-20 17:08:10 +0100;Add Nix/NixOS install command

==

docs/installation.rst
==================
dbcc870;Thomas Waldmann;2017-10-20 16:47:32 +0200;fix server-side IndexError for 4-arg open() of old clients, fixes #3192
borg 1.1(.0) server didn't support the 4 argument open() calls made
by < 1.0.7 clients.

==

src/borg/remote.py
==================
93de42b;Thomas Waldmann;2017-10-20 04:54:09 +0200;show excluded dir with "x" for tagged dirs / caches, fixes #3189

==

src/borg/archiver.py
==================
38dd1f1;TW;2017-10-17 21:30:53 +0200;Merge pull request #3181 from ThomasWaldmann/hardlinked-symlink-warning
remove hardlinked symlink warning, update docs
==
==================
8d830d0;8bit;2017-10-17 11:50:55 -0500;Removed all |project_name | instances, replaced with Borg

==

docs/development.rst
docs/faq.rst
docs/global.rst.inc
docs/installation.rst
docs/internals/data-structures.rst
docs/quickstart.rst
docs/support.rst
==================
c386575;TW;2017-10-17 18:49:57 +0200;Merge pull request #3164 from ThomasWaldmann/no-bsdflags
implement --nobsdflags and --exclude-nodump
==
==================
10adadf;Thomas Waldmann;2017-10-14 05:18:21 +0200;implement --nobsdflags and --exclude-nodump, fixes #3160
do no read/archive bsdflags: borg create --nobsdflags ...
do not extract/set bsdflags: borg extract --nobsdflags ...

use cases:

- fs shows wrong / random bsdflags (bug in filesystem)
- fs does not support bsdflags anyway
- already archived bsdflags are wrong / unwanted
- borg shows any sort of unwanted effect due to get_flags, esp. on Linux

the nodump flag ("do not backup this file") is not honoured any more by
default because this functionality (esp. if it happened by error or
unexpected) was rather confusing and unexplainable at first to users.

if you want that "do not backup NODUMP-flagged files" behaviour, use:
borg create --exclude-nodump ...

==

src/borg/archive.py
src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
e674822;Thomas Waldmann;2017-10-17 06:39:31 +0200;remove hardlinked symlinks warning, update docs, fixes #3175
the warning was annoying for people with a lot of such items and
they can not do anything about it anyway.

thus, just document this as a limitation.

==

docs/faq.rst
src/borg/archive.py
==================
9340688;8bit;2017-10-15 17:52:47 -0500;Merge remote-tracking branch 'upstream/master'

==
==================
ac0ad9a;TW;2017-10-15 01:24:36 +0200;Merge pull request #3167 from ThomasWaldmann/security-use-savefile
cache: use SaveFile for more safety, fixes #3158
==
==================
0190abf;Thomas Waldmann;2017-10-14 21:57:58 +0200;cache: use SaveFile for more safety, fixes #3158
Looks like under unfortunate circumstances, these files could become
0 byte files (see #3158). SaveFile usage should prevent that.

==

src/borg/cache.py
==================
6096ff9;TW;2017-10-14 19:52:02 +0200;Merge pull request #3163 from ThomasWaldmann/fix-recreate-part-size
borg recreate: correctly compute part file sizes, fixes #3157
==
==================
9d6b125;Thomas Waldmann;2017-10-14 04:24:26 +0200;borg recreate: correctly compute part file sizes, fixes #3157
when doing in-file checkpointing, borg creates *.borg_part_N files.
complete_file = part_1 + part_2 + ... + part_N

the source item for recreate already has a precomputed (total) size
member, thus we must force recomputation from the (partial) chunks
list to correct the size to be the part's size only.

borg create avoided this problem by computing the size member after
writing all the parts. this is now not required any more.

the bug is mostly cosmetic, borg check will complain, borg extract on
a part file would also complain. but all the complaints only refer to
the wrong metadata of the part files, the part files' contents are
correct.

usually you will never extract or look at part files, but only deal
with the full file, which will be completely valid, all metadata and
content.

you can get rid of the archives with these cosmetic errors by running
borg recreate on them with a fixed borg version. the old part files
will get dropped (because they are usually ignored) and any new part
file created due to checkpointing will be correct.

==

src/borg/archive.py
==================
8909ffc;TW;2017-10-13 23:54:03 +0200;Merge pull request #3137 from ThomasWaldmann/dont-open-special
bsdflags support: skip blk/chr/lnk file type, fixes #3130
==
==================
a6ee4e9;Thomas Waldmann;2017-10-11 03:32:33 +0200;bsdflags support: do not open BLK/CHR/LNK files, fixes #3130
opening a device file for a non-existing device can be very slow.
symlinks will make the open() call fail as it is using O_NOFOLLOW.

also: lstat -> stat(..., follow_symlinks=False) like everywhere else.

==

src/borg/platform/linux.pyx
==================
19ed725;TW;2017-10-13 20:16:30 +0200;move files-cache related options to borg create, fixes #3146 (#3147)
move --no-files-cache from common to borg create options, fixes #3146

for borg prune, just use do_files=False (it only needs the chunks
cache, not the files cache).
==

src/borg/archiver.py
==================
de175a7;TW;2017-10-12 20:32:35 +0200;Merge pull request #3148 from ThomasWaldmann/maincommand-help
don't crash if only a global option is given, show help, fixes #3142
==
==================
5709e73;TW;2017-10-12 20:28:08 +0200;Merge pull request #3145 from ThomasWaldmann/no-brew-update
don't brew update, hopefully fixes #2532
==
==================
f554f74;TW;2017-10-12 17:07:43 +0200;Merge pull request #3150 from ThomasWaldmann/readme-encryption-options
readme: -e is required in borg 1.1
==
==================
c8441b5;Thomas Waldmann;2017-10-12 16:14:32 +0200;readme: -e is required in borg 1.1

==

README.rst
==================
ed1a8b5;Thomas Waldmann;2017-10-12 06:03:12 +0200;add example showing --show-version --show-rc

==

docs/usage/general.rst
==================
3be328e;Thomas Waldmann;2017-10-12 05:40:52 +0200;don't crash if only a global option is given, show help, fixes #3142

==

src/borg/archiver.py
==================
6049a07;Thomas Waldmann;2017-10-12 03:37:48 +0200;don't brew update, hopefully fixes #2532

==

.travis/install.sh
==================
c8bf9db;TW;2017-10-11 01:08:31 +0200;Merge pull request #3122 from ThomasWaldmann/logging-config-fix
logging with fileConfig: set json attr on "borg" logger, fixes #3114
==
==================
13a4439;TW;2017-10-11 01:01:17 +0200;Merge pull request #3120 from ThomasWaldmann/fix-nonlocal-path-detection
fix detection of non-local path, fixes #3108
==
==================
0bddbb3;TW;2017-10-11 00:55:22 +0200;Merge pull request #3119 from ThomasWaldmann/no-time-end
recreate: don't crash on attic archives w/o time_end, fixes #3109
==
==================
8455ab3;TW;2017-10-11 00:32:37 +0200;Merge pull request #3121 from ThomasWaldmann/support-no-hardlinks
catch ENOTSUP for os.link, fixes #3107
==
==================
17cfc2c;TW;2017-10-11 00:11:30 +0200;Merge pull request #3118 from ThomasWaldmann/fallback-no-truncate
don't crash in first part of truncate_and_unlink, fixes #3117
==
==================
afba813;Thomas Waldmann;2017-10-10 02:18:13 +0200;logging with fileConfig: set json attr on "borg" logger, fixes #3114

==

src/borg/logger.py
==================
203a5c8;Thomas Waldmann;2017-10-10 01:57:58 +0200;catch ENOTSUP for os.link, fixes #3107

==

src/borg/repository.py
==================
60e9249;Thomas Waldmann;2017-10-10 01:36:44 +0200;fix detection of non-local path, fixes #3108
filenames like ..foobar are valid, so, to detect stuff in upper dirs,
we need to include the path separator and check if it starts with '../'.

==

src/borg/archive.py
==================
7a689b1;Thomas Waldmann;2017-10-10 00:51:13 +0200;don't crash in first part of truncate_and_unlink, fixes #3117

==

src/borg/helpers/fs.py
==================
9d3daeb;Thomas Waldmann;2017-10-10 01:17:56 +0200;recreate: don't crash on attic archives w/o time_end, fixes #3109

==

src/borg/archive.py
==================
b853ad8;TW;2017-10-09 14:48:19 +0200;Merge pull request #3112 from FabioPedretti/master
use --format rather than --list-format in examples, the latter is deprecated
==
==================
bc42f58;Fabio Pedretti;2017-10-09 14:09:43 +0200;use --format rather than --list-format in examples, the latter is deprecated

==

docs/usage/list.rst
==================
ebd811b;TW;2017-10-09 04:15:06 +0200;Merge pull request #3104 from enkore/issue/3103
init: fix wrong encryption choices in command line parser
==
==================
b00179f;Marian Beermann;2017-10-08 12:28:05 +0200;init: fix wrong encryption choices in command line parser

==

src/borg/archiver.py
src/borg/crypto/key.py
==================
5436a25;TW;2017-10-07 13:52:38 +0200;Merge pull request #3085 from ThomasWaldmann/compressed-not-larger
auto compression: make sure expensive compression is actually better
==
==================
c3ba00c;TW;2017-10-07 13:49:52 +0200;Merge pull request #3095 from ThomasWaldmann/manpage-issue-role
implement simple "issue" role for manpage generation, fixes #3075
==
==================
37347e6;TW;2017-10-07 13:48:43 +0200;Merge pull request #3094 from ThomasWaldmann/fix-man-typo
manpage: fix typos, update homepage
==
==================
bf3f8e5;Thomas Waldmann;2017-10-07 04:11:29 +0200;implement simple "issue" role for manpage generation, fixes #3075

==

setup.py
==================
62e0f7a;Thomas Waldmann;2017-10-07 03:34:03 +0200;manpage: fix typos, update homepage

==

docs/man_intro.rst
==================
0f0cf08;TW;2017-10-06 20:30:03 +0200;Merge pull request #3087 from ThomasWaldmann/faq-eta
faq: we do not implement futile attempts of ETA / progress displays
==
==================
902581a;TW;2017-10-06 20:25:41 +0200;Merge pull request #3090 from ThomasWaldmann/fuse-version-comments
add some comments about recent fuse versions to setup.py
==
==================
8cccd63;TW;2017-10-06 20:24:24 +0200;Merge pull request #3089 from ThomasWaldmann/py35-requirement
check for py 3.5 minimum requirement in setup.py
==
==================
ce956fa;Thomas Waldmann;2017-10-06 20:01:17 +0200;add some comments about recent fuse versions to setup.py

==

setup.py
==================
be9fb34;Thomas Waldmann;2017-10-06 19:38:28 +0200;check for py 3.5 minimum requirement in setup.py
we do not test on 3.4 any more and have dropped support for it.
so we better enforce it in setup.py also.

==

setup.py
==================
9e81a76;Nils Steinger;2017-10-06 02:09:17 +0200;List help topics when invalid topic is requested

==

src/borg/archiver.py
==================
fe08437;Thomas Waldmann;2017-10-05 22:19:39 +0200;faq: we do not implement futile attempts of ETA / progress displays

==

docs/faq.rst
==================
21601d5;Timothy Burchfield;2017-10-03 17:18:33 -0400;Quickstart guide minor corrections (#3084)
quickstart: minor grammar correction and added consistency with substitution of 'Borg'
==

docs/quickstart.rst
==================
8db0c77;8bit;2017-10-03 16:32:58 -0400;The user frees space, not borg

==

docs/quickstart.rst
==================
011e0fd;Thomas Waldmann;2017-10-03 21:11:43 +0200;auto compression: make sure expensive compression is actually better
if it is not significantly better compressed, we just store lz4
compressed data (which we already have computed anyway), because
that at least decompressed super fast.

==

src/borg/compress.pyx
src/borg/testsuite/compress.py
==================
821baf0;8bit;2017-10-03 13:21:28 -0400;Minor grammar correction and added consistency with subsistitution of 'Borg'

==

docs/quickstart.rst
==================
35c042b;TW;2017-10-01 20:48:54 +0200;Merge pull request #3078 from ThomasWaldmann/fix-subprocess-env
fix LDLP restoration for subprocesses, fixes #3077
==
==================
b506977;Thomas Waldmann;2017-10-01 19:17:23 +0200;fix LDLP restoration for subprocesses, fixes #3077

==

src/borg/helpers/process.py
==================
08e2053;TW;2017-10-01 01:15:13 +0200;Merge pull request #3024 from ThomasWaldmann/files-cache-ctime
implement files cache mode control, fixes #911
==
==================
5e2de8b;Thomas Waldmann;2017-09-11 02:54:52 +0200;implement files cache mode control, fixes #911
You can now control the files cache mode using this option:

--files-cache={ctime,mtime,size,inode,rechunk,disabled}*

(only some combinations are supported)

Previously, only these modes were supported:
- mtime,size,inode (default of borg < 1.1.0rc4)
- mtime,size (by using --ignore-inode)
- disabled (by using --no-files-cache)

Now, you additionally get:
- ctime alternatively to mtime (more safe), e.g.:
  ctime,size,inode (this is the new default of borg >= 1.1.0rc4)
- rechunk (consider all files as changed, rechunk them)

Deprecated:
- --ignore-inodes (use modes without "inode")
- --no-files-cache (use "disabled" mode)

The tests needed some changes:
- previously, we use os.utime() to set a files mtime (atime) to specific
  values, but that does not work for ctime.
- now use time.sleep() to create the "latest file" that usually does
  not end up in the files cache (see FAQ)

==

docs/internals/data-structures.rst
src/borg/archive.py
src/borg/archiver.py
src/borg/cache.py
src/borg/constants.py
src/borg/helpers/parseformat.py
src/borg/testsuite/archiver.py
==================
dcf5e77;TW;2017-09-29 02:16:59 +0200;Merge pull request #3069 from ThomasWaldmann/exclude-cython027
exclude Cython 0.27(.0) in requirements, fixes #3066
==
==================
7e94d42;Thomas Waldmann;2017-09-29 01:36:22 +0200;exclude Cython 0.27(.0) in requirements, fixes #3066
https://github.com/cython/cython/issues/1880

==

requirements.d/development.txt
==================
e8e2048;TW;2017-09-26 22:03:26 +0200;Merge pull request #3058 from ThomasWaldmann/fix-partial-json
remote: deal with partial lines, fixes #2637
==
==================
ea1dc4d;TW;2017-09-25 21:22:48 +0200;Merge pull request #3061 from Self-Perfection/patch-1
Simplified rate limiting wrapper in FAQ
==
==================
f7ec13e;Alexander Meshcheryakov;2017-09-25 15:43:07 +0300;Simplified rate limiting wrapper in FAQ
Exporting $RATE as environment variable is not need in this case.

And example does not use any bash specific features.
It should use default system shell instead.
==

docs/faq.rst
==================
7f68283;TW;2017-09-25 05:27:29 +0200;Merge pull request #3051 from ThomasWaldmann/fix-spawn-passcommand
fix subprocess environments
==
==================
a57e23f;Thomas Waldmann;2017-09-23 23:27:14 +0200;use prepared env for xattr module's fakeroot version check

==

src/borg/xattr.py
==================
cf59f65;Thomas Waldmann;2017-09-23 22:54:52 +0200;use prepared env for borg export-tar --tar-filter subprocess

==

src/borg/archiver.py
==================
b88da10;Thomas Waldmann;2017-09-23 22:38:26 +0200;use prepared env for borg umount

==

src/borg/helpers/fs.py
==================
6da5bf4;Thomas Waldmann;2017-09-23 22:35:10 +0200;use prepared env for borg with-lock

==

src/borg/archiver.py
==================
6a6fd31;Thomas Waldmann;2017-09-23 20:04:47 +0200;use prepared env for calling BORG_PASSCOMMAND, fixes #3050

==

src/borg/crypto/key.py
==================
ba941b0;Thomas Waldmann;2017-09-23 19:04:46 +0200;refactor/fix subprocess env preparation
refactor: make a generally usable function

fix: remove support code for ancient pyinstaller

the "else" branch was needed for pyinstaller < 20160820 because it did
not have the LD_LIBRARY_PATH_ORIG env var, so we just killed LDLP
because we had no better way.

but with borg tests running under fakeroot, this is troublesome as
fakeroot uses this also and can't find its library without it.

so, just remove it, we do not need to support old pyinstaller.

==

src/borg/helpers/process.py
src/borg/remote.py
==================
8646216;Thomas Waldmann;2017-09-25 01:15:13 +0200;remote: deal with partial lines, fixes #2637
due to block buffering (in borg, pipes, sshd, ssh) partial lines might
be received. for plain text, this causes cosmetic issues, for json it
causes tracebacks due to parse errors.

the code now makes sure handle_remote_line() only gets called with a
complete line (which is terminated by any universal newline char, a
pure \r seems to be needed for remote progress displays).

it also fixes a yet undiscovered partial utf-8-sequence decoding issue
that might occur for the same reason.

==

src/borg/remote.py
src/borg/testsuite/repository.py
==================
d719c1e;TW;2017-09-25 00:50:36 +0200;Merge pull request #3037 from ThomasWaldmann/remove-110b-logger
remove client_supports_log_v3 flag, fixes #3033
==
==================
ed36839;TW;2017-09-24 22:16:32 +0200;Merge pull request #3057 from ThomasWaldmann/pyi-use-py36
use Python 3.6.2 for the pyinstaller binary
==
==================
2ee0683;Thomas Waldmann;2017-09-24 22:15:07 +0200;use Python 3.6.2 for the pyinstaller binary

==

Vagrantfile
==================
ad2bdef;TW;2017-09-24 22:05:00 +0200;Merge pull request #3056 from ThomasWaldmann/pyi33-get-from-fixes-branch
pyinstaller: use v3.3, fetch from v3.3-fixed branch
==
==================
eaa1290;Thomas Waldmann;2017-09-24 22:01:33 +0200;pyinstaller: use v3.3, fetch from v3.3-fixed branch

==

Vagrantfile
==================
bb5be2b;TW;2017-09-23 21:27:01 +0200;Merge pull request #3047 from ThomasWaldmann/doc-updates
doc updates
==
==================
112bf43;Thomas Waldmann;2017-09-22 23:36:48 +0200;docs: twitter account @borgbackup, fixes #2948

==

docs/development.rst
docs/support.rst
==================
d8766df;Thomas Waldmann;2017-09-22 23:08:33 +0200;docs: add note about metadata dedup and --no[ac]time, fixes #2518

==

docs/usage/notes.rst
==================
713be76;Thomas Waldmann;2017-09-22 22:53:55 +0200;docs: change-passphrase only changes the passphrase, fixes #2990

==

src/borg/archiver.py
==================
83be697;TW;2017-09-22 03:20:39 +0200;Merge pull request #3043 from ThomasWaldmann/vagrant-updates
use python 3.5.4 to build the binaries
==
==================
538855e;TW;2017-09-22 02:55:43 +0200;Merge pull request #3038 from ThomasWaldmann/update-create-docs
more about compression in borg create docs
==
==================
507203a;Thomas Waldmann;2017-09-22 02:22:39 +0200;use python 3.5.4 to build the binaries

==

Vagrantfile
==================
9e9398e;TW;2017-09-21 19:14:20 +0200;Merge pull request #3032 from ThomasWaldmann/stderr-flush
flush json mode progress stderr output
==
==================
3f16d91;Thomas Waldmann;2017-09-21 14:00:50 +0200;docs: add auto compression example to borg create examples

==

docs/usage/create.rst
==================
0ec6c92;Thomas Waldmann;2017-09-21 04:28:35 +0200;docs: add compressor names to be more clear

==

docs/usage/create.rst
==================
c885285;Thomas Waldmann;2017-09-21 04:26:52 +0200;fix docs: --compression lz4 is the default now, fixes #3034

==

docs/usage/create.rst
==================
54c5049;Thomas Waldmann;2017-09-21 04:11:59 +0200;remove client_supports_log_v3 flag, fixes #3033
the client_supports_log_v3 flag was added to differentiate 1.1.0 beta3
to beta5 clients (which did not support parsing json log format from
server) from >= 1.1.0beta6 clients (which support it).
for clients older than 1.1.0b3, no json log format will be negotiated
anyway.

by removing the client_supports_log_v3 flag support, we drop support for
clients using 1.1.0beta3..5.

thus, a client is now expected to either support old log format (like
borg 1.0.x) or new json format (like borg 1.1.0 >= beta6).

client     server comment
===========================================
any        0.29+  uses $LOG plain remote log format
any        1.0.x  uses $LOG plain remote log format
1.0.x      1.1.0  uses $LOG plain remote log format
1.1.0b1/b2 1.1.0  (uses $LOG plain remote log format)
1.1.0b3-b5 1.1.0  (malfunction)
1.1.0b6    1.1.0  (uses json remote log format)
1.1.0rc    1.1.0  uses json remote log format
1.1.x      1.1.0  uses json remote log format

(beta testing is over and betas are unsupported now)

Note: client_supports_log_v3 flag was added in changeset
      18a2902c9c0f4ebeeb458f72ed02ba29d1053169

==

src/borg/remote.py
==================
2b75b27;Thomas Waldmann;2017-09-18 04:42:30 +0200;flush json mode progress stderr output
if borg stderr is not connected to a tty, but to ssh (when using
borg client/server), sys.stderr is block buffered (tty: line buffered).

thus we better flush explicitly after emitting a line as the receiving
side can not handle partial json at the end of the block.

also, it might solve some delays, when output didn't arrive at
receiving side in time.

==

src/borg/helpers/progress.py
==================
7c5a9d8;enkore;2017-09-09 23:08:23 +0200;delete: support naming multiple archives (#3017)
delete: support naming multiple archives
==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
133e847;TW;2017-09-08 08:31:51 +0200;document utf-8 locale requirement for json mode, #2273 (#3009)

==

docs/internals/frontends.rst
==================
1e5599d;enkore;2017-09-07 21:43:35 +0200;Merge pull request #3011 from ThomasWaldmann/new-screencasts
show/link new screencasts in README, fixes #2936
==
==================
7c9561a;Thomas Waldmann;2017-09-07 19:15:53 +0200;show/link new screencasts in README, fixes #2936

==

README.rst
==================
67cb768;TW;2017-09-07 14:54:46 +0200;Merge pull request #2998 from ThomasWaldmann/fix-2994
fix .isoformat() issues
==
==================
928bde8;Thomas Waldmann;2017-09-05 06:13:47 +0200;get rid of datetime.isoformat to avoid bugs like #2994

==

src/borg/archive.py
src/borg/helpers/manifest.py
src/borg/repository.py
src/borg/testsuite/archiver.py
==================
2eab60f;enkore;2017-09-07 10:38:45 +0200;Merge pull request #3001 from ThomasWaldmann/close-segment
with-lock: close segment file before invoking subprocess
==
==================
0607474;enkore;2017-09-07 10:36:09 +0200;Merge pull request #3002 from ThomasWaldmann/fd-cache-invalidation
FD cache invalidation
==
==================
7122913;Thomas Waldmann;2017-09-06 05:42:22 +0200;repo cleanup/write: invalidate cached FDs

==

src/borg/repository.py
==================
4a4c888;Thomas Waldmann;2017-09-06 05:56:26 +0200;repo: add test case for uncommitted garbage segment files

==

src/borg/testsuite/repository.py
==================
573733b;Thomas Waldmann;2017-09-06 04:04:41 +0200;fixup: only works for local repos

==

src/borg/archiver.py
==================
b9dce0e;Thomas Waldmann;2017-09-06 03:49:45 +0200;with-lock: close segment file before invoking subprocess

==

src/borg/archiver.py
==================
7996a87;Thomas Waldmann;2017-09-05 05:51:00 +0200;use safe parse_timestamp to parse timestamps, fixes #2994
also: refactor so it is possible to get tz-unaware datetime
objects from parse_timestamp.

==

src/borg/helpers/manifest.py
src/borg/helpers/time.py
==================
eebb117;Thomas Waldmann;2017-09-05 05:02:44 +0200;use ISO_FORMAT* constants

==

src/borg/helpers/manifest.py
src/borg/helpers/parseformat.py
src/borg/helpers/time.py
==================
1cb158a;Thomas Waldmann;2017-09-05 04:44:38 +0200;move ISO_FORMAT to constants module
also: add ISO_FORMAT_NO_USECS

==

src/borg/constants.py
src/borg/testsuite/archiver.py
==================
9afec26;TW;2017-09-04 21:44:52 +0200;Merge pull request #2997 from ThomasWaldmann/cleanup-vagrant-1.2
vagrant: clean up shell profile init, user name (master)
==
==================
ebb4eae;Thomas Waldmann;2017-09-04 21:33:23 +0200;vagrant: clean up shell profile init, user name (master)
- deduplicated .bash_profile creation
- now we always have XDISTN=... and LANG=... (not just for pyenv)
- username is just given where needed ("ubuntu" vs "vagrant")
- override for cygwin not needed as init is not global any more

==

Vagrantfile
==================
436be10;enkore;2017-09-03 20:14:09 +0200;Merge pull request #2996 from mgee/improve-macos-faq-entry
Improve macOS faq entry
==
==================
e157328;Markus Engelbrecht;2017-09-03 20:04:28 +0200;Use correct casing for macOS

==

docs/faq.rst
==================
aadb9cd;Markus Engelbrecht;2017-09-03 20:03:11 +0200;Fix macOS keychain integration command

==

docs/faq.rst
==================
86c0b66;TW;2017-09-02 17:48:04 +0200;Merge pull request #2988 from ThomasWaldmann/recover-segments-memory-usage
recover_segment: use mmap(), fixes #2982
==
==================
4433078;enkore;2017-09-02 16:46:32 +0200;Merge pull request #2986 from ThomasWaldmann/cleanup-log
add debug logging for repository cleanup
==
==================
9fc4d00;Thomas Waldmann;2017-09-01 05:26:27 +0200;recover_segment: use mmap(), fixes #2982

==

src/borg/repository.py
==================
57f808e;Thomas Waldmann;2017-08-31 22:49:30 +0200;add debug logging for repository cleanup
so we can know whether it did a cleanup and if so,
which and how many segments were cleaned up.

==

src/borg/repository.py
==================
4a22dec;TW;2017-08-30 23:22:36 +0200;Merge pull request #2979 from enkore/issue/2975
test_detect_attic_repo: don't test mount
==
==================
a2ea6cf;enkore;2017-08-30 11:27:31 +0200;Merge pull request #2980 from enkore/issue/2976
keymanager: don't depend on optional readline module
==
==================
a6be34f;Marian Beermann;2017-08-28 10:16:49 +0200;test_detect_attic_repo: don't test mount
since mount is not always available and if it works for all the other
commands, then it is likely it works for mount as well.

==

src/borg/testsuite/archiver.py
==================
b8793d9;Marian Beermann;2017-08-28 10:15:38 +0200;keymanager: don't depend on optional readline module

==

src/borg/crypto/keymanager.py
==================
f7ed5d7;enkore;2017-08-25 04:45:22 +0200;Buffer: fix wrong thread-local storage use (#2951)
Buffer: delete support for multiple threads

Thread-local objects are a fairly complex footgun, so avoid them in
the first place. When a Compressor uses a Buffer (for example),
just create multiple Compressor instances for each thread, owned by
each thread. Minimize multiple ownership of objects across
threads if at all possible!

==

src/borg/helpers/datastruct.py
==================
95d2674;TW;2017-08-25 04:36:44 +0200;Merge pull request #2959 from ThomasWaldmann/fix-timestamp-option
borg create --timestamp: set start time, fixes #2957
==
==================
cab9c05;TW;2017-08-25 04:28:38 +0200;Merge pull request #2962 from enkore/f/travis-stop
travis: only short-circuit docs-only changes for pull requests
==
==================
920d974;Marian Beermann;2017-08-24 16:24:44 +0200;travis: only short-circuit docs-only changes for pull requests
if a branch build is stopped, then codecov will complain about
missing base branch coverage.

==

.travis.yml
==================
8a299ae;Thomas Waldmann;2017-08-24 04:07:37 +0200;borg create --timestamp: set start time, fixes #2957

==

src/borg/archive.py
==================
e9b892f;TW;2017-08-22 23:22:08 +0200;Merge pull request #2955 from enkore/issue/2310
docs/internals: note segment size limitation
==
==================
10a7b6b;Marian Beermann;2017-08-22 17:48:48 +0200;docs/internals: note segment size limitation

==

docs/internals/data-structures.rst
==================
1ac4938;enkore;2017-08-22 17:33:17 +0200;Merge pull request #2925 from enkore/issue/2376
Datetime formatting
==
==================
ab4981e;Marian Beermann;2017-08-07 13:08:25 +0200;always use microseconds for ISO 8601 output

==

docs/internals/frontends.rst
src/borg/helpers/parseformat.py
src/borg/helpers/time.py
src/borg/testsuite/archiver.py
==================
2ff2989;Marian Beermann;2017-08-07 13:01:33 +0200;list: fix weird mixup of mtime/isomtime

==

docs/changes.rst
src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
a836f45;Marian Beermann;2017-08-16 17:57:08 +0200;one datetime formatter to rule them all
# Conflicts:
#	src/borg/helpers.py

==

docs/internals/frontends.rst
src/borg/archive.py
src/borg/helpers/parseformat.py
src/borg/helpers/time.py
src/borg/testsuite/archiver.py
==================
5fb2b4b;enkore;2017-08-21 13:49:50 +0200;Merge pull request #2842 from imsodin/diffmount-diff_refactor
Refactor diff functionality
==
==================
8af5a0a;enkore;2017-08-21 12:20:22 +0200;Merge pull request #2953 from enkore/issue/2949
create: document exclusion through nodump
==
==================
8dc79ae;enkore;2017-08-21 12:19:20 +0200;Merge pull request #2950 from enkore/f/mt-1.5b
cache: adjust AdHocCache API
==
==================
584886a;enkore;2017-08-20 21:38:37 +0200;Merge pull request #2946 from ThomasWaldmann/workaround-files-cache-corruption
ignore corrupt files cache, fixes #2939
==
==================
495f838;Marian Beermann;2017-08-20 21:37:17 +0200;create: document exclusion through nodump

==

src/borg/archiver.py
==================
c5a1549;Marian Beermann;2017-07-30 21:50:57 +0200;cache: adjust AdHocCache API (test_create_no_cache_sync)

==

src/borg/cache.py
==================
03dea8c;Lukas Fleischer;2017-08-19 21:12:51 +0200;development.rst: Miscellaneous improvements (#2944)
development.rst: misc. improvements

* Improved wording / grammar.
* Use proper Git terminology for operations on patches.
* Unify capitalization of "GitHub".
* Add proper formatting to branch names.

==

docs/development.rst
==================
c8920fa;Thomas Waldmann;2017-08-16 01:52:33 +0200;ignore corrupt files cache, fixes #2939
ignore the files cache when corrupt and emit a warning message
so the users notices that there is a problem.

(cherry picked from commit 4eadb59c10d3d9afeb1ce569119423532060f431)

==

src/borg/cache.py
==================
132b618;enkore;2017-08-16 17:51:18 +0200;Merge pull request #2930 from enkore/mtpleasant
adjust logo colour to a more pleasant green
==
==================
fd21893;Marian Beermann;2017-08-16 17:50:04 +0200;revert logo colour to #00dd00 (per @TW)

==

docs/_static/logo.pdf
docs/_static/logo.png
docs/_static/logo.svg
docs/borg_theme/css/borg.css
==================
11653d8;enkore;2017-08-16 17:47:02 +0200;Merge pull request #2920 from lfos/detect-attic-repos
Detect non-upgraded Attic repositories
==
==================
0943b32;Lukas Fleischer;2017-08-06 16:46:08 +0200;Detect non-upgraded Attic repositories
When opening a repository, always try to read the magic number of the
latest segment and compare it to the Attic segment magic (unless the
repository is opened for upgrading). If an Attic segment is detected,
raise a dedicated exception, telling the user to upgrade the repository
first.

Fixes #1933.

==

docs/internals/frontends.rst
src/borg/remote.py
src/borg/repository.py
src/borg/testsuite/archiver.py
src/borg/testsuite/upgrader.py
src/borg/upgrader.py
==================
df8205a;rugk;2017-07-16 20:04:56 +0200;Renew asciinema/screencasts
Created with borg v1.1.0, so more up-to-date and split into different
parts (install, basic, advanced)…
Fixes https://github.com/borgbackup/borg/issues/669

==

docs/misc/asciinema/advanced.json
docs/misc/asciinema/advanced.sh
docs/misc/asciinema/basic.json
docs/misc/asciinema/basic.sh
docs/misc/asciinema/install.json
docs/misc/asciinema/install.sh
docs/misc/asciinema/install_and_basics.json
docs/misc/asciinema/install_and_basics.txt
==================
9dc22d2;Simon Frei;2017-07-19 14:29:14 +0200;Refactor the diff functionality
This factors out a lot of the logic in do_diff in archiver.py to Archive in
archive.py and a new class ItemDiff in item.pyx. The idea is to move methods
to the classes that are affected and to make it reusable, primarily for a new
option to fuse (#2475).

==

src/borg/archive.py
src/borg/archiver.py
src/borg/item.pyx
src/borg/testsuite/archiver.py
==================
9d758d5;TW;2017-08-13 19:49:37 +0200;Merge pull request #2924 from ThomasWaldmann/migrate-locks
migrate locks to child PID when daemonize is used
==
==================
671418a;Marian Beermann;2017-08-13 16:52:28 +0200;docs: adjust CSS to updated logo colour

==

docs/borg_theme/css/borg.css
==================
9b0c03b;Marian Beermann;2017-08-13 16:52:20 +0200;docs: delete unused CSS directives

==

docs/borg_theme/css/borg.css
==================
0b37e59;Marian Beermann;2017-08-13 16:49:17 +0200;logo: add makefile to create PNG and PDF versions from master SVG

==

docs/_static/Makefile
docs/_static/logo.pdf
docs/_static/logo.png
==================
cfb4a5f;Marian Beermann;2017-08-13 15:42:52 +0200;adjust logo colour to a more pleasant green

==

docs/_static/logo.svg
==================
5bad764;Thomas Waldmann;2017-08-11 23:24:33 +0200;fixup: use asserts for the old_id check

==

src/borg/locking.py
==================
6f94949;Thomas Waldmann;2017-08-07 04:37:20 +0200;migrate locks to child PID when daemonize is used
also:

increase platform api version due to change in get_process_id behaviour.

==

src/borg/fuse.py
src/borg/helpers/checks.py
src/borg/helpers/process.py
src/borg/locking.py
src/borg/platform/base.py
src/borg/platform/darwin.pyx
src/borg/platform/freebsd.pyx
src/borg/platform/linux.pyx
src/borg/platform/posix.pyx
src/borg/repository.py
src/borg/testsuite/locking.py
==================
72c8ec2;TW;2017-08-08 01:46:13 +0200;Merge pull request #2928 from ThomasWaldmann/json-isoformat
Json isoformat
==
==================
6d2b3bc;Thomas Waldmann;2017-08-06 23:49:18 +0200;test json timestamps for iso format

==

src/borg/testsuite/archiver.py
==================
6133f1b;Thomas Waldmann;2017-08-06 02:22:38 +0200;repo last_modified: use iso8601 timestamp format with --json
like yyyy-mm-ddThh:mm:ss - no tz yet, this likely needs more refactoring
to tz aware and utc datetime objects everywhere, currently there are
naive datetime objects and also localtime at quite some places.

==

src/borg/helpers/parseformat.py
==================
1df7af5;Thomas Waldmann;2017-08-06 02:13:17 +0200;archives list: use iso8601 timestamp format with --json
like yyyy-mm-ddThh:mm:ss - no tz yet, this likely needs more refactoring
to tz aware and utc datetime objects everywhere, currently there are
naive datetime objects and also localtime at quite some places.

==

src/borg/helpers/parseformat.py
==================
09c111b;Thomas Waldmann;2017-08-06 01:59:55 +0200;archive listing: use iso8601 timestamp format with --json-lines
like yyyy-mm-ddThh:mm:ss - no tz yet, this likely needs more refactoring
to tz aware and utc datetime objects everywhere, currently there are
naive datetime objects and also localtime at quite some places.

==

src/borg/helpers/parseformat.py
src/borg/helpers/time.py
==================
70c7f48;TW;2017-08-07 23:06:15 +0200;Merge pull request #2905 from ThomasWaldmann/refactor-helpers
Refactor helpers
==
==================
3e78549;Thomas Waldmann;2017-07-31 17:54:45 +0200;helpers: split into smaller modules

==

src/borg/archiver.py
src/borg/helpers/__init__.py
src/borg/helpers/checks.py
src/borg/helpers/datastruct.py
src/borg/helpers/errors.py
src/borg/helpers/fs.py
src/borg/helpers/manifest.py
src/borg/helpers/misc.py
src/borg/helpers/msgpack.py
src/borg/helpers/parseformat.py
src/borg/helpers/process.py
src/borg/helpers/progress.py
src/borg/helpers/time.py
src/borg/helpers/usergroup.py
src/borg/helpers/yes.py
==================
a5f7c7a;Thomas Waldmann;2017-07-31 04:25:52 +0200;helpers: fix imports and helpers.exit_code location
code expects to be able to assign to helpers.exit_code (which stopped
working correctly when exit_code was moved to helpers.misc module).

==

src/borg/helpers/__init__.py
src/borg/helpers/misc.py
==================
558282d;Thomas Waldmann;2017-07-31 02:37:19 +0200;helpers: create package
just created package dir and __init__.py and
moved helpers.py to helpers/misc.py - no other changes.

not functional, some imports need fixing...

==

src/borg/helpers.py
src/borg/helpers/__init__.py
src/borg/helpers/misc.py
==================
a1840e9;enkore;2017-08-06 10:56:34 +0200;Merge pull request #2918 from ThomasWaldmann/fix-serve-exitcode
fix exitcode of borg serve, fixes #2910
==
==================
583de3e;Thomas Waldmann;2017-08-06 04:18:49 +0200;fix exitcode of borg serve, fixes #2910

==

src/borg/archiver.py
==================
37f7551;Simon Frei;2017-07-19 13:55:14 +0200;Only style changes - still NOT functional

==

src/borg/item.pyx
==================
9f6df7d;Simon Frei;2017-07-19 12:56:05 +0200;Only move and change indendation of code - NOT functional

==

src/borg/archive.py
src/borg/archiver.py
src/borg/item.pyx
==================
eee4542;TW;2017-08-06 01:20:24 +0200;Merge pull request #2900 from imsodin/fix-2899
Only compare contents when chunker params match (fixes #2899)
==
==================
5a76140;TW;2017-08-03 04:59:58 +0200;Merge pull request #2906 from ThomasWaldmann/vagrant-archlinux
vagrant: add archlinux VM
==
==================
7dc76a7;Thomas Waldmann;2017-08-01 04:46:31 +0200;vagrant: add archlinux VM
has python 3.6, openssl 1.1.

and most of the stuff we need is preinstalled on this box. \o/

==

Vagrantfile
==================
b6c2055;Simon Frei;2017-07-30 19:35:38 +0200;Only compare contents when chunker params match (fixes #2899)

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
4f57e3a;enkore;2017-07-30 18:22:50 +0200;Merge pull request #2890 from enkore/f/mt-1c
archive: create FilesystemObjectProcessors class
==
==================
d968eae;enkore;2017-07-30 10:25:09 +0200;Merge pull request #2892 from ThomasWaldmann/drop-py34
increase Python minimum requirement to 3.5.0
==
==================
074beec;Thomas Waldmann;2017-07-30 02:01:10 +0200;minimal Vagrantfile (py3.5+, openssl 1.0/1.1)
- killed many VMs that missed python 3.5 and/or openssl 1.1
- refer to 1.1-maint branch Vagrantfile if you want to re-add some
- kept xenial64 for openssl 1.0 testing
- kept stretch64 for openssl 1.1 testing and future binary builds

==

Vagrantfile
==================
12df5e6;Thomas Waldmann;2017-07-29 20:43:20 +0200;use python 3.5's os.scandir
the removed stuff was only required for < 3.5.

==

src/borg/helpers.py
==================
4c840ee;Thomas Waldmann;2017-07-29 20:37:14 +0200;use python 3.5's os.set_blocking

==

src/borg/remote.py
==================
8cd451b;Thomas Waldmann;2017-07-29 20:27:33 +0200;python 3.5+ does not generate .pyo any more

==

.gitignore
MANIFEST.in
==================
75050f4;Thomas Waldmann;2017-07-29 20:23:02 +0200;travis has fixed their py 3.5
lzma stuff used to be broken, that's why we had 3.5.2.

==

.travis.yml
==================
a5c6a50;Thomas Waldmann;2017-07-29 19:33:18 +0200;increase Python minimum requirement to 3.5.0
also:
- drop testing on 3.4
- add some TODO for the docs and vagrant machines

==

.travis.yml
.travis/install.sh
Vagrantfile
docs/changes.rst
docs/development.rst
docs/installation.rst
docs/usage_general.rst.inc
setup.py
src/borg/archiver.py
src/borg/helpers.py
tox.ini
==================
a88519d;Marian Beermann;2017-07-29 17:53:14 +0200;archive: delete unused Archive.list_archives

==

src/borg/archive.py
==================
c93dba0;Marian Beermann;2017-07-29 16:11:33 +0200;archive: create FilesystemObjectProcessors class

==

src/borg/archive.py
src/borg/archiver.py
==================
bccff34;enkore;2017-07-29 17:27:18 +0200;Merge pull request #2889 from enkore/f/mt-1b
multithreading: item.to_optr(), Item.from_optr()
==
==================
d286d75;Marian Beermann;2017-07-29 14:26:15 +0200;item: item.to_optr(), Item.from_optr()

==

src/borg/_item.c
src/borg/helpers.py
src/borg/item.pyx
src/borg/testsuite/item.py
==================
7b35b1e;enkore;2017-07-29 17:24:16 +0200;Merge pull request #2888 from enkore/f/remove-gcm
crypto: fixes & remove AES-GCM
==
==================
5abfa0b;enkore;2017-07-29 14:36:01 +0200;Merge pull request #2887 from enkore/f/mt-1a
multithreading: add pyzmq dep, chunker GIL
==
==================
e57dd4b;Marian Beermann;2017-07-29 12:28:33 +0200;crypto: avoid bad prototype codegen from cython
(-Wstrict-prototypes, Cyton forgets a "void")

==

src/borg/crypto/low_level.pyx
==================
630e45b;Marian Beermann;2017-07-29 12:28:06 +0200;crypto: fix wrong use of const

==

src/borg/crypto/low_level.pyx
==================
d5ee16d;Marian Beermann;2017-07-29 12:22:11 +0200;crypto: remove AES-GCM

==

src/borg/crypto/low_level.pyx
src/borg/testsuite/crypto.py
==================
7d02c7e;enkore;2017-07-29 12:18:38 +0200;Merge pull request #1034 from ThomasWaldmann/crypto-aead
new crypto code, blackbox, aead internally
==
==================
55e0c43;Marian Beermann;2017-07-29 11:55:26 +0200;add zeromq dependency

==

docs/global.rst.inc
docs/installation.rst
setup.py
==================
b1b66be;Marian Beermann;2017-03-30 13:09:02 +0200;fix chunker holding the GIL during blocking I/O

==

src/borg/_chunker.c
==================
dc4abff;Thomas Waldmann;2017-07-26 04:34:02 +0200;remove unused bytes16 conversions

==

src/borg/crypto/low_level.pyx
src/borg/selftest.py
src/borg/testsuite/crypto.py
==================
63ebfc1;Thomas Waldmann;2017-07-26 01:23:45 +0200;remove unused extract_nonce method

==

src/borg/crypto/key.py
==================
e7228fa;Thomas Waldmann;2017-07-26 01:21:24 +0200;cosmetic: move some lines

==

src/borg/crypto/low_level.pyx
==================
68ef5e8;Thomas Waldmann;2016-12-04 05:20:19 +0100;allow different MACs, implement blake2b MAC

==

src/borg/crypto/low_level.pyx
src/borg/testsuite/key.py
==================
945b5e2;Thomas Waldmann;2016-12-04 00:49:11 +0100;dispatch to dummy blake2b ciphersuite

==

src/borg/crypto/key.py
src/borg/crypto/low_level.pyx
==================
1e23291;Thomas Waldmann;2016-12-03 23:48:18 +0100;post-merge: re-enabled AuthenticatedKey and tests

==

src/borg/crypto/key.py
src/borg/testsuite/key.py
==================
6090fde;Thomas Waldmann;2016-09-10 15:32:32 +0200;move the cipher internal counter overflow check to encrypt()/decrypt()

==

src/borg/crypto/low_level.pyx
==================
8f1678e;Thomas Waldmann;2016-09-08 05:13:23 +0200;set_iv / next iv with integers

==

src/borg/crypto/key.py
src/borg/crypto/low_level.pyx
src/borg/testsuite/crypto.py
src/borg/testsuite/key.py
==================
58c2daf;Thomas Waldmann;2016-09-07 18:19:23 +0200;nonce manager: remove get/set iv, make it integer based

==

src/borg/crypto/key.py
src/borg/crypto/nonces.py
src/borg/testsuite/nonces.py
==================
f34092e;Thomas Waldmann;2016-09-07 17:37:37 +0200;move openssl version checks to staticmethod requirements_check

==

src/borg/crypto/low_level.pyx
==================
23959eb;Thomas Waldmann;2016-09-07 16:12:01 +0200;borg.key: include chunk id in exception msgs

==

src/borg/crypto/key.py
==================
37cf3ef;Thomas Waldmann;2016-09-03 01:35:34 +0200;init ciphersuites with header_len and aad_offset
it's needed for extract_iv already, so it should be given to init, not encrypt/decrypt

==

src/borg/crypto/key.py
src/borg/crypto/low_level.pyx
src/borg/testsuite/crypto.py
==================
e9bbf93;Thomas Waldmann;2016-09-02 23:43:15 +0200;refactor to cipher.extract_iv
position and length of iv depends on cipher

==

src/borg/crypto/key.py
src/borg/crypto/low_level.pyx
src/borg/testsuite/key.py
==================
2d79f19;Thomas Waldmann;2016-09-02 21:51:22 +0200;refactor / generalize to num_cipher_blocks

==

src/borg/crypto/key.py
src/borg/crypto/low_level.pyx
src/borg/testsuite/archiver.py
==================
310b4b7;Thomas Waldmann;2016-08-31 03:30:18 +0200;UNENCRYPTED (and unauthenticated) "ciphersuite"
it can be used to integrate the plaintext mode with the AEAD modes, both use same api now.

==

src/borg/crypto/low_level.pyx
src/borg/testsuite/crypto.py
==================
f76f42c;Thomas Waldmann;2016-08-30 04:42:31 +0200;use cipher.block_count()
there are some more places where it is used.

==

src/borg/crypto/key.py
src/borg/testsuite/key.py
==================
de0707d;Thomas Waldmann;2016-08-30 04:03:27 +0200;refactor AES class to new api

==

src/borg/crypto/key.py
src/borg/crypto/low_level.pyx
==================
fbc7404;Thomas Waldmann;2016-10-22 01:52:20 +0200;cosmetic: s/enc_cipher/cipher/, remove comment

==

src/borg/crypto/key.py
src/borg/testsuite/key.py
src/borg/testsuite/nonces.py
==================
8752039;Thomas Waldmann;2016-10-22 01:50:35 +0200;integrate new crypto code

==

src/borg/archive.py
src/borg/crypto/key.py
src/borg/crypto/nonces.py
src/borg/helpers.py
src/borg/selftest.py
src/borg/testsuite/key.py
src/borg/testsuite/nonces.py
==================
4effe40;Thomas Waldmann;2016-08-29 23:14:47 +0200;re-add legacy AES() crypto class
we need it to encrypt/decrypt key files / config keys.

==

src/borg/crypto/low_level.pyx
==================
ef880de;Thomas Waldmann;2016-08-29 21:16:51 +0200;add iv as optional encrypt() param

==

src/borg/crypto/low_level.pyx
==================
5287531;Thomas Waldmann;2016-08-29 20:55:51 +0200;make sure set_iv is called before each encrypt() call

==

src/borg/crypto/low_level.pyx
==================
d88c076;Thomas Waldmann;2016-08-29 20:36:32 +0200;make sure sizes are in sync

==

src/borg/crypto/low_level.pyx
==================
fb85d6a;Thomas Waldmann;2016-08-29 19:03:24 +0200;generalize intermediate classes' init

==

src/borg/crypto/low_level.pyx
==================
11349d1;Thomas Waldmann;2016-08-29 18:11:12 +0200;move IV type check to set_iv method

==

src/borg/crypto/low_level.pyx
==================
71b8d7f;Thomas Waldmann;2016-08-29 16:06:40 +0200;generalize block count computation
also: use block_count method for legacy ciphersuites

==

src/borg/crypto/low_level.pyx
==================
ca4fc2a;Thomas Waldmann;2016-08-29 19:18:46 +0200;generalize next_iv comment

==

src/borg/crypto/low_level.pyx
==================
ce5c578;Thomas Waldmann;2016-08-29 15:00:10 +0200;replace literals for iv_len/mac_len

==

src/borg/crypto/low_level.pyx
==================
d94f64c;Thomas Waldmann;2016-08-29 04:21:53 +0200;dedup crypto tests for AE/AEAD ciphersuites

==

src/borg/testsuite/crypto.py
==================
741ab8b;Thomas Waldmann;2016-08-29 01:53:09 +0200;use PyMem_Malloc / Free
Hopefully it is better dealing with a lot of small-object allocations than malloc/free is.
Small allocs happen if the input file is small, so it results only in 1 small chunk.

==

src/borg/crypto/low_level.pyx
==================
15490d5;Thomas Waldmann;2016-08-16 06:34:52 +0200;add support for AES-OCB and chacha20-poly1305
also: use AEAD base class

==

src/borg/crypto/_crypto_helpers.c
src/borg/crypto/_crypto_helpers.h
src/borg/crypto/low_level.pyx
src/borg/testsuite/crypto.py
==================
92080f9;Thomas Waldmann;2016-07-14 22:35:50 +0200;crypto: add functions missing in openssl 1.0.x

==

setup.py
src/borg/crypto/_crypto_helpers.c
src/borg/crypto/_crypto_helpers.h
src/borg/crypto/low_level.pyx
==================
ee604ab;Thomas Waldmann;2016-06-25 22:09:36 +0200;crypto: use OpenSSL 1.1 HMAC API
This breaks it on OpenSSL 1.0.x as there is no HMAC_CTX_new/free() yet.

OTOH, this change is consistent with the previous change done for
EVP_CIPHER_CTX (which works on 1.0 and 1.1).

==

src/borg/crypto/low_level.pyx
==================
67567fc;Thomas Waldmann;2016-05-09 03:46:54 +0200;new crypto api, blackbox/AEAD. also adds AES256-GCM.
includes:

- aes256-ctr-hmac-sha256 (attic/borg legacy, optional aad support)

- aes256-gcm (new, optional aad support)
  uses 96bits for iv, 128bit for auth tag.

- header support
  the caller-provided header will be just copied in front of the rest -
  this avoids expensive operations (memcpy, garbage collection) in Python.
  the first bytes in the header may be non-authenticated data if aad_offset > 0.
  this is to support legacy attic/borg envelope layout, where the type byte
  is not authenticated.

- aad support
  additional authenticated data - it just contributes to the computed mac,
  but is not encrypted). the current api assumes that aad starts at some
  aad_offset inside the given header and extends to the end of it.

- iv handling helpers, compute next iv based on amount of processed data

- unit tests

Note: the changes are intentionally kept isolated / not integrated into the
      rest of the code, so this has to be done later.

==

src/borg/crypto/low_level.pyx
src/borg/testsuite/crypto.py
==================
8d89ee9;enkore;2017-07-26 14:01:49 +0200;Merge pull request #2882 from enkore/docs/minor-fixes
docs: minor formatting fixes
==
==================
405e5ac;Marian Beermann;2017-07-26 13:57:48 +0200;docs: common options: don't wrap options

==

docs/borg_theme/css/borg.css
==================
8727b79;Marian Beermann;2017-07-26 13:54:55 +0200;docs: don't narrow right margin in sidebar toc
avoids overly narrow text in the FAQ toc

==

docs/borg_theme/css/borg.css
==================
153da8a;enkore;2017-07-26 10:41:10 +0200;Merge pull request #2881 from enkore/docs/tarpipe
docs: tar: tarpipe example
==
==================
2ff4550;Marian Beermann;2017-07-26 10:40:35 +0200;docs: tar: tarpipe example

==

docs/usage/tar.rst
==================
daa88e0;enkore;2017-07-25 09:56:25 +0200;Merge pull request #2877 from Alexander-N/pylint-rules
Activate more linting rules in .coafile
==
==================
c1d7cd9;enkore;2017-07-24 23:50:51 +0200;Merge pull request #2873 from enkore/issue/2869
with-lock, info docs
==
==================
b4b58e7;Marian Beermann;2017-07-24 10:37:12 +0200;info: explain max. archive size

==

src/borg/archiver.py
==================
24de851;Marian Beermann;2017-07-24 10:33:03 +0200;with-lock: fix help text

==

src/borg/archiver.py
==================
836bc33;enkore;2017-07-24 21:22:24 +0200;Merge pull request #2876 from enkore/issue/2628
cache: write_archive_index: truncate_and_unlink on error
==
==================
3c0f8b7;enkore;2017-07-24 21:08:44 +0200;Merge pull request #2875 from enkore/issue/2863
umount: try fusermount, then try umount
==
==================
2fe37db;Marian Beermann;2017-07-24 10:42:14 +0200;umount: try fusermount, then try umount

==

src/borg/archiver.py
src/borg/helpers.py
src/borg/platform/__init__.py
src/borg/platform/base.py
src/borg/platform/darwin.pyx
src/borg/platform/freebsd.pyx
src/borg/platform/linux.pyx
src/borg/platform/posix.pyx
src/borg/testsuite/__init__.py
==================
eff492a;Alexander-N;2017-07-23 19:48:20 +0200;Replace assert_true(False) with fail and don't ignore pylint rule W1503
assert_true(False) violates W1503 (redundant-unittest-assert) and is less clear than using fail().

==

.coafile
src/borg/testsuite/archiver.py
==================
61b53f8;Alexander-N;2017-07-20 18:51:23 +0200;Remove several linting rules from ignored list in .coafile
These rules are not violated and don't need to be ignored.

==

.coafile
==================
77797a2;enkore;2017-07-24 11:03:00 +0200;Merge pull request #2837 from milkey-mouse/fix392
Detail how to use macOS/GNOME/KDE keyrings for repo passwords (fixes #392)
==
==================
2623e33;Marian Beermann;2017-07-24 10:45:57 +0200;cache: write_archive_index: truncate_and_unlink on error

==

src/borg/cache.py
==================
b85076d;TW;2017-07-24 01:27:19 +0200;Merge pull request #2867 from ThomasWaldmann/rel110rc1
WIP: release 1.1.0rc1
==
==================
43ecde1;Thomas Waldmann;2017-07-23 17:12:01 +0200;python setup.py build_usage

==

docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/common-options.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/export-tar.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
docs/usage/serve.rst.inc
docs/usage/upgrade.rst.inc
docs/usage/with-lock.rst.inc
==================
6b08ec7;Thomas Waldmann;2017-07-23 17:07:43 +0200;add release date to CHANGES

==

docs/changes.rst
==================
090d2fe;TW;2017-07-23 17:04:55 +0200;Merge pull request #2804 from ThomasWaldmann/update-changes
update CHANGES (master)
==
==================
6c39c1c;Thomas Waldmann;2017-07-08 02:25:54 +0200;update CHANGES (master)

==

docs/changes.rst
==================
eb3e760;enkore;2017-07-23 16:04:47 +0200;Merge pull request #2836 from enkore/docs/installation
Cleanup installation
==
==================
b3e0dd3;Marian Beermann;2017-07-23 16:03:45 +0200;docs: file system requirements, update segs per dir

==

docs/usage_general.rst.inc
==================
22bbe45;TW;2017-07-23 14:31:07 +0200;Merge pull request #2860 from ThomasWaldmann/fix-2853
give known chunk size to chunk_incref, fixes #2853
==
==================
2edbcd7;Thomas Waldmann;2017-07-23 13:51:35 +0200;chunk_incref: compute "_size or size" only once

==

src/borg/cache.py
==================
fc3498a;Thomas Waldmann;2017-07-23 13:48:45 +0200;chunk_incref: use "size" for public api

==

src/borg/archive.py
src/borg/cache.py
==================
663d3c5;Thomas Waldmann;2017-07-22 20:12:41 +0200;chunk_incref size assertion: fail early

==

src/borg/cache.py
==================
186123c;Thomas Waldmann;2017-07-22 20:08:37 +0200;give known chunk size to chunk_incref, fixes #2853
chunk_incref was called when dealing with part files without giving the
known chunk size in the size_ parameter.

adjusted LocalCache.chunk_incref to have same signature.

==

src/borg/archive.py
src/borg/cache.py
==================
1d008e8;TW;2017-07-23 02:02:07 +0200;Merge pull request #2855 from lfos/add-mailmap
Add .mailmap
==
==================
4fa8805;TW;2017-07-23 02:01:29 +0200;Merge pull request #2852 from ThomasWaldmann/lgtm-fixes
lgtm fixes
==
==================
199f192;Thomas Waldmann;2017-07-22 02:42:12 +0200;archive: closely wrap next() called from generator
lgtm:
Calling next() in a generator may cause unintended early termination of
an iteration.

It seems that lgtm did not detect the more loose wrapping that we used
before.

==

src/borg/archive.py
==================
5cc2b90;Thomas Waldmann;2017-07-22 02:07:17 +0200;constants: avoid comparing constants
lgtm:
Comparison of constants is always constant, but is harder to read than
a simple constant.

==

src/borg/constants.py
==================
d806d52;TW;2017-07-23 01:47:13 +0200;fix checkpoints/parts reference in FAQ, fixes #2859 (#2861)
fix checkpoints/parts reference in FAQ, fixes #2859
==

docs/faq.rst
==================
631f857;Lukas Fleischer;2017-07-22 16:23:58 +0200;Add .mailmap
Coalesce together commits by the same person in git-shortlog(1).

For people with different aliases, prefer full names over abbreviations
or nick names. For people with different email addresses, use the most
recent email address.

==

.mailmap
==================
73e5ac4;Thomas Waldmann;2017-07-22 02:03:42 +0200;setup.py: fix same loop variables
lgtm:
Nested loops in which the target variable is the same for each loop make
the behavior of the loops difficult to understand.

(not really here, just wanted to get rid of lgtm warning)

==

setup.py
==================
b7b428e;Thomas Waldmann;2017-07-22 01:51:19 +0200;repository: fix assert expression to not have a side effect
lgtm:
This 'assert' statement contains an expression which may have side effects.

==

src/borg/repository.py
==================
9809010;TW;2017-07-21 23:28:00 +0200;Merge pull request #2851 from ThomasWaldmann/upgrade-osxfuse
upgrade FUSE for macOS (osxfuse) from 3.5.8 to 3.6.3, fixes #2706
==
==================
f2472b2;Thomas Waldmann;2017-07-21 22:52:15 +0200;upgrade FUSE for macOS (osxfuse) from 3.5.8 to 3.6.3, fixes #2706

==

Vagrantfile
==================
0c6a11a;TW;2017-07-21 22:32:21 +0200;Merge pull request #2832 from rciorba/hash_modulo_speedup
replace modulo with if to check for wraparound in hashmap
==
==================
c2f7e73;TW;2017-07-21 22:23:13 +0200;Merge pull request #2846 from wzyboy/segment-filename
Document consequences of changing the segments_per_dir value
==
==================
f0de6a4;Zhuoyun Wei;2017-07-20 12:52:52 -0400;Doc: add warning about changing segments_per_dir values

==

docs/internals/data-structures.rst
==================
7d07a96;Zhuoyun Wei;2017-07-20 12:44:34 -0400;Doc: update default values in sample config file

==

docs/internals/data-structures.rst
==================
cc93cbb;Marian Beermann;2017-07-17 00:14:58 +0200;docs: usage; remove strange blurb about tested platforms

==

docs/usage_general.rst.inc
==================
735339c;Marian Beermann;2017-07-17 00:11:30 +0200;docs: streamline installation: platforms table

==

docs/installation.rst
docs/usage_general.rst.inc
==================
ab77395;Marian Beermann;2017-07-17 00:10:05 +0200;docs: streamline installation (2)
I can't give a good reason why anyone would care about this here.
This is right before distribution packages, which are per definition
compatible (sometimes tested, even).

Instead, mention it where it applies.

==

docs/installation.rst
==================
3d5a801;Marian Beermann;2017-07-17 00:06:02 +0200;docs: streamline installation: file systems

==

docs/installation.rst
docs/usage_general.rst.inc
==================
a72b2e3;enkore;2017-07-21 11:52:35 +0200;Merge pull request #2849 from borgbackup/enkore-patch-1
docs: recreate: fix wrong "remove unwanted files" example
==
==================
a614626;enkore;2017-07-21 11:51:46 +0200;docs: recreate: fix wrong "remove unwanted files" example

==

docs/usage/recreate.rst
==================
12e0f55;Radu Ciorba;2017-07-16 14:28:01 +0300;replace modulo with if to check for wraparound in hashmap
Integer division is slow, and this improves the speed of all operations on the hashmap.

Benchmarked this patch on the rciorba/master-bench branch:
https://cdn.rawgit.com/rciorba/e3eded290e91a361f74eefdbc84416bb/raw/9e5d61e03c5842712d629e3e5567da3a512f1d79/results.html

==

src/borg/_hashindex.c
==================
c5c361b;rugk;2017-07-20 00:23:59 +0200;Fix bashism in shell scripts (#2820)
Fix bashism in shell scripts, also fixes #2816

This makes the scripts fully POSIX-compatible.
Used shellcheck to check.

==

.travis/upload_coverage.sh
docs/quickstart.rst
==================
756dea7;Milkey Mouse;2017-07-16 15:23:46 -0700;Detail how to use macOS/GNOME keyrings for repo passwords (fixes #392)

==

docs/faq.rst
==================
ffe7bdb;TW;2017-07-19 02:22:44 +0200;Merge pull request #2838 from milkey-mouse/fix2834
Use archive creation time as mtime for FUSE mount (fixes #2834)
==
==================
2149e78;Alexander-N;2017-07-19 01:50:22 +0200;Ignore more pylint rules in .coafile (#2823)
Ignore them for now, so that they can be fixed later one by one.
==

.coafile
==================
06f711e;TW;2017-07-19 01:41:07 +0200;Merge pull request #2828 from milkey-mouse/fix2730
Reference list of status chars in borg recreate --filter description
==
==================
3b354ee;TW;2017-07-19 00:27:56 +0200;Merge pull request #2839 from Alexander-N/e0211
Enable pylint check E0211 (method has no argument) in .coafile
==
==================
6ef5c9c;Milkey Mouse;2017-07-16 18:23:11 -0700;Use archive creation time as mtime for FUSE mount (fixes #2834)

==

src/borg/fuse.py
==================
bcbf802;Milkey Mouse;2017-07-15 23:01:17 -0700;Add list of status chars to borg create --filter help text

==

src/borg/archiver.py
==================
f7c843f;Alexander-N;2017-07-17 11:21:30 +0200;Enable pylint check E0211 (method has no argument) in .coafile
Adapt Attic013Item in test_attic013_acl_bug so that as_dict takes `self` as
first argument. This was the only case where E0211 was violated.

==

.coafile
src/borg/testsuite/archiver.py
==================
26bc80f;TW;2017-07-15 17:01:05 +0200;Merge pull request #2818 from takluyver/i2815
Use code markup for command line option headings
==
==================
fafa18b;TW;2017-07-15 16:56:58 +0200;Merge pull request #2824 from takluyver/i2811
Name backup directories with 'before-upgrade'
==
==================
b9f47ab;TW;2017-07-15 16:51:21 +0200;Merge pull request #2822 from takluyver/i2795
Update source-install about doc dependencies
==
==================
b81a507;TW;2017-07-15 16:47:57 +0200;Merge pull request #2819 from Alexander-N/coala-config
Update path to chunker.c in .coafile
==
==================
ae2a1b8;Thomas Kluyver;2017-07-15 16:23:08 +0200;Name backup directories with 'before-upgrade'
Closes gh-2811

==

docs/usage/upgrade.rst
docs/usage/upgrade.rst.inc
src/borg/archiver.py
src/borg/upgrader.py
==================
bb26709;Alexander-N;2017-07-15 16:02:20 +0200;Update path to chunker.c in .coafile

==

.coafile
==================
0edad19;Thomas Kluyver;2017-07-15 15:49:55 +0200;Update source-install about doc dependencies
Closes gh-2795

==

docs/installation.rst
==================
0fcdb97;Thomas Kluyver;2017-07-15 15:03:46 +0200;Fix cross reference

==

docs/usage/notes.rst
==================
84940e3;Thomas Kluyver;2017-07-15 15:02:41 +0200;Use code markup for command line options
Closes gh-2815

==

docs/usage/notes.rst
==================
68b44e8;TW;2017-07-15 10:46:51 +0200;Merge pull request #2817 from Alexander-N/coala-requirements
Fix coala requirements
==
==================
ad7f544;Alexander-N;2017-07-15 09:55:56 +0200;Fix coala requirements
Put each package on a separate line.

Error was:
  Invalid requirement: 'coala coala-bears'

==

requirements.d/coala.txt
==================
d16ed30;enkore;2017-07-14 17:45:14 +0200;Merge pull request #2810 from enkore/issue/2809
create _endian.h
==
==================
019a258;Marian Beermann;2017-07-11 19:12:19 +0200;create _endian.h

==

src/borg/_endian.h
src/borg/_hashindex.c
src/borg/algorithms/crc32_slice_by_8.c
==================
e36be95;TW;2017-07-06 03:12:01 +0200;Merge pull request #2792 from ThomasWaldmann/comment-placeholder
support borg list repo --format {comment}, fixes #2081
==
==================
852505f;Thomas Waldmann;2017-07-05 01:33:17 +0200;ItemFormatter: code defensively, always use new dict for returned object

==

src/borg/helpers.py
==================
75c602d;Thomas Waldmann;2017-07-04 05:20:12 +0200;support borg list repo --format {comment}, fixes #2081
Also supported: {bcomment} for binary and {end} for backup end time.

Refactor so ArchiveFormatter works similar to ItemFormatter.

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
7be39af;Wladimir Palant;2017-07-05 17:16:31 +0200;#2800 - Better explanation of the --ignore-inode option relevance (#2802)
Fixes #2800
==

src/borg/archiver.py
==================
6ffa797;enkore;2017-07-05 10:02:34 +0200;Merge pull request #2791 from ThomasWaldmann/dash_open
WIP dash_open
==
==================
e728d10;Thomas Waldmann;2017-07-04 02:56:50 +0200;use dash_open

==

src/borg/archiver.py
==================
a96dede;Thomas Waldmann;2017-07-04 02:37:00 +0200;dash_open: generalized and renamed open_file_or_stdin

==

src/borg/crypto/keymanager.py
src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
9ca6669;TW;2017-07-04 22:51:31 +0200;use limited unpacker for outer key, fixes #2174 (#2790)
* use limited unpacker for outer key, fixes #2174

* fixup: higher inner key data size limit

==

src/borg/crypto/key.py
src/borg/helpers.py
==================
2730571;enkore;2017-07-04 22:50:39 +0200;Merge pull request #2793 from ThomasWaldmann/commit-in-with-lock
use commit() in borg with-lock, fixes #1867
==
==================
a0d8496;enkore;2017-07-04 12:33:56 +0200;Merge pull request #2794 from antlarr/master
Fix openSUSE command and add openSUSE section
==
==================
6c7b9a3;Antonio Larrosa;2017-07-04 11:57:33 +0200;Fix openSUSE command and add openSUSE section
Fix the name of the borgbackup package in openSUSE and
add an openSUSE section on how to install development dependencies
to build borgbackup from sources.

==

docs/installation.rst
==================
808d24d;Thomas Waldmann;2017-07-04 05:50:08 +0200;use commit() in borg with-lock, fixes #1867

==

src/borg/archiver.py
==================
9bd5228;TW;2017-07-03 22:43:07 +0200;Merge pull request #2778 from enkore/f/fuse-versions-numbering
fuse: versions view, linear numbering by archive time
==
==================
6b20f2a;TW;2017-07-03 20:44:18 +0200;Merge pull request #2784 from ThomasWaldmann/prune-enhancements
prune enhancements / fixes
==
==================
ac98fe3;Thomas Waldmann;2017-07-03 01:23:37 +0200;prune: fix checkpoints processing with --glob-archives
before the fix, the archives_checkpoints list could not always contain
checkpoints as the glob regex matched the end of the name, so there
could be no additional ".checkpoint" after the match.

==

src/borg/archiver.py
src/borg/helpers.py
==================
d33b853;Thomas Waldmann;2017-07-03 01:14:53 +0200;shellpattern: add match_end arg
match_end=r"\Z" is the default, same behaviour as before
(create a full match up to the string end from the globbing pattern).

match_end=otherregex can be flexibly used to match anything else
after the regex generated from the globbing pattern.

==

src/borg/shellpattern.py
src/borg/testsuite/shellpattern.py
==================
35a3a6a;Thomas Waldmann;2017-07-03 00:54:53 +0200;prune: do globbing in Archives.list

==

src/borg/archiver.py
==================
e8bad14;enkore;2017-07-03 14:09:29 +0200;Merge pull request #2785 from ThomasWaldmann/fix-2700
patching objects does not work with the borg.exe binary, fixes #2700
==
==================
9a85653;Marian Beermann;2017-07-02 21:45:34 +0200;fuse: versions view, linear numbering by archive time

==

src/borg/_hashindex.c
src/borg/crypto/low_level.pyx
src/borg/fuse.py
src/borg/hashindex.pyx
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
116a60f;Thomas Waldmann;2017-07-03 01:55:11 +0200;patching objects does not work with the borg.exe binary, fixes #2700

==

src/borg/testsuite/archiver.py
==================
99ff779;TW;2017-07-03 01:33:25 +0200;Merge pull request #2777 from ThomasWaldmann/editorconfig
add a basic .editorconfig, fixes #2734
==
==================
0f1797b;enkore;2017-07-03 00:03:55 +0200;Merge pull request #2780 from enkore/fix/broken-filters
fix reversed archive ordering with --last
==
==================
41b52ff;Marian Beermann;2017-07-02 23:24:40 +0200;Archives.list: reverse result after applying all other filters

==

src/borg/helpers.py
==================
2db377d;Marian Beermann;2017-07-02 23:08:15 +0200;fix --last, --first accepting negative values
also don't accept zero, because every use of these doesn't cover that case,
and it arguably doesn't make a lot of sense.

==

src/borg/archiver.py
src/borg/helpers.py
==================
51c1c22;Marian Beermann;2017-07-02 22:39:21 +0200;fix reversed archive ordering with --last

==

src/borg/helpers.py
==================
46f363a;enkore;2017-07-02 22:48:11 +0200;Merge pull request #2779 from enkore/docs/mount-examples
docs: mount: show usage of archive filters
==
==================
8253dd2;Thomas Waldmann;2017-07-02 20:59:40 +0200;add a basic .editorconfig, fixes #2734

==

.editorconfig
==================
946f1a4;Marian Beermann;2017-07-02 22:14:36 +0200;docs: mount: show usage of archive filters
this is pretty vital, since the versions view is basically
useless without them.

==

docs/usage/mount.rst
==================
c624e71;TW;2017-07-02 19:12:19 +0200;Merge pull request #2775 from ThomasWaldmann/fuse-versions-file-ext
FUSE versions view: keep original file extension at end, fixes #2769
==
==================
51458b6;Thomas Waldmann;2017-07-02 18:11:21 +0200;FUSE versions view: keep original file extension at end, fixes #2769
some tools depend on seeing the correct file extension to operate
correctly, so put our version to the left of the file extension.

==

docs/usage/mount.rst
src/borg/fuse.py
==================
b939236;enkore;2017-07-02 18:31:17 +0200;Merge pull request #2774 from enkore/f/cleanup-c
Some C/Cython cleanup
==
==================
9827578;Marian Beermann;2017-07-02 15:07:09 +0200;hashindex: don't pass side effect into macro
Py_XDECREF and friends are explicitly written to use op
only once in CPython (and other code relies on this,
Py_XDECREF(something()) is fairly common), but other
implementations don't guarantee this.

So, let's make a rule: don't pass side effects into macros, full stop.

==

src/borg/_hashindex.c
==================
336d042;Marian Beermann;2017-07-02 14:59:56 +0200;crypto low_level: don't mutate local bytes()
CPython kind-of permits this (even by the docs),
other implementations don't. Allocate the result on the stack,
then copy to fresh bytes.

==

src/borg/crypto/low_level.pyx
==================
5cdd029;enkore;2017-06-30 17:48:28 +0200;Merge pull request #2768 from enkore/docs/no-l3toc
docs: no third level toc on command usage pages ("Description", "Examples")
==
==================
f6c3d1d;Marian Beermann;2017-06-30 17:41:58 +0200;docs: no third level toc on command usage pages ("Description", "Examples")

==

docs/_templates/globaltoc.html
docs/usage.rst
==================
193c185;enkore;2017-06-30 11:05:47 +0200;Merge pull request #2767 from enkore/issue/2462
docs: mount: add repository example
==
==================
52f76d2;Marian Beermann;2017-06-30 10:53:23 +0200;docs: mount: add repository example

==

docs/usage/mount.rst
==================
50066d7;enkore;2017-06-29 11:52:20 +0200;Merge pull request #2766 from enkore/issue/2765
docs: info: update and add examples
==
==================
4009a76;Marian Beermann;2017-06-29 11:48:58 +0200;docs: info: update and add examples
The form of the output has changed and
new output has been added.

==

docs/usage/info.rst
==================
0a7c4a8;enkore;2017-06-27 20:32:49 +0200;Merge pull request #2762 from enkore/issue/2760
key import: allow reading from stdin
==
==================
1f08ab4;enkore;2017-06-27 18:20:03 +0200;Merge pull request #2761 from enkore/f/missing-tests
archiver: add test for "create -" and "extract --stdout"
==
==================
29646d5;Marian Beermann;2017-06-27 16:15:47 +0200;key import: allow reading from stdin

==

src/borg/archiver.py
src/borg/crypto/keymanager.py
src/borg/helpers.py
src/borg/nanorst.py
src/borg/testsuite/helpers.py
==================
f037e2b;Marian Beermann;2017-06-27 16:06:01 +0200;archiver: add test for "create -" and "extract --stdout"

==

src/borg/testsuite/archiver.py
==================
c9e7167;enkore;2017-06-27 15:48:21 +0200;Merge pull request #2759 from enkore/f/missing-tests
Add some missing tests
==
==================
4af1142;Marian Beermann;2017-06-27 14:47:06 +0200;archiver: add test_benchmark_crud, fix bug
benchmark crud would just crash with a TypeError due to the missing return

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
5d60669;Marian Beermann;2017-06-27 14:35:44 +0200;archiver: add test for debug info

==

src/borg/testsuite/archiver.py
==================
38d6016;Marian Beermann;2017-06-27 14:33:47 +0200;archiver: add test for debug refcount-obj

==

src/borg/testsuite/archiver.py
==================
d0c1ea5;enkore;2017-06-27 14:21:23 +0200;Merge pull request #2758 from enkore/f/missing-tests
Add some missing tests
==
==================
6c67b64;Marian Beermann;2017-06-27 12:21:30 +0200;xattr: test split_lstring

==

src/borg/testsuite/xattr.py
==================
78f0e5d;Marian Beermann;2017-06-27 10:34:34 +0200;archiver: add test for paperkey import, fix bug

==

src/borg/crypto/keymanager.py
src/borg/testsuite/archiver.py
==================
7965efd;Marian Beermann;2017-06-27 10:11:57 +0200;version: add missing test for format_version, fix bug

==

src/borg/testsuite/version.py
src/borg/version.py
==================
12fd244;enkore;2017-06-27 10:05:21 +0200;Merge pull request #2748 from enkore/f/cleanup-argparse2
archiver: more argparse cleanup, redundant options, missing metavars
==
==================
d14711c;TW;2017-06-27 02:48:27 +0200;Merge pull request #2749 from ThomasWaldmann/include-attic-tgz
include attic.tar.gz when installing the package
==
==================
39a0912;Marian Beermann;2017-06-26 23:20:24 +0200;archiver: more consistent arguments formatting

==

src/borg/archiver.py
==================
97a76c2;Marian Beermann;2017-06-26 23:10:43 +0200;archiver: rename "filters" argument group to "Archive filters"

==

src/borg/archiver.py
==================
12bcccc;Marian Beermann;2017-06-26 23:10:12 +0200;docs: html: include group description in output

==

setup.py
==================
0a496c1;Marian Beermann;2017-06-26 22:50:57 +0200;archiver: define_archive_filters_group

==

src/borg/archiver.py
==================
0fabefd;Marian Beermann;2017-06-26 22:48:55 +0200;archiver: define_exclusion_group to avoid repetition

==

src/borg/archiver.py
==================
8aba577;Thomas Waldmann;2017-06-26 22:23:02 +0200;include attic.tar.gz when installing the package

==

setup.py
==================
cbeda1d;Marian Beermann;2017-06-26 21:04:39 +0200;archiver: more argparse cleanup, redundant options, missing metavars

==

src/borg/archiver.py
==================
1932fe8;TW;2017-06-26 01:42:11 +0200;Merge pull request #2731 from ThomasWaldmann/limit-unpacker-manifest
Manifest: use limited unpacker
==
==================
89f3cab;Thomas Waldmann;2017-06-24 18:31:34 +0200;move get_limited_unpacker to helpers
also: move some constants to borg.constants

==

src/borg/constants.py
src/borg/crypto/key.py
src/borg/helpers.py
src/borg/remote.py
src/borg/repository.py
==================
6c2c519;Thomas Waldmann;2017-06-23 05:56:41 +0200;Manifest: use limited unpacker

==

src/borg/constants.py
src/borg/crypto/key.py
src/borg/helpers.py
src/borg/remote.py
src/borg/testsuite/key.py
==================
c83c4d6;TW;2017-06-25 23:28:21 +0200;Merge pull request #2744 from edgewood/master
Split up interval parsing and filtering for --keep-within
==
==================
9c5425d;Ed Blackman;2017-06-21 22:25:45 -0400;Split up interval parsing from filtering for --keep-within
Fixes #2610

Parse --keep-within argument early, via new validator method interval
passed to argparse type=, so that better error messages can be given.

Also swallows ValueError stacktrace per the comment in the old code that
including it wasn't desirable.

==

src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
f3fc546;TW;2017-06-25 17:34:06 +0200;Merge pull request #2742 from htgoebel/patch-2
Vagrantfile: Fix set-up of cygwin and its sshd.
==
==================
ec4958f;TW;2017-06-25 00:37:09 +0200;Merge pull request #2740 from ThomasWaldmann/fuse-writing
FUSE vs. fuse
==
==================
045a676;Hartmut Goebel;2017-06-24 19:39:08 +0200;Vagrantfile: cygwin: Fix installation of pip.
cygwin is at python-3.6 now. Use version-independent `ensurepip`
to be future-proof.

==

Vagrantfile
==================
f962659;Hartmut Goebel;2017-06-24 19:22:39 +0200;Vagrantfile: cygwin: Prepend cygwin PATH.
Otherwise crippled programs of the pre-installed MLS-OpenSSHd's path
hide the cygwin programs.

==

Vagrantfile
==================
54a60c5;Hartmut Goebel;2017-06-24 17:43:24 +0200;Vagrantfile: cygwin: Fix permissions as required by sshd.

==

Vagrantfile
==================
b09e4ef;Hartmut Goebel;2017-06-24 15:19:03 +0200;Vagrantfile: cygwin: Run setup after setting PATH
Fixes #2609.

==

Vagrantfile
==================
4714a45;enkore;2017-06-24 11:24:36 +0200;Merge pull request #2741 from htgoebel/patch-1
Vagrantfile: Fix cygwin mirror URL.
==
==================
26c9225;Hartmut Goebel;2017-06-24 09:14:41 +0200;Vagrantfile: Fix cygwin mirror URL.
mirrors.kernel.org no longer offers ftp.
==

Vagrantfile
==================
7ebad4f;Thomas Waldmann;2017-06-24 01:24:14 +0200;FUSE vs. fuse

==

Vagrantfile
docs/changes.rst
docs/installation.rst
src/borg/archiver.py
src/borg/fuse.py
src/borg/testsuite/__init__.py
src/borg/testsuite/archiver.py
==================
4920ca3;enkore;2017-06-23 19:18:07 +0200;Merge pull request #2737 from rugk/docs-pruneex
Include prune example in doc
==
==================
310a9b3;Marian Beermann;2017-06-23 19:16:33 +0200;docs: prune: fix include path

==

docs/usage/prune.rst
==================
e967eda;rugk;2017-06-23 17:03:04 +0200;Include prune example in doc

==

docs/usage/prune.rst
==================
64be888;enkore;2017-06-23 19:12:01 +0200;Merge pull request #2736 from rugk/docs-sshrestrict
Fix typo
==
==================
6051969;rugk;2017-06-23 16:54:02 +0200;Fix typo

==

docs/usage/serve.rst
==================
36d22ae;enkore;2017-06-23 16:16:34 +0200;Merge pull request #2732 from rugk/docs-sshrestrict
Simplify ssh authorized_keys file
==
==================
5b0b4f4;rugk;2017-06-23 14:52:11 +0200;Remove unneccessary space

==

docs/usage/serve.rst
==================
41248bb;rugk;2017-06-23 14:50:00 +0200;Add legacy note & normalize order

==

docs/deployment/hosting-repositories.rst
docs/usage/serve.rst
==================
b27b989;rugk;2017-06-23 13:28:49 +0200;Simplify ssh authorized_keys file
Just using "restrict"; closes https://github.com/borgbackup/borg/issues/2121

==

docs/deployment/central-backup-server.rst
docs/quickstart.rst
docs/usage/serve.rst
==================
d3abf31;TW;2017-06-22 20:46:15 +0200;Merge pull request #2728 from ThomasWaldmann/travis-fakeroot
travis: install fakeroot for Linux
==
==================
b625a4c;Thomas Waldmann;2017-06-22 20:13:39 +0200;travis: install fakeroot for Linux
they removed it from the preinstalled sw stack.

==

.travis/install.sh
==================
7e625a4;TW;2017-06-22 00:52:00 +0200;Merge pull request #2723 from ThomasWaldmann/remove-hurd-noatime-skip
remove skipping the noatime tests on GNU/Hurd, fixes #2710
==
==================
49411d1;Thomas Waldmann;2017-06-21 15:59:44 +0200;remove skipping the noatime tests on GNU/Hurd, fixes #2710
I recently installed GNU/Hurd 2017 and found the atime test works now.

==

src/borg/testsuite/archiver.py
==================
1093632;enkore;2017-06-21 01:10:53 +0200;Merge pull request #2716 from enkore/docs/metavar
docs: format metavars more accurately
==
==================
771168a;Marian Beermann;2017-06-21 00:16:25 +0200;docs: extract: move cwd note to --help

==

docs/usage/extract.rst
src/borg/archiver.py
==================
09d0d56;Marian Beermann;2017-06-21 00:16:06 +0200;docs: with-lock: convert to proper admonition

==

src/borg/archiver.py
==================
88ae1eb;Marian Beermann;2017-06-21 00:02:57 +0200;docs: format metavars more accurately

==

setup.py
==================
710ca19;enkore;2017-06-20 21:01:23 +0200;Merge pull request #2715 from enkore/f/rare-opts2
delete: remove short option for --cache-only
==
==================
f30f61a;enkore;2017-06-20 21:01:05 +0200;Merge pull request #2714 from enkore/f/cleanup-argparse
argparse cleanup
==
==================
6e5ae6d;Marian Beermann;2017-06-20 18:13:10 +0200;delete: remove short option for --cache-only

==

src/borg/archiver.py
==================
82575db;Marian Beermann;2017-06-20 18:09:00 +0200;argparse cleanup
- action='store_true' implies default=False
- missing metavars added
- minor code formatting

==

src/borg/archiver.py
==================
51bce20;enkore;2017-06-20 15:49:10 +0200;Merge pull request #2713 from enkore/docs/compact-opt
docs: use DOM ready event, not document loaded event
==
==================
a9059a6;Marian Beermann;2017-06-20 15:48:30 +0200;docs: use DOM ready event, not document loaded event

==

docs/usage/benchmark_crud.rst.inc
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/export-tar.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/umount.rst.inc
docs/usage/upgrade.rst.inc
docs/usage/with-lock.rst.inc
setup.py
==================
8491de6;enkore;2017-06-20 15:41:15 +0200;Merge pull request #2712 from enkore/docs/compact-opt
docs: use tables for options, with even widths.
==
==================
23ee943;Marian Beermann;2017-06-20 15:32:39 +0200;docs: retain rST option list formatting (for Common Options)

==

docs/borg_theme/css/borg.css
==================
9d33ff1;Marian Beermann;2017-06-20 15:30:20 +0200;docs: skip empty option groups

==

docs/usage/benchmark_crud.rst.inc
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/umount.rst.inc
docs/usage/with-lock.rst.inc
setup.py
==================
e869e7d;Marian Beermann;2017-06-20 15:22:24 +0200;ran build_usage

==

docs/usage/benchmark_crud.rst.inc
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/export-tar.rst.inc
docs/usage/extract.rst.inc
docs/usage/help.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/umount.rst.inc
docs/usage/upgrade.rst.inc
docs/usage/with-lock.rst.inc
==================
b174787;Marian Beermann;2017-06-20 15:05:59 +0200;docs: various formatting fixes

==

src/borg/archiver.py
==================
e76fae0;Marian Beermann;2017-06-20 14:50:11 +0200;docs: uniform tables for listing options (HTML only)

==

docs/borg_theme/css/borg.css
setup.py
==================
8cc3e52;enkore;2017-06-20 12:01:08 +0200;Merge pull request #2711 from enkore/docs/compact-opt
docs: change options formatting
==
==================
a1a92bf;Marian Beermann;2017-06-20 11:53:36 +0200;docs: less space waste following "Common options"

==

docs/borg_theme/css/borg.css
docs/usage/benchmark_crud.rst.inc
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/export-tar.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/key.rst
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/umount.rst.inc
docs/usage/upgrade.rst.inc
docs/usage/with-lock.rst.inc
setup.py
==================
e5012b1;Marian Beermann;2017-06-20 11:49:26 +0200;ran build_usage

==

docs/usage/benchmark_crud.rst.inc
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/common-options.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/export-tar.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/umount.rst.inc
docs/usage/upgrade.rst.inc
docs/usage/with-lock.rst.inc
==================
6290b73;Marian Beermann;2017-06-20 11:19:26 +0200;docs: more compact options formatting

==

docs/borg_theme/css/borg.css
docs/conf.py
setup.py
==================
496922f;enkore;2017-06-20 01:06:40 +0200;changes: provisional 1.1.0rc1 header

==

docs/changes.rst
==================
4ebc907;enkore;2017-06-19 10:23:21 +0200;Merge pull request #2709 from enkore/docs/test
docs: move introduction sentence
==
==================
d495b0f;Marian Beermann;2017-06-19 10:01:55 +0200;docs: move introduction sentence

==

docs/internals.rst
docs/internals/data-structures.rst
==================
52da719;enkore;2017-06-19 09:58:41 +0200;Merge pull request #2707 from narendravardi/master
Don't perform full Travis build on docs-only changes #2531
==
==================
a4440da;Marian Beermann;2017-06-19 09:55:56 +0200;travis: print commit range

==

.travis.yml
==================
6e17ca7;Marian Beermann;2017-06-19 09:50:22 +0200;docs: fix typo

==

docs/internals/data-structures.rst
==================
bf14216;TW;2017-06-18 21:44:03 +0200;Merge pull request #2708 from ThomasWaldmann/vagrant-debian9
vagrant: add Debian 9 "stretch" 64bit
==
==================
379378f;Thomas Waldmann;2017-06-18 18:07:45 +0200;vagrant: add Debian 9 "stretch" 64bit

==

Vagrantfile
==================
3cd3de2;TW;2017-06-18 16:59:01 +0200;Merge pull request #2704 from borgbackup/rel110b6
release 1.1.0b6
==
==================
944ae4a;Narendra Vardi;2017-06-18 20:18:26 +0530;Don't perform full Travis build on docs-only changes #2531

==

.travis.yml
==================
0aac3a1;Thomas Waldmann;2017-06-18 05:28:33 +0200;MANIFEST.in: exclude .coafile (coala)

==

MANIFEST.in
==================
f741ac2;Thomas Waldmann;2017-06-18 05:07:46 +0200;CHANGES: add release date

==

docs/changes.rst
==================
064377a;TW;2017-06-18 14:34:31 +0200;Merge pull request #2703 from enkore/issue/2702
AdHocCache: avoid divison by zero
==
==================
55e1a54;Marian Beermann;2017-06-18 13:32:12 +0200;AdHocCache: avoid divison by zero
0.01 ~ "one tick or less". ymmv.

==

src/borg/cache.py
==================
308fb98;enkore;2017-06-18 12:14:28 +0200;Merge pull request #2701 from enkore/docs/fixes
docs: assorted formatting fixes
==
==================
1e2835e;Marian Beermann;2017-06-18 12:13:28 +0200;docs: man pages, usage.

==

docs/man/borg-benchmark-crud.1
docs/man/borg-benchmark.1
docs/man/borg-break-lock.1
docs/man/borg-change-passphrase.1
docs/man/borg-check.1
docs/man/borg-common.1
docs/man/borg-compression.1
docs/man/borg-create.1
docs/man/borg-delete.1
docs/man/borg-diff.1
docs/man/borg-export-tar.1
docs/man/borg-extract.1
docs/man/borg-info.1
docs/man/borg-init.1
docs/man/borg-key-change-passphrase.1
docs/man/borg-key-export.1
docs/man/borg-key-import.1
docs/man/borg-key-migrate-to-repokey.1
docs/man/borg-key.1
docs/man/borg-list.1
docs/man/borg-mount.1
docs/man/borg-patterns.1
docs/man/borg-placeholders.1
docs/man/borg-prune.1
docs/man/borg-recreate.1
docs/man/borg-rename.1
docs/man/borg-serve.1
docs/man/borg-umount.1
docs/man/borg-upgrade.1
docs/man/borg-with-lock.1
docs/man/borg.1
==================
c7dda0a;Marian Beermann;2017-06-18 12:12:50 +0200;docs: assorted formatting fixes

==

docs/usage/create.rst.inc
docs/usage/help.rst.inc
src/borg/archiver.py
==================
5405f1b;TW;2017-06-18 05:04:56 +0200;Merge pull request #2655 from ThomasWaldmann/update-changes
update CHANGES (master)
==
==================
9031490;Thomas Waldmann;2017-06-10 20:58:27 +0200;update CHANGES (master)

==

docs/changes.rst
==================
7df6597;TW;2017-06-18 03:22:06 +0200;Merge pull request #2654 from enkore/f/no-cache-sync
create: --no-cache-sync
==
==================
02c7b77;enkore;2017-06-18 02:35:24 +0200;Merge pull request #2699 from enkore/docs/faq-typo
docs: faq: fix typo and strange link text
==
==================
bde828d;Marian Beermann;2017-06-18 02:34:25 +0200;docs: faq: fix typo and strange link text

==

docs/faq.rst
==================
0747b3e;enkore;2017-06-18 02:29:31 +0200;Merge pull request #2698 from enkore/docs/table-borders
docs: neater table borders
==
==================
5e9f069;Marian Beermann;2017-06-18 02:28:49 +0200;docs: neater table borders

==

docs/borg_theme/css/borg.css
==================
31517ca;enkore;2017-06-18 02:13:20 +0200;Merge pull request #2697 from enkore/f/docs-accidental-quotes
docs: index: disable syntax highlight (bash)
==
==================
89f8845;Marian Beermann;2017-06-18 02:12:47 +0200;docs: index: disable syntax highlight (bash)

==

docs/index.rst
==================
df4180e;enkore;2017-06-18 02:11:02 +0200;Merge pull request #2696 from enkore/f/docs-accidental-quotes
docs: fix accidental block quotes
==
==================
125b02c;Marian Beermann;2017-06-18 02:10:10 +0200;docs: list: fix unintended block quote

==

docs/usage/list.rst.inc
src/borg/helpers.py
==================
48e8158;Marian Beermann;2017-06-18 02:07:37 +0200;docs: usage: fix unintended block quota in common options

==

docs/usage/common-options.rst.inc
docs/usage/help.rst.inc
docs/usage/init.rst.inc
docs/usage/upgrade.rst.inc
setup.py
==================
4689fd0;Marian Beermann;2017-06-18 02:04:21 +0200;cache: explain fetch_missing_csize cost

==

src/borg/cache.py
==================
0462a56;Marian Beermann;2017-06-12 09:16:05 +0200;item: explicate csize isn't memorizable

==

src/borg/item.pyx
src/borg/testsuite/item.py
==================
2cbff48;Marian Beermann;2017-06-11 20:11:34 +0200;AdHocCache: explicate chunk_incref assertion

==

src/borg/cache.py
==================
5eeca34;Marian Beermann;2017-06-11 11:29:41 +0200;TestAdHocCache

==

src/borg/archiver.py
src/borg/cache.py
src/borg/testsuite/cache.py
==================
3c82574;Marian Beermann;2017-06-10 19:22:20 +0200;cache sync: fetch_missing_csize don't check ids against empty idx
This is always the case if self.do_cache is False.

==

src/borg/cache.py
src/borg/testsuite/archiver.py
==================
fc7c560;Marian Beermann;2017-06-10 19:17:17 +0200;AdHocCache: fix size not propagating to incref

==

src/borg/cache.py
==================
8aa745d;Marian Beermann;2017-06-10 17:59:41 +0200;create: --no-cache-sync

==

conftest.py
docs/internals/frontends.rst
src/borg/archiver.py
src/borg/cache.py
src/borg/hashindex.pyx
src/borg/helpers.py
src/borg/repository.py
src/borg/testsuite/archiver.py
==================
4b38a17;enkore;2017-06-18 01:58:18 +0200;Merge pull request #2695 from enkore/docs/themefix
docs: theme tweaks
==
==================
334fa9f;Marian Beermann;2017-06-18 01:56:36 +0200;docs: add some cell-padding to tables

==

docs/borg_theme/css/borg.css
==================
658fd25;Marian Beermann;2017-06-18 01:53:14 +0200;docs: fix overeager CSS selector ballooning badges

==

docs/borg_theme/css/borg.css
==================
4369d30;enkore;2017-06-18 01:39:47 +0200;Merge pull request #2694 from enkore/docs/themefix
switch docs theme
==
==================
e880c7c;Marian Beermann;2017-06-18 01:37:32 +0200;docs: sidebar pixel-tweak

==

docs/borg_theme/css/borg.css
==================
887df51;Marian Beermann;2017-06-18 01:31:32 +0200;docs: development: update docs remarks

==

docs/development.rst
==================
7df1140;Marian Beermann;2017-06-18 01:24:37 +0200;docs: installation: fix accidental block quotes

==

docs/installation.rst
==================
3fea2ac;Marian Beermann;2017-06-18 01:24:27 +0200;docs: switch to a fresher theme
incidentally, fixes font size mismatches on firefox and chrome,
at the same time. marvellous.

==

docs/_templates/globaltoc.html
docs/_templates/logo-text.html
docs/borg_theme/css/borg.css
docs/conf.py
requirements.d/docs.txt
==================
fa9940f;TW;2017-06-17 23:48:27 +0200;Merge pull request #2693 from ThomasWaldmann/hashindex-keyerror
implement Hashindex.__delete__ KeyError, more tests, fix double delete
==
==================
726051b;Thomas Waldmann;2017-06-17 20:17:08 +0200;fix double delete in rebuild_refcounts
in case of the Manifest having an IntegrityError,
the entry for the manifest was already deleted.

==

src/borg/archive.py
==================
72ef24c;Thomas Waldmann;2017-06-17 20:00:06 +0200;hashindex: implement KeyError

==

src/borg/_hashindex.c
src/borg/hashindex.pyx
src/borg/helpers.py
src/borg/testsuite/hashindex.py
==================
b7b6abc;Thomas Waldmann;2017-06-17 19:32:39 +0200;hashindex: more tests for basics
KeyError test failing due to bug.

==

src/borg/testsuite/hashindex.py
==================
767f72b;enkore;2017-06-17 17:05:04 +0200;Merge pull request #2692 from enkore/f/initopts
remove short options for rarely used options / commands
==
==================
3f72790;Marian Beermann;2017-06-17 16:44:13 +0200;upgrade: remove short option for --inplace

==

src/borg/archiver.py
==================
28f944b;Marian Beermann;2017-06-17 16:40:56 +0200;init: remove short option for --append-only

==

src/borg/archiver.py
==================
b1dab2c;enkore;2017-06-17 14:38:38 +0200;Merge pull request #2689 from enkore/docs/formatting-i2650
docs: minor formatting fixes
==
==================
b1205a7;Marian Beermann;2017-06-17 14:32:37 +0200;docs: fix too small text in tables

==

docs/borg_theme/css/borg.css
==================
0288fff;Marian Beermann;2017-06-17 14:29:14 +0200;docs: explain formatting

==

docs/usage/general.rst
docs/usage_general.rst.inc
==================
02ada03;Marian Beermann;2017-06-17 14:29:04 +0200;docs: remove more boxes around monospace

==

docs/borg_theme/css/borg.css
==================
7d11b44;enkore;2017-06-17 14:17:02 +0200;Merge pull request #2686 from enkore/docs/i2651
init: note possible denial of service with "none" mode
==
==================
8687495;Marian Beermann;2017-06-17 12:12:55 +0200;docs: css: avoid scroll bars on tables

==

docs/borg_theme/css/borg.css
==================
a04625c;Marian Beermann;2017-06-17 12:07:12 +0200;nanorst: better inline formatting in tables

==

src/borg/archiver.py
src/borg/nanorst.py
==================
97089fe;Marian Beermann;2017-06-17 11:54:06 +0200;init: note possible denial of service with "none" mode

==

src/borg/archiver.py
==================
a013bd7;enkore;2017-06-17 12:38:48 +0200;Merge pull request #2687 from enkore/docs/formatting-i2650
More consistent docs formatting
==
==================
829f05d;enkore;2017-06-17 12:37:43 +0200;Merge pull request #2685 from enkore/docs/i2624
document pattern denial of service
==
==================
dd8a815;Marian Beermann;2017-06-17 12:35:24 +0200;docs: html: format `option values` like in man pages

==

docs/borg_theme/css/borg.css
==================
5d9beb5;Marian Beermann;2017-06-17 12:33:01 +0200;docs: html: less annoying `` in running text

==

docs/borg_theme/css/borg.css
==================
b08064b;Marian Beermann;2017-06-17 12:29:13 +0200;docs: turn smartypants back on, since --options are now in ``

==

docs/conf.py
==================
772be8f;Marian Beermann;2017-06-17 12:28:42 +0200;python setup.py build_usage

==

docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/export-tar.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/key_import.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
==================
26970cd;Marian Beermann;2017-06-17 12:28:16 +0200;delete docs/misc/compression.conf

==

docs/misc/compression.conf
==================
5aa865c;Marian Beermann;2017-06-17 12:27:53 +0200;docs: double backticks for --options

==

docs/deployment/central-backup-server.rst
docs/faq.rst
docs/usage/notes.rst
docs/usage_general.rst.inc
==================
bd701e5;Marian Beermann;2017-06-17 12:20:25 +0200;docs: backticks for option values

==

src/borg/archiver.py
==================
48642d7;Marian Beermann;2017-06-17 12:18:52 +0200;docs: double backticks for --options

==

src/borg/archiver.py
==================
1f5ddb6;Marian Beermann;2017-06-17 11:59:56 +0200;document pattern denial of service

==

src/borg/archiver.py
==================
2b13607;enkore;2017-06-16 11:44:23 +0200;init: shaext is supported in openssl and better on ryzen than b2

==

src/borg/archiver.py
==================
5eeaf7a;enkore;2017-06-16 09:48:09 +0200;Merge pull request #2660 from enkore/issue/2659
cache sync: check Operation.READ compatibility with manifest
==
==================
b6a4cf1;enkore;2017-06-16 09:43:51 +0200;Merge pull request #2676 from enkore/f/fusecache
fuse: redo ItemCache
==
==================
b2a4ae6;Marian Beermann;2017-06-16 00:41:38 +0200;lrucache: use explicit sentinel instead of None
just in case someone wants to cache a big pile of nothing

==

src/borg/lrucache.py
==================
2766693;Marian Beermann;2017-06-15 23:50:17 +0200;fuse: update comments

==

src/borg/fuse.py
==================
7877aab;enkore;2017-06-15 09:05:44 +0200;Merge pull request #2678 from enkore/f/chunker-buzhash
chunker: fix invalid use of types
==
==================
faf2d0b;Marian Beermann;2017-06-14 19:16:36 +0200;chunker: fix invalid use of types
With the argument specified as unsigned char *, Cython emits
code in the Python wrapper to convert string-like objects to
unsigned char* (essentially PyBytes_AS_STRING).

Because the len(data) call is performed on a cdef'd string-ish type,
Cython emits a strlen() call, on the result of PyBytes_AS_STRING.

This is not correct, since embedded null bytes are entirely possible.

Incidentally, the code generated by Cython was also not correct,
since the Clang Static Analyzer found a path of execution where
passing arguments in a weird way from Python resulted in strlen(NULL).

Formulated like this, Cython emits essentially:

c_buzhash(
 PyBytes_AS_STRING(data),
 PyObject_Length(data),
 ...
)

which is correct.

==

src/borg/chunker.pyx
==================
3b928a4;Marian Beermann;2017-06-14 12:15:46 +0200;fuse: refactor ItemCache

==

src/borg/fuse.py
src/borg/lrucache.py
src/borg/testsuite/lrucache.py
==================
9fd79a9;Marian Beermann;2017-06-14 11:14:10 +0200;fuse: decrypted cache

==

src/borg/archiver.py
src/borg/fuse.py
==================
f04119c;Marian Beermann;2017-06-13 23:52:17 +0200;fuse: ItemCache on top of object cache

==

src/borg/fuse.py
==================
ec53230;Marian Beermann;2017-06-13 23:36:12 +0200;fuse: remove unnecessary normpaths

==

src/borg/fuse.py
==================
8e47741;enkore;2017-06-14 09:31:55 +0200;Merge pull request #2675 from enkore/f/fusecache
fuse: instrumentation
==
==================
ff05895;Marian Beermann;2017-06-13 23:14:52 +0200;fuse: don't keep all Archive() instances around
they're only needed inside process_archive, and not needed in general
for pending_archives.

==

src/borg/fuse.py
==================
879f72f;Marian Beermann;2017-06-13 23:06:00 +0200;fuse: log process_archive timing
the easier alternative to "/bin/time stat mountpoint/<archive>/..."

==

src/borg/fuse.py
==================
c791921;Marian Beermann;2017-06-13 20:03:39 +0200;fuse: instrument caches
note: signal processing can be arbitrarily delayed;
Python processes signals as soon as the code returns into the interpreter
loop, which doesn't happen unless libfuse returns control, i.e.
some request has been sent to the file system.

==

src/borg/fuse.py
src/borg/remote.py
==================
ae16230;enkore;2017-06-13 22:51:03 +0200;Merge pull request #2672 from enkore/f/fastinfo
info: use CacheSynchronizer & HashIndex.stats_against
==
==================
b51198e;TW;2017-06-13 19:53:54 +0200;Merge pull request #2673 from ThomasWaldmann/negative-ids
FUSE: fix negative uid/gid crash, fixes #2674
==
==================
ccd066f;Thomas Waldmann;2017-06-13 18:30:42 +0200;FUSE: fix negative uid/gid crash, fixes #2674
they could come into archives e.g. when backing up
external drives under cygwin.

==

src/borg/fuse.py
==================
130e677;TW;2017-06-13 19:08:20 +0200;Merge pull request #2665 from ThomasWaldmann/vagrant-openindiana
vagrant: add OpenIndiana
==
==================
e189a4d;Marian Beermann;2017-06-13 14:15:37 +0200;info: use CacheSynchronizer & HashIndex.stats_against

==

src/borg/archive.py
src/borg/cache_sync/cache_sync.c
src/borg/cache_sync/unpack.h
src/borg/hashindex.pyx
src/borg/helpers.py
==================
fd1efba;enkore;2017-06-13 13:13:33 +0200;Merge pull request #2671 from enkore/f/chunkerub
chunker: don't do uint32_t >> 32
==
==================
6ce7b95;enkore;2017-06-13 13:13:06 +0200;Merge pull request #2670 from enkore/f/fcs-playnice
cache sync: don't do memcpy(..., 0, 0)
==
==================
944a4ab;Marian Beermann;2017-06-13 11:42:43 +0200;chunker: don't do uint32_t >> 32

==

src/borg/_chunker.c
==================
4490a8b;Marian Beermann;2017-06-13 11:16:04 +0200;cache sync: don't do memcpy(..., 0, 0)
!ctx->buf => ctx->tail - ctx->head == 0

==

src/borg/cache_sync/cache_sync.c
==================
f3f3710;enkore;2017-06-13 09:25:13 +0200;Merge pull request #2669 from ThomasWaldmann/no-extract-stdout
don't write to disk with --stdout, fixes #2645
==
==================
0b00c14;Thomas Waldmann;2017-06-13 01:12:14 +0200;don't write to disk with --stdout, fixes #2645
if we always give stdout to extract_item(), it gets into the stdout-
processing branch which only emits data from items that have chunks
and does nothing for items which don't.

==

src/borg/archiver.py
==================
c9c227f;Marian Beermann;2017-06-11 12:37:20 +0200;cache sync: check Operation.READ compatibility with manifest

==

src/borg/cache.py
src/borg/testsuite/archiver.py
==================
2ff880e;TW;2017-06-12 22:31:07 +0200;Merge pull request #2668 from philippje/patch-1
changed the date of "day without backup"
==
==================
88e937d;philippje;2017-06-12 22:17:29 +0200;changed the date of day without backup
Changed from 20. December to 19. December for easier comprehension (viewing the calendar.)
The missing 'd' at 20. December is hardly noticeable compared to e.g. the 19. December.
==

docs/misc/prune-example.txt
==================
fca40c6;enkore;2017-06-12 11:28:18 +0200;Merge pull request #2666 from enkore/f/fcs-gccwarn
cache sync: suppress GCC C90/C99 int literal warning
==
==================
78cbf69;Marian Beermann;2017-06-12 10:53:55 +0200;cache sync: suppress GCC C90/C99 int literal warning
warning: this decimal constant is unsigned only in ISO C90

Raised by GCC 4.9.2 on PowerPC.

The warning is bogus here due to the immediate explicit cast; newer
versions don't emit it.

==

src/borg/cache_sync/unpack.h
==================
dff5f20;Thomas Waldmann;2017-06-12 03:29:37 +0200;vagrant: add OpenIndiana

==

Vagrantfile
==================
99b28a0;TW;2017-06-12 03:09:29 +0200;Merge pull request #2664 from ThomasWaldmann/vagrant-fix
Vagrantfile: backslash needs escaping
==
==================
a6dc6b6;Thomas Waldmann;2017-06-12 03:04:31 +0200;Vagrantfile: backslash needs escaping

==

Vagrantfile
==================
148a8a8;enkore;2017-06-11 21:27:25 +0200;Merge pull request #2663 from enkore/f/fcs-changes
cache sync changes
==
==================
eb6deb9;enkore;2017-06-11 20:47:57 +0200;Merge pull request #2642 from enkore/docs/deployment-local
docs: deployment: Automated backups to a local hard drive
==
==================
501859c;Marian Beermann;2017-06-09 18:43:24 +0200;docs: less bothersome experimental stripes

==

docs/borg_theme/css/borg.css
docs/usage/general.rst
==================
25bee21;Marian Beermann;2017-06-09 16:54:55 +0200;docs: deployment: Automated backups to a local hard drive

==

docs/borg_theme/css/borg.css
docs/deployment.rst
docs/deployment/automated-local.rst
docs/deployment/hosting-repositories.rst
==================
783a592;Marian Beermann;2017-06-11 20:23:17 +0200;cache sync: introduce BORG_NO_PYTHON
textshell edition

==

scripts/fuzz-cache-sync/main.c
src/borg/_hashindex.c
==================
3c6372f;Marian Beermann;2017-06-11 19:46:12 +0200;cache sync: convert incoming integers to uint64_t

==

src/borg/cache_sync/unpack.h
==================
f786211;Marian Beermann;2017-06-11 19:44:33 +0200;RepositoryCache: truncate+unlink errored file

==

src/borg/remote.py
src/borg/testsuite/remote.py
==================
49d74e1;enkore;2017-06-11 20:01:32 +0200;Merge pull request #2661 from enkore/f/consistent-key-names
normalize authenticated key modes
==
==================
ffea54d;enkore;2017-06-11 19:24:10 +0200;Merge pull request #2658 from enkore/issue/2448
implement --glob-archives/-a
==
==================
221dc1c;Marian Beermann;2017-06-11 13:35:23 +0200;normalize authenticated key modes
rename authenticated to authenticated-blake2, consistent with the other
blake2 key modes

add authenticated mode that fills the blank and is consistent with the
other "unqualified" key modes

==

docs/man/borg-init.1
docs/usage/init.rst.inc
src/borg/archiver.py
src/borg/crypto/key.py
src/borg/testsuite/key.py
==================
de00d9d;enkore;2017-06-11 12:29:12 +0200;Merge pull request #2602 from enkore/pr/2134.docs
internals: rewrite manifest & feature flags
==
==================
bffcc60;Marian Beermann;2017-06-11 12:27:52 +0200;docs: internals: feature flags typos, clarifications

==

docs/internals/data-structures.rst
==================
5f5371f;Marian Beermann;2017-06-11 12:13:42 +0200;implement --glob-archives/-a

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
a7fb74d;enkore;2017-06-11 11:43:41 +0200;Merge pull request #2657 from enkore/issue/2656
cache sync: move assert() behind declarations
==
==================
49ca3dc;Marian Beermann;2017-06-11 11:42:39 +0200;cache sync: move assert() behind declarations

==

src/borg/cache_sync/unpack_template.h
==================
86363dc;textshell;2017-06-10 17:50:28 +0200;Merge pull request #2648 from textshell/feature/mandatory-features-master
Add minimal version of in repository mandatory feature flags. (master)
==
==================
33a7331;enkore;2017-06-10 17:15:22 +0200;Merge pull request #2643 from enkore/f/experimental-patterns
mark --pattern, --patterns-from as experimental
==
==================
13f396d;enkore;2017-06-10 17:13:25 +0200;Merge pull request #2638 from enkore/f/fastcachesync-minify
Compact chunks.archive.d
==
==================
d06ee56;enkore;2017-06-10 17:12:51 +0200;Merge pull request #2572 from enkore/f/fastcachesync
Improve cache sync speed
==
==================
4cd1cc6;Marian Beermann;2017-06-10 12:06:18 +0200;docs: correct create exclude comment

==

docs/usage/create.rst
==================
a5ff866;enkore;2017-06-10 12:04:37 +0200;Merge pull request #2649 from rugk/docs-re
Remove re docs
==
==================
4987c04;rugk;2017-06-10 11:57:06 +0200;Remove re docs
Fixes https://github.com/borgbackup/borg/issues/2458

==

docs/usage/create.rst
==================
e63808a;Martin Hostettler;2017-06-06 22:37:53 +0200;Add tests for cache compatibility code.

==

conftest.py
src/borg/testsuite/archiver.py
==================
b8ad8b8;Martin Hostettler;2017-05-28 18:04:33 +0200;Cache: Wipe cache if compatibility is not sure
Add detection of possibly incompatible combinations
of the borg versions maintaining the cache and the featues used.

==

src/borg/cache.py
src/borg/helpers.py
==================
005068d;Martin Hostettler;2017-06-10 11:42:42 +0200;Improve robustness of monkey patching borg.constants.PBKDF2_ITERATIONS. And add lots of warnings.

==

conftest.py
src/borg/__init__.py
==================
5cab720;Marian Beermann;2017-06-09 19:24:45 +0200;mark --pattern, --patterns-from as experimental

==

docs/usage/create.rst.inc
docs/usage/diff.rst.inc
docs/usage/export-tar.rst.inc
docs/usage/extract.rst.inc
docs/usage/help.rst.inc
docs/usage/list.rst.inc
docs/usage/recreate.rst.inc
src/borg/archiver.py
==================
827c478;Marian Beermann;2017-06-09 19:22:18 +0200;nanorst for "borg help TOPIC"

==

docs/usage/benchmark_crud.rst.inc
docs/usage/help.rst.inc
docs/usage/recreate.rst.inc
src/borg/archiver.py
src/borg/nanorst.py
src/borg/testsuite/archiver.py
src/borg/testsuite/nanorst.py
==================
0e31f78;Marian Beermann;2017-06-10 10:12:06 +0200;cache sync: avoid "l" and such as a variable name, note vanilla changes

==

src/borg/cache_sync/unpack.h
src/borg/cache_sync/unpack_template.h
==================
5eb43b8;Marian Beermann;2017-06-10 10:05:43 +0200;cache sync: give overview of the source's structure

==

src/borg/cache_sync/cache_sync.c
==================
310a71e;Marian Beermann;2017-06-10 09:56:41 +0200;cache sync: use ro_buffer to accept bytes, memoryview, ...

==

src/borg/hashindex.pyx
==================
1176a1c;Martin Hostettler;2017-03-12 11:04:26 +0100;permit manifest version 2 as well 1 one.

==

src/borg/helpers.py
==================
193e8bc;Martin Hostettler;2017-03-12 14:12:04 +0100;Add tests for mandatory repository feature flags.

==

src/borg/testsuite/archiver.py
==================
fd0250d;Martin Hostettler;2017-02-06 23:19:02 +0100;Add minimal version of in repository mandatory feature flags.
This should allow us to make sure older borg versions can be cleanly
prevented from doing operations that are no longer safe because of
repository format evolution. This allows more fine grained control than
just incrementing the manifest version. So for example a change that
still allows new archives to be created but would corrupt the repository
when an old version tries to delete an archive or check the repository
would add the new feature to the check and delete set but leave it out
of the write set.

This is somewhat inspired by ext{2,3,4} which uses sets for
compat (everything except fsck), ro-compat (may only be accessed
read-only by older versions) and features (refuse all access).

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
9bc00f0;enkore;2017-06-09 16:59:42 +0200;Merge pull request #2641 from Gelma/master
Fix typos
==
==================
e4247cc;Andrea Gelmini;2017-06-09 16:49:30 +0200;Fix typos

==

docs/changes.rst
docs/installation.rst
docs/man/borg-patterns.1
docs/man/borg.1
docs/usage/help.rst.inc
docs/usage_general.rst.inc
src/borg/algorithms/crc32_slice_by_8.c
src/borg/archiver.py
src/borg/constants.py
src/borg/crypto/nonces.py
src/borg/helpers.py
src/borg/remote.py
src/borg/repository.py
==================
13fe802;Marian Beermann;2017-06-09 16:01:01 +0200;docs: deployment: hosting repositories

==

docs/deployment.rst
docs/deployment/hosting-repositories.rst
==================
c5d2c7c;Marian Beermann;2017-06-09 16:00:46 +0200;docs: split deployment

==

docs/deployment.rst
docs/deployment/central-backup-server.rst
==================
7d400a3;enkore;2017-06-09 15:09:59 +0200;Merge pull request #2639 from enkore/docs/experimental
docs: highlight experimental features in online docs
==
==================
3664adb;Marian Beermann;2017-06-09 13:57:27 +0200;docs: highlight experimental features in online docs

==

docs/borg_theme/css/borg.css
docs/conf.py
docs/usage/general.rst
==================
1d5d504;Marian Beermann;2017-06-09 11:21:50 +0200;hashindex_compact: use memmove for possibly overlapping copy

==

src/borg/_hashindex.c
==================
a75bfae;Marian Beermann;2017-06-09 11:14:31 +0200;testsuite: Corruption test_chunks_archive, adapt for .compact

==

src/borg/testsuite/archiver.py
==================
92a01f9;Marian Beermann;2017-06-09 11:13:13 +0200;cache sync: fix incorrect .integrity location for .compact

==

src/borg/cache.py
==================
3789459;Marian Beermann;2017-06-09 11:10:49 +0200;cache sync: extract read_archive_index function

==

src/borg/cache.py
==================
09a9d89;Marian Beermann;2017-06-09 11:07:17 +0200;cache sync: convert existing archive chunks idx to compact

==

src/borg/cache.py
==================
295ac86;Marian Beermann;2017-06-09 10:57:58 +0200;testsuite: hashindex: test compact -> merge

==

src/borg/testsuite/hashindex.py
==================
1379af2;Marian Beermann;2017-06-04 19:50:25 +0200;HashIndexCompactTestCase

==

src/borg/testsuite/hashindex.py
==================
6e011b9;Marian Beermann;2017-05-27 21:50:28 +0200;cache: compact hashindex before writing to chunks.archive.d

==

src/borg/_hashindex.c
src/borg/cache.py
src/borg/hashindex.pyx
src/borg/helpers.py
src/borg/remote.py
src/borg/testsuite/hashindex.py
==================
eeaeaf9;TW;2017-06-09 00:08:01 +0200;Merge pull request #2634 from ThomasWaldmann/cygwin
enable remote tests on cygwin
==
==================
554ac74;enkore;2017-06-08 17:39:43 +0200;Merge pull request #2636 from enkore/issue/2634
hashindex: Cython defines PY_SSIZE_T_CLEAN
==
==================
b75c214;Marian Beermann;2017-06-08 15:16:52 +0200;hashindex: Cython defines PY_SSIZE_T_CLEAN

==

src/borg/_hashindex.c
==================
6add4da;enkore;2017-06-08 13:11:58 +0200;Merge pull request #2635 from borgbackup/enkore-patch-1
gitattributes: docs/usage/*.rst.INC merge=ours
==
==================
63d94cd;enkore;2017-06-08 13:11:49 +0200;gitattributes: docs/usage/*.rst.INC merge=ours

==

.gitattributes
==================
524e0b5;enkore;2017-06-08 12:27:16 +0200;docs: development: vagrant, windows10 requirements

==

docs/development.rst
==================
4766d66;Thomas Waldmann;2017-06-08 02:23:57 +0200;enable remote tests on cygwin
the cygwin issue that caused these tests to break was fixed in cygwin
at least since cygwin 2.8.0 (maybe even since 2.7.0).

also added a comment to our workaround (os_write wrapper, that is needed
still for people running older cygwin versions) that it can be removed
when cygwin 2.8.0 is considered ancient (and everybody has upgraded to
some fixed version).

==

src/borg/remote.py
src/borg/testsuite/archiver.py
src/borg/testsuite/repository.py
==================
19c8adb;enkore;2017-06-08 02:00:55 +0200;Merge pull request #2632 from enkore/docs/nanorst
nanorst for --help
==
==================
b0e4c43;enkore;2017-06-08 00:19:38 +0200;Merge pull request #2633 from enkore/precise-pangolin
borg.algorithms definition
==
==================
5b9c34f;Marian Beermann;2017-06-07 23:53:19 +0200;borg.algorithms definition

==

src/borg/algorithms/__init__.py
==================
3f8a022;Marian Beermann;2017-05-02 18:52:36 +0200;Revert "move chunker to borg.algorithms"
This reverts commit 956b50b29cb6d3aec6b7a02d46325e8ab50bc149.

# Conflicts:
#	setup.py
#	src/borg/archive.py
#	src/borg/helpers.py

==

.gitignore
setup.py
src/borg/_chunker.c
src/borg/algorithms/buzhash.c
src/borg/algorithms/chunker.pyx
src/borg/archive.py
src/borg/chunker.pyx
src/borg/helpers.py
src/borg/testsuite/chunker.py
==================
1cf0310;Marian Beermann;2017-06-07 13:50:20 +0200;nanorst for --help

==

src/borg/archiver.py
src/borg/nanorst.py
src/borg/testsuite/archiver.py
src/borg/testsuite/nanorst.py
==================
300f295;enkore;2017-06-07 16:31:02 +0200;Merge pull request #2631 from enkore/docs/man-examples-fix
docs: fix build_man for relocated examples
==
==================
0d6064e;Marian Beermann;2017-06-07 16:29:37 +0200;docs: fix build_man for relocated examples

==

docs/usage/create.rst
docs/usage/extract.rst
docs/usage/init.rst
setup.py
==================
2118fb4;enkore;2017-06-07 11:29:40 +0200;Merge pull request #2630 from enkore/issue/2252
docs: faq: Can I use Borg on SMR hard drives?
==
==================
cd67628;Marian Beermann;2017-06-07 11:28:37 +0200;docs: changes: fix rst warning

==

docs/changes.rst
==================
07deaf1;Marian Beermann;2017-06-07 11:24:21 +0200;docs: faq: Can I use Borg on SMR hard drives?

==

docs/faq.rst
==================
fa28d48;enkore;2017-06-07 11:06:58 +0200;Merge pull request #2629 from enkore/f/gitignore
update .gitignore
==
==================
ee821a7;Marian Beermann;2017-06-07 11:06:37 +0200;update .gitignore

==

.gitignore
==================
02a8205;enkore;2017-06-07 10:00:08 +0200;Merge pull request #2627 from enkore/docs/split-usage
docs: split usage
==
==================
af979c2;TW;2017-06-07 02:04:25 +0200;Merge pull request #2617 from ThomasWaldmann/fix-parse-version
fix parse_version, add tests, fixes #2556
==
==================
a7e8e8c;Thomas Waldmann;2017-06-06 00:42:12 +0200;fix parse_version, add tests, fixes #2556

==

src/borg/testsuite/version.py
src/borg/version.py
==================
fb26b3c;enkore;2017-06-07 00:49:02 +0200;Merge pull request #2622 from enkore/issue/2557
repository: truncate segments before unlinking
==
==================
13adc80;Marian Beermann;2017-06-07 00:44:53 +0200;docs: usage: avoid bash highlight, [options] instead of <options>

==

docs/usage/benchmark_crud.rst.inc
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/export-tar.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/umount.rst.inc
docs/usage/upgrade.rst.inc
docs/usage/with-lock.rst.inc
setup.py
==================
22311ab;Marian Beermann;2017-06-07 00:42:26 +0200;docs: usage: add benchmark page
Previously, benchmark crud was not contained in the usage pages
at all.

==

docs/usage.rst
docs/usage/benchmark.rst
==================
8fb7db7;Marian Beermann;2017-06-07 00:06:36 +0200;docs: split usage

==

docs/borg_theme/css/borg.css
docs/usage.rst
docs/usage/benchmark_crud.rst.inc
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst
docs/usage/check.rst.inc
docs/usage/create.rst
docs/usage/create.rst.inc
docs/usage/debug.rst
docs/usage/delete.rst
docs/usage/delete.rst.inc
docs/usage/diff.rst
docs/usage/diff.rst.inc
docs/usage/export-tar.rst.inc
docs/usage/extract.rst
docs/usage/extract.rst.inc
docs/usage/general.rst
docs/usage/help.rst
docs/usage/info.rst
docs/usage/info.rst.inc
docs/usage/init.rst
docs/usage/init.rst.inc
docs/usage/key.rst
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/list.rst
docs/usage/list.rst.inc
docs/usage/lock.rst
docs/usage/mount.rst
docs/usage/mount.rst.inc
docs/usage/notes.rst
docs/usage/prune.rst
docs/usage/prune.rst.inc
docs/usage/recreate.rst
docs/usage/recreate.rst.inc
docs/usage/rename.rst
docs/usage/rename.rst.inc
docs/usage/serve.rst
docs/usage/serve.rst.inc
docs/usage/tar.rst
docs/usage/umount.rst.inc
docs/usage/upgrade.rst
docs/usage/upgrade.rst.inc
docs/usage/with-lock.rst.inc
setup.py
==================
bc23890;enkore;2017-06-07 00:17:21 +0200;Merge pull request #2626 from enkore/docs/broken-changelog
docs: fix broken changes listing of 1.1.0b6
==
==================
52afd5f;Marian Beermann;2017-06-07 00:17:05 +0200;docs: fix broken changes listing of 1.1.0b6

==

docs/changes.rst
==================
bdd5f7c;enkore;2017-06-06 21:32:11 +0200;Merge pull request #2625 from enkore/issue/2623
docs: don't suggest to leak BORG_PASSPHRASE
==
==================
3faafb1;Marian Beermann;2017-06-06 21:30:58 +0200;docs: faq: specify "using inline shell scripts"

==

docs/faq.rst
==================
aa7fbff;Marian Beermann;2017-06-06 21:29:31 +0200;docs: quickstart: delete problematic BORG_PASSPRHASE use

==

docs/quickstart.rst
==================
1135114;Marian Beermann;2017-06-06 19:46:57 +0200;helpers: truncate_and_unlink doc

==

src/borg/helpers.py
src/borg/repository.py
==================
ed0a5c7;Marian Beermann;2017-06-06 18:03:21 +0200;platform.SaveFile: truncate_and_unlink temporary
SaveFile is typically used for small files where this is not
necessary. The sole exception is the files cache.

==

src/borg/helpers.py
src/borg/platform/base.py
src/borg/repository.py
==================
95064cd;Marian Beermann;2017-05-25 18:51:10 +0200;repository: truncate segments before unlinking

==

src/borg/repository.py
==================
68b61ac;enkore;2017-06-06 11:43:52 +0200;Merge pull request #2619 from ThomasWaldmann/remove-attic-dependency
remove attic dependency of the tests, fixes #2505
==
==================
957aeec;TW;2017-06-06 05:19:09 +0200;Merge pull request #2620 from ThomasWaldmann/coala-fixes
whitespace changes by coala
==
==================
f5d2e67;Thomas Waldmann;2017-06-06 04:46:15 +0200;whitespace changes by coala

==

src/borg/compress.pyx
src/borg/upgrader.py
==================
fed5873;Thomas Waldmann;2017-06-06 04:26:48 +0200;remove attic dependency of the tests, fixes #2505
attic.tar.gz contains a repo + corresponding keyfile - all the
upgrader module tests need.

.tar.gz because the .tar was 20x bigger.

==

requirements.d/attic.txt
src/borg/testsuite/attic.tar.gz
src/borg/testsuite/upgrader.py
tox.ini
==================
f5e7d96;Marian Beermann;2017-06-05 22:26:04 +0200;docs: internals: feature flags set theory

==

docs/internals/data-structures.rst
==================
8866961;TW;2017-06-05 16:59:12 +0200;Merge pull request #2615 from ThomasWaldmann/suppress-timestamp-future-errmsg
tests: suppress tar's future timestamp warning
==
==================
7a646a1;enkore;2017-06-05 16:04:35 +0200;Merge pull request #2616 from enkore/docs/internals-toc
docs: internals: columnize rather long ToC [webkit fixup]
==
==================
fc599be;Marian Beermann;2017-06-05 16:04:03 +0200;docs: internals: columnize rather long ToC [webkit fixup]

==

docs/borg_theme/css/borg.css
==================
8023bc6;enkore;2017-06-05 15:57:52 +0200;Merge pull request #2614 from enkore/docs/internals-toc
docs: internals: columnize rather long ToC
==
==================
4e6c565;Thomas Waldmann;2017-06-05 15:43:13 +0200;test: suppress tar's future timestamp warning
in this case, it is expected as we archived a file with such a ts.

==

src/borg/testsuite/archiver.py
==================
fec0958;Marian Beermann;2017-06-05 15:39:55 +0200;docs: internals: columnize rather long ToC

==

docs/borg_theme/css/borg.css
docs/internals.rst
==================
fcb9472;enkore;2017-06-05 15:40:54 +0200;Merge pull request #2613 from enkore/issue/2611
algorithms.checksums: work around GCC 4.4 bug by disabling CLMUL
==
==================
909f099;Marian Beermann;2017-06-05 14:21:26 +0200;algorithms.checksums: work around GCC 4.4 bug by disabling CLMUL
Also disabling this code path for 4.5; 4.6 was tested iirc.

==

src/borg/algorithms/crc32_dispatch.c
==================
50bcd78;TW;2017-06-05 09:59:17 +0200;recreate: keep timestamps as in original archive, fixes #2384 (#2607)
the timestamps of the recreated archive (in the archive metadata and
also in the manifest) are now as they were for the original archive.

they are important metadata about the archive contents and should
therefore be kept "as is".

note: when using -v --stats, the timestamps shown there for recreate
      are about the recreate start/end/duration.

==

src/borg/archive.py
==================
692f2c0;enkore;2017-06-05 01:02:06 +0200;Merge pull request #2608 from enkore/docs/fix-figure-sizes-pdf
docs: fix way too small figures in pdf
==
==================
e80c0f7;Marian Beermann;2017-06-05 01:00:41 +0200;docs: fix way too small figures in pdf

==

docs/conf.py
docs/internals.rst
docs/internals/data-structures.rst
==================
da04aba;Marian Beermann;2017-06-05 00:41:30 +0200;docs: internals: feature flags introduction/rationale

==

docs/internals/data-structures.rst
==================
c427d23;Marian Beermann;2017-06-05 00:21:04 +0200;docs: internals: amend feature flags

==

docs/internals/data-structures.rst
==================
f2fd6fc;Marian Beermann;2017-06-04 18:56:45 +0200;docs: internals: cache feature flags

==

docs/internals/data-structures.rst
==================
36bdc9d;Marian Beermann;2017-06-04 14:13:04 +0200;internals: rewrite manifest & feature flags

==

docs/internals/data-structures.rst
docs/internals/security.rst
==================
71495b9;enkore;2017-06-04 23:01:29 +0200;Merge pull request #2606 from enkore/docs/internals-rewrite
docs: internals editing
==
==================
60811fc;enkore;2017-06-04 23:01:20 +0200;Merge pull request #2593 from enkore/issue/2384.1
recreate: if single archive is not processed, exit 2
==
==================
19b425a;Marian Beermann;2017-06-04 22:58:15 +0200;docs: internals: more HashIndex details

==

docs/internals/data-structures.rst
==================
cf77aa5;Marian Beermann;2017-06-04 22:50:17 +0200;docs: internals: fix ASCII art equations

==

docs/internals/data-structures.rst
==================
d33929a;Marian Beermann;2017-06-04 22:37:36 +0200;docs: internals: edited HashIndex

==

docs/internals/data-structures.rst
docs/internals/object-graph.png
docs/internals/object-graph.vsd
==================
daae1cc;Marian Beermann;2017-06-04 22:23:54 +0200;docs/internals: layers image; Blimey! it's one pixel off!

==

docs/internals/structure.png
docs/internals/structure.vsd
==================
a381503;Marian Beermann;2017-06-04 18:28:23 +0200;docs: internals: terms/glossary TODO

==

docs/internals/data-structures.rst
==================
9174f84;Marian Beermann;2017-06-04 18:26:01 +0200;docs: internals: delete non-sequitor from repo/segments

==

docs/internals/data-structures.rst
==================
89d8f54;Marian Beermann;2017-06-04 18:17:38 +0200;docs: internals: edited obj graph related sections a bit

==

docs/internals/data-structures.rst
docs/internals/object-graph.png
docs/internals/object-graph.vsd
docs/internals/security.rst
==================
2b0e7bc;Marian Beermann;2017-06-04 16:16:56 +0200;docs: data structures: demingle cache and repo index

==

docs/internals/data-structures.rst
==================
0698052;enkore;2017-06-04 22:15:25 +0200;Merge pull request #2604 from enkore/docs/internals-layers
docs/internals: layers image + description
==
==================
f1709df;Marian Beermann;2017-06-04 17:31:22 +0200;docs/internals: layers image + description

==

docs/internals.rst
docs/internals/structure.png
docs/internals/structure.vsd
==================
93e9ca0;TW;2017-06-04 00:18:09 +0200;update CHANGES (master) (#2594)
update CHANGES (master)
==

docs/changes.rst
==================
5d68919;TW;2017-06-03 23:09:34 +0200;Merge pull request #2597 from borgbackup/revert-2478-faked-debugging
Revert "Start fakeroot faked in debug mode - fixes EISDIR issues"
==
==================
6119a04;TW;2017-06-03 22:04:46 +0200;Merge pull request #2596 from ThomasWaldmann/segs-per-dir
DEFAULT_SEGMENTS_PER_DIR = 1000
==
==================
b06ceb6;enkore;2017-06-03 22:02:52 +0200;Revert "Start fakeroot faked in debug mode - fixes EISDIR issues"

==

.travis/run.sh
Vagrantfile
scripts/faked-debug.sh
==================
ffcf6b7;Thomas Waldmann;2017-06-03 21:54:41 +0200;DEFAULT_SEGMENTS_PER_DIR = 1000
prettier increments for the directory names.

==

src/borg/constants.py
==================
a2d08e3;TW;2017-06-03 21:47:11 +0200;Merge pull request #2575 from edgimar/master
patterns: don't recurse with ! / --exclude for pf:, fixes #2509
==
==================
d955517;enkore;2017-06-03 18:17:14 +0200;Merge pull request #2591 from enkore/issue/1101.design
docs: file integrity
==
==================
372eb40;enkore;2017-06-03 18:17:02 +0200;Merge pull request #2590 from enkore/issue/2589
serve: add --restrict-to-repository
==
==================
fd0215c;Mark Edgington;2017-05-29 11:53:31 -0400;patterns: don't recurse with !/--exclude for path-prefix (pf:)
Fixes issue #2509

==

src/borg/patterns.py
==================
8ad309a;Marian Beermann;2017-06-03 15:47:01 +0200;recreate: if single archive is not processed, exit 2

==

src/borg/archive.py
src/borg/archiver.py
==================
28e4eb4;TW;2017-06-03 15:13:21 +0200;add a .coafile for coala (#2592)
add support for using coala, fixes #1366

ignores / disable are set up so that there are not many faults.
we can improve that iteratively.

==

.coafile
docs/development.rst
requirements.d/coala.txt
==================
da99ec2;Marian Beermann;2017-06-02 23:40:45 +0200;docs: quotas: refer to --restrict-to-repository

==

docs/internals/data-structures.rst
==================
8dfe2a8;Marian Beermann;2017-06-02 23:38:49 +0200;remote: show path in PathNotAllowed
not 100 % sure whether "if old_server" is required, so let's play it safe.
1.0 -> 1.1 server is no problem.

==

src/borg/remote.py
src/borg/testsuite/repository.py
==================
07fbba4;Marian Beermann;2017-06-02 23:38:02 +0200;serve: add --restrict-to-repository

==

src/borg/archiver.py
src/borg/remote.py
src/borg/testsuite/archiver.py
==================
5af66db;Marian Beermann;2017-06-03 14:57:24 +0200;cache sync: add more refcount tests

==

src/borg/cache_sync/unpack.h
src/borg/testsuite/cache.py
==================
2bcbf81;Steve Groesz;2017-06-03 07:40:08 -0500;Add bountysource badge (#2581)
add bountysource badge, fixes #2558

==

README.rst
==================
b8e40fd;Marian Beermann;2017-06-03 13:04:05 +0200;editing

==

docs/internals/data-structures.rst
==================
4faaa7d;Marian Beermann;2017-06-03 12:27:35 +0200;RepositoryCache: abort on data corruption

==

src/borg/remote.py
src/borg/testsuite/remote.py
==================
b544af2;Marian Beermann;2017-06-03 12:14:17 +0200;RepositoryCache: checksum decrypted cache

==

src/borg/remote.py
src/borg/testsuite/remote.py
==================
45ee62e;Marian Beermann;2017-06-03 00:43:39 +0200;docs: file integrity

==

docs/internals/data-structures.rst
==================
c77b758;enkore;2017-06-02 22:51:41 +0200;Merge pull request #2584 from enkore/issue/1101.integration.repository
repository: checksum index and hints
==
==================
54e023c;Marian Beermann;2017-06-02 16:22:02 +0200;repository: add complementary index corruption test

==

src/borg/repository.py
src/borg/testsuite/repository.py
==================
2e067a7;Marian Beermann;2017-06-02 11:36:58 +0200;repository: add refcount corruption test

==

src/borg/repository.py
src/borg/testsuite/repository.py
==================
f61ee03;Marian Beermann;2017-06-01 23:28:11 +0200;repository: checksum index and hints

==

src/borg/repository.py
src/borg/testsuite/repository.py
==================
5b3667b;Marian Beermann;2017-06-02 19:31:56 +0200;cache sync: macros in all-caps

==

src/borg/cache_sync/unpack.h
==================
795cdfc;Marian Beermann;2017-06-02 19:28:50 +0200;cache sync: move stat initialization to main unpack

==

src/borg/cache_sync/cache_sync.c
src/borg/cache_sync/unpack.h
src/borg/cache_sync/unpack_template.h
==================
cb98cb8;Marian Beermann;2017-05-31 20:47:16 +0200;fuse: fix read(2) caching data in metadata cache
The OS page cache is responsible for handling this and is much more
empowered to do a good job at that than Borg.

==

src/borg/fuse.py
==================
67b97f2;Marian Beermann;2017-05-31 20:46:57 +0200;cache sync: cleanup progress handling, unused parameters

==

src/borg/cache.py
==================
7f04e00;Marian Beermann;2017-05-28 15:33:36 +0200;testsuite: add TestRepositoryCache

==

src/borg/testsuite/remote.py
==================
835b0e5;Marian Beermann;2017-05-28 13:16:52 +0200;cache sync/remote: compressed, decrypted cache

==

src/borg/cache.py
src/borg/remote.py
==================
c786a59;Marian Beermann;2017-05-26 22:54:27 +0200;CacheSynchronizer: redo as quasi FSM on top of unpack.h
This is a (relatively) simple state machine running in the
data callbacks invoked by the msgpack unpacking stack machine
(the same machine is used in msgpack-c and msgpack-python,
changes are minor and cosmetic, e.g. removal of msgpack_unpack_object,
removal of the C++ template thus porting to C and so on).

Compared to the previous solution this has multiple advantages
- msgpack-c dependency is removed
- this approach is faster and requires fewer and smaller
  memory allocations

Testability of the two solutions does not differ in my
professional opinion(tm).

Two other changes were rolled up; _hashindex.c can be compiled
without Python.h again (handy for fuzzing and testing);
a "small" bug in the cache sync was fixed which allocated too
large archive indices, leading to excessive archive.chunks.d
disk usage (that actually gave me an idea).

==

scripts/fuzz-cache-sync/HOWTO
scripts/fuzz-cache-sync/main.c
scripts/fuzz-cache-sync/testcase_dir/test_simple
setup.py
src/borg/_cache.c
src/borg/_hashindex.c
src/borg/cache.py
src/borg/cache_sync/cache_sync.c
src/borg/cache_sync/sysdep.h
src/borg/cache_sync/unpack.h
src/borg/cache_sync/unpack_define.h
src/borg/cache_sync/unpack_template.h
src/borg/hashindex.pyx
src/borg/testsuite/cache.py
==================
bf89595;Marian Beermann;2016-05-20 01:54:42 +0200;RepositoryCache: limit cache size
Unbounded cache size is inacceptable.

I don't see why a full-fledged repository needs to be used here, either,
since this cache requires none of the consistency or durability guarantees
made by it (and bought with a performance impact).

A notable issue is that posix_fadvise is slow (for some reason) on tmpfs,
which could eat 30-35 % of the total CPU time of a cache sync.

==

src/borg/remote.py
==================
167875b;Marian Beermann;2017-05-26 13:54:28 +0200;cache sync: fix n^2 behaviour in lookup_name

==

src/borg/cache.py
==================
9f8b967;Marian Beermann;2017-05-26 12:30:15 +0200;cache sync: initialize master index to known capacity

==

src/borg/cache.py
==================
740898d;Marian Beermann;2017-03-07 15:13:59 +0100;CacheSynchronizer

==

setup.py
src/borg/_cache.c
src/borg/cache.py
src/borg/hashindex.pyx
src/borg/helpers.py
==================
a1fa1b7;enkore;2017-06-02 16:29:05 +0200;Merge pull request #2587 from enkore/docs/is-openssl
docs/security: OpenSSL usage
==
==================
de72c35;enkore;2017-06-02 16:28:47 +0200;Merge pull request #2585 from ThomasWaldmann/vagrant
vagrant: control VM cpus and pytest workers via env
==
==================
4789407;enkore;2017-06-02 16:23:54 +0200;Merge pull request #2580 from enkore/issue/1101.integration.xxh
1101.integration.xxh
==
==================
d3373be;enkore;2017-06-02 16:22:20 +0200;Merge pull request #2588 from enkore/docs/quota
docs: quotas: clarify compatbility; only relevant to serve side
==
==================
d51f2bb;Marian Beermann;2017-06-02 14:48:14 +0200;docs: quotas: local repo disclaimer
...

==

docs/internals/data-structures.rst
==================
0892249;Marian Beermann;2017-06-02 13:12:43 +0200;docs: quotas: clarify compatbility; only relevant to serve side
also cf. "Enforcing the quota":

  The quota is enforcible only if *all* :ref:`borg_serve` versions
  accessible to clients support quotas

==

docs/internals/data-structures.rst
==================
b996afb;Marian Beermann;2017-06-02 13:05:54 +0200;docs/security: used implementations; note python libraries

==

docs/internals/security.rst
==================
107e320;Marian Beermann;2017-06-02 12:52:30 +0200;binaries: don't bundle libssl
ArchiverTestCaseBinary passes.

==

docs/internals/security.rst
scripts/borg.exe.spec
==================
3c951df;Marian Beermann;2017-06-02 12:21:59 +0200;docs/security: security track record of OpenSSL and msgpack

==

docs/internals/security.rst
==================
9b35fa1;Thomas Waldmann;2017-06-02 06:12:30 +0200;vagrant: update cleaning

==

Vagrantfile
==================
a472909;Thomas Waldmann;2017-06-02 02:45:07 +0200;vagrant: fix openbsd shell

==

Vagrantfile
==================
16a296c;Thomas Waldmann;2017-06-02 02:29:05 +0200;vagrant: control VM cpus and pytest workers via env

==

Vagrantfile
docs/development.rst
==================
6c91a75;Marian Beermann;2017-05-31 23:17:27 +0200;algorithms: rename crc32 to checksums

==

setup.py
src/borg/algorithms/checksums.pyx
src/borg/algorithms/crc32.pyx
src/borg/archiver.py
src/borg/crypto/file_integrity.py
src/borg/repository.py
src/borg/testsuite/checksums.py
src/borg/testsuite/crc32.py
==================
0221e31;Marian Beermann;2017-05-31 21:47:07 +0200;file_integrity: use xxh64

==

AUTHORS
src/borg/algorithms/crc32.pyx
src/borg/algorithms/xxh64/xxhash.c
src/borg/algorithms/xxh64/xxhash.h
src/borg/crypto/file_integrity.py
src/borg/testsuite/crc32.py
src/borg/testsuite/file_integrity.py
==================
23d591c;enkore;2017-06-01 14:39:17 +0200;Merge pull request #2565 from enkore/issue/2517
Implement storage quotas
==
==================
bcf4b44;Marian Beermann;2017-05-31 20:28:17 +0200;testsuite: add test for parse_storage_quota

==

src/borg/testsuite/archiver.py
==================
1b66d8d;enkore;2017-05-31 19:41:42 +0200;Merge pull request #2576 from enkore/pr/2573+split
BORG_PASSCOMMAND: use same cmd-string splitting as BORG_RSH
==
==================
4e6a771;Marian Beermann;2017-05-31 19:41:17 +0200;BORG_PASSCOMMAND: use same cmd-string splitting as BORG_RSH

==

src/borg/crypto/key.py
==================
349a4ad;enkore;2017-05-31 19:34:43 +0200;Merge pull request #2568 from enkore/issue/1101.integration.cache
1101.integration.cache
==
==================
578b76a;TuXicc;2017-05-31 19:25:21 +0200;Added BORG_PASSCOMMAND environment variable (#2573)

==

docs/faq.rst
docs/quickstart.rst
docs/usage_general.rst.inc
src/borg/crypto/key.py
==================
f8b48dc;Marian Beermann;2017-05-31 18:48:48 +0200;remote: propagate Error.traceback correctly

==

src/borg/archiver.py
src/borg/remote.py
==================
4edf777;Marian Beermann;2017-05-25 00:59:39 +0200;Implement storage quotas

==

docs/internals/data-structures.rst
docs/usage/init.rst.inc
docs/usage/serve.rst.inc
src/borg/archiver.py
src/borg/remote.py
src/borg/repository.py
src/borg/testsuite/repository.py
==================
9032aa0;Marian Beermann;2017-05-31 18:08:02 +0200;testsuite: simplify ArchiverCorruptionTestCase

==

src/borg/cache.py
src/borg/crypto/file_integrity.py
src/borg/testsuite/archiver.py
==================
0a5d9b6;Marian Beermann;2017-05-31 18:06:28 +0200;cache sync: close archive chunks file before renaming

==

src/borg/cache.py
==================
0268917;enkore;2017-05-28 09:12:28 +0200;Merge pull request #2574 from edgimar/patch-1
Update changes.rst
==
==================
b57fb1a;edgimar;2017-05-28 00:52:56 -0400;Update changes.rst
fix denglish
==

docs/changes.rst
==================
7548f52;enkore;2017-05-26 00:47:11 +0200;Merge pull request #2569 from enkore/f/setup-cclean
setup.py clean to remove compiled files
==
==================
7d7b2f3;enkore;2017-05-26 00:43:42 +0200;Merge pull request #2566 from enkore/issue/2560
Restrict key file names
==
==================
0a295dd;Marian Beermann;2017-05-25 17:55:42 +0200;setup.py clean to remove compiled files

==

setup.py
==================
d35d388;Marian Beermann;2017-05-25 16:13:40 +0200;cache integrity: handle interference from old versions

==

src/borg/cache.py
src/borg/testsuite/archiver.py
==================
50ac9d9;Marian Beermann;2017-05-25 15:54:38 +0200;testsuite: add ArchiverCorruptionTestCase

==

src/borg/cache.py
src/borg/testsuite/archiver.py
==================
83bca02;Marian Beermann;2017-05-25 15:31:30 +0200;file_integrity: hash_part: mix length into state

==

src/borg/crypto/file_integrity.py
==================
d463dd8;Marian Beermann;2017-05-25 15:18:45 +0200;hashindex: read/write: use hash_part for HashHeader

==

src/borg/_hashindex.c
src/borg/testsuite/hashindex.py
==================
f59affe;Marian Beermann;2017-05-25 14:01:21 +0200;cache: fix possible printf issue with archive names in sync

==

src/borg/cache.py
==================
addd7ad;Marian Beermann;2017-05-25 14:00:03 +0200;cache: chunks.archive.d: autofix corruption

==

src/borg/cache.py
==================
1dfe693;Marian Beermann;2017-05-25 13:49:03 +0200;cache: integrity checking in archive.chunks.d

==

src/borg/cache.py
src/borg/crypto/file_integrity.py
==================
2b518b7;Marian Beermann;2017-05-25 13:43:15 +0200;cache: add integrity checking of chunks and files caches

==

src/borg/cache.py
==================
06cf15c;Marian Beermann;2017-05-25 13:43:04 +0200;hashindex: read/write: accept file-like objects for path

==

src/borg/hashindex.pyx
==================
39051ac;Marian Beermann;2017-05-25 13:22:24 +0200;file_integrity: split in IntegrityCheckedFile + Detached variant

==

src/borg/crypto/file_integrity.py
src/borg/testsuite/file_integrity.py
==================
38ed9a2;Marian Beermann;2017-05-25 12:36:45 +0200;key file names: limit to 100 characters (not bytes)

==

src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
4b8a04b;Marian Beermann;2017-05-25 12:32:42 +0200;key file names: remove colons from host name

==

src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
2dcbe02;enkore;2017-05-25 09:26:09 +0200;Merge pull request #2528 from ThomasWaldmann/follow-symlinks
document follow_symlinks requirements, check libc, fixes #2507
==
==================
77ca652;enkore;2017-05-25 09:24:27 +0200;Merge pull request #2564 from enkore/issue/2563
init: don't allow creating nested repositories
==
==================
573d728;Marian Beermann;2017-05-25 00:36:50 +0200;init: don't allow creating nested repositories

==

src/borg/repository.py
src/borg/testsuite/archiver.py
==================
9d82db1;TW;2017-05-23 15:19:57 +0200;Merge pull request #2539 from RonnyPfannschmidt/avoid-repacakaging-pitfall
fail in borg package if version metadata is completely broken
==
==================
892ebd7;enkore;2017-05-23 14:53:29 +0200;Merge pull request #2553 from enkore/faq/attic
docs: rework Attic FAQ
==
==================
53d0f1f;Ronny Pfannschmidt;2017-05-21 10:25:42 +0200;fail in borg package if version metadata is completely broken
this helps to fail early when people do badly done scm based repackaging

==

src/borg/__init__.py
==================
2aad1d8;TW;2017-05-23 14:03:48 +0200;Merge pull request #2555 from ThomasWaldmann/ipv6
ipv6 address support
==
==================
83fdc39;Marian Beermann;2017-05-18 23:14:36 +0200;docs book: use A4 format, new builder option format.

==

docs/conf.py
==================
0d406e7;Thomas Waldmann;2017-05-23 03:09:57 +0200;use _host to store host/ipv4/ipv6
for ipv6, it includes the outer square brackets.

the host property strips any outer square brackets.

==

src/borg/helpers.py
==================
d99aff1;Benedikt Neuffer;2017-03-06 20:46:03 +0100;ipv6 address support
also: Location: more informative exception when parsing fails

==

src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
acf3842;Marian Beermann;2017-05-18 22:39:43 +0200;docs: create appendices in the book

==

docs/book.rst
docs/conf.py
==================
65d1dea;Marian Beermann;2017-05-18 22:26:09 +0200;faq: separate section for attic-stuff

==

docs/faq.rst
docs/usage.rst
==================
5a667d6;enkore;2017-05-22 20:45:52 +0200;Merge pull request #2554 from borgbackup/revert-2552-docs/search1
Revert "docs: borg_domain for custom priority index entries"
==
==================
226d1f6;enkore;2017-05-22 20:45:29 +0200;Revert "docs: borg_domain for custom priority index entries"

==

docs/borg_domain.py
docs/conf.py
docs/usage/benchmark_crud.rst.inc
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/export-tar.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/umount.rst.inc
docs/usage/upgrade.rst.inc
docs/usage/with-lock.rst.inc
setup.py
==================
17384dd;enkore;2017-05-22 20:36:38 +0200;Merge pull request #2552 from enkore/docs/search1
docs: borg_domain for custom priority index entries
==
==================
decee53;enkore;2017-05-22 20:34:59 +0200;Merge pull request #2529 from enkore/faq/errors
faq: I get an IntegrityError or similar - what now?
==
==================
7284413;Marian Beermann;2017-05-22 17:30:45 +0200;docs: borg_domain for custom priority index entries

==

docs/borg_domain.py
docs/conf.py
docs/usage/benchmark_crud.rst.inc
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/export-tar.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/umount.rst.inc
docs/usage/upgrade.rst.inc
docs/usage/with-lock.rst.inc
setup.py
==================
a430fd5;enkore;2017-05-22 20:01:21 +0200;Merge pull request #2551 from ThomasWaldmann/bountysource-readme
README: how to help the project, fixes #2550
==
==================
60df56b;Thomas Waldmann;2017-05-22 18:22:09 +0200;README: how to help the project

==

README.rst
==================
6f81d24;Thomas Waldmann;2017-05-18 03:05:19 +0200;remove unused no_lchflags_because

==

src/borg/testsuite/__init__.py
==================
efec00b;Thomas Waldmann;2017-05-18 02:44:00 +0200;use stat with follow_symlinks=False
should be equivalent to using os.lstat() before.

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/__init__.py
==================
094376a;Thomas Waldmann;2017-05-18 02:37:54 +0200;require and use chown with follow_symlinks=False
should be equivalent to using os.lchown() before.

==

src/borg/archive.py
src/borg/helpers.py
==================
b484c79;Thomas Waldmann;2017-05-18 02:02:51 +0200;document follow_symlinks requirements, check libc, fixes #2507

==

docs/installation.rst
src/borg/archiver.py
src/borg/helpers.py
==================
5879158;enkore;2017-05-22 13:55:04 +0200;Merge pull request #2530 from enkore/f/compact-revisit@2
Repository compaction docs
==
==================
3721a8a;enkore;2017-05-22 13:44:26 +0200;Merge pull request #2549 from enkore/issue/2541
mount: do pre-mount checks before opening repository
==
==================
869ab1a;Marian Beermann;2017-05-22 13:29:38 +0200;mount: do pre-mount checks before opening repository

==

src/borg/archiver.py
==================
f8c63f9;Marian Beermann;2017-05-22 13:11:00 +0200;docs/data structures: add simple example compaction run

==

docs/internals/compaction.png
docs/internals/compaction.vsd
docs/internals/data-structures.rst
==================
691c6ad;Marian Beermann;2017-05-20 21:28:50 +0200;docs/data structures: detail explanation of compaction

==

docs/internals/data-structures.rst
==================
8e24dda;Marian Beermann;2017-03-01 19:26:20 +0100;increase DEFAULT_SEGMENTS_PER_DIR to 2000

==

src/borg/constants.py
==================
0bcb8c2;Marian Beermann;2017-05-19 18:40:59 +0200;faq: rewrote IntegrityError answer

==

docs/changes.rst
docs/faq.rst
==================
95f1c0a;enkore;2017-05-22 09:52:09 +0200;Merge pull request #2547 from schuft69/patch-1
Update README.rst
==
==================
fe2d648;schuft69;2017-05-22 08:23:08 +0200;Update README.rst

==

README.rst
==================
334a700;enkore;2017-05-21 17:46:01 +0200;Merge pull request #2544 from enkore/docs/ids-chunklayout
docs/data structures: add chunk layout diagram
==
==================
dc02c79;enkore;2017-05-21 17:45:34 +0200;Merge pull request #2546 from enkore/issue/2543
docs: add systemd warning regarding placeholders
==
==================
384d763;Marian Beermann;2017-05-21 17:07:58 +0200;docs: add systemd warning regarding placeholders

==

docs/usage/help.rst.inc
src/borg/archiver.py
==================
ed14181;edgimar;2017-05-21 11:18:56 -0400;add test for preserved intermediate folder permissions (#2477)
This tests whether the permissions metadata is preserved when a folder is excluded but still recursed into to find a matching file in a subfolder.
==

src/borg/testsuite/archiver.py
==================
7312357;Marian Beermann;2017-05-21 16:36:50 +0200;docs/data structures: add chunk layout diagram

==

docs/internals/data-structures.rst
docs/internals/encryption.png
docs/internals/encryption.vsd
==================
8268090;enkore;2017-05-21 12:19:24 +0200;Merge pull request #2541 from enkore/issue/2540
mount: check llfuse is installed before asking for passphrase
==
==================
e689d8f;Marian Beermann;2017-05-21 11:24:09 +0200;mount: check llfuse is installed before asking for passphrase

==

src/borg/archiver.py
==================
1cd90b2;enkore;2017-05-20 23:23:26 +0200;Merge pull request #2537 from enkore/f/osxfail
testsuite: call setup_logging after destroying logging config
==
==================
85aabeb;Marian Beermann;2017-05-20 22:55:17 +0200;testsuite: call setup_logging after destroying logging config

==

src/borg/testsuite/archiver.py
==================
ba07225;enkore;2017-05-20 19:31:49 +0200;Merge pull request #2536 from enkore/issue/2534
fuse: fix crash if empty (None) xattr is read
==
==================
58edbe1;Marian Beermann;2017-05-20 16:40:36 +0200;xattr: document API

==

src/borg/xattr.py
==================
c6309b1;Marian Beermann;2017-05-20 16:28:56 +0200;fuse: fix crash if empty (None) xattr is read

==

src/borg/fuse.py
src/borg/testsuite/archiver.py
==================
5db6678;enkore;2017-05-20 16:00:49 +0200;Merge pull request #2500 from enkore/issue/2487
Verify most operations against securitymanager
==
==================
3146038;enkore;2017-05-20 16:00:21 +0200;Merge pull request #2535 from enkore/docs/create-data-flow
add docs/misc/borg-data-flow data flow chart
==
==================
c515958;Marian Beermann;2017-05-20 15:59:20 +0200;add docs/misc/borg-data-flow data flow chart

==

docs/misc/borg-data-flow.png
docs/misc/borg-data-flow.vsd
==================
c23e1e2;Marian Beermann;2017-05-10 18:34:22 +0200;use assert_secure for all commands that use the manifest
This already excludes the debug commands that we wouldn't want this on.

==

src/borg/archiver.py
src/borg/cache.py
src/borg/testsuite/archiver.py
==================
482b65e;Marian Beermann;2017-05-10 15:30:51 +0200;cache: extract CacheConfig class

==

src/borg/cache.py
==================
781a41d;enkore;2017-05-20 14:52:48 +0200;Merge pull request #2527 from enkore/issue/2241.2
Fix remote logging and progress
==
==================
97e9603;Marian Beermann;2017-05-17 17:43:48 +0200;implement --debug-topic for remote servers

==

src/borg/remote.py
==================
b3b5553;Marian Beermann;2017-05-20 12:52:32 +0200;remote: clarify remote log handling comments

==

src/borg/remote.py
==================
5f4d97f;Marian Beermann;2017-05-18 16:54:44 +0200;remote: restore "Remote:" prefix (as used in 1.0.x)

==

src/borg/remote.py
==================
18a2902;Marian Beermann;2017-05-17 20:49:52 +0200;rpc negotiate: enable v3 log protocol only for supported clients
avoid seeing JSON log output when a 1.1.0b<5 client talks to a
1.1.0b>6 server.

==

src/borg/remote.py
src/borg/testsuite/repository.py
==================
fc105b4;Marian Beermann;2017-05-17 17:17:15 +0200;fix --progress and logging in general for remote

==

src/borg/archiver.py
src/borg/helpers.py
src/borg/logger.py
src/borg/remote.py
src/borg/testsuite/repository.py
==================
be40e2f;Marian Beermann;2017-03-02 13:54:38 +0100;faq: I get an IntegrityError or similar - what now?

==

docs/faq.rst
==================
eaf90cb;enkore;2017-05-17 17:40:21 +0200;Merge pull request #2526 from enkore/issue/2513
serve: fix incorrect type of exception_short for Errors
==
==================
9778c10;Marian Beermann;2017-05-17 16:27:52 +0200;serve: fix incorrect type of exception_short for Errors

==

src/borg/remote.py
==================
0ad210c;enkore;2017-05-17 11:53:12 +0200;Merge pull request #2524 from enkore/f/docgen2
docs: ran build_man, build_usage
==
==================
b7a6ac9;Marian Beermann;2017-05-17 11:52:48 +0200;docs: ran build_man, build_usage

==

docs/man/borg-benchmark-crud.1
docs/man/borg-benchmark.1
docs/man/borg-break-lock.1
docs/man/borg-change-passphrase.1
docs/man/borg-check.1
docs/man/borg-common.1
docs/man/borg-compression.1
docs/man/borg-create.1
docs/man/borg-delete.1
docs/man/borg-diff.1
docs/man/borg-export-tar.1
docs/man/borg-extract.1
docs/man/borg-info.1
docs/man/borg-init.1
docs/man/borg-key-change-passphrase.1
docs/man/borg-key-export.1
docs/man/borg-key-import.1
docs/man/borg-key-migrate-to-repokey.1
docs/man/borg-key.1
docs/man/borg-list.1
docs/man/borg-mount.1
docs/man/borg-patterns.1
docs/man/borg-placeholders.1
docs/man/borg-prune.1
docs/man/borg-recreate.1
docs/man/borg-rename.1
docs/man/borg-serve.1
docs/man/borg-umount.1
docs/man/borg-upgrade.1
docs/man/borg-with-lock.1
docs/man/borg.1
docs/usage/benchmark_crud.rst.inc
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/common-options.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/export-tar.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/umount.rst.inc
docs/usage/upgrade.rst.inc
docs/usage/with-lock.rst.inc
==================
3db27f9;enkore;2017-05-17 11:48:48 +0200;Merge pull request #2523 from enkore/f/tarexport-tests
expor-tar: more tests
==
==================
042a4b9;Marian Beermann;2017-05-17 11:04:20 +0200;export-tar: test strip-components and hardlinks for partial export

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
2933248;Marian Beermann;2017-05-17 10:54:39 +0200;introduce popen_with_error_handling to handle common user errors
(without tracebacks)

==

src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
52fab07;enkore;2017-05-17 00:10:14 +0200;Merge pull request #2510 from enkore/issue/2473
Add --debug-profile option
==
==================
5788219;enkore;2017-05-17 00:09:41 +0200;borg export-tar (#2519)

==

docs/man/borg-export-tar.1
docs/usage.rst
docs/usage/export-tar.rst.inc
src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/__init__.py
src/borg/testsuite/archiver.py
==================
054897c;Marian Beermann;2017-05-16 23:18:48 +0200;docs: debugging facilities

==

docs/usage.rst
==================
6d6ae65;Marian Beermann;2017-05-16 23:13:31 +0200;replace external script with "borg debug convert-profile"

==

scripts/msgpack2marshal.py
src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
98e4e55;enkore;2017-05-16 21:21:40 +0200;Merge pull request #2520 from ThomasWaldmann/relax-json-test
do not test logger name, fixes #2504
==
==================
d15c3f2;Thomas Waldmann;2017-05-16 21:14:27 +0200;do not test logger name, fixes #2504
looks like PyInstaller modifies the module names.

==

src/borg/testsuite/archiver.py
==================
a07463c;Marian Beermann;2017-05-15 23:26:44 +0200;--debug-profile: use msgpack instead of marshal by default

==

scripts/msgpack2marshal.py
src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
4c441c7;Marian Beermann;2017-05-15 20:06:13 +0200;Implement --debug-profile

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
a596ecc;enkore;2017-05-16 20:51:17 +0200;Merge pull request #2508 from enkore/f/proper-common-options
Support common options on the main command
==
==================
c831985;Marian Beermann;2017-05-16 19:35:15 +0200;CommonOptions: add unit test

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
150ace1;Marian Beermann;2017-05-14 20:47:47 +0200;init: document --encryption as required

==

src/borg/archiver.py
==================
0b14ed8;Marian Beermann;2017-05-14 18:34:23 +0200;docs: fix wrong heading level of "Common options"

==

docs/usage.rst
==================
b9efdb2;Marian Beermann;2017-05-15 17:03:30 +0200;refactor CommonOptions as a reusable class

==

src/borg/archiver.py
==================
2ab5df0;Marian Beermann;2017-05-14 18:50:49 +0200;support common options on mid-level commands (borg *key* export)

==

src/borg/archiver.py
==================
d5edb01;Marian Beermann;2017-05-14 17:49:08 +0200;support common options

==

docs/man_intro.rst
setup.py
src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
00e76f7;enkore;2017-05-13 13:19:54 +0200;Merge pull request #2506 from enkore/logos
Vectorized logos
==
==================
7ddc800;Marian Beermann;2017-05-13 13:19:23 +0200;docs: use vector logo for PDF version

==

docs/conf.py
==================
8c637da;Marian Beermann;2017-05-13 13:05:18 +0200;PDF version of the logo

==

docs/_static/logo.pdf
==================
3d14fc7;Marian Beermann;2017-05-13 12:49:58 +0200;SVG version of the logo

==

docs/_static/logo.svg
==================
820066d;enkore;2017-05-12 21:38:31 +0200;Implement IntegrityCheckedFile (#2502)
Implement IntegrityCheckedFile

This is based on much earlier work from October 2016 by me, but is
overall simplified and changed terminology (from "signing" to
hashing and integrity checking).

See #1688 for the full history.
==

src/borg/crypto/file_integrity.py
src/borg/testsuite/file_integrity.py
==================
1dd53f0;enkore;2017-05-12 21:37:07 +0200;Merge pull request #2503 from enkore/f/authenticated-pp
key: authenticated mode = unencrypted
==
==================
a16d812;Marian Beermann;2017-05-12 20:48:47 +0200;key: add round-trip test

==

src/borg/crypto/key.py
src/borg/testsuite/key.py
==================
848df38;Marian Beermann;2017-05-11 21:03:32 +0200;Rename Key.passphrase_protected -> logically_encrypted & document

==

docs/changes.rst
src/borg/cache.py
src/borg/crypto/key.py
==================
cad49b8;Marian Beermann;2017-05-11 17:49:02 +0200;key: authenticated mode = not passphrase protected

==

docs/changes.rst
src/borg/crypto/key.py
==================
9e6b8f6;enkore;2017-05-12 20:34:45 +0200;serve: ignore --append-only when creating a repository (#2501)

==

docs/changes.rst
docs/usage.rst
src/borg/remote.py
==================
6cd7d41;enkore;2017-05-09 21:30:14 +0200;hashindex: Use Python I/O (#2496)
- Preparation for #1688 / #1101
- Support hash indices >2 GB
- Better error reporting
==

src/borg/_hashindex.c
src/borg/hashindex.pyx
src/borg/repository.py
==================
c805adc;enkore;2017-05-08 08:57:15 +0200;Merge pull request #2489 from enkore/issue/2169
consider repokey w/o passphrase == unencrypted
==
==================
badc79c;enkore;2017-05-07 22:31:58 +0200;Merge pull request #2488 from enkore/issue/2439
list: --json-lines for archive contents
==
==================
1daab24;Marian Beermann;2017-05-07 22:21:40 +0200;testsuite.archiver: normalise pytest.raises vs. assert_raises

==

src/borg/testsuite/archiver.py
==================
d964101;Marian Beermann;2017-05-05 17:26:24 +0200;consider repokey w/o passphrase == unencrypted

==

docs/changes.rst
src/borg/cache.py
src/borg/crypto/key.py
src/borg/testsuite/archiver.py
==================
be9a94c;Marian Beermann;2017-05-07 22:04:25 +0200;list: add test for handling of --json/--json-lines

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
06a4e72;TW;2017-05-06 23:08:42 +0200;Merge pull request #2486 from enkore/f/common-progress
make --progress a common option
==
==================
85df969;enkore;2017-05-06 14:39:13 +0200;Merge pull request #2485 from enkore/issue/2469.2
fix --exclude and --exclude-from recursing into directories
==
==================
06f63f4;enkore;2017-05-06 14:38:51 +0200;Merge pull request #2484 from enkore/f/json-keynamemismatch
--json: fix encryption[mode] not being the cmdline name
==
==================
a719097;Marian Beermann;2017-05-05 16:05:12 +0200;add test case for --log-json

==

src/borg/testsuite/archiver.py
==================
1418aea;Marian Beermann;2017-05-05 15:52:34 +0200;docs/frontends: use headlines - you can link to them

==

docs/internals/frontends.rst
==================
2a22f93;Marian Beermann;2017-05-05 15:49:56 +0200;list: JSON lines output for archive contents

==

docs/internals/frontends.rst
src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
bd8186f;Marian Beermann;2017-05-05 15:12:23 +0200;make --progress a common option
everything that touches the repository can take a long time and display
progress information, from compaction to replaying segments.

==

src/borg/archiver.py
==================
4d9fd6d;Marian Beermann;2017-05-05 14:49:23 +0200;fix --exclude and --exclude-from recursing into directories

==

src/borg/patterns.py
==================
c99de52;Marian Beermann;2017-05-05 14:42:41 +0200;remove duplicated setup.py line

==

setup.py
==================
ba5d669;Marian Beermann;2017-05-05 14:38:21 +0200;--json: fix encryption[mode] not being the cmdline name

==

src/borg/helpers.py
==================
d8b7aef;enkore;2017-05-05 14:30:07 +0200;Merge pull request #2476 from enkore/f/pkgstruct
Create borg.algorithms and borg.crypto packages
==
==================
2fdb6e1;enkore;2017-05-04 15:05:21 +0200;Merge pull request #2478 from PlasmaPower/faked-debugging
Start fakeroot faked in debug mode - fixes EISDIR issues
==
==================
3e24ed4;Lee Bousfield;2017-05-03 23:17:26 -0600;Start fakeroot faked in debug mode

==

.travis/run.sh
Vagrantfile
scripts/faked-debug.sh
==================
d32eade;Marian Beermann;2017-05-02 19:20:19 +0200;gitignore: complete paths for src/ excludes

==

.gitignore
==================
a976e11;Marian Beermann;2017-05-02 19:05:27 +0200;create crypto package with key, keymanager, low_level

==

.gitignore
setup.py
src/borg/archive.py
src/borg/archiver.py
src/borg/cache.py
src/borg/crypto.pyx
src/borg/crypto/__init__.py
src/borg/crypto/key.py
src/borg/crypto/keymanager.py
src/borg/crypto/low_level.pyx
src/borg/crypto/nonces.py
src/borg/helpers.py
src/borg/key.py
src/borg/keymanager.py
src/borg/nonces.py
src/borg/testsuite/archive.py
src/borg/testsuite/archiver.py
src/borg/testsuite/crypto.py
src/borg/testsuite/key.py
src/borg/testsuite/nonces.py
src/borg/testsuite/upgrader.py
src/borg/upgrader.py
==================
956b50b;Marian Beermann;2017-05-02 18:52:36 +0200;move chunker to borg.algorithms

==

setup.py
src/borg/_chunker.c
src/borg/algorithms/__init__.py
src/borg/algorithms/buzhash.c
src/borg/algorithms/chunker.pyx
src/borg/archive.py
src/borg/chunker.pyx
src/borg/helpers.py
src/borg/testsuite/chunker.py
==================
390aa76;Marian Beermann;2017-05-02 18:49:15 +0200;move blake2 to borg/algorithms

==

src/borg/algorithms/blake2-libselect.h
src/borg/algorithms/blake2/COPYING
src/borg/algorithms/blake2/README.md
src/borg/algorithms/blake2/blake2-impl.h
src/borg/algorithms/blake2/blake2.h
src/borg/algorithms/blake2/blake2b-ref.c
src/borg/blake2-libselect.h
src/borg/blake2/COPYING
src/borg/blake2/README.md
src/borg/blake2/blake2-impl.h
src/borg/blake2/blake2.h
src/borg/blake2/blake2b-ref.c
src/borg/crypto.pyx
==================
fa381ff;Marian Beermann;2017-05-02 18:48:28 +0200;create package borg.algorithms with borg.algorithms.crc32 module

==

.gitignore
setup.py
src/borg/_crc32/clmul.c
src/borg/_crc32/crc32.c
src/borg/_crc32/slice_by_8.c
src/borg/algorithms/crc32.pyx
src/borg/algorithms/crc32_clmul.c
src/borg/algorithms/crc32_dispatch.c
src/borg/algorithms/crc32_slice_by_8.c
src/borg/archiver.py
src/borg/crc32.pyx
src/borg/repository.py
src/borg/testsuite/crc32.py
==================
7c9a57b;TW;2017-05-01 23:37:19 +0200;Merge pull request #2471 from enkore/issue/2469
Move patterns to module
==
==================
f2d19a9;TW;2017-05-01 23:33:00 +0200;Merge pull request #2472 from enkore/f/docs-disable-smartypants
docs: disable smartypants
==
==================
fcce0ca;Marian Beermann;2017-05-01 22:31:18 +0200;docs: disable smartypants

==

docs/conf.py
==================
ef4cdfa;Marian Beermann;2017-05-01 17:03:49 +0200;patterns: use set literal instead of set([])

==

src/borg/patterns.py
==================
c5e3232;Marian Beermann;2017-05-01 17:02:10 +0200;patterns: explicate translate source

==

src/borg/patterns.py
==================
580496b;Marian Beermann;2017-05-01 16:58:29 +0200;create patterns module

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/patterns.py
src/borg/testsuite/archiver.py
src/borg/testsuite/helpers.py
src/borg/testsuite/patterns.py
==================
edf3ee0;TW;2017-04-30 14:43:59 +0200;Merge pull request #2468 from ThomasWaldmann/rel110b5
Release 1.1.0b5
==
==================
b00700a;Thomas Waldmann;2017-04-30 01:32:26 +0200;ran build_man

==

docs/man/borg-break-lock.1
docs/man/borg-change-passphrase.1
docs/man/borg-check.1
docs/man/borg-common.1
docs/man/borg-compression.1
docs/man/borg-create.1
docs/man/borg-delete.1
docs/man/borg-diff.1
docs/man/borg-extract.1
docs/man/borg-info.1
docs/man/borg-init.1
docs/man/borg-key-change-passphrase.1
docs/man/borg-key-export.1
docs/man/borg-key-import.1
docs/man/borg-key-migrate-to-repokey.1
docs/man/borg-key.1
docs/man/borg-list.1
docs/man/borg-mount.1
docs/man/borg-patterns.1
docs/man/borg-placeholders.1
docs/man/borg-prune.1
docs/man/borg-recreate.1
docs/man/borg-rename.1
docs/man/borg-serve.1
docs/man/borg-umount.1
docs/man/borg-upgrade.1
docs/man/borg-with-lock.1
docs/man/borg.1
==================
3c279db;Thomas Waldmann;2017-04-30 01:31:20 +0200;ran build_usage

==

docs/usage/create.rst.inc
docs/usage/help.rst.inc
docs/usage/recreate.rst.inc
docs/usage/upgrade.rst.inc
==================
78c455c;Thomas Waldmann;2017-04-30 01:29:17 +0200;update CHANGES (release date)

==

docs/changes.rst
==================
c1ea46e;TW;2017-04-30 01:24:41 +0200;Merge pull request #2466 from ThomasWaldmann/update-changes
update CHANGES
==
==================
a5ccaf6;Thomas Waldmann;2017-04-30 00:39:44 +0200;update CHANGES

==

docs/changes.rst
==================
65bdeb4;enkore;2017-04-29 23:36:18 +0200;Merge pull request #2404 from ThomasWaldmann/limit-y2038
embrace y2038 issue to support 32bit platforms
==
==================
cb67d13;enkore;2017-04-29 11:10:00 +0200;Merge pull request #2460 from ThomasWaldmann/benchmark-minor-fix
fix invalid param issue in benchmarks
==
==================
d949d6b;Thomas Waldmann;2017-04-29 03:00:59 +0200;fix invalid param issue in benchmarks
fixes CID1431887

==

src/borg/testsuite/benchmark.py
==================
c43cfb7;enkore;2017-04-28 16:06:54 +0200;Merge pull request #2432 from ThomasWaldmann/beyond-repair
more clear exception if borg check does not help, fixes #2427
==
==================
6109d22;enkore;2017-04-28 10:50:23 +0200;Merge pull request #2443 from ThomasWaldmann/verify-data-defect-chunk-processing
verify_data: fix IntegrityError handling for defect chunks, fixes #2442
==
==================
c1b128e;enkore;2017-04-28 10:49:57 +0200;Merge pull request #2445 from ThomasWaldmann/update-docs3
Update docs
==
==================
0021368;enkore;2017-04-28 10:49:35 +0200;Merge pull request #2447 from ThomasWaldmann/update-docs4
Update docs
==
==================
c49fb93;enkore;2017-04-28 10:40:58 +0200;Merge pull request #2453 from enkore/f/bla
docs fixes
==
==================
e036ebc;Marian Beermann;2017-04-28 10:40:21 +0200;docs: installation: pre-install considerations, fix crossrefs
posix_fadvise -> only used when available; not part of the filesystem.
sync -> fsync

==

docs/installation.rst
docs/internals/data-structures.rst
docs/usage_general.rst.inc
==================
e8b74fc;Marian Beermann;2017-04-28 10:39:32 +0200;docs: faq: fix title underlines

==

docs/faq.rst
==================
5a7c269;TW;2017-04-28 06:01:42 +0200;Merge pull request #2451 from ThomasWaldmann/update-osxfuse
upgrade FUSE for macOS to 3.5.8, fixes #2346
==
==================
6bcf6b6;TW;2017-04-28 04:47:32 +0200;Merge pull request #2450 from wolfpackmars2/patch-1
Fix formatting in pre-installation section
==
==================
ff41201;Steve Groesz;2017-04-26 22:25:15 -0500;Fix formatting in pre-installation section
Some documentation was improperly formatted with #2392. This corrects those errors.
==

docs/installation.rst
==================
5ffb66f;Thomas Waldmann;2017-04-27 01:34:53 +0200;upgrade FUSE for macOS to 3.5.8, fixes #2346

==

Vagrantfile
==================
ba20d8d;Thomas Waldmann;2017-04-26 03:16:12 +0200;document borg init behaviour via append-only borg serve, fixes #2440

==

docs/usage.rst
==================
bf69b04;Thomas Waldmann;2017-04-25 23:38:55 +0200;be clear about what buzhash is used for, fixes #2390
and want it is not used for (deduplication).

also say already in the readme that we use a cryptohash
for dedupe, so people don't worry.

==

README.rst
docs/internals/data-structures.rst
==================
f018844;Thomas Waldmann;2017-04-25 22:47:18 +0200;add hint about chunker params to borg upgrade docs, fixes #2421

==

src/borg/archiver.py
==================
ca6257d;Thomas Waldmann;2017-04-25 22:21:58 +0200;clarify borg upgrade docs, fixes #2436

==

src/borg/archiver.py
==================
28b0700;Thomas Waldmann;2017-04-25 15:48:16 +0200;verify_data: fix IntegrityError handling for defect chunks, fixes #2442
just getting data from the repo can already raise IntegrityErrors
in LoggedIO, so we need to catch them also.

see also the code a few lines above where this is done in the same way.

==

src/borg/archive.py
==================
de76a6b;Thomas Waldmann;2017-04-08 15:46:24 +0200;embrace y2038 issue to support 32bit platforms

==

src/borg/helpers.py
src/borg/testsuite/archiver.py
src/borg/testsuite/helpers.py
==================
6f47b79;TW;2017-04-23 12:58:10 +0200;Merge pull request #2322 from edgimar/master
allow excluding parent and including child, fixes #2314
==
==================
3eb3e31;Steve Groesz;2017-04-23 05:52:44 -0500;FAQ to explain warning when running --repair (#2393)
FAQ to explain warning when running --repair, fixes #2341
==

docs/faq.rst
==================
605f281;Steve Groesz;2017-04-05 20:29:04 -0500;Document repository file system requirements
#2080

==

docs/installation.rst
==================
697942c;Thomas Waldmann;2017-04-20 19:08:33 +0200;be more clear that this is a "beyond repair" case, fixes #2427

==

src/borg/repository.py
==================
bc3bc1a;TW;2017-04-20 14:20:19 +0200;Merge pull request #2408 from ThomasWaldmann/update-changes-master
update CHANGES (master)
==
==================
b32b7b4;enkore;2017-04-19 11:51:19 +0200;Merge pull request #2431 from enkore/issue/2430
platform.linux: get rid of "resource" module
==
==================
7b519e4;Marian Beermann;2017-04-19 11:31:40 +0200;platform.linux: get rid of "resource" module

==

src/borg/platform/linux.pyx
==================
e40c005;enkore;2017-04-15 14:27:41 +0200;Merge pull request #2420 from rugk/patch-1
Add --one-file-system note for root backup
==
==================
5ddf7e7;rugk;2017-04-15 12:38:58 +0200;Add --one-file-system note for root backup

==

docs/faq.rst
==================
798127f;Mark Edgington;2017-03-20 18:04:45 -0400;allow excluding parent and including child, fixes #2314
This fixes the problem raised by issue #2314 by requiring that each root
subtree be fully traversed.

The problem occurs when a patterns file excludes a parent directory P later
in the file, but earlier in the file a subdirectory S of P is included.
Because a tree is processed recursively with a depth-first search, P is
processed before S is.  Previously, if P was excluded, then S would not even
be considered.  Now, it is possible to recurse into P nonetheless, while not
adding P (as a directory entry) to the archive.

With this commit, a `-` in a patterns-file will allow an excluded directory
to be searched for matching descendants.  If the old behavior is desired, it
can be achieved by using a `!` in place of the `-`.

The following is a list of specific changes made by this commit:

 * renamed InclExclPattern named-tuple -> CmdTuple (with names 'val' and 'cmd'), since it is used more generally for commands, and not only for representing patterns.
 * represent commands as IECommand enum types (RootPath, PatternStyle, Include, Exclude, ExcludeNoRecurse)
 * archiver: Archiver.build_matcher() paths arg renamed -> include_paths to prevent confusion as to whether the list of paths are to be included or excluded.
 * helpers: PatternMatcher has recurse_dir attribute that is used to communicate whether an excluded dir should be recursed (used by Archiver._process())
 * archiver: Archiver.build_matcher() now only returns a PatternMatcher instance, and not an include_patterns list -- this list is now created and housed within the PatternMatcher instance, and can be accessed from there.
 * moved operation of finding unmatched patterns from Archiver to PatternMatcher.get_unmatched_include_patterns()
 * added / modified some documentation of code
 * renamed _PATTERN_STYLES -> _PATTERN_CLASSES since "style" is ambiguous and this helps clarify that the set contains classes and not instances.
 * have PatternBase subclass instances store whether excluded dirs are to be recursed.  Because PatternBase objs are created corresponding to each +, -, ! command it is necessary to differentiate - from ! within these objects.
 * add test for '!' exclusion rule (which doesn't recurse)

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
src/borg/testsuite/helpers.py
==================
ca95516;Thomas Waldmann;2017-04-09 21:20:58 +0200;update CHANGES (master)

==

docs/changes.rst
==================
9ae4bf0;TW;2017-04-09 20:47:00 +0200;Merge pull request #2188 from rciorba/hashindex_test
add extra test for the hashindex
==
==================
92acc46;TW;2017-04-08 19:00:58 +0200;Merge pull request #2406 from patrickgoering/master
hardlink issue
==
==================
f64f432;Patrick Goering;2017-04-08 17:10:02 +0200;catch exception for os.link when hardlinks are not supported

==

src/borg/repository.py
==================
9f31dba;Radu Ciorba;2017-04-07 15:56:13 +0300;cleanup the test and add more checks

==

src/borg/testsuite/hashindex.py
==================
8c2064c;Radu Ciorba;2017-02-20 14:58:41 +0200;add extra test for the hashindex
Insert a few keys, delete some of them, check we still have
the values we expect, check the deleted ones aren't there.

==

src/borg/testsuite/hashindex.py
==================
2c1607c;enkore;2017-04-06 11:38:47 +0200;Merge pull request #2394 from enkore/f/recreate-archive-expansion
recreate: expand placeholders
==
==================
03ed4d3;Marian Beermann;2017-04-06 11:36:50 +0200;recreate: expand placeholders

==

src/borg/archiver.py
==================
03457e9;enkore;2017-04-06 09:06:46 +0200;Merge pull request #2389 from ThomasWaldmann/rename-with-placeholders
borg rename: expand placeholders, fixes #2386
==
==================
c7256ab;Thomas Waldmann;2017-04-06 01:03:24 +0200;borg rename: expand placeholders, fixes #2386

==

src/borg/archiver.py
==================
736a815;enkore;2017-04-05 14:34:29 +0200;Merge pull request #2342 from ThomasWaldmann/generic-hardlinks
Generic hardlinks
==
==================
7255e3b;enkore;2017-04-05 14:10:30 +0200;Merge pull request #2387 from enkore/f/placeholders-internals
placeholders: deny access to internals and other unspecified stuff
==
==================
9a1c1e9;enkore;2017-04-05 14:09:58 +0200;Merge pull request #2375 from enkore/buhdf
BORG_HOSTNAME_IS_UNIQUE=yes by default.
==
==================
155f38c;Thomas Waldmann;2017-04-05 13:54:58 +0200;remove comment about strange hardlink_masters term
(maybe revisit this later, this is not in scope of the generic hardlinks refactor)

==

src/borg/archive.py
==================
cc24fa2;Marian Beermann;2017-04-05 12:19:56 +0200;format_line: whitelist instead of checking against blacklist

==

src/borg/helpers.py
==================
8f769a9;Thomas Waldmann;2017-04-02 02:46:44 +0200;implement and use hardlinkable() helper

==

src/borg/archive.py
src/borg/archiver.py
src/borg/fuse.py
src/borg/helpers.py
==================
cb86bda;Thomas Waldmann;2017-04-02 01:38:58 +0200;extract: implement extract_helper context manager
Most code of the CM is just moved 1:1 from the regular file block.

Use the CM for regular files, FIFOs and devices, but not for:
- directories (can not have hardlinks)
- symlinks (we can not support hardlinked symlinks)

==

src/borg/archive.py
==================
cda7465;Thomas Waldmann;2017-04-02 01:22:25 +0200;extract: indent code, no semantics change
prepare for a extract_helper context manager

(some changes may seem superfluous, but see the following changesets)

==

src/borg/archive.py
==================
49f6128;Marian Beermann;2017-04-04 16:29:32 +0200;docs: serve: env vars in original commands are ignored

==

docs/usage.rst
==================
3cc1cdd;Thomas Waldmann;2017-04-02 01:19:46 +0200;extract: refactor hardlinks related code
prepare for a extract_helper context manager

(some changes may seem superfluous, but see the following changesets)

==

src/borg/archive.py
==================
32c6e3a;Thomas Waldmann;2017-03-28 20:49:38 +0200;docs: tell what kind of hardlinks we support

==

docs/installation.rst
==================
23cc679;Thomas Waldmann;2017-03-26 14:25:33 +0200;no hardlinking for directories and symlinks
- nlink > 1 for dirs does not mean hardlinking
  (at least not everywhere, wondering how apple does it)
- we can not archive hardlinked symlinks due to item.source dual-use,
  see issue #2343.

likely nobody uses this anyway.

==

src/borg/archive.py
==================
1f6dc55;Thomas Waldmann;2017-03-26 14:03:39 +0200;simplify char/block device file dispatching

==

src/borg/archive.py
src/borg/archiver.py
==================
9478e8a;Thomas Waldmann;2017-03-26 13:51:04 +0200;support hardlinks via create_helper context manager
also: reduce code duplication

==

src/borg/archive.py
==================
e5d094d;Thomas Waldmann;2017-03-26 06:15:36 +0200;use same finalizing code for hardlink masters and slaves
hardlink slaves get a precomputed size attribute now.

==

src/borg/archive.py
==================
a206a85;Thomas Waldmann;2017-03-26 06:07:02 +0200;indent block, no semantics change

==

src/borg/archive.py
==================
66f4cd1;Thomas Waldmann;2017-03-26 06:01:13 +0200;minor refactor for regular file hardlink processing

==

src/borg/archive.py
==================
7a80b18;enkore;2017-04-05 12:23:59 +0200;Merge pull request #2383 from enkore/f/recreaterecompressargsthingsthatareugly
recreate: add --recompress flag, avoid weirdo use of args.compression
==
==================
707316b;Marian Beermann;2017-04-05 00:11:46 +0200;placeholders: document escaping

==

src/borg/archiver.py
==================
1bd381a;Marian Beermann;2017-04-05 00:05:46 +0200;format_line: deny conversions (!r, !s, !a)

==

src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
e2e172c;Marian Beermann;2017-04-05 00:00:18 +0200;format_line: clearer error message for unrecognized placeholder

==

src/borg/helpers.py
==================
1924e33;Marian Beermann;2017-04-04 23:59:58 +0200;format_line: deny access to internal objects

==

src/borg/helpers.py
==================
dcfbd39;Marian Beermann;2017-04-04 18:34:37 +0200;recreate: unify --always-recompress and --recompress

==

src/borg/archiver.py
==================
7496569;enkore;2017-04-04 16:27:33 +0200;Merge pull request #2374 from enkore/issue/2353
serve: fix forced command lines containing BORG_ env vars
==
==================
88dfb3e;Marian Beermann;2017-04-01 21:10:31 +0200;serve: fix forced command lines containing BORG_ env vars

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
b295335;Marian Beermann;2017-04-04 15:11:15 +0200;recreate: add --recompress flag, avoid weirdo use of args.compression

==

docs/usage.rst
src/borg/archive.py
src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
f878678;enkore;2017-04-04 00:28:03 +0200;Merge pull request #2364 from enkore/f/autocomp
Refactor compression decision stuff
==
==================
2ff75d5;Marian Beermann;2017-04-03 22:05:53 +0200;remove Chunk()

==

src/borg/archive.py
src/borg/archiver.py
src/borg/cache.py
src/borg/fuse.py
src/borg/helpers.py
src/borg/key.py
src/borg/testsuite/archive.py
src/borg/testsuite/archiver.py
src/borg/testsuite/helpers.py
src/borg/testsuite/key.py
==================
69fb9bd;Marian Beermann;2017-04-03 21:48:06 +0200;remove --compression-from

==

src/borg/archive.py
src/borg/archiver.py
src/borg/compress.pyx
src/borg/helpers.py
src/borg/key.py
src/borg/testsuite/helpers.py
==================
929f276;Marian Beermann;2017-04-03 21:25:39 +0200;change global compression default to lz4 as well
To be consistent with --compression defaults.

==

src/borg/key.py
src/borg/testsuite/key.py
==================
0847c3f;Marian Beermann;2017-04-01 00:12:16 +0200;Unify ComprSpec and CompressionSpec; don't instanciate Compressors right away

==

src/borg/archive.py
src/borg/archiver.py
src/borg/compress.pyx
src/borg/helpers.py
src/borg/testsuite/compress.py
==================
d1826cc;Marian Beermann;2017-03-31 13:46:28 +0200;Rename CompressionDecider1 -> CompressionDecider

==

src/borg/archive.py
src/borg/compress.pyx
src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
0c74101;Marian Beermann;2017-03-31 13:43:48 +0200;Rename Chunk.meta[compress] => Chunk.meta[compressor]

==

src/borg/archive.py
src/borg/compress.pyx
src/borg/key.py
==================
8864759;Marian Beermann;2017-03-31 13:39:54 +0200;compress: docs

==

src/borg/compress.pyx
==================
5a20fc0;Marian Beermann;2017-03-31 12:17:58 +0200;key: compress(chunk) return data

==

src/borg/key.py
==================
a27f585;Marian Beermann;2017-03-31 12:02:30 +0200;refactor CompressionDecider2 into a meta Compressor

==

src/borg/archive.py
src/borg/archiver.py
src/borg/compress.pyx
src/borg/helpers.py
src/borg/key.py
src/borg/testsuite/compress.py
src/borg/testsuite/helpers.py
==================
bb6b4fd;Marian Beermann;2017-04-01 21:28:41 +0200;BORG_HOSTNAME_IS_UNIQUE=yes by default.

==

docs/changes.rst
docs/usage_general.rst.inc
src/borg/cache.py
src/borg/helpers.py
src/borg/remote.py
src/borg/repository.py
==================
d79da81;TW;2017-04-01 18:47:27 +0200;Merge pull request #2372 from RonnyPfannschmidt/travis
enhance travis setuptools_scm situation
==
==================
132f000;Ronny Pfannschmidt;2017-04-01 18:25:45 +0200;enhance travis setuptools_scm situation
* add setuptools_scm to the development requirements
* print the own version at install time
* unshallow the repo and fetch all tags

==

.travis.yml
.travis/install.sh
requirements.d/development.txt
==================
74a4c4f;enkore;2017-04-01 16:58:09 +0200;Merge pull request #2371 from ThomasWaldmann/minor-extract-refactor
extract: remove duplicate code
==
==================
bdbcbf7;Thomas Waldmann;2017-04-01 16:56:21 +0200;extract: remove duplicate code
anything at <path> gets nuked already a few lines above, if possible.

==

src/borg/archive.py
==================
30f5e6e;enkore;2017-03-30 16:03:55 +0200;Merge pull request #2351 from ThomasWaldmann/refactor-extract
Refactor extract
==
==================
d4e27e2;Thomas Waldmann;2017-03-28 23:22:25 +0200;extract: small bugfix and refactoring for parent dir creation
make_parent(path) helper to reduce code duplication.
also use it for directories although makedirs can also do it.

bugfix: also create parent dir for device files, if needed.

==

src/borg/archive.py
==================
ceaf4a8;Thomas Waldmann;2017-03-28 22:02:54 +0200;extract: small bugfix and optimization for hardlink masters
if a hardlink master is not in the to-be-extracted subset, the "x"
status was not displayed for it.

also, the matcher was called twice for matching items.

==

src/borg/archive.py
==================
22b56ae;enkore;2017-03-28 15:45:14 +0200;Merge pull request #2349 from enkore/f/clarify-license-text
LICENSE: use canonical formulation
==
==================
9d8b7ca;Marian Beermann;2017-03-28 14:11:35 +0200;LICENSE: use canonical formulation
("copyright holders and contributors" instead of "author")

==

LICENSE
==================
d8d7c68;enkore;2017-03-28 10:33:31 +0200;Merge pull request #2348 from ThomasWaldmann/rel110b4
Release 1.1.0b4
==
==================
9639498;Thomas Waldmann;2017-03-27 12:38:19 +0200;vagrant: increase memory for parallel testing
considering that we run pytest-xdist with 4 parallel processes,
we need a bit more RAM to avoid the OOM killer and MemoryError.

so, 1GiB for 32bit, 1.5GiB for 64bit VMs.

==

Vagrantfile
==================
38860b3;Thomas Waldmann;2017-03-27 12:08:54 +0200;lz4 compress: lower max. buffer size, exception handling
on the wheezy32 test machine, a test testing with corrupted data crashed
with a MemoryError when it tried to get a ~800MB large buffer.
MemoryError is now transformed to DecompressionError, so it gets handled
better.

Also, the bound for giving up is now much lower: 1GiB -> 128MiB.

==

src/borg/compress.pyx
==================
85bfcd4;Thomas Waldmann;2017-03-27 01:58:19 +0200;ran setup.py build_man

==

docs/man/borg-break-lock.1
docs/man/borg-change-passphrase.1
docs/man/borg-check.1
docs/man/borg-common.1
docs/man/borg-compression.1
docs/man/borg-create.1
docs/man/borg-delete.1
docs/man/borg-diff.1
docs/man/borg-extract.1
docs/man/borg-info.1
docs/man/borg-init.1
docs/man/borg-key-change-passphrase.1
docs/man/borg-key-export.1
docs/man/borg-key-import.1
docs/man/borg-key-migrate-to-repokey.1
docs/man/borg-key.1
docs/man/borg-list.1
docs/man/borg-mount.1
docs/man/borg-patterns.1
docs/man/borg-placeholders.1
docs/man/borg-prune.1
docs/man/borg-recreate.1
docs/man/borg-rename.1
docs/man/borg-serve.1
docs/man/borg-umount.1
docs/man/borg-upgrade.1
docs/man/borg-with-lock.1
docs/man/borg.1
==================
acd3da6;Thomas Waldmann;2017-03-27 01:57:52 +0200;add docstring to do_benchmark_crud

==

src/borg/archiver.py
==================
251983a;Thomas Waldmann;2017-03-27 01:45:45 +0200;ran setup.py build_usage

==

docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/common-options.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/extract.rst.inc
docs/usage/help.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/umount.rst.inc
docs/usage/with-lock.rst.inc
==================
5bc1714;Thomas Waldmann;2017-03-27 01:45:04 +0200;patterns help: mention path full-match in intro

==

src/borg/archiver.py
==================
72abd12;Thomas Waldmann;2017-03-27 01:35:32 +0200;update CHANGES with release date

==

docs/changes.rst
==================
d9462d4;TW;2017-03-27 01:26:06 +0200;Merge pull request #2327 from ThomasWaldmann/update-master-changes
update CHANGES (master / 1.1.0b4)
==
==================
60ae958;Thomas Waldmann;2017-03-22 05:08:14 +0100;update CHANGES (master / 1.1.0b4)

==

docs/changes.rst
==================
f2e9e86;TW;2017-03-27 01:15:24 +0200;Merge pull request #2334 from ThomasWaldmann/precise-pattern
add PathFullPattern / optimization for it
==
==================
cb6bfdf;Thomas Waldmann;2017-03-26 00:26:57 +0100;add docs for path full-match patterns

==

src/borg/archiver.py
==================
93feb75;Thomas Waldmann;2017-03-24 06:06:02 +0100;optimize PathFullPattern matching for O(1) time
For a borg create run using a patterns file with 15.000 PathFullPattern excludes
that excluded almost all files in the input data set:
- before this optimization: ~60s
- after this optimization: ~1s

==

src/borg/helpers.py
==================
ebd9287;Thomas Waldmann;2017-03-24 04:30:03 +0100;add PathFullPattern
not really a pattern (as in potentially having any variable parts) - it just does a full,
precise match, after the usual normalizations.

the reason for adding this is mainly for later optimizations, e.g. via set membership check,
so that a lot of such PathFullPatterns can be "matched" within O(1) time.

==

src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
6dab802;TW;2017-03-26 23:53:16 +0200;Merge pull request #2344 from ThomasWaldmann/fix-size-symlink
fix symlink item fs size computation
==
==================
90dd0e8;Thomas Waldmann;2017-03-26 16:05:22 +0200;fix symlink item fs size computation
a symlink has a 'source' attribute, so it was confused with a hardlink
slave here. see also issue #2343.

also, a symlink's fs size is defined as the length of the target path.

==

src/borg/item.pyx
src/borg/testsuite/archiver.py
src/borg/testsuite/item.py
==================
4fe9d06;TW;2017-03-26 18:15:12 +0200;Merge pull request #2255 from ThomasWaldmann/async-errors
async exception processing
==
==================
a908813;Thomas Waldmann;2017-03-21 23:44:47 +0100;RemoteRepository: shutdown with timeout

==

src/borg/remote.py
src/borg/repository.py
==================
945880a;Thomas Waldmann;2017-03-05 05:19:32 +0100;implement async_response, add wait=True for add_chunk/chunk_decref
Before this changeset, async responses were:
- if not an error: ignored
- if an error: raised as response to the arbitrary/unrelated next command

Now, after sending async commands,  the async_response command must be used
to process outstanding responses / exceptions.

We are avoiding to pile up lots of stuff in cases of high latency, because we do NOT
first wait until ALL responses have arrived, but we just can begin to process responses.
Calls with wait=False will just return what we already have received.
Repeated calls with wait=True until None is returned will fetch all responses.

Async commands now actually could have non-exception non-None results, but
this is not used yet. None responses are still dropped.

The motivation for this is to have a clear separation between a request
blowing up because it (itself) failed and failures unrelated to that request /
to that line in the sourcecode.

also: fix processing for async repo obj deletes

exception_ignored is a special object used that is "not None" (as None is used to signal
"finished with processing async results") but also not a potential async response result value.

Also:

added wait=True to chunk_decref() and add_chunk()

this makes async processing explicit - the default is synchronous and you only
need to be careful and do extra steps for async processing if you explicitly
request async by calling with wait=False (usually for speed reasons).

to process async results, use async_response, see above.

==

src/borg/archive.py
src/borg/cache.py
src/borg/remote.py
src/borg/repository.py
src/borg/testsuite/archive.py
src/borg/testsuite/archiver.py
==================
713889d;enkore;2017-03-26 04:59:42 +0200;Merge pull request #2340 from jdchristensen/auto-threshold
With --compression auto,C, only use C if lz4 achieves at least 3% compression
==
==================
48652a6;Dan Christensen;2017-03-25 19:44:19 -0400;With --compression auto,C, only use C if lz4 achieves at least 3% compression

==

src/borg/helpers.py
==================
f0a04a9;TW;2017-03-25 23:44:06 +0100;Merge pull request #2338 from ThomasWaldmann/normalize-once-only
optimize / simplify path normalization
==
==================
1a376ae;Thomas Waldmann;2017-03-25 23:16:05 +0100;PatternMatcher: only normalize the path once
not N times for N patterns.

==

src/borg/helpers.py
==================
126e782;Thomas Waldmann;2017-03-25 22:49:39 +0100;path normalization: rather use function than decorator
less and less complex code, more flexible usage.

==

src/borg/helpers.py
==================
83de89d;enkore;2017-03-25 16:04:57 +0100;Merge pull request #2336 from enkore/issue/2335
Remove Python API docs
==
==================
dfdf590;Marian Beermann;2017-03-25 15:42:00 +0100;docs: typos

==

docs/faq.rst
==================
475d53d;Marian Beermann;2017-03-25 15:41:11 +0100;docs: kill api page

==

docs/api.rst
docs/development.rst
setup.py
==================
e949dfc;TW;2017-03-25 15:24:58 +0100;Merge pull request #2332 from ThomasWaldmann/fix-auto-compression
use immutable data structure for the compression spec, fixes #2331
==
==================
d81311e;TW;2017-03-25 01:01:02 +0100;Merge pull request #2333 from fmikker/feature/faq-backing-up-root-partition
Added FAQ section about backing up root partition
==
==================
d01a8f5;Fredrik Mikker;2017-03-24 00:49:08 +0100;Added FAQ section about backing up root partition
Using borgbackup to backup the root partition works fine, just
remember to exclude non-essential directories.

Signed-off-by: Fredrik Mikker <fredrik@mikker.se>

==

docs/faq.rst
==================
2414cd4;Thomas Waldmann;2017-03-23 23:57:30 +0100;use immutable data structure for the compression spec, fixes #2331
the bug was compr_args.update(compr_spec), helpers.py:2168 - that mutated
the compression spec dict (and not just some local one, but the compr spec
dict parsed from the commandline args).

so a change that was intended just for 1 chunk changed the desired
compression level on the archive scope.

I refactored the stuff to use a namedtuple (which is immutable, so such
effects can not happen again).

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/key.py
src/borg/testsuite/helpers.py
==================
1077ccb;TW;2017-03-21 19:04:30 +0100;Merge pull request #2321 from ThomasWaldmann/revert-bigint-removal
Revert bigint removal
==
==================
1b008f7;Thomas Waldmann;2017-03-21 02:42:51 +0100;fixup: remove unneeded imports

==

src/borg/archive.py
==================
b27cc37;Thomas Waldmann;2017-03-21 02:40:50 +0100;safe_timestamp: arg is always an int
the Item object already does the bigint_to_int decode when accessing .mtime/.atime/.ctime

==

src/borg/helpers.py
==================
3665cc3;Thomas Waldmann;2017-03-21 02:27:20 +0100;bigint conversion: add compatibility note

==

src/borg/item.pyx
==================
f708183;Thomas Waldmann;2017-03-21 02:21:32 +0100;Revert "don't do "bigint" conversion for nanosecond mtime"
This reverts commit 8b2e7ec68099fc85ac7298d462db14b5f0ee7486.

We still need the bigint stuff for borg 1.0 compatibility.

# Conflicts:
#	src/borg/cache.py

==

src/borg/cache.py
src/borg/item.pyx
src/borg/testsuite/item.py
==================
04dba76;Thomas Waldmann;2017-03-21 02:05:38 +0100;Mostly revert "clean imports, remove unused code"
This reverts commit b7eaeee26631f145a2b7d73f73f20fb56314c3a8.

We still need the bigint stuff for compatibility to borg 1.0 archives.

# Conflicts:
#	src/borg/archive.py
#	src/borg/archiver.py
#	src/borg/helpers.py
#	src/borg/key.py

==

src/borg/archive.py
src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
16e6e3d;TW;2017-03-17 14:09:47 +0100;Merge pull request #2288 from ThomasWaldmann/patterns-style-default
support setting the pattern style default in patterns file
==
==================
10d4c97;TW;2017-03-16 20:31:39 +0100;Merge pull request #2309 from ThomasWaldmann/fix-2304
clamp (nano)second values to unproblematic range, fixes #2304
==
==================
b7a17a6;Thomas Waldmann;2017-03-15 18:54:34 +0100;clamp (nano)second values to unproblematic range, fixes #2304
filesystem -> clamp -> archive (create)

==

src/borg/archive.py
src/borg/cache.py
src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
4237118;Thomas Waldmann;2017-03-11 04:13:40 +0100;support switching the pattern style default in patterns file

==

src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
ae65079;TW;2017-03-16 18:57:56 +0100;Merge pull request #2311 from enkore/f/ratelimit-faq
faq: mention --remote-ratelimit in bandwidth limit question
==
==================
988e452;Marian Beermann;2017-03-16 15:13:03 +0100;faq: mention --remote-ratelimit in bandwidth limit question

==

docs/faq.rst
==================
883a7ee;enkore;2017-03-15 17:08:07 +0100;Archive: allocate zeros when needed (#2308)
fixes huge memory usage of mount (8 MiB × number of archives)
==

src/borg/archive.py
==================
e3a0c4e;TW;2017-03-15 02:54:47 +0100;Merge pull request #2302 from ThomasWaldmann/fix-caskroom-link
fix caskroom link, fixes #2299
==
==================
b287fba;Thomas Waldmann;2017-03-15 01:22:21 +0100;fix caskroom link, fixes #2299

==

docs/installation.rst
==================
d1738ec;Marian Beermann;2017-03-13 10:16:08 +0100;docs/security: reiterate that RPC in Borg does no networking

==

docs/internals/security.rst
==================
86867e5;Marian Beermann;2017-03-13 10:04:45 +0100;docs/security: counter tracking
Copied from #2266

==

docs/internals/security.rst
==================
2117861;Milkey Mouse;2017-03-08 22:38:37 -0800;Securely erase config file, fixes #2257
The SaveFile code, while ensuring atomicity, did not allow for secure
erasure of the config file (containing the old encrypted key). Now it
creates a hardlink to the file, lets SaveFile do its thing, and writes
random data over the old file (via the hardlink). A secure erase is
needed because the config file can contain the old key after changing
one's password.

==

src/borg/helpers.py
src/borg/repository.py
==================
23f6a82;Thomas Waldmann;2017-03-11 05:39:30 +0100;fix borg key/debug/benchmark crashing without subcommand, fixes #2240

==

src/borg/archiver.py
==================
a842001;Thomas Waldmann;2017-03-11 00:00:25 +0100;fix error msg, it is --keep-within, not --within

==

src/borg/helpers.py
==================
00f98d8;Marian Beermann;2017-03-10 23:12:45 +0100;docs/development: update merge remarks

==

docs/development.rst
==================
55759f7;Milkey Mouse;2017-03-09 12:31:04 -0800;Address SSH batch mode in docs (fixes #2202) (#2270)

==

docs/usage.rst
==================
cdb4df0;Marian Beermann;2017-03-09 21:12:07 +0100;--log-json: time property on most progress/log objects, remove is_prompt

==

docs/internals/frontends.rst
src/borg/archive.py
src/borg/helpers.py
src/borg/logger.py
==================
e07a289;Marian Beermann;2017-03-03 23:57:50 +0100;frontends.rst: it's "null" in json

==

docs/internals/frontends.rst
==================
e98b5b2;Marian Beermann;2017-03-03 15:24:57 +0100;yes(): handle JSON output

==

docs/internals/frontends.rst
docs/usage_general.rst.inc
src/borg/helpers.py
==================
85a2d2f;Milkey Mouse;2017-03-07 20:30:18 -0800;Add warning about running build_usage on Python >3.4 (fixes #2123)
Python 3.6 added some new guaranteed hashing algorithms that will
show up as available in the docs even though the baseline for support
is Python 3.4; running build_usage with Python 3.4 will fix this.

# Conflicts:
#	docs/development.rst

==

docs/development.rst
==================
63b5cbf;Abdel-Rahman;2017-03-08 18:13:42 +0200;extract: warning RC for unextracted big extended attributes, followup (#2258)
* Set warning exit code when xattr is too big

* Warnings for more extended attributes errors (ENOTSUP, EACCES)

* Add tests for all xattr warnings

==

src/borg/archive.py
src/borg/testsuite/archiver.py
==================
1551be5;Florent Hemmi;2017-03-07 14:38:45 +0100;Docs: one link per distro in the installation page

==

docs/installation.rst
==================
fc41c98;enkore;2017-03-08 17:08:54 +0100;Redo key_creator, key_factory, centralise key knowledge (#2272)
* key: put key metadata (name, storage) into key classses

* keymanager: use key-declared storage types

==

src/borg/key.py
src/borg/keymanager.py
==================
1f861ec;TW;2017-03-08 16:58:16 +0100;Merge pull request #2269 from edgimar/master
docs:  improve --exclude-if-present and --keep-exclude-tags, fixes #2268
==
==================
e4391de;Mark Edgington;2017-03-07 19:55:46 -0500;docs:  improve --exclude-if-present and --keep-exclude-tags

==

src/borg/archiver.py
==================
ad0eab8;TW;2017-03-07 21:02:59 +0100;Merge pull request #2265 from ThomasWaldmann/test-3.6-dev
help python development by testing 3.6-dev
==
==================
98e80ef;Thomas Waldmann;2017-03-07 05:07:51 +0100;help python development by testing 3.6-dev

==

.travis.yml
==================
4b33c3f;Abdel-Rahman;2017-03-05 14:33:42 +0200;Add return code functions (#2199)

==

src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
89114d4;TW;2017-03-04 17:54:58 +0100;Merge pull request #2198 from Abogical/too-big-xattr
Handle big extended attributes. Fixes #2161
==
==================
04eb7d7;TW;2017-03-04 17:31:59 +0100;Merge pull request #2250 from ThomasWaldmann/hashtable-minor-fix-m
hashindex: rebuild hashtable if we have too little empty buckets, fixes #2246
==
==================
fd06497;Thomas Waldmann;2017-03-03 15:41:08 +0100;hashindex: rebuild hashtable if we have too little empty buckets, fixes #2246
if there are too many deleted buckets (tombstones), hashtable performance goes down the drain.
in the worst case of 0 empty buckets and lots of tombstones, this results in full table scans for
new / unknown keys.
thus we make sure we always have a good amount of empty buckets.

==

src/borg/_hashindex.c
==================
503e9a2;TW;2017-03-04 00:01:02 +0100;Fix compression exceptions (#2224)
* trigger bug in --verify-data, see #2221

* raise decompression errors as DecompressionError, fixes #2221

this is a subclass of IntegrityError, so borg check --verify-data works correctly if
the decompressor stumbles over corrupted data before the plaintext gets verified
(in a unencrypted repository, otherwise the MAC check would fail first).

* fixup: fix exception docstring, add placeholder, change wording

==

src/borg/compress.pyx
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
46ba935;enkore;2017-03-03 15:28:26 +0100;Merge pull request #2247 from enkore/pr/2235-fixup
quickstart: fix rst issue
==
==================
1bbfb24;Marian Beermann;2017-03-03 15:27:17 +0100;quickstart: fix rst issue

==

docs/quickstart.rst
==================
6468b8a;enkore;2017-03-03 14:39:28 +0100;Merge pull request #2229 from enkore/f/jsonp
JSON progress indicators
==
==================
f98151d;enkore;2017-03-02 09:54:44 +0100;Merge pull request #2244 from enkore/f/list-cache
list: only load cache if needed
==
==================
ce57f34;TW;2017-03-02 05:47:05 +0100;Merge pull request #2235 from kmq/master_2214
Improve automated backup script in doc fixes #2214 
==
==================
c190a87;kmq;2017-02-26 22:15:03 +0200;Improve automated backup script in doc fixes #2214

==

docs/quickstart.rst
==================
c50ffc2;Marian Beermann;2017-03-02 00:24:22 +0100;list: only load cache if needed

==

src/borg/archiver.py
src/borg/helpers.py
==================
abb0a20;Marian Beermann;2017-03-01 16:58:06 +0100;list: files->items, clarifications

==

docs/internals/frontends.rst
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
ec1304b;TW;2017-03-01 01:57:56 +0100;Merge pull request #2236 from ThomasWaldmann/rebase-pr-2193
[docs] improve remote-path description
==
==================
d570792;Thomas Waldmann;2017-03-01 01:53:23 +0100;[docs] improve remote-path description
(ported bebehei's 1.0-maint change to master)

==

docs/usage_general.rst.inc
src/borg/archiver.py
==================
0db0583;TW;2017-02-28 21:49:04 +0100;Merge pull request #2217 from ThomasWaldmann/bench-cmd
borg benchmark crud command
==
==================
7e9845f;Thomas Waldmann;2017-02-28 21:44:06 +0100;added borg benchmark crud output to docs/misc/

==

docs/misc/benchmark-crud.txt
==================
9f3a970;Thomas Waldmann;2017-02-26 07:17:23 +0100;borg benchmark crud command, fixes #1788

==

src/borg/archiver.py
==================
94d40e5;enkore;2017-02-28 20:08:14 +0100;Merge pull request #2232 from leo-b/master-patterns-from-fix
Fix for PR #1971 (master)
==
==================
5cd424e;Alexander 'Leo' Bergolth;2017-02-28 12:01:37 +0100;--patterns-from was accessing args.roots instead of args.paths add a test case that parses a command containing --patterns-from

==

src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
7cce650;Marian Beermann;2017-02-28 11:58:43 +0100;json docs: rather complete error list

==

docs/internals/frontends.rst
scripts/errorlist.py
==================
6ee0585;Marian Beermann;2017-02-28 02:04:46 +0100;extract: fix missing call to ProgressIndicator.finish

==

src/borg/archiver.py
==================
8e1edaf;Marian Beermann;2017-02-28 01:30:11 +0100;ArchiveFormatter: add "start" key for compatibility with "info"

==

docs/internals/frontends.rst
src/borg/helpers.py
==================
5135095;Marian Beermann;2017-02-27 22:54:01 +0100;json: examples

==

docs/internals/frontends.rst
==================
d327109;Marian Beermann;2017-02-27 22:36:09 +0100;json progress: emit info (current $something)

==

docs/internals/frontends.rst
src/borg/helpers.py
==================
fcad0dd;Marian Beermann;2017-02-27 21:24:56 +0100;pass msgid for common errors

==

docs/internals/frontends.rst
src/borg/archiver.py
src/borg/logger.py
==================
9f446aa;Marian Beermann;2017-02-27 20:51:20 +0100;pass --log-json to remote
Obviously this means that --log-json with remote repos requires 1.1
on the remote end, but if you don't have that, then random "Remote:"
lines would break stderr anyway.

==

src/borg/logger.py
src/borg/remote.py
==================
d5515b6;Marian Beermann;2017-02-27 20:38:02 +0100;add msgid to progress output

==

docs/internals/frontends.rst
src/borg/archive.py
src/borg/archiver.py
src/borg/cache.py
src/borg/helpers.py
src/borg/repository.py
==================
6288c9f;Marian Beermann;2017-02-27 20:30:20 +0100;enhance JSON progress information
separate output types, extra information

==

docs/internals/frontends.rst
src/borg/helpers.py
==================
7c9c4b6;enkore;2017-02-27 18:05:43 +0100;Merge pull request #2157 from ThomasWaldmann/add-filesize
archived file items: add size metadata
==
==================
0e3560b;enkore;2017-02-27 17:03:37 +0100;Merge pull request #2219 from enkore/f/frontend-docs
document JSON
==
==================
b7e158c;enkore;2017-02-27 16:52:29 +0100;Merge pull request #2227 from ThomasWaldmann/update-files-cache-inodes
files cache: update inode number, fixes #2226
==
==================
0721cb1;Thomas Waldmann;2017-02-27 15:30:55 +0100;files cache: update inode number, fixes #2226

==

src/borg/cache.py
==================
1a67b82;TW;2017-02-27 00:31:43 +0100;Merge pull request #2220 from ThomasWaldmann/compression-default-lz4
use lz4 compression by default, fixes #2179
==
==================
332f789;Marian Beermann;2017-02-26 21:12:23 +0100;update docs for create -C default change

==

docs/faq.rst
docs/quickstart.rst
docs/usage.rst
==================
46787a9;enkore;2017-02-26 21:23:23 +0100;Merge pull request #2204 from ThomasWaldmann/test-delete-force
Test delete --force
==
==================
56f99a7;enkore;2017-02-26 20:57:21 +0100;Merge pull request #2222 from kmq/master
Document relative path usage #1868
==
==================
757921d;kmq;2017-02-26 20:33:15 +0200;Document relative path usage #1868

==

docs/usage.rst
src/borg/archiver.py
==================
2ad5f90;Thomas Waldmann;2017-02-24 01:45:14 +0100;add test for borg delete --force

==

src/borg/testsuite/archiver.py
==================
9bc825a;TW;2017-02-26 18:44:31 +0100;Merge pull request #2184 from ThomasWaldmann/zap
borg delete --force --force to delete severely corrupted archives, fixes #1975
==
==================
92e5db0;Thomas Waldmann;2017-02-26 18:38:29 +0100;use lz4 compression by default, fixes #2179
not for create_src_archive() though as this triggers a bug that has to get fixed outside this PR first.

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
ecd13f1;enkore;2017-02-26 17:34:15 +0100;Merge pull request #2218 from kmq/master
document snapshot usage #2178
==
==================
9ed8e4b;Marian Beermann;2017-02-26 01:20:03 +0100;document JSON

==

docs/internals.rst
docs/internals/frontends.rst
docs/usage.rst
==================
5f802f3;enkore;2017-02-26 16:49:48 +0100;Merge pull request #2215 from enkore/f/logjson
Add --log-json option for structured logging output
==
==================
70c1197;Marian Beermann;2016-11-12 13:32:57 +0100;Add --log-json option for structured logging output

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/logger.py
==================
f7d28e7;kmq;2017-02-26 13:47:26 +0200;document snapshot usage #2178

==

docs/faq.rst
src/borg/archiver.py
==================
0f9b7a2;enkore;2017-02-25 23:05:35 +0100;Merge pull request #2203 from enkore/f/jsono
JSON output for major commands
==
==================
5c46136;enkore;2017-02-25 22:41:27 +0100;Merge pull request #2210 from enkore/f/rxtx
RemoteRepository: account rx/tx bytes
==
==================
e59d313;enkore;2017-02-25 16:11:44 +0100;Merge pull request #2206 from ThomasWaldmann/fix-location-regex-smb
Location: accept //servername/share/path
==
==================
43bb43a;enkore;2017-02-24 11:55:13 +0100;Merge pull request #2192 from enkore/f/doctoc
Edited + and corrected some stuff in internals+security
==
==================
c8ec698;Thomas Waldmann;2017-02-24 04:22:12 +0100;Location: accept //servername/share/path

==

src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
4d81b18;Thomas Waldmann;2017-02-19 07:07:12 +0100;borg delete --force --force to delete severely corrupted archives, fixes #1975

==

src/borg/archive.py
src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
e487b84;Abogical;2017-02-22 16:30:22 +0200;Add testsuite to test handling of too big xattr

==

src/borg/testsuite/archiver.py
==================
4c9bc96;Abogical;2017-02-21 20:38:44 +0200;Print a warning for too big extended attributes

==

src/borg/archive.py
==================
7da0a9c;Thomas Waldmann;2017-02-20 22:24:19 +0100;borg extract: check file size consistency

==

src/borg/archive.py
==================
adc4da2;Thomas Waldmann;2017-02-18 23:09:40 +0100;borg check: check file size consistency

==

src/borg/archive.py
src/borg/item.pyx
==================
4f1db82;Marian Beermann;2017-02-23 21:34:13 +0100;info <archive>: use Archive.info() for both JSON and human display

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
==================
50068c5;Thomas Waldmann;2017-02-18 07:02:11 +0100;rename Item.file_size -> get_size
file_size is misleading here because one thinks of on-disk file size,
but for compressed=True, there is no such on-disk file.

==

src/borg/archive.py
src/borg/archiver.py
src/borg/fuse.py
src/borg/helpers.py
src/borg/item.pyx
src/borg/testsuite/item.py
==================
97bb1b7;Thomas Waldmann;2017-02-18 06:47:39 +0100;deduplicate / refactor item (c)size code

==

src/borg/cache.py
src/borg/helpers.py
src/borg/item.pyx
==================
0021052;Thomas Waldmann;2017-02-15 01:24:20 +0100;reduce code duplication

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/item.pyx
==================
ae6742f;Thomas Waldmann;2017-02-14 21:08:38 +0100;fuse: use precomputed size from Item

==

src/borg/fuse.py
==================
fe8e14c;Thomas Waldmann;2017-02-14 20:54:25 +0100;fuse: get rid of chunk accounting
the chunk accounting code tried to reflect repo space usage via the st_blocks of the files.
so, a specific chunk that was shared between multiple files [inodes] was only accounted for one specific file.
thus, the overall "du" of everything in the fuse mounted repo was maybe correctly reflecting the repo space usage,
but the decision which file has the chunk (the space) was kind of arbitrary and not really useful.

otoh, a simple fuse getattr() was rather expensive due to this as it needed to iterate over the chunks list
to compute the st_blocks value. also it needed quite some memory for the accounting.

thus, st_blocks is now just ceil(size / blocksize).

also: fixed bug that st_blocks was a floating point value previously.

also: preparing for further optimization of size computation (see next cs)

==

src/borg/fuse.py
==================
a52b54d;Thomas Waldmann;2017-02-14 06:35:54 +0100;archived file items: add size metadata
if an item has a chunk list, pre-compute the total size and store it into "size" metadata entry.

this speeds up access to item size (e.g. for regular files) and could also be used to verify the validity of the chunks list.

note about hardlinks: size is only stored for hardlink masters (only they have an own chunk list)

==

src/borg/archive.py
src/borg/archiver.py
src/borg/constants.py
src/borg/fuse.py
src/borg/helpers.py
src/borg/item.pyx
==================
f3c7e7c;Marian Beermann;2017-02-23 16:50:52 +0100;RemoteRepository: account rx/tx bytes

==

src/borg/remote.py
==================
8cdf192;Marian Beermann;2017-02-23 15:17:17 +0100;list: add "name" key for consistency with info cmd

==

src/borg/helpers.py
==================
56563a4;Marian Beermann;2017-02-23 14:27:32 +0100;move JSON generation and utilities to helpers

==

src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
4862efe;enkore;2017-02-23 14:50:33 +0100;Merge pull request #2194 from jdchristensen/master
In api decorator, pass wait argument to RemoteRepository.call; fixes …
==
==================
1f8c092;Marian Beermann;2017-02-23 12:51:57 +0100;list: --json for archive contents listing

==

src/borg/archiver.py
src/borg/helpers.py
==================
25781f5;Marian Beermann;2017-02-23 12:32:26 +0100;list: --json for archive listing

==

src/borg/archiver.py
==================
6180f50;Marian Beermann;2017-02-23 12:28:01 +0100;info: --json for archives

==

src/borg/archive.py
src/borg/archiver.py
==================
2ab5d0f;Marian Beermann;2017-02-23 12:09:09 +0100;use custom JSON encoder for repr'ing Borg objects consistently

==

src/borg/archiver.py
==================
7cbade2;Marian Beermann;2017-02-23 11:54:57 +0100;create: add --json option

==

src/borg/archive.py
src/borg/archiver.py
==================
cc26bdf;Marian Beermann;2017-02-23 11:41:06 +0100;info: add --json option

==

src/borg/archiver.py
src/borg/cache.py
src/borg/testsuite/archiver.py
==================
e3a8ccd;enkore;2017-02-23 09:18:04 +0100;Merge pull request #2197 from enkore/f/info-limits
info: show utilization of maximum archive size
==
==================
b0e4f13;Marian Beermann;2017-02-23 00:34:40 +0100;set MAX_DATA_SIZE = 20971479 bytes in solid stone

==

src/borg/constants.py
src/borg/repository.py
==================
69f7810;Marian Beermann;2017-02-22 16:53:03 +0100;info: show utilization of maximum archive size
See #1452

This is 100 % accurate.

Also increases maximum data size by ~41 bytes. Not 100 % side-effect free;
if you manage to exactly land in that area then older Borg would not read
it. OTOH it gives us a nice round number there.

==

src/borg/archive.py
src/borg/archiver.py
src/borg/constants.py
src/borg/repository.py
==================
20a5282;Dan Christensen;2017-02-21 22:48:42 -0500;In api decorator, pass wait argument to RemoteRepository.call; fixes #2185

==

src/borg/remote.py
==================
19d50cf;Marian Beermann;2017-02-22 15:53:15 +0100;docs: internals: move toctree to after the introduction text
this only changes the location on the page, nothing about how the TOC
is arranged.

==

docs/internals.rst
==================
1652525;Marian Beermann;2017-02-22 15:28:27 +0100;docs: clarify metadata kind, manifest ops

==

docs/internals.rst
docs/internals/data-structures.rst
==================
ecdf6ba;Marian Beermann;2017-02-18 00:01:53 +0100;docs: key enc: correct / clarify some stuff, link to internals/security

==

docs/internals/data-structures.rst
docs/internals/security.rst
==================
c03a7ad;Marian Beermann;2017-02-18 00:01:16 +0100;docs: datas: enc: 1.1.x mas different MACs

==

docs/internals/data-structures.rst
==================
6b21d63;Marian Beermann;2017-02-17 23:34:42 +0100;docs: datas: enc: correct factual error -- no nonce involved there.

==

docs/internals/data-structures.rst
==================
e5bbba5;Marian Beermann;2017-02-17 23:31:47 +0100;docs: make internals.rst an index page
Subsections:

- Security
- Data structures and file formats

==

docs/internals.rst
docs/internals/data-structures.rst
docs/internals/security.rst
docs/security.rst
==================
63f1708;Marian Beermann;2017-02-17 19:29:03 +0100;docs: edited internals section a bit

==

docs/internals.rst
docs/security.rst
==================
268d74b;TW;2017-02-21 21:57:23 +0100;Merge pull request #2181 from ThomasWaldmann/fix-2180
archive check: detect and fix missing replacement chunks, fixes #2180
==
==================
cd1df96;enkore;2017-02-21 21:53:09 +0100;Merge pull request #2171 from ThomasWaldmann/limit-unpacker
borg rpc: use limited msgpack.Unpacker
==
==================
2188476;TW;2017-02-21 21:38:31 +0100;Merge pull request #2183 from ThomasWaldmann/doc-env
document BORG_HOSTNAME_IS_UNIQUE, fixes #2087
==
==================
6dd5f0f;enkore;2017-02-20 09:30:05 +0100;Merge pull request #2187 from ThomasWaldmann/fix-hashindex-contains-bigendian
fix ChunkIndex.__contains__ assertion  for big-endian archs
==
==================
8d7dfe7;Thomas Waldmann;2017-02-20 07:38:55 +0100;fix ChunkIndex.__contains__ assertion  for big-endian archs
also: add some missing assertion messages

severity:

- no issue on little-endian platforms (== most, including x86/x64)
- harmless even on big-endian as long as refcount is below 0xfffbffff,
  which is very likely always the case in practice anyway.

==

src/borg/hashindex.pyx
==================
4e08bbc;Thomas Waldmann;2017-02-19 05:12:00 +0100;document BORG_HOSTNAME_IS_UNIQUE, fixes #2087

==

docs/usage_general.rst.inc
==================
b82f648;Thomas Waldmann;2017-02-19 00:49:36 +0100;archive check: detect and fix missing all-zero replacement chunks, fixes #2180

==

src/borg/archive.py
==================
63d4cf4;enkore;2017-02-18 18:24:52 +0100;Merge pull request #2172 from Abogical/master
Add dsize and dcsize keys, fixes #2164
==
==================
38e4817;Abogical;2017-02-18 01:58:24 +0200;Correct calculation of unique chunks

==

src/borg/helpers.py
==================
cd3cbee;Abogical;2017-02-18 01:56:18 +0200;Refactor unique chunks summing

==

src/borg/helpers.py
==================
6a25b6b;Thomas Waldmann;2017-02-18 07:15:53 +0100;update docs about limited msgpack Unpacker for RPC code

==

docs/security.rst
==================
31f3ddf;Abogical;2017-02-17 19:12:01 +0200;Join the hall of fame

==

AUTHORS
==================
6ed0746;Abogical;2017-02-17 17:26:02 +0200;Count non-unique chunks deduplicated sizes

==

src/borg/helpers.py
==================
5957111;Abogical;2017-02-17 15:26:14 +0200;Add tests for dsize and dcsize

==

src/borg/testsuite/archiver.py
==================
5aa74ab;Abogical;2017-02-17 14:28:39 +0200;Add dsize and dcsize keys
These keys shows the amount of deduplicated size and compressed
size of each file in the archive.

==

src/borg/helpers.py
==================
b05893e;Thomas Waldmann;2017-02-17 05:00:37 +0100;borg rpc: use limited msgpack.Unpacker, fixes #2139
we do not trust the remote, so we are careful unpacking its responses.

the remote could return manipulated msgpack data that announces e.g.
a huge array or map or string. the local would then need to allocate huge
amounts of RAM in expectation of that data (no matter whether really
that much is coming or not).

by using limits in the Unpacker, a ValueError will be raised if unexpected
amounts of data shall get unpacked. memory DoS will be avoided.

==

src/borg/archive.py
src/borg/archiver.py
src/borg/remote.py
src/borg/repository.py
==================
d9fe4a1;enkore;2017-02-16 20:27:34 +0100;Merge pull request #2160 from enkore/f/cryptodocs
add "Cryptography in Borg" and "Remote RPC protocol security" sections
==
==================
8e8d9d3;Marian Beermann;2017-02-14 21:40:20 +0100;docs: add edited "Cryptography in Borg" and "Remote RPC protocol security" sections
The former section is a bit older (Nov 2016) and has been the piece
responsible for finding CVE-2016-10099, since while writing it I
wondered how the manifest was authenticated to actually
*be* the manifest. Well. There it is ;)

It has been edited to final form only recently and should now be ready
for review.

The latter section is new.

==

docs/internals.rst
docs/security.rst
docs/usage.rst
==================
bd2f021;enkore;2017-02-16 20:19:34 +0100;Merge pull request #2167 from enkore/f/faqhier
docs: FAQ by categories as proposed by @anarcat in #1802
==
==================
4c7784b;enkore;2017-02-16 20:19:07 +0100;Merge pull request #2166 from enkore/issue/2165
init: mandatory --encryption arg
==
==================
caeff71;Marian Beermann;2017-02-16 14:25:28 +0100;init: mandatory --encryption arg

==

src/borg/archiver.py
src/borg/key.py
src/borg/testsuite/archiver.py
==================
3d79d44;Marian Beermann;2017-02-16 16:49:26 +0100;faq: update Which file types, attributes, etc. are *not* preserved?
ext4 immutable has been supported for a while.

==

docs/faq.rst
==================
9e0ea92;Marian Beermann;2017-02-16 16:06:15 +0100;docs: FAQ by categories as proposed by @anarcat in #1802
Usage & Limitations
Security
Common issues
Miscellaneous (only three items, two fork-related)

Note: This does not change any links to FAQ items.

==

docs/faq.rst
==================
833d0ab;enkore;2017-02-15 00:08:49 +0100;Merge pull request #2162 from enkore/f/docs
fix build_xxx
==
==================
4446577;Marian Beermann;2017-02-14 23:11:21 +0100;docs: less spacing between options

==

docs/borg_theme/css/borg.css
==================
788b608;Marian Beermann;2017-02-14 23:01:52 +0100;setup.py build_usage/build_man fixes

==

setup.py
src/borg/archiver.py
==================
a1ceb16;enkore;2017-02-14 20:40:13 +0100;Merge pull request #2159 from enkore/issue/2158
create: handle BackupOSError on a per-path level in one spot
==
==================
73990b8;Marian Beermann;2017-02-14 18:58:34 +0100;create: handle BackupOSError on a per-path level in one spot

==

src/borg/archiver.py
==================
2246429;enkore;2017-02-14 13:02:33 +0100;Merge pull request #2156 from enkore/f/devmodel
new branching model
==
==================
5e0c2d4;Marian Beermann;2017-02-13 22:32:12 +0100;new branching model

==

docs/development.rst
docs/support.rst
==================
a659d1b;enkore;2017-02-14 01:19:07 +0100;Merge pull request #2154 from enkore/merge/1.0-maint
cherry pick changes back from 1.0-maint (one-off)
==
==================
30a5c5e;Alexander 'Leo' Bergolth;2016-08-02 16:02:02 +0200;add two new options --pattern and --patterns-from as discussed in #1406
# Conflicts:
#	src/borg/archiver.py
#	src/borg/helpers.py
#	src/borg/testsuite/helpers.py

Original-Commit: 876b670d

==

src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
src/borg/testsuite/helpers.py
==================
8d432b0;Thomas Waldmann;2017-02-13 04:12:12 +0100;paperkey.html - decode as utf-8, fixes #2150
hardcoded the encoding for reading it. while utf-8 is the default
encoding on many systems, it does not work everywhere.

and when it tries to decode with the ascii decoder, it fails.

==

src/borg/testsuite/archiver.py
==================
11318c9;Marian Beermann;2017-02-13 00:37:27 +0100;add paperkey.html to pyinstaller spec

==

scripts/borg.exe.spec
==================
44798e0;Marian Beermann;2017-02-12 22:36:24 +0100;setup.py: build_api: sort file list for determinism
# Conflicts:
#	docs/api.rst
#	setup.py

Original-Commit: e208d115

==

docs/changes.rst
setup.py
==================
1fabb2d;Marian Beermann;2017-02-12 20:45:41 +0100;key export: center QR code on the page

==

src/borg/paperkey.html
==================
04bd6fb;Marian Beermann;2017-02-12 20:40:53 +0100;add test for export key --qr-html

==

src/borg/testsuite/archiver.py
==================
79dd920;Marian Beermann;2017-02-12 22:25:12 +0100;update CHANGES (1.0.10)
# Conflicts:
#	docs/changes.rst

Original-Commit: e635f219

==

docs/changes.rst
==================
2cdb583;Benedikt Heine;2017-02-12 17:18:08 +0100;clearify doc for same filesystems
# Conflicts:
#	src/borg/archiver.py

Original-Commit: d3a2f36b03

==

src/borg/archiver.py
==================
179f1bc;Martin Hostettler;2017-02-08 00:22:37 +0100;Add qr html export mode to `key export` command

==

docs/conf.py
docs/paperkey.html
setup.py
src/borg/archiver.py
src/borg/keymanager.py
src/borg/paperkey.html
==================
e0f36e8;Martin Hostettler;2016-09-25 17:08:40 +0200;quickstart.rst: Add link to paperkey template.

==

docs/conf.py
docs/quickstart.rst
==================
b44882d;Martin Hostettler;2016-09-25 14:35:06 +0200;paperkey.html: Add interactive html template for printing key backups.

==

docs/paperkey.html
==================
fb44362;Martin Hostettler;2017-02-07 00:32:39 +0100;Add myself to AUTHORS
# Conflicts:
#	AUTHORS

Original-Commit: bd8be26

==

AUTHORS
==================
32e73e8;Martin Hostettler;2017-01-30 00:12:28 +0100;Manifest: Make sure manifest timestamp is strictly monotonically increasing.
Computer clocks are often not set very accurately set, but borg
assumes manifest timestamps are never going back in time.

Ensure that this is actually the case.

# Conflicts:
#	src/borg/helpers.py

Original-Commit: 6b8cf0a

==

src/borg/helpers.py
==================
ab52ce3;enkore;2017-02-12 22:55:23 +0100;Merge pull request #2145 from enkore/f/manpages
manpages part two
==
==================
e4486cd;Marian Beermann;2017-02-11 16:07:55 +0100;fix rST warning in Repository.scan

==

src/borg/repository.py
==================
0971fdc;Marian Beermann;2017-02-11 16:05:56 +0100;docs: changes: fix two rST warnings

==

docs/changes.rst
==================
847797b;Marian Beermann;2017-02-11 16:01:26 +0100;update development.rst for docs changes

==

docs/development.rst
==================
95b69a4;Marian Beermann;2017-02-05 23:02:43 +0100;docs: usage: remove not-updated-anymore debug* files.

==

docs/usage/debug-delete-obj.rst.inc
docs/usage/debug-dump-archive-items.rst.inc
docs/usage/debug-dump-repo-objs.rst.inc
docs/usage/debug-get-obj.rst.inc
docs/usage/debug-info.rst.inc
docs/usage/debug-put-obj.rst.inc
docs/usage/debug_delete-obj.rst.inc
docs/usage/debug_dump-archive-items.rst.inc
docs/usage/debug_dump-repo-objs.rst.inc
docs/usage/debug_get-obj.rst.inc
docs/usage/debug_info.rst.inc
docs/usage/debug_put-obj.rst.inc
docs/usage/debug_refcount-obj.rst.inc
==================
96fa1e8;Marian Beermann;2017-02-05 23:01:41 +0100;docs: define "ours" merge strategy for auto-generated files

==

.gitattributes
docs/man_intro.rst
docs/usage.rst
docs/usage/general.rst.inc
docs/usage_general.rst.inc
==================
1d9378f;Marian Beermann;2017-02-11 15:45:09 +0100;man pages: generate page for subparsers, eg. borg-key(1)
Conflicts:
	docs/man/borg-key.1

==

docs/man/borg-key.1
setup.py
==================
fa24e1f;Marian Beermann;2017-02-05 21:32:24 +0100;man pages: add borg(1) master/intro page

==

docs/man/borg-break-lock.1
docs/man/borg-change-passphrase.1
docs/man/borg-check.1
docs/man/borg-common.1
docs/man/borg-compression.1
docs/man/borg-create.1
docs/man/borg-delete.1
docs/man/borg-diff.1
docs/man/borg-extract.1
docs/man/borg-info.1
docs/man/borg-init.1
docs/man/borg-key-change-passphrase.1
docs/man/borg-key-export.1
docs/man/borg-key-import.1
docs/man/borg-key-migrate-to-repokey.1
docs/man/borg-key.1
docs/man/borg-mount.1
docs/man/borg-patterns.1
docs/man/borg-placeholders.1
docs/man/borg-prune.1
docs/man/borg-recreate.1
docs/man/borg-rename.1
docs/man/borg-serve.1
docs/man/borg-umount.1
docs/man/borg-upgrade.1
docs/man/borg-with-lock.1
docs/man/borg.1
docs/man_intro.rst
docs/quickstart.rst
docs/quickstart_example.rst.inc
docs/usage.rst
docs/usage/create.rst.inc
docs/usage/general.rst.inc
docs/usage/init.rst.inc
docs/usage/key_change-passphrase.rst.inc
docs/usage/key_migrate-to-repokey.rst.inc
docs/usage/list.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
setup.py
==================
15dfaae;Marian Beermann;2017-02-05 21:17:42 +0100;docs: create: move --exclude note to main doc

==

docs/usage.rst
src/borg/archiver.py
==================
0710bbd;Marian Beermann;2017-02-05 21:17:21 +0100;docs: create: move item flags to main doc

==

docs/man/borg-create.1
docs/man/borg-list.1
docs/usage.rst
setup.py
src/borg/archiver.py
==================
497da8d;Marian Beermann;2017-02-05 15:53:32 +0100;docs: init: fix markup/typos

==

src/borg/archiver.py
==================
f6732b6;enkore;2017-02-11 20:19:04 +0100;Merge pull request #2114 from textshell/feature/debug-dump-json
Add 'debug dump-manifest' and 'debug dump-archive' commands.
==
==================
e8335db;Martin Hostettler;2017-01-29 21:31:35 +0100;archiver: Add 'debug dump-manifest' and 'debug dump-archive' commands.

==

src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
bb94ab7;enkore;2017-02-05 22:13:19 +0100;Merge pull request #2127 from enkore/f/manpages
Man pages
==
==================
1d91d26;Marian Beermann;2017-02-05 14:22:06 +0100;commit man pages

==

docs/man/borg-break-lock.1
docs/man/borg-change-passphrase.1
docs/man/borg-check.1
docs/man/borg-common.1
docs/man/borg-compression.1
docs/man/borg-create.1
docs/man/borg-delete.1
docs/man/borg-diff.1
docs/man/borg-extract.1
docs/man/borg-info.1
docs/man/borg-init.1
docs/man/borg-key-change-passphrase.1
docs/man/borg-key-export.1
docs/man/borg-key-import.1
docs/man/borg-key-migrate-to-repokey.1
docs/man/borg-list.1
docs/man/borg-mount.1
docs/man/borg-patterns.1
docs/man/borg-placeholders.1
docs/man/borg-prune.1
docs/man/borg-recreate.1
docs/man/borg-rename.1
docs/man/borg-serve.1
docs/man/borg-umount.1
docs/man/borg-upgrade.1
docs/man/borg-with-lock.1
==================
d6a26ca;Marian Beermann;2017-02-05 14:16:01 +0100;docs: fix examples using borg init without -e/--encryption

==

docs/usage.rst
==================
7e48607;Marian Beermann;2017-02-05 13:43:19 +0100;docs: list: don't print key listings in fat (html + man)

==

src/borg/archiver.py
==================
83bb25d;Marian Beermann;2017-02-05 14:08:53 +0100;man pages: add EXAMPLES
hacky, but works. Better would be to make a separate docs/examples dir
with only the examples in them, separated by command.

Or, putting these different sections; DESCRIPTION, EXAMPLES and NOTES
into the --help doc, but separately of course, so that they can be aptly
formatted for different media (html, --help, man).

==

setup.py
==================
e5ea876;Marian Beermann;2017-02-05 11:53:02 +0100;man pages: remove reference to borg(1) -- would have to be written first
A compact introduction and perhaps a condensed quickstart would
be good for borg(1).

==

setup.py
==================
c7106e7;Marian Beermann;2017-02-05 11:32:32 +0100;create real nice man pages

==

setup.py
src/borg/archiver.py
==================
c6de261;enkore;2017-02-05 01:04:54 +0100;Merge pull request #2124 from enkore/f/keycmds
Move migrate-to-repokey, change-passphrase to key group
==
==================
5bc03cc;Marian Beermann;2017-02-04 15:16:18 +0100;migrate-to-repokey: ask using canonical_path() as we do everywhere else

==

src/borg/key.py
==================
4e0422c;Marian Beermann;2017-02-04 15:01:23 +0100;Move change-passphrase to the "key" group (but leave old name, too)

==

docs/changes.rst
docs/usage.rst
src/borg/archiver.py
==================
5fe3286;Marian Beermann;2017-02-04 15:01:05 +0100;Move migrate-to-repokey to the "key" command group

==

docs/changes.rst
docs/usage.rst
docs/usage/migrate-to-repokey.rst.inc
src/borg/archiver.py
==================
c6ea34b;TW;2017-02-01 12:13:37 +0100;Merge pull request #2111 from ThomasWaldmann/merge-1.0-maint
Merge 1.0-maint
==
==================
f52bf88;enkore;2017-02-01 00:53:36 +0100;Merge pull request #2010 from costela/master
change dir_is_tagged to use os.path.exists()
==
==================
3dbf621;TW;2017-01-31 00:51:19 +0100;Merge pull request #2116 from rciorba/fix_skip_hint
fix wrong skip_hint on hashindex_set when encountering tombstones
==
==================
a85cf75;Radu Ciorba;2017-01-30 23:29:08 +0200;fix wrong skip_hint on hashindex_set when encountering tombstones
hashindex_lookup would always hint at skipping whatever it's probe
length had been with no regard for tombstones it had encountered. This
meant new keys would not overwrite first tombstones, but would always
land on empty buckets.

The regression was introduced in #1748

==

src/borg/_hashindex.c
==================
7f2a108;Thomas Waldmann;2017-01-30 03:11:42 +0100;fixup: do not access os.POSIX_FADV_* early
before we know posix_fadvise support exists on the platform.

==

src/borg/platform/base.py
src/borg/platform/linux.pyx
src/borg/repository.py
==================
dd6b90f;Leo Antunes;2017-01-29 18:13:51 +0100;change dir_is_tagged to use os.path.exists()
Add --keep-exclude-tags option as alias to --keep-tag-files and
deprecate the later. Also make tagging accept directories as tags,
allowing things like `--exclude-if-present .git`.

fixes #1999

==

docs/changes.rst
src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
e19537f;Thomas Waldmann;2017-01-29 05:54:25 +0100;ran build_usage

==

docs/usage/mount.rst.inc
==================
c0dc644;Thomas Waldmann;2017-01-29 05:49:53 +0100;Merge branch '1.0-maint' into merge-1.0-maint
# Conflicts:
#	MANIFEST.in
#	Vagrantfile
#	docs/changes.rst
#	docs/usage/mount.rst.inc
#	src/borg/archiver.py
#	src/borg/fuse.py
#	src/borg/repository.py

==
==================
d23dbb4;TW;2017-01-29 03:39:33 +0100;Merge pull request #2110 from ThomasWaldmann/release-1.0.10rc1
release 1.0.10rc1
==
==================
e6c1931;Thomas Waldmann;2017-01-28 23:36:56 +0100;ran build_usage

==

docs/usage/create.rst.inc
docs/usage/mount.rst.inc
docs/usage/upgrade.rst.inc
==================
6252614;TW;2017-01-28 23:28:56 +0100;Merge pull request #2090 from ThomasWaldmann/update-1.0-changes
update CHANGES (1.0-maint)
==
==================
dc34926;Thomas Waldmann;2017-01-21 06:09:25 +0100;update CHANGES (1.0-maint)

==

docs/changes.rst
==================
2c1751c;TW;2017-01-28 23:10:16 +0100;Merge pull request #2104 from ThomasWaldmann/fix-fadvise-fail
Work around fadvise fail
==
==================
add38e8;Thomas Waldmann;2017-01-27 21:09:55 +0100;ignore posix_fadvise errors in repository.py, work around #2095
note: we also ignore the call's return value in _chunker.c.

both is harmless as the call not working does not cause incorrect function,
just worse performance due to constant flooding of the cache (as if we
would not issue the call).

==

borg/repository.py
==================
5a39d5c;Thomas Waldmann;2017-01-24 23:45:54 +0100;make LoggedIO.close_segment reentrant
if anything blows up in the middle of a (first) invocation of close_segment()
and an exception gets raised, it could happen that close_segment() gets called
again (e.g. in Repository.__del__ or elsewhere).

As the self._write_fd was set to None rather late, it would re-enter the if-block
then.

The new code gets the value of self._write_fd and also sets it to None in one tuple
assignment, so re-entrance does not happen.

Also, it uses try/finally to make sure the important parts (fd.close()) gets executed,
even if there are exceptions in the other parts.

==

borg/repository.py
==================
213e7b7;TW;2017-01-28 16:57:08 +0100;Merge pull request #2109 from ThomasWaldmann/vagrantfile-improvements
vagrant: improve darwin64 VM settings
==
==================
f74b533;Thomas Waldmann;2017-01-28 14:44:42 +0100;vagrant: improve darwin64 VM settings
somehow without these cpuid settings it does not work for everybody.
also nice if we can get away without the extensions pack, which is proprietary.
do not update iTunes, we just want the OS security / bugfix updates

==

Vagrantfile
==================
127250c;TW;2017-01-28 15:14:22 +0100;Merge pull request #2102 from enkore/issue/2082
mount: umount on SIGINT/^C when in foreground
==
==================
2cfaf03;Marian Beermann;2017-01-24 14:18:25 +0100;mount: umount on SIGINT/^C when in foreground

==

borg/archiver.py
borg/fuse.py
==================
528891a;TW;2017-01-28 14:17:57 +0100;Merge pull request #2100 from ThomasWaldmann/fix-double-magic
creating a new segment: use "xb" mode, fixes #2099
==
==================
4e21715;TW;2017-01-27 18:37:06 +0100;Merge pull request #2107 from enkore/issue/2106
docs: add CVE numbers for issues fixed in 1.0.9
==
==================
fbaefc9;Marian Beermann;2017-01-27 11:54:20 +0100;docs: add CVE numbers for issues fixed in 1.0.9
https://www.cvedetails.com/product/35461/Borg-Borg.html?vendor_id=16008

==

docs/changes.rst
==================
6996fa6;Thomas Waldmann;2017-01-23 20:47:33 +0100;creating a new segment: use "xb" mode, fixes #2099
"ab" seems to make no sense here (if there is already a (crap, but non-empty) segment file,
we would write a MAGIC right into the middle of the resulting file) and cause #2099.

==

borg/repository.py
==================
cf0192c;TW;2017-01-24 22:54:18 +0100;Merge pull request #2094 from enkore/issue/2092
Fix invalid hard links
==
==================
8fe047e;Marian Beermann;2017-01-22 02:29:54 +0100;mount: handle invalid hard link refs

==

borg/fuse.py
==================
b6191ec;TW;2017-01-24 14:02:20 +0100;Merge pull request #2096 from ThomasWaldmann/fix-use-after-close
SyncFile: fix use of fd object after close
==
==================
fc8be58;Thomas Waldmann;2017-01-22 16:54:06 +0100;SyncFile: fix use of fd object after close

==

borg/repository.py
==================
d350e3a;Marian Beermann;2017-01-22 02:21:26 +0100;create: don't create hard link refs to failed files

==

borg/archive.py
==================
739578e;enkore;2017-01-22 02:09:06 +0100;Merge pull request #2091 from enkore/issue/2073
detect mingw byte order
==
==================
5f5b1b2;enkore;2017-01-22 00:54:10 +0100;Merge pull request #2089 from ThomasWaldmann/fix-manifest
Manifest.in: simplify, also exclude *.so *.dll *.orig
==
==================
fafd5e0;Marian Beermann;2017-01-21 15:04:42 +0100;hashindex: separate endian-dependent defs from endian detection
also make macro style consistent with other macros in the codebase.

==

borg/_hashindex.c
==================
90ae907;Marian Beermann;2017-01-21 15:04:01 +0100;hashindex: detect mingw byte order

==

borg/_hashindex.c
==================
ca0c1da;TW;2017-01-21 05:46:58 +0100;Merge pull request #2015 from ThomasWaldmann/fix-location-regex
fix bad parsing of wrong syntax
==
==================
ddd9d77;Thomas Waldmann;2017-01-21 05:36:56 +0100;Manifest.in: simplify, exclude *.{so,dll,orig}, fixes #2066

==

MANIFEST.in
==================
0b2321a;TW;2017-01-20 05:00:08 +0100;Merge pull request #2085 from ThomasWaldmann/use-freebsd-release
vagrant freebsd: some fixes, fixes #2067
==
==================
74c3346;Thomas Waldmann;2017-01-20 02:59:36 +0100;vagrant freebsd: some fixes, fixes #2067
- use -RELEASE, it can be updated via binaries
- more RAM, otherwise the 4 workers run out of memory.
- do not install / use fakeroot, it seems broken.
- set a hostname, this VM has none

==

Vagrantfile
==================
bdab5de;TW;2017-01-19 21:25:37 +0100;Merge pull request #2084 from ThomasWaldmann/binaries-with-py353
Binaries with py353
==
==================
7b9ff75;Thomas Waldmann;2017-01-19 19:02:13 +0100;use osxfuse 3.5.4 for tests / to build binaries

==

Vagrantfile
==================
2b6e8a1;Thomas Waldmann;2017-01-19 18:58:14 +0100;use python 3.5.3 to build binaries, fixes #2078

==

Vagrantfile
==================
27674d8;TW;2017-01-19 18:38:45 +0100;Merge pull request #2072 from ThomasWaldmann/pyi321
upgrade pyinstaller from 3.1.1+ to 3.2.1
==
==================
c44d9ad;TW;2017-01-19 18:38:01 +0100;Merge pull request #2076 from ThomasWaldmann/fix-pyinstaller-bootloader
pyinstaller: use fixed AND freshly compiled bootloader, fixes #2002
==
==================
cdffd93;Thomas Waldmann;2017-01-17 02:09:28 +0100;pyinstaller: use fixed AND freshly compiled bootloader, fixes #2002

==

Vagrantfile
==================
007d479;Thomas Waldmann;2017-01-16 08:10:08 +0100;pyinstaller: automatically builds bootloader if missing

==

Vagrantfile
==================
1c3ec74;Thomas Waldmann;2017-01-16 06:31:12 +0100;upgrade pyinstaller from 3.1.1+ to 3.2.1

==

Vagrantfile
==================
9c04580;TW;2017-01-15 19:54:46 +0100;Merge pull request #2070 from ThomasWaldmann/release-1.1.0b3
Release 1.1.0b3
==
==================
d67cc22;Thomas Waldmann;2017-01-15 19:23:07 +0100;MANIFEST: exclude *.so

==

MANIFEST.in
==================
e0dfb65;Thomas Waldmann;2017-01-15 04:52:02 +0100;fix crc32 compilation issues on wheezy
moving the declaration / assignment from the middle of the function to the beginning.

==

src/borg/_crc32/clmul.c
==================
e32503b;Thomas Waldmann;2017-01-14 17:19:19 +0100;ran setup.py build_usage

==

docs/usage/create.rst.inc
docs/usage/init.rst.inc
docs/usage/prune.rst.inc
docs/usage/upgrade.rst.inc
==================
1845074;Thomas Waldmann;2017-01-14 17:16:19 +0100;update CHANGES (master)

==

docs/changes.rst
==================
8fa63af;TW;2017-01-15 02:09:50 +0100;Merge pull request #2065 from ThomasWaldmann/merge-1.0-maint
Merge 1.0-maint
==
==================
740312f;Thomas Waldmann;2017-01-15 01:15:04 +0100;Merge branch '1.0-maint' into merge-1.0-maint
# Conflicts:
#	requirements.d/development.txt
#	tox.ini

==
==================
e022cf1;TW;2017-01-15 01:06:28 +0100;Merge pull request #2064 from ThomasWaldmann/update-1.0-changes
update CHANGES (1.0-maint)
==
==================
9e8af73;Thomas Waldmann;2017-01-15 01:05:40 +0100;update CHANGES (1.0-maint)

==

docs/changes.rst
==================
f266299;TW;2017-01-15 00:49:52 +0100;Merge pull request #2063 from ThomasWaldmann/travis-osx-pythons
travis: use latest pythons for OS X based testing
==
==================
3b8beb9;TW;2017-01-15 00:25:04 +0100;Merge pull request #2061 from ThomasWaldmann/fix-vagrant-freebsd
fix the freebsd64 vagrant machine, fixes #2037
==
==================
94e35fc;Thomas Waldmann;2017-01-15 00:23:09 +0100;travis: use latest pythons for OS X based testing
we test on old pythons (3.x.0) on Linux, so we can test on 3.x.latest on OS X.

==

.travis/install.sh
==================
cc69d40;TW;2017-01-15 00:18:41 +0100;Merge pull request #2062 from ThomasWaldmann/xdist-parallelism
pytest -n 4 as default (4 parallel workers)
==
==================
0e1f050;Thomas Waldmann;2017-01-15 00:18:00 +0100;pytest -n 4 as default (4 parallel workers)
auto does not produce enough load, e.g. on freebsd64 vagrant VM,
cpu is 80-90% idle (1 core == 1 parallel tox worker).

==

tox.ini
==================
c716df4;TW;2017-01-15 00:14:25 +0100;Merge pull request #2060 from ThomasWaldmann/require-current-pip-setuptools
add pip and setuptools to requirements file, fixes #2030
==
==================
52c2784;TW;2017-01-15 00:12:20 +0100;Merge pull request #2059 from ThomasWaldmann/fix-xattr-test-race
fix xattr test race condition, fixes #2047
==
==================
a9cd6a0;Thomas Waldmann;2017-01-14 23:42:38 +0100;fix the freebsd64 vagrant machine, fixes #2037
The previous 10.2 got unusable due to missing backwards compatibility of 10.3 binaries it installed.
The 10.3 box from freebsd project has some issues:
- it needs "vagrant up" twice to start (first start with MAC warning)
- it needs shell set to sh

==

Vagrantfile
==================
555c6a9;Thomas Waldmann;2017-01-14 23:23:36 +0100;add pip and setuptools to requirements file, fixes #2030
sometimes the system pip/setuptools is rather old and causes
warnings or malfunctions in the primary virtual env.

==

requirements.d/development.txt
==================
c0fb8da;Thomas Waldmann;2017-01-14 23:19:40 +0100;fix xattr test race condition, fixes #2047

==

borg/testsuite/xattr.py
==================
e0094f7;TW;2017-01-14 23:13:28 +0100;Merge pull request #2057 from ThomasWaldmann/fix-pytest-deprecation
setup.cfg: fix pytest deprecation warning, fixes #2050
==
==================
c3e4d7a;TW;2017-01-14 23:11:23 +0100;Merge pull request #2056 from ThomasWaldmann/remove-dot-github
remove .github from pypi package, fixes #2051
==
==================
8e9cf5d;TW;2017-01-14 23:10:59 +0100;Merge pull request #2058 from ThomasWaldmann/adjust-xdist-parallelism
pytest-xdist: adjust parallelism, fixes #2053
==
==================
0a15530;Thomas Waldmann;2017-01-14 23:10:12 +0100;pytest-xdist: adjust parallelism, fixes #2053
it's either auto or env var XDISTN value.

==

tox.ini
==================
dedc4c0;Thomas Waldmann;2017-01-14 23:06:16 +0100;setup.cfg: fix pytest deprecation warning, fixes #2050

==

setup.cfg
==================
b4bb21b;Thomas Waldmann;2017-01-14 23:00:46 +0100;remove .github from pypi package, fixes #2051

==

MANIFEST.in
==================
29a9e99;TW;2017-01-14 22:55:32 +0100;Merge pull request #2054 from enkore/issue/2052
setup.py: add crc32.c to sdist
==
==================
eace147;Marian Beermann;2017-01-14 22:27:39 +0100;setup.py: add crc32.c to sdist

==

setup.py
==================
605deea;TW;2017-01-14 16:54:56 +0100;Merge pull request #2049 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
70cc201;Thomas Waldmann;2017-01-14 16:53:38 +0100;Merge branch '1.0-maint' into merge-1.0-maint

==
==================
32e58e8;TW;2017-01-14 16:52:20 +0100;Merge pull request #2038 from ThomasWaldmann/update-1.0-changes
update CHANGES (1.0-maint)
==
==================
85b3625;Thomas Waldmann;2017-01-14 04:24:10 +0100;update CHANGES (1.0-maint)

==

docs/changes.rst
==================
abfcf99;TW;2017-01-14 16:06:28 +0100;Merge pull request #2045 from ThomasWaldmann/fix-platform
posix platform module: only build / import on non-win32 platforms
==
==================
77e2416;enkore;2017-01-14 15:57:06 +0100;Merge pull request #2046 from enkore/issue/2043
crc: openbsd has no Intel intrinsics
==
==================
ae0f142;Marian Beermann;2017-01-14 15:24:03 +0100;crc: openbsd has no Intel intrinsics

==

src/borg/_crc32/crc32.c
==================
aea1305;enkore;2017-01-14 15:14:48 +0100;Merge pull request #2044 from ThomasWaldmann/fix-openbsd-repo
vagrant: fix openbsd repo, fixes #2042
==
==================
e4c5db4;Thomas Waldmann;2017-01-14 14:48:49 +0100;posix platform module: only build / import on non-win32 platforms, fixes #2041
rather use a inverted check like "not windows".
also: add a base implementation for this stuff, just raising NotImplementedError

==

setup.py
src/borg/platform/__init__.py
src/borg/platform/base.py
==================
00c7a4f;Thomas Waldmann;2017-01-14 14:12:39 +0100;vagrant: fix openbsd repo, fixes #2042
original repo is 404.

==

Vagrantfile
==================
c925ac0;enkore;2017-01-14 12:23:13 +0100;Merge pull request #2040 from ThomasWaldmann/fix-crc32-compile
fix crc32 compile error, fixes #2039
==
==================
ededb6f;Thomas Waldmann;2017-01-14 05:06:15 +0100;fix crc32 compile error, fixes #2039

==

src/borg/_crc32/slice_by_8.c
==================
9575edc;TW;2017-01-14 03:59:34 +0100;Merge pull request #2036 from ThomasWaldmann/merge-1.0-maint
Merge 1.0-maint
==
==================
e431d60;Thomas Waldmann;2017-01-14 03:07:11 +0100;merge 1.0-maint into master
# Conflicts:
#	src/borg/crypto.pyx
#	src/borg/hashindex.pyx
#	src/borg/helpers.py
#	src/borg/platform/__init__.py
#	src/borg/platform/darwin.pyx
#	src/borg/platform/freebsd.pyx
#	src/borg/platform/linux.pyx
#	src/borg/remote.py

==
==================
82fd84e;enkore;2017-01-14 00:27:18 +0100;Merge pull request #2035 from ThomasWaldmann/docs-backup-from-stdin
borg create: document how to backup stdin, fixes #2013
==
==================
a488d39;enkore;2017-01-14 00:26:47 +0100;Merge pull request #2034 from ThomasWaldmann/api-version-number-spacing
API_VERSION: use numberspaces, fixes #2023
==
==================
68dd61f;enkore;2017-01-14 00:26:29 +0100;Merge pull request #2033 from ThomasWaldmann/require-succeeding-osx-tests
travis: require succeeding OS X tests, fixes #2028
==
==================
986740b;TW;2017-01-13 22:55:05 +0100;Merge pull request #2032 from ThomasWaldmann/fix-pipe-write
borg serve: fix transmission data loss of pipe writes, fixes #1268
==
==================
022c128;Thomas Waldmann;2017-01-13 21:49:06 +0100;borg create: document how to backup stdin, fixes #2013

==

borg/archiver.py
==================
1c854b9;Thomas Waldmann;2017-01-13 21:23:21 +0100;API_VERSION: use numberspaces, fixes #2023
like '<numberspace>_<version>', e.g. '1.0_01' for version 01 (used in 1.0 maintenance branch).

this avoids overlap and accidental collisions between different release branches.

==

borg/chunker.pyx
borg/crypto.pyx
borg/hashindex.pyx
borg/helpers.py
borg/platform.py
borg/platform_darwin.pyx
borg/platform_freebsd.pyx
borg/platform_linux.pyx
==================
93d7d3c;Thomas Waldmann;2017-01-13 21:02:58 +0100;travis: require succeeding OS X tests, fixes #2028

==

.travis.yml
==================
941b8d7;Thomas Waldmann;2017-01-13 19:09:57 +0100;borg serve: fix transmission data loss of pipe writes, fixes #1268
This problem was found on cygwin/windows due to its small pipe buffer size of 64kiB.

Due to that, bigger (like >64kiB) writes are always only partially done and os.write() returns
the amount of data that was actually sent. the code previously did not use that return value
and assumed that always all is sent, which led to a loss of the remainder of transmission data
and usually some "unexpected RPC data format" error on the client side.

Neither Linux nor *BSD ever do partial writes on blocking pipes, unless interrupted by a
signal, in which case serve() would terminate.

==

borg/remote.py
==================
e946556;enkore;2017-01-13 19:52:38 +0100;Merge pull request #2031 from enkore/f/inforeg
fix performance regression in "borg info ::archive"
==
==================
5cc292c;Marian Beermann;2017-01-13 15:33:38 +0100;fix performance regression in "borg info ::archive"

==

src/borg/archive.py
==================
173852e;enkore;2017-01-13 02:42:01 +0100;Merge pull request #2027 from enkore/issue/2026
crc: disable CLMUL version due to clang bugs.
==
==================
f482c32;Marian Beermann;2017-01-13 00:30:17 +0100;crc32: sb8: remove some unneeded stuff, use hashindex byteorder detection

==

src/borg/_crc32/slice_by_8.c
==================
292fb1e;Marian Beermann;2017-01-12 21:28:18 +0100;crc: disable nice CLMUL version due to clang bugs.

==

src/borg/_crc32/crc32.c
==================
ff69f6e;enkore;2017-01-12 17:36:03 +0100;Merge pull request #2021 from enkore/merge/1.0-maint
Merge/1.0 maint
==
==================
7923088;Marian Beermann;2017-01-12 17:03:51 +0100;check: pick better insufficent archives matched warning from TW's merge

==

src/borg/archive.py
src/borg/repository.py
src/borg/testsuite/archive.py
src/borg/upgrader.py
==================
1d40675;Marian Beermann;2017-01-12 15:04:57 +0100;merge fixup

==

src/borg/testsuite/archiver.py
==================
ecad0ed;Marian Beermann;2017-01-12 15:01:41 +0100;Merge branch '1.0-maint' into merge/1.0-maint
# Conflicts: ... everywhere ...
#	.travis.yml
#	Vagrantfile
#	borg/testsuite/key.py
#	docs/changes.rst
#	docs/quickstart.rst
#	docs/usage.rst
#	docs/usage/upgrade.rst.inc
#	src/borg/archive.py
#	src/borg/archiver.py
#	src/borg/crypto.pyx
#	src/borg/helpers.py
#	src/borg/key.py
#	src/borg/remote.py
#	src/borg/repository.py
#	src/borg/testsuite/archive.py
#	src/borg/testsuite/archiver.py
#	src/borg/testsuite/crypto.py
#	src/borg/testsuite/helpers.py
#	src/borg/testsuite/repository.py
#	src/borg/upgrader.py
#	tox.ini

==
==================
9c42a75;enkore;2017-01-12 14:31:11 +0100;Merge pull request #2020 from enkore/f/tamdocs
upgrade: fix incorrect title levels
==
==================
3c0a903;Marian Beermann;2017-01-12 14:30:09 +0100;upgrade: fix incorrect title levels

==

borg/archiver.py
==================
9e692d4;TW;2017-01-12 03:39:51 +0100;Merge pull request #2019 from ThomasWaldmann/update-1.0-changes
Update 1.0 changes
==
==================
6603133;Thomas Waldmann;2017-01-12 02:47:51 +0100;update CHANGES (1.0-maint)

==

docs/changes.rst
==================
207a211;enkore;2017-01-12 03:18:54 +0100;Merge pull request #2018 from enkore/f/debug-remote
F/debug remote
==
==================
2d2bff9;Marian Beermann;2017-01-12 02:41:29 +0100;remote: include unknown data in error message
this makes it far, far easier to diagnose issues like an account being
locked:

Got unexpected RPC data format from server:
This account is currently not available.

==

borg/remote.py
==================
745a3a5;TW;2017-01-12 02:49:53 +0100;Merge pull request #2017 from enkore/changes/1.1.0b3
Update 1.1.0b3 CHANGES
==
==================
10f48db;Marian Beermann;2017-01-12 02:30:29 +0100;Update 1.1.0b3 CHANGES

==

docs/changes.rst
==================
b6fa862;Marian Beermann;2017-01-12 02:39:56 +0100;remote: log SSH command line at debug level

==

borg/remote.py
==================
b206aa7;TW;2017-01-12 02:27:13 +0100;Merge pull request #2016 from ThomasWaldmann/fix-typos
fix typos
==
==================
01090d2;Thomas Waldmann;2017-01-12 02:25:41 +0100;fix typos
taken from debian package, thanks to danny edel and lintian for finding these.

==

borg/archiver.py
docs/usage.rst
==================
53aaee3;enkore;2017-01-12 02:08:38 +0100;Merge pull request #2000 from enkore/issue/1997
check: fail if single archive does not exist
==
==================
0704909;enkore;2017-01-12 02:07:08 +0100;Merge pull request #2014 from enkore/f/hostname->fqdn
posix: use fully-qualified hostname + node ID
==
==================
6075d54;enkore;2017-01-12 02:06:26 +0100;Merge pull request #1991 from ThomasWaldmann/fix-pytest-xdist
use pytest-xdist to parallelize testing
==
==================
fe6b03a;Marian Beermann;2017-01-04 19:32:39 +0100;check: print non-exit-code warning if --last or --prefix aren't fulfilled

==

borg/archive.py
==================
1c1a289;TW;2017-01-12 01:31:26 +0100;Merge pull request #2008 from ThomasWaldmann/update-1.0-changes
update CHANGES (1.0-maint)
==
==================
ded22d3;enkore;2017-01-12 01:21:13 +0100;Merge pull request #1927 from ThomasWaldmann/blake2b-mac-key-length
demonstrate mac key length issue
==
==================
81bd55e;Marian Beermann;2017-01-12 01:05:59 +0100;key testsuite: update blake2 test data to include padded keys

==

src/borg/testsuite/key.py
==================
1667926;Thomas Waldmann;2017-01-12 01:01:24 +0100;fix bad parsing of wrong syntax
this was like whack-a-mole: fix one regex -> another issue pops up

==

borg/helpers.py
borg/testsuite/helpers.py
==================
b9770c3;Marian Beermann;2017-01-12 00:54:17 +0100;posix: use fully-qualified hostname + node ID
The node ID is usually the 48 bit MAC of the primary network
interface.

==

src/borg/archiver.py
src/borg/platform/posix.pyx
==================
889ee18;TW;2017-01-09 01:36:35 +0100;Merge pull request #2011 from htgoebel/master
Vagrantfile: Split cygwin packaged to be installed into base and project
==
==================
0f74932;Hartmut Goebel;2017-01-08 22:16:54 +0100;Vagrantfile: Split cygwin packaged to be installed into base and project.
The packages which are required for ssh log-in and rsync synchronized
folders to work are separated from those specific for the borg
project. This makes it easier to reuse in other projects.

==

Vagrantfile
==================
c517264;TW;2017-01-08 01:39:48 +0100;Merge pull request #2006 from sherbang/patch-1
Docs: language clarification - VM backup FAQ
==
==================
33be583;sherbang;2017-01-07 18:34:11 -0500;Update faq.rst

==

docs/faq.rst
==================
69b816f;Thomas Waldmann;2017-01-07 23:12:27 +0100;update CHANGES (1.0-maint)

==

docs/changes.rst
==================
6cb6984;TW;2017-01-07 02:29:41 +0100;Merge pull request #2005 from ThomasWaldmann/fix-travis-osx-builds
travis: fix OS X based testing
==
==================
e119042;Thomas Waldmann;2017-01-06 06:49:40 +0100;travis: install py36 on OS X

==

.travis/install.sh
==================
370cb1f;Thomas Waldmann;2017-01-06 06:19:26 +0100;travis: fix osxfuse install

==

.travis/install.sh
==================
2938a5f;Thomas Waldmann;2017-01-05 03:59:33 +0100;work around spurious log level related test fail when using pytest-xdist

==

borg/testsuite/repository.py
==================
a1d223c;Thomas Waldmann;2017-01-05 03:47:13 +0100;always setup module level "logger" in the same way
this is a cleanup change, found this while trying to find out why
borg_cmd spuriously does not have INFO loglevel when testing with
pytest-xdist.

the cleanup did NOT help with this, but is at least a cleanup.

==

borg/repository.py
borg/upgrader.py
==================
5ed6d21;Thomas Waldmann;2017-01-03 04:27:51 +0100;parallel testing: fix issue related to non-reproducible set / dict order

==

borg/testsuite/archive.py
==================
853cfb7;Thomas Waldmann;2017-01-03 04:26:04 +0100;parallelizing tests via pytest-xdist

==

requirements.d/development.txt
tox.ini
==================
e61de12;enkore;2017-01-05 13:22:56 +0100;Merge pull request #1996 from ThomasWaldmann/py36
tox / travis: also test on Python 3.6
==
==================
a84466d;TW;2017-01-05 04:50:03 +0100;Merge pull request #1995 from enkore/f/buffer-exc
helpers.Buffer: raise OSError subclass if too much memory shall be al…
==
==================
320a561;Marian Beermann;2017-01-03 17:38:18 +0100;helpers.Buffer: raise OSError subclass if too much memory is allocd

==

borg/helpers.py
borg/testsuite/helpers.py
borg/xattr.py
==================
be8e0c8;Marian Beermann;2017-01-04 19:25:03 +0100;check: fail if single archive does not exist

==

borg/archive.py
docs/changes.rst
==================
c412b86;Thomas Waldmann;2017-01-04 01:06:57 +0100;vagrant: add Python 3.6.0

==

Vagrantfile
==================
7d4d7e7;Thomas Waldmann;2017-01-04 01:02:25 +0100;setup.py: add Python 3.6 qualifier

==

setup.py
==================
9533493;Thomas Waldmann;2017-01-04 00:57:35 +0100;tox / travis: also test on Python 3.6

==

.travis.yml
tox.ini
==================
73795f5;enkore;2017-01-03 17:31:19 +0100;Merge pull request #1994 from enkore/issue/1981
Fix upgrade --tam, change-passphrase crashes if not encrypted
==
==================
4b9a9f9;Marian Beermann;2017-01-03 13:00:37 +0100;change-passphrase: print key location

==

borg/archiver.py
==================
7519bf8;Marian Beermann;2017-01-03 17:15:59 +0100;fix change-passphrase crashing if repository is not encrypted

==

borg/archiver.py
docs/changes.rst
==================
6a5b301;Marian Beermann;2017-01-03 17:15:32 +0100;fix upgrade --tam crashing if repository is not encrypted

==

borg/archiver.py
docs/changes.rst
==================
9d7ec9a;enkore;2017-01-03 17:11:45 +0100;Merge pull request #1993 from enkore/issue/1992
fix xattrs on ObjectiveFS
==
==================
3e04fa9;Marian Beermann;2017-01-03 14:25:55 +0100;xattr: only skip file on BufferTooSmallError
redefine __str__ to get a proper error message, not ''

==

borg/xattr.py
docs/changes.rst
==================
85e79f9;Marian Beermann;2017-01-03 12:47:42 +0100;xattr: ignore empty names returned by llistxattr(2) et al

==

borg/xattr.py
docs/changes.rst
==================
902c423;enkore;2017-01-02 16:11:11 +0100;Merge pull request #1970 from enkore/f/dbg-speed
fast crc
==
==================
56818d1;Marian Beermann;2016-12-20 18:04:38 +0100;Credit the excellent work of these people in AUTHORS

==

AUTHORS
src/borg/_crc32/clmul.c
==================
9afebea;Marian Beermann;2016-12-20 17:54:46 +0100;two fast CRC implementations
CRC slice by 8 for generic CPUs outperforms zlib CRC32 on ppc
and x86 (ARM untested but expected to as well).

PCLMULQDQ derived from Intel's zlib patches outperforms every other
CRC implementation by a huge margin.

==

.gitignore
setup.py
src/borg/_crc32/clmul.c
src/borg/_crc32/crc32.c
src/borg/_crc32/slice_by_8.c
src/borg/archiver.py
src/borg/crc32.pyx
src/borg/repository.py
src/borg/testsuite/crc32.py
==================
cf19db4;enkore;2017-01-01 01:14:08 +0100;Merge pull request #1989 from Abogical/master
Happy new year!
==
==================
f043b96;Abogical;2016-12-31 16:53:30 +0200;It's 2017

==

LICENSE
docs/conf.py
src/borg/shellpattern.py
==================
60d33b8;enkore;2016-12-26 17:57:51 +0100;Merge pull request #1983 from enkore/f/sigtrace
dump trace on signal
==
==================
bbddd1a;enkore;2016-12-26 17:01:21 +0100;Merge pull request #1979 from ThomasWaldmann/no-default-hash
borg init --encryption - remove default
==
==================
c2c31aa;Marian Beermann;2016-12-26 15:29:30 +0100;enable faulthandler

==

borg/archiver.py
==================
0ff76bd;Marian Beermann;2016-12-26 15:29:22 +0100;dump a trace on SIGUSR2

==

borg/archiver.py
==================
7d48878;Thomas Waldmann;2016-12-24 02:53:44 +0100;borg init --encryption - remove default
use --encryption=repokey for all the tests except if they
have special needs.

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
8ef8602;enkore;2016-12-22 15:22:45 +0100;Merge pull request #1934 from musoke/patch-1
Update link to security contact
==
==================
fd58733;Marian Beermann;2016-12-22 15:21:42 +0100;Update link to security contact
Currently this move was only done in master, so point to latest.
Might be generally a good idea in case it changes and no release was done
since the responsibility changed.

==

README.rst
==================
dc5f954;Nathan Musoke;2016-12-08 23:39:34 +1300;Update link to security contact
Information about security contact has moved.
==

README.rst
==================
a4eef67;enkore;2016-12-22 14:57:26 +0100;Merge pull request #1912 from Abogical/prune-progress
Add prune progress display
==
==================
82455a0;enkore;2016-12-21 21:55:30 +0100;Merge pull request #1969 from enkore/merge/1.0-maint
Merge 1.0 maint
==
==================
742bfa3;Marian Beermann;2016-12-21 00:36:31 +0100;flake8

==

src/borg/key.py
==================
a0abc3e;Marian Beermann;2016-12-20 23:26:22 +0100;CHANGES: move 1.1.0b3 to correct position

==

docs/changes.rst
==================
e0e5bc4;Marian Beermann;2016-12-20 23:09:28 +0100;ran build_usage

==

docs/usage/upgrade.rst.inc
==================
c9cc97e;Thomas Waldmann;2016-12-20 00:49:24 +0100;CHANGES: fix 1.0.9 release date

==

docs/changes.rst
==================
85cebd0;Marian Beermann;2016-12-20 23:05:44 +0100;Merge branch 'partial-1.0-maint' into merge/1.0-maint

==
==================
880578d;Thomas Waldmann;2016-12-19 16:06:54 +0100;quickstart: use prune with --list
so people are better aware of what's happening, avoiding pitfalls
with wrong or missing --prefix.

==

docs/quickstart.rst
==================
9199198;Marian Beermann;2016-12-17 18:00:03 +0100;Fix subsubparsers for Python <3.4.3
This works around http://bugs.python.org/issue9351

Since Debian and Ubuntu ship 3.4.2 and 3.4.0 respectively.

==

borg/archiver.py
==================
f9aefd6;Marian Beermann;2016-12-20 23:00:28 +0100;Merge commit '343387b36ef' into merge/1.0-maint
# Conflicts:
#	src/borg/archiver.py

==
==================
df40b38;Marian Beermann;2016-12-18 23:32:42 +0100;upgrade: --disable-tam
# Conflicts:
#	src/borg/helpers.py
#	src/borg/testsuite/archiver.py

==

src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
c7c8c0f;Marian Beermann;2016-12-18 23:30:34 +0100;init: explain manifest auth compatibility
# Conflicts:
#	src/borg/archiver.py

==

src/borg/archiver.py
src/borg/key.py
==================
d15fb24;Marian Beermann;2016-12-17 01:48:33 +0100;check: handle duplicate archive items neatly
# Conflicts:
#	src/borg/archive.py

==

docs/changes.rst
src/borg/archive.py
src/borg/testsuite/archiver.py
==================
5e1cb9d;Marian Beermann;2016-12-17 00:51:25 +0100;Add tertiary authentication for metadata (TAM)

==

docs/changes.rst
setup.py
src/borg/archive.py
src/borg/archiver.py
src/borg/crypto.pyx
src/borg/helpers.py
src/borg/item.pyx
src/borg/key.py
src/borg/selftest.py
src/borg/testsuite/archiver.py
src/borg/testsuite/crypto.py
src/borg/testsuite/helpers.py
src/borg/testsuite/key.py
==================
d5bc486;TW;2016-12-20 05:03:21 +0100;Merge pull request #1968 from ThomasWaldmann/release-1.0.9
Release 1.0.9
==
==================
c54a912;Thomas Waldmann;2016-12-20 00:49:24 +0100;CHANGES: fix 1.0.9 release date

==

docs/changes.rst
==================
3362ec3;Thomas Waldmann;2016-12-19 16:06:54 +0100;quickstart: use prune with --list
so people are better aware of what's happening, avoiding pitfalls
with wrong or missing --prefix.

==

docs/quickstart.rst
==================
580599c;Thomas Waldmann;2016-12-19 04:21:13 +0100;ran build_usage

==

docs/usage/upgrade.rst.inc
==================
4d6141a;Marian Beermann;2016-12-18 23:28:01 +0100;upgrade: --disable-tam

==

borg/archiver.py
borg/helpers.py
borg/testsuite/archiver.py
==================
ec4f42c;Marian Beermann;2016-12-18 21:45:19 +0100;init: explain manifest auth compatibility

==

borg/archiver.py
borg/key.py
==================
b104263;TW;2016-12-18 21:23:06 +0100;Merge pull request #1964 from enkore/issue/1759
Fix processing of remote ~/ and ~user/ paths
==
==================
1c55930;Thomas Waldmann;2016-12-17 15:09:03 +0100;ran build_usage

==

docs/usage/upgrade.rst.inc
==================
f2f50ef;Marian Beermann;2016-12-15 20:02:37 +0100;check: handle duplicate archive items neatly
Signed-off-by: Thomas Waldmann <tw@waldmann-edv.de>

==

borg/archive.py
borg/testsuite/archiver.py
docs/changes.rst
==================
28ad779;Marian Beermann;2016-12-11 13:32:09 +0100;Add tertiary authentication for metadata (TAM)
Signed-off-by: Thomas Waldmann <tw@waldmann-edv.de>

==

borg/archive.py
borg/archiver.py
borg/crypto.pyx
borg/helpers.py
borg/key.py
borg/testsuite/archiver.py
borg/testsuite/crypto.py
borg/testsuite/helpers.py
borg/testsuite/key.py
docs/changes.rst
docs/usage.rst
==================
343387b;enkore;2016-12-17 18:00:15 +0100;Merge pull request #1966 from enkore/1.0-340
Fix subsubparsers for Python <3.4.3
==
==================
e28b470;Marian Beermann;2016-12-17 18:00:03 +0100;Fix subsubparsers for Python <3.4.3
This works around http://bugs.python.org/issue9351

Since Debian and Ubuntu ship 3.4.2 and 3.4.0 respectively.

==

borg/archiver.py
==================
0c959cb;enkore;2016-12-17 15:58:51 +0100;pytest 2 compat

==

conftest.py
==================
0b32524;enkore;2016-12-17 15:58:07 +0100;Merge pull request #1965 from borgbackup/pytest2
conftest: pytest 2 compat
==
==================
af923e2;enkore;2016-12-17 15:23:47 +0100;conftest: pytest 2 compat

==

conftest.py
==================
84d1375;Marian Beermann;2016-12-17 14:33:40 +0100;Fix processing of remote ~/ and ~user/ paths

==

src/borg/remote.py
==================
4225009;enkore;2016-12-17 14:11:11 +0100;Merge pull request #1955 from ThomasWaldmann/merge-1.0-maint
merge 1.0-maint
==
==================
63ce627;Marian Beermann;2016-12-17 13:59:37 +0100;fix in-file checkpoints when clock jumps

==

src/borg/archive.py
==================
a9db2a2;Marian Beermann;2016-12-17 13:26:28 +0100;Merge branch '1.0-maint' into master
# Conflicts:
#	src/borg/archive.py
#	src/borg/archiver.py
#	src/borg/helpers.py

==
==================
87f8b2b;Marian Beermann;2016-12-17 13:21:58 +0100;Merge branch 'merge-1.0-maint' of https://github.com/ThomasWaldmann/borg into ThomasWaldmann-merge-1.0-maint

==
==================
49c0571;enkore;2016-12-17 13:20:56 +0100;Merge pull request #1941 from enkore/issue/1936
Fix some clock problems
==
==================
baa8baa;Marian Beermann;2016-12-17 12:55:16 +0100;create: fix duration if --timestamp is given

==

borg/archive.py
==================
445365b;Marian Beermann;2016-12-17 12:00:25 +0100;update changes

==

docs/changes.rst
==================
f5d6093;Marian Beermann;2016-12-17 11:46:20 +0100;fix checkpoints when clock jumps

==

borg/archive.py
==================
a8d921a;Marian Beermann;2016-12-17 11:37:56 +0100;base archive timestamps on end time
The assumption is that if the clock jumps during the Borg run that it
was jump-corrected and is now correct, while the start timestamp would
be wrong.

==

borg/archive.py
==================
2dc558a;Marian Beermann;2016-10-30 18:18:23 +0100;fix create progress not updating if clock jumps

==

borg/helpers.py
==================
420c984;Marian Beermann;2016-10-30 18:18:05 +0100;fix wrong duration if clock jumps during create

==

borg/archive.py
borg/archiver.py
==================
9396aac;enkore;2016-12-17 11:34:25 +0100;Merge pull request #1962 from ThomasWaldmann/win10-linux-subsys
document windows 10 linux subsystem install
==
==================
20d3eff;enkore;2016-12-17 11:33:52 +0100;Merge pull request #1963 from ThomasWaldmann/fix-win10-lxsys-tests
catch errno.ENOSYS for mknod (win 10 lxsys)
==
==================
6137008;Thomas Waldmann;2016-12-17 00:37:00 +0100;catch errno.ENOSYS for mknod (win 10 lxsys)
mknod raises this when running as non-root under Windows 10's Linux Subsystem.

==

borg/testsuite/archiver.py
==================
6b6ddec;Thomas Waldmann;2016-12-17 00:25:49 +0100;document windows 10 linux subsystem install
also add note about remote repos being broken on cygwin.

==

README.rst
docs/installation.rst
==================
4c76862;TW;2016-12-16 21:10:13 +0100;Merge pull request #1957 from enkore/f/bio-failop
mention failed operation in per-file warnings
==
==================
4f0c2ab;TW;2016-12-16 00:25:24 +0100;Merge pull request #1959 from ThomasWaldmann/pretty-test-fails2
pytest: only rewrite the testsuite, fixes #1938
==
==================
04340ae;Thomas Waldmann;2016-12-15 03:02:06 +0100;pytest: only rewrite the testsuite, fixes #1938
do not rewrite the borg application code, just the test code,
so the bytecode tested is identical / very close to the bytecode used in practice.

==

conftest.py
==================
34e19cc;Marian Beermann;2016-12-14 15:20:08 +0100;mention failed operation in per-file warnings
on the one hand one can say it's ugly global state, on the other it's
totally handy!

just have to keep that in mind for MT, but it's rather obvious.

==

src/borg/archive.py
src/borg/archiver.py
==================
82cd1fd;Thomas Waldmann;2016-12-14 03:42:38 +0100;run setup.py build_usage

==

docs/usage/list.rst.inc
docs/usage/recreate.rst.inc
docs/usage/serve.rst.inc
==================
c855c68;Thomas Waldmann;2016-12-14 03:26:30 +0100;Merge branch '1.0-maint'

==
==================
7f63ca8;TW;2016-12-14 02:50:08 +0100;Merge pull request #1953 from ThomasWaldmann/fix-1932
add a borg debug/key dummy command, fixes #1932
==
==================
5a40870;Thomas Waldmann;2016-12-14 00:00:09 +0100;add a borg debug/key dummy command, fixes #1932
the problem was that there neither was a do_debug implementation for the case
someone just enters "borg debug", nor did the parser inherit from common_parser
(so accessing .umask triggered an exception before setup_logging() was called,
which triggered another exception when log output should have been emitted).

same for do_key ("borg key").

added a generic handler that just prints the subcommand help.

==

borg/archiver.py
==================
60bbd7a;TW;2016-12-14 01:29:43 +0100;update CHANGES (1.0-maint) (#1954)

==

docs/changes.rst
==================
d138548;TW;2016-12-13 23:12:53 +0100;Merge pull request #1937 from ThomasWaldmann/location-parser
fix the user part parsing in the Location parser
==
==================
292ff42;Thomas Waldmann;2016-12-09 03:54:20 +0100;refactor common regex part into optional_user_re

==

borg/helpers.py
==================
ccf882a;TW;2016-12-13 22:32:06 +0100;Merge pull request #1945 from enkore/ThomasWaldmann-update-1.1-changes
Update 1.1 changes
==
==================
60b6f5a;enkore;2016-12-13 20:58:58 +0100;Merge pull request #1951 from ThomasWaldmann/pretty-test-fails
get back pytest's pretty assertion failures, fixes #1938
==
==================
c6017ab;Thomas Waldmann;2016-12-13 19:27:01 +0100;get back pytest's pretty assertion failures, fixes #1938

==

conftest.py
==================
796ea9e;enkore;2016-12-11 15:20:22 +0100;Merge pull request #1939 from ThomasWaldmann/update-1.0-changes
update CHANGES (1.0-maint)
==
==================
9147c70;Marian Beermann;2016-12-11 15:18:52 +0100;update 1.1 beta CHANGES

==

docs/changes.rst
docs/faq.rst
==================
09b1079;Thomas Waldmann;2016-12-11 06:20:10 +0100;update CHANGES (master / 1.1 beta)

==

docs/changes.rst
==================
9d31538;enkore;2016-12-09 21:25:37 +0100;Merge pull request #1940 from enkore/f/cache-sync
Cache sync stuff
==
==================
bd8b4a4;Thomas Waldmann;2016-12-09 04:42:23 +0100;update CHANGES (1.0-maint)

==

docs/changes.rst
==================
335d599;Thomas Waldmann;2016-12-09 03:37:13 +0100;fix location parser for archives with @ char, add test, fixes #1930
we must exclude colon and slash chars from the username, otherwise the term for the user part
will match everything up to a @ char in the archive name.

a slash can't be in a username as the home directory would contain a illegal slash (slash is path sep),

a colon likely also should not be in a username because chown user:group ... syntax.

==

borg/helpers.py
borg/testsuite/helpers.py
==================
be18418;Marian Beermann;2016-12-03 12:06:22 +0100;cache: no archive caches => work directly on master cache (no merges)

==

src/borg/cache.py
==================
e169510;Marian Beermann;2016-12-08 22:39:04 +0100;cache: don't create Item in fetch_and_build_idx

==

src/borg/cache.py
==================
58752c9;Thomas Waldmann;2016-12-04 17:56:23 +0100;add assertion to demonstrate mac key length issue in test data

==

src/borg/key.py
==================
4affad7;enkore;2016-12-03 20:40:33 +0100;Merge pull request #1924 from ThomasWaldmann/pr-template
add a PR template pointing to guidelines
==
==================
0994a0a;Abogical;2016-12-01 19:52:17 +0200;Let prune --list display archives deleted per total archives

==

src/borg/archiver.py
==================
dfd37d0;Thomas Waldmann;2016-12-03 18:34:34 +0100;add a PR template pointing to guidelines

==

.github/PULL_REQUEST_TEMPLATE
==================
7e5ed40;enkore;2016-12-03 18:06:27 +0100;Merge pull request #1911 from enkore/f/itemnt
Work on metadata handling speed
==
==================
b7eaeee;Marian Beermann;2016-12-03 17:50:50 +0100;clean imports, remove unused code

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/key.py
src/borg/testsuite/helpers.py
==================
8b2e7ec;Marian Beermann;2016-12-03 00:16:21 +0100;don't do "bigint" conversion for nanosecond mtime
2**63 nanoseconds are 292 years, so this change is good until 2262.
See also https://en.wikipedia.org/wiki/Time_formatting_and_storage_bugs#Year_2262

I expect that we will have plenty of time to revert this commit in time
for 2262.

timespec := time_t + long, so it's probably only 64 bits on some platforms
anyway.

==

src/borg/cache.py
src/borg/item.pyx
src/borg/testsuite/item.py
==================
b3707f7;Marian Beermann;2016-12-03 00:12:48 +0100;Replace backup_io with a singleton
This is some 15 times faster than @contextmanager, because no instance
creation is involved and no generator has to be maintained. Overall
difference is low, but still nice for a very simple change.

==

src/borg/archive.py
src/borg/testsuite/archive.py
==================
b885841;Marian Beermann;2016-11-30 12:43:28 +0100;make item native code
This makes an surprisingly large difference. Test case: ~70000 empty files.
(Ie. little data shoveling, lots of metadata shoveling). Before: 9.1 seconds
+- 0.1 seconds. After: 8.4 seconds +- 0.1 seconds.). That's a huge
win for changing a few lines.

I'd expect that this improves performance in almost all areas that touch
the items (list, delete, prune).

==

setup.py
src/borg/helpers.py
src/borg/item.py
src/borg/item.pyx
==================
e9d7f92;enkore;2016-12-03 00:02:01 +0100;Merge pull request #1921 from enkore/f/recreate-fixes
recreate fixes
==
==================
a9395dd;Marian Beermann;2016-12-02 20:19:59 +0100;recreate: don't rechunkify unless explicitly told so

==

src/borg/archive.py
src/borg/archiver.py
==================
30df63c;Marian Beermann;2016-12-02 18:15:11 +0100;recreate: remove special-cased --dry-run

==

src/borg/archive.py
src/borg/archiver.py
==================
7eb2dff;TW;2016-12-02 17:33:07 +0100;Merge pull request #1922 from enkore/f/buildusage
setup.py: fix build_usage not processing all commands
==
==================
91a547b;TW;2016-12-02 13:42:09 +0100;Merge pull request #1917 from JoseLuisMartins/bugfix
Fixed borg info
==
==================
288cac7;Marian Beermann;2016-12-02 13:28:49 +0100;setup.py: build_usage: don't generate includes for debug commands

==

docs/usage/debug-delete-obj.rst.inc
docs/usage/debug-dump-archive-items.rst.inc
docs/usage/debug-dump-repo-objs.rst.inc
docs/usage/debug-get-obj.rst.inc
docs/usage/debug-info.rst.inc
docs/usage/debug-put-obj.rst.inc
setup.py
==================
1c261f6;Marian Beermann;2016-12-02 13:25:24 +0100;setup.py: fix build_usage not processing all commands

==

setup.py
==================
c6f0969;Marian Beermann;2016-12-02 13:20:43 +0100;recreate: update --help

==

src/borg/archiver.py
==================
c1ccad8;Marian Beermann;2016-12-02 12:54:27 +0100;recreate: update/remove/rename outdated comments

==

src/borg/archive.py
==================
eade10a;Marian Beermann;2016-12-02 11:39:10 +0100;recreate: fix crash on checkpoint

==

src/borg/archive.py
==================
0f07b6a;OEM Configuration (temporary user);2016-12-01 18:12:15 +0000;borg info:fixed bug when called without arguments,issue #1914

==

src/borg/archiver.py
==================
eb940e6;Marian Beermann;2016-12-02 11:20:26 +0100;recreate: fix rechunking dropping all chunks on the floor

==

src/borg/archive.py
src/borg/testsuite/archiver.py
==================
b410392;Marian Beermann;2016-12-02 11:09:52 +0100;recreate repo: fix only one archive being processed

==

src/borg/archive.py
src/borg/archiver.py
==================
10d1439;TW;2016-12-01 00:59:55 +0100;Merge pull request #1904 from enkore/issue/1896
blake2b key modes: use B2B as MAC; longer keys.
==
==================
1c248d6;enkore;2016-11-30 22:44:19 +0100;Merge pull request #1908 from ThomasWaldmann/merge-1.0-maint
Merge 1.0-maint
==
==================
a100fb6;Thomas Waldmann;2016-11-30 05:38:04 +0100;Merge branch '1.0-maint' into merge-1.0-maint
# Conflicts:
#	AUTHORS
#	src/borg/archive.py
#	src/borg/key.py

==
==================
8ddbc45;TW;2016-11-30 04:31:58 +0100;Merge pull request #1906 from enkore/f/check-corrupted-manifest
check: handle corrupted manifest
==
==================
2a340bf;TW;2016-11-30 02:51:16 +0100;Merge pull request #1907 from ThomasWaldmann/cygwin-docs
docs: add python3-devel as a dependency for cygwin-based installation
==
==================
d6d3f27;Thomas Waldmann;2016-11-30 02:50:20 +0100;docs: add python3-devel as a dependency for cygwin-based installation

==

docs/installation.rst
==================
53abed6;enkore;2016-11-30 01:51:01 +0100;Merge pull request #1900 from ThomasWaldmann/latest-virtualenv
partially remove virtualenv/pip version requirement, fixes #1738
==
==================
146d586;Marian Beermann;2016-11-30 01:43:01 +0100;check: skip corrupted chunks during manifest rebuild

==

borg/archive.py
borg/testsuite/archiver.py
==================
029469d;Abogical;2016-11-29 00:29:01 +0200;Let prune accept and pass the progress argument

==

src/borg/archiver.py
==================
71775ba;Marian Beermann;2016-11-30 01:06:21 +0100;check: rebuild manifest if it's corrupted

==

borg/archive.py
borg/testsuite/archiver.py
==================
cdd9891;enkore;2016-11-30 01:03:17 +0100;Merge pull request #1905 from ThomasWaldmann/fix-1903
fix TypeError in errorhandler, fixes #1903
==
==================
989b228;Thomas Waldmann;2016-11-30 00:37:30 +0100;fix TypeError in errorhandler, fixes #1903

==

borg/key.py
==================
8949f2c;Marian Beermann;2016-11-30 00:24:03 +0100;blake2b key modes: use B2B as MAC; longer keys.

==

src/borg/key.py
src/borg/testsuite/key.py
==================
f4c916e;enkore;2016-11-29 23:48:55 +0100;Merge pull request #1901 from ThomasWaldmann/show-broken
implement "health" item formatter key, fixes #1749
==
==================
01ad1a5;Thomas Waldmann;2016-11-29 23:02:24 +0100;implement "health" item formatter key, fixes #1749

==

src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
99c38e8;TW;2016-11-29 21:52:07 +0100;Merge pull request #1892 from Abogical/sync-progress
Add cache.sync progress display
==
==================
6290e70;Thomas Waldmann;2016-11-29 21:30:23 +0100;partially remove virtualenv/pip version requirement, fixes #1738
Is needed only for python 3.2 support.

For normal development, we expect you have py34+ for borg 1.1.

For vagrant, it is still needed because of older VMs like wheezy (py32).

Not needed for Travis-CI any more, we moved to trusty VMs (py34) there.

==

.travis/install.sh
requirements.d/development.txt
==================
f3ce6be;Abogical;2016-11-26 22:15:59 +0200;Add cache.sync progress display

==

src/borg/archiver.py
src/borg/cache.py
==================
b25de0a;TW;2016-11-29 19:26:17 +0100;Merge pull request #1895 from ThomasWaldmann/fix-1894
fix traceback in Error handler if id is None, fixes #1894
==
==================
cd50e28;Thomas Waldmann;2016-11-29 01:34:11 +0100;fix traceback in Error handler if id is None, fixes #1894

==

borg/key.py
==================
baab519;TW;2016-11-29 18:21:01 +0100;Merge pull request #1898 from ThomasWaldmann/fix-1897
test_get_(cache|keys)_dir: clean env state, fixes #1897
==
==================
734f8a9;enkore;2016-11-29 18:10:08 +0100;Merge pull request #1888 from enkore/f/secdir
Rename BORG_NONCES_DIR to BORG_SECURITY_DIR and then some
==
==================
bd96b43;Marian Beermann;2016-11-27 18:40:34 +0100;borg info: print security directory

==

src/borg/archiver.py
==================
f62a223;Marian Beermann;2016-11-27 12:39:49 +0100;Implement security dir perks
Key type, location and manifest timestamp checks now survive cache
deletion. This also means that you can now delete your cache and avoid
previous warnings, since Borg can still tell it's safe.

==

src/borg/cache.py
src/borg/testsuite/archiver.py
==================
c3a2dc5;Marian Beermann;2016-11-27 12:08:26 +0100;Rename BORG_NONCES_DIR to BORG_SECURITY_DIR

==

docs/usage.rst
src/borg/helpers.py
src/borg/nonces.py
src/borg/testsuite/helpers.py
src/borg/testsuite/key.py
src/borg/testsuite/nonces.py
==================
9e760a6;Thomas Waldmann;2016-11-29 14:08:58 +0100;test_get_(cache|keys)_dir: clean env state, fixes #1897
make sure the BORG_(CACHE|KEYS)_DIR env var is not set initially.

==

borg/testsuite/helpers.py
==================
619cb12;enkore;2016-11-28 22:51:01 +0100;1.0 maint AUTHORS +me

==

AUTHORS
==================
701e26a;enkore;2016-11-28 09:09:10 +0100;Merge pull request #1890 from ThomasWaldmann/merge-1.0-maint
Merge 1.0-maint
==
==================
4746d20;Thomas Waldmann;2016-11-28 02:25:56 +0100;ran build_usage
had merge conflicts in the usage files, decided to just recreate them afterwards.

==

docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/diff.rst.inc
docs/usage/help.rst.inc
docs/usage/init.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/recreate.rst.inc
docs/usage/umount.rst.inc
==================
c83a124;Thomas Waldmann;2016-11-28 02:23:32 +0100;Merge branch '1.0-maint' (into master)

==
==================
2780a83;TW;2016-11-27 20:41:39 +0100;Merge pull request #1885 from jcrben/patch-1
Clarify extract is relative to current directory
==
==================
a49fc6f;Ben Creasy;2016-11-27 03:29:11 -0800;Clarify extract is relative to current directory
I'm still hoping that a destination switch can be added (requested long ago in https://github.com/jborg/attic/issues/195), but in the meantime this may help. I'm guessing this clobbers any existing files.
==

docs/quickstart.rst
==================
104e9f3;enkore;2016-11-27 20:33:36 +0100;Merge pull request #1889 from enkore/f/109docfixes
1.0.9rc1 doc fixes
==
==================
bf3a1f0;Marian Beermann;2016-11-27 20:18:27 +0100;docs/usage: fix literal/emph without end-string (two instances)

==

docs/usage.rst
==================
64428da;Marian Beermann;2016-11-27 20:16:41 +0100;README: fix code-block without an argument

==

README.rst
==================
a250551;Marian Beermann;2016-11-27 20:15:05 +0100;FAQ: fix link to changelog

==

docs/changes.rst
docs/faq.rst
==================
5de31f5;Thomas Waldmann;2016-11-27 02:33:57 +0100;ran build_usage

==

docs/usage/create.rst.inc
docs/usage/prune.rst.inc
==================
c920a16;TW;2016-11-27 02:23:51 +0100;Merge pull request #1865 from ThomasWaldmann/update-1.0-changes
update CHANGES (1.0-maint)
==
==================
91fa568;Thomas Waldmann;2016-11-24 00:33:03 +0100;add note about issue #1837

==

docs/changes.rst
==================
bd0e140;Thomas Waldmann;2016-11-24 00:21:58 +0100;move "important notes" to own section

==

docs/changes.rst
==================
cc15806;Thomas Waldmann;2016-11-20 01:12:49 +0100;update CHANGES (1.0-maint)

==

docs/changes.rst
==================
373d8e8;TW;2016-11-27 02:13:43 +0100;Merge pull request #1884 from ThomasWaldmann/upgrade-osxfuse
upgrade FUSE for macOS to 3.5.3
==
==================
9643e64;Thomas Waldmann;2016-11-27 02:09:19 +0100;upgrade FUSE for macOS to 3.5.3

==

Vagrantfile
==================
8465979;TW;2016-11-27 01:31:24 +0100;Merge pull request #1882 from ThomasWaldmann/docs-rsrc-usage
add more details about resource usage
==
==================
b808d95;TW;2016-11-27 00:24:54 +0100;Merge pull request #1883 from ThomasWaldmann/noatime-noctime
implement noatime / noctime, fixes #1853
==
==================
9451ab6;Thomas Waldmann;2016-11-26 21:12:16 +0100;implement noatime / noctime, fixes #1853

==

borg/archive.py
borg/archiver.py
==================
30d1e21;Thomas Waldmann;2016-11-26 20:49:39 +0100;fixup: fixes, clarify

==

docs/usage.rst
==================
20798df;enkore;2016-11-26 19:14:44 +0100;Merge pull request #1876 from ThomasWaldmann/vagrantfile-cleanup
Vagrantfile cleanup
==
==================
5917822;enkore;2016-11-26 19:11:08 +0100;Merge pull request #1881 from Abogical/cache-progress
Add begin_txn progress message
==
==================
be6341b;Abogical;2016-11-26 02:28:43 +0200;Add begin_txn progress message

==

src/borg/cache.py
==================
76c5f1a;Thomas Waldmann;2016-11-26 04:34:01 +0100;add more details about resource usage

==

docs/internals.rst
docs/usage.rst
==================
cc20c98;TW;2016-11-26 02:24:50 +0100;Merge pull request #1875 from ThomasWaldmann/improve-files-cache-docs
improve cache / index docs, esp. files cache docs, fixes #1825
==
==================
1250b14;enkore;2016-11-26 00:50:16 +0100;Merge pull request #1874 from Abogical/cache-progress
Add progress display for cache commit
==
==================
50b9766;enkore;2016-11-25 20:39:26 +0100;Merge pull request #1878 from ThomasWaldmann/borg-new-passphrase
implement BORG_NEW_PASSPHRASE, fixes #1768
==
==================
6936526;enkore;2016-11-25 14:09:38 +0100;Merge pull request #1879 from ThomasWaldmann/cleanup-recreate-tests
remove some unneeded test overriding methods
==
==================
d519ae6;Thomas Waldmann;2016-11-25 01:31:28 +0100;remove some unneeded test overriding methods
they are not there any more in the base class, so there is nothing to override.

==

src/borg/testsuite/archiver.py
==================
fa8ce2d;Thomas Waldmann;2016-11-25 00:06:35 +0100;add test for borg change-passphrase / BORG_NEW_PASSPHRASE

==

src/borg/testsuite/archiver.py
==================
0a0b913;Thomas Waldmann;2016-11-24 23:43:27 +0100;implement BORG_NEW_PASSPHRASE, fixes #1768

==

docs/usage.rst
src/borg/key.py
==================
d56683f;TW;2016-11-24 16:50:00 +0100;Merge pull request #1877 from anarcat/pypi
display README correctly on PyPI
==
==================
fbada18;Antoine Beaupré;2016-11-22 20:01:26 -0500;display README correctly on PyPI
I have discovered that PyPI is way more sensitive to RST warnings than
other platforms: warnings and errors will make the document not show
up correctly, which is currently the case here:

https://pypi.python.org/pypi/borgbackup/

the suggested changes remove Sphinx-specific markup from the output,
namely the badges and `|replacement|` patterns, but also the
`higlight` directive. this also requires adding tags to the README to
mark the badges to remove and removal of the `none` argument for the
`.. code-block::` element which was not having any significant in
Sphinx anyways.

==

README.rst
setup.py
==================
f9b3d28;Abogical;2016-11-24 01:46:50 +0200;Add progress messages for cache.commit

==

src/borg/cache.py
==================
e999f3f;Abogical;2016-11-24 01:26:29 +0200;Add ProgressIndicatorMessage and abstract class ProgressIndicatorBase

==

src/borg/helpers.py
==================
1dc51e6;Thomas Waldmann;2016-11-24 04:03:54 +0100;Vagrantfile: reduce code duplication

==

Vagrantfile
==================
6bb363c;Thomas Waldmann;2016-11-24 02:27:38 +0100;Vagrantfile: cosmetic: remove tabs / empty lines

==

Vagrantfile
==================
c8b58e0;Thomas Waldmann;2016-11-24 01:53:23 +0100;improve cache / index docs, esp. files cache docs, fixes #1825

==

docs/internals.rst
==================
abe5923;enkore;2016-11-20 19:59:45 +0100;Merge pull request #1862 from enkore/f/simple-recreate
The Defenestration of recreate's bloat
==
==================
15cefe8;Marian Beermann;2016-11-20 13:31:46 +0100;recreate/archiver tests: add check_cache tool - lints refcounts

==

src/borg/testsuite/archiver.py
==================
93b03ea;Marian Beermann;2016-11-19 19:09:47 +0100;recreate: re-use existing checkpoint functionality

==

src/borg/archive.py
src/borg/archiver.py
==================
df5482d;TW;2016-11-20 00:22:59 +0100;Merge pull request #1864 from ThomasWaldmann/fix-newest-mtime
fix determination of newest mtime, fixes #1860
==
==================
cabcbc5;Thomas Waldmann;2016-11-20 00:08:33 +0100;fix determination of newest mtime, fixes #1860
bug:
if no files were added/modified, _newest_mtime stayed at its initial 0 value.
when saving the files cache, this killed all age 0 entries.

Now using None as initial value, so we can spot that circumstance.

The 2 ** 63 - 1 value is just so it is MAX_INT on a 64bit platform, for better performance.
It can be easily increased when y2262 is coming.

==

borg/cache.py
==================
1fc368c;enkore;2016-11-19 23:42:53 +0100;Merge pull request #1863 from ThomasWaldmann/doc-updates
doc updates
==
==================
5fe5b6b;Thomas Waldmann;2016-11-19 22:26:07 +0100;docs: different pattern matching for --exclude, fixes #1779

==

docs/usage.rst
==================
d8e806a;Thomas Waldmann;2016-11-19 22:04:13 +0100;docs: datetime formatting examples for {now} placeholder, fixes #1822

==

docs/usage.rst
==================
3d174ae;Thomas Waldmann;2016-11-19 21:52:11 +0100;docs: clarify passphrase mode attic repo upgrade, fixes #1854

==

docs/usage.rst
==================
d7284a9;Thomas Waldmann;2016-11-19 21:38:13 +0100;docs: clarify --umask usage, fixes #1859

==

docs/usage.rst
==================
dfc6f03;enkore;2016-11-19 19:18:40 +0100;Merge pull request #1858 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
44935aa;Marian Beermann;2016-11-19 16:49:20 +0100;recreate: remove interruption blah, autocommit blah, resuming blah

==

src/borg/archive.py
src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
afab1cc;Thomas Waldmann;2016-11-17 23:27:24 +0100;Merge branch '1.0-maint'
# Conflicts:
#	borg/platform.py
#	src/borg/archiver.py
#	src/borg/helpers.py
#	src/borg/platform/darwin.pyx
#	src/borg/platform/freebsd.pyx
#	src/borg/platform/linux.pyx
#	src/borg/testsuite/__init__.py

==
==================
ea6515d;TW;2016-11-17 22:18:20 +0100;Merge pull request #1856 from ThomasWaldmann/umount
borg umount, fixes #1855
==
==================
c14b962;enkore;2016-11-17 22:12:24 +0100;Merge pull request #1419 from textshell/feature/rpc-named-arguments
RFC: Make rpc protocol more extensible
==
==================
e17fe2b;Thomas Waldmann;2016-11-17 20:16:28 +0100;borg umount, fixes #1855
this refactors umount code we already used for the testsuite into the platform module's namespace.

also, it exposes that functionality via the cli api, so users can use it via "borg umount <mountpoint>",
which is more consistent than using borg to mount and fusermount -u (or umount) to un-mount.

==

borg/archiver.py
borg/helpers.py
borg/platform.py
borg/platform_darwin.pyx
borg/platform_freebsd.pyx
borg/platform_linux.pyx
borg/testsuite/__init__.py
docs/usage.rst
docs/usage/umount.rst.inc
==================
f371098;Martin Hostettler;2016-11-15 23:18:21 +0100;remote: Remove unused type variable.

==

src/borg/remote.py
==================
1edff44;Martin Hostettler;2016-11-10 11:08:45 +0100;Repository,remote: Rename argument of get to 'id'.

==

src/borg/remote.py
src/borg/repository.py
==================
8955d8b;Martin Hostettler;2016-11-10 12:12:32 +0100;remote: Test that the legacy free rpc bootstrap works.

==

src/borg/remote.py
src/borg/testsuite/repository.py
==================
bd3a4a2;Martin Hostettler;2016-11-08 23:19:06 +0100;Add testing for exception transport.

==

src/borg/remote.py
src/borg/testsuite/repository.py
==================
e14406f;Martin Hostettler;2016-11-08 23:18:18 +0100;remote: Redo exception handling

==

src/borg/archiver.py
src/borg/remote.py
==================
4854fce;Martin Hostettler;2016-07-31 21:19:30 +0200;remote: Move open to a normal api stub.

==

src/borg/remote.py
==================
ba553ec;Martin Hostettler;2016-11-10 09:56:18 +0100;remote: Introduce rpc protocol with named parameters.

==

src/borg/remote.py
==================
6c1b337;Martin Hostettler;2016-11-10 10:04:15 +0100;remote: Replace broken exception argument restoration with code that uses a fixed value.

==

src/borg/remote.py
==================
d25e9aa;Martin Hostettler;2016-11-10 09:41:33 +0100;remote: Use single quotes

==

src/borg/remote.py
==================
0da913f;Martin Hostettler;2016-11-10 09:44:00 +0100;remote: Decode method name as utf-8 instead of ascii for consistency.

==

src/borg/remote.py
==================
c580d9c;Martin Hostettler;2016-11-10 08:55:19 +0100;version: Add version parsing and formating

==

src/borg/version.py
==================
d871efc;enkore;2016-11-14 23:13:34 +0100;Merge pull request #1851 from Abogical/patch-1
Typo
==
==================
9cf4846;Abdel-Rahman;2016-11-15 00:11:32 +0200;Typo

==

docs/development.rst
==================
58024c0;enkore;2016-11-14 22:28:47 +0100;Merge pull request #1850 from enkore/f/redpepper
fixes for flake 3.1.1
==
==================
c380d91;Marian Beermann;2016-11-14 21:50:20 +0100;fixes for flake 3.1.1

==

setup.py
src/borg/helpers.py
src/borg/platform/base.py
tox.ini
==================
cf8f8fb;enkore;2016-11-14 21:43:35 +0100;Merge pull request #1846 from Abogical/master
Improve extract progress display, for #1721
==
==================
34f529c;Abogical;2016-11-14 17:37:49 +0200;satisfy codecov

==

src/borg/archiver.py
src/borg/helpers.py
==================
3896f26;Abogical;2016-11-14 15:10:01 +0200;use monkeypatch

==

src/borg/testsuite/helpers.py
==================
76638d0;Abogical;2016-11-14 14:56:34 +0200;If there is a small space for ellipsis_truncate, show '...' only

==

src/borg/helpers.py
==================
af925d2;Abogical;2016-11-14 14:49:24 +0200;do not justify if we're not outputing to a terminal

==

src/borg/helpers.py
==================
3232769;Abogical;2016-11-14 11:43:46 +0200;Respond to feedback

==

src/borg/helpers.py
==================
c055dd2;enkore;2016-11-14 08:11:14 +0100;Merge pull request #1848 from ThomasWaldmann/clarify-pr-targets
developers docs: clarify how to choose PR target branch
==
==================
c81f861;Thomas Waldmann;2016-11-05 03:05:15 +0100;developers docs: clarify how to choose PR target branch

==

docs/development.rst
==================
38fe619;Thomas Waldmann;2016-11-14 03:22:36 +0100;Merge branch '1.0-maint'

==
==================
cda88e1;TW;2016-11-14 03:19:34 +0100;Merge pull request #1847 from ThomasWaldmann/travis-osx
travis: allow OS X failures until the brew cask osxfuse issue is fixed
==
==================
372ebb4;Thomas Waldmann;2016-11-14 02:08:11 +0100;travis: allow OS X failures until the brew cask osxfuse issue is fixed

==

.travis.yml
==================
1362d2e;Abogical;2016-11-14 00:45:54 +0200;Set COLUMNS & LINES as if it was a terminal

==

src/borg/testsuite/helpers.py
==================
467fe38;Abogical;2016-11-14 00:05:42 +0200;Compatibility with python 3.4

==

src/borg/helpers.py
==================
b737866;Abogical;2016-11-13 23:34:15 +0200;Improve extract progress display and ProgressIndicatorPercent

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
ddb8839;enkore;2016-11-13 17:53:46 +0100;Merge pull request #1845 from enkore/merge/1.0-maint
merge 1.0-maint
==
==================
dfd7486;Marian Beermann;2016-11-13 17:30:42 +0100;test_attic013_acl_bug: use def instead of lambda

==

src/borg/testsuite/archiver.py
==================
c2eb253;Marian Beermann;2016-11-13 16:07:01 +0100;Document maintenance merge command

==

docs/development.rst
src/borg/item.py
==================
0d2b76f;Marian Beermann;2016-11-13 15:58:42 +0100;Merge branch '1.0-maint' into merge/1.0-maint

==
==================
4b5a17c;enkore;2016-11-13 15:26:19 +0100;Merge pull request #1841 from enkore/issue/1837
Fix check incorrectly reporting attic 0.13 and earlier archives as corrupt
==
==================
a898297;Marian Beermann;2016-11-13 02:00:39 +0100;check: improve "did not get expected metadata dict" diagnostic

==

borg/archive.py
==================
639eba1;Marian Beermann;2016-11-13 15:22:51 +0100;Fix check incorrectly reporting attic 0.13 and earlier archives as corrupt

==

borg/archive.py
borg/testsuite/archiver.py
==================
9b1241e;TW;2016-11-13 14:44:17 +0100;Merge pull request #1844 from enkore/issue/1815
check: catch two kinds of different repos
==
==================
2261709;Marian Beermann;2016-11-13 11:45:35 +0100;check: handle repo w/o objects gracefully
normal check would complete, --repair would crash when trying
to write the rebuilt (empty) manifest out, since self.key was None

==

borg/archive.py
borg/testsuite/archiver.py
==================
64a3fa8;Marian Beermann;2016-11-13 11:40:19 +0100;check: bail out early if repository is *completely* empty

==

borg/repository.py
==================
3789c78;enkore;2016-11-13 11:32:08 +0100;Merge pull request #1843 from enkore/issue/1801
Fix tox/pybuild in 1.0-maint
==
==================
960c421;Marian Beermann;2016-11-13 11:19:58 +0100;fix tox build for environment-python != containing-python in yet-another instance
this instance: the repository worktree is *not* named borg.

Cherry pick of 4f1157c into 1.0-maint due to f3efcdb

TODO removed since we already did that after 1.0-maint, but 1.0-maint
will never receive the change.

==

conftest.py
==================
1a0218b;enkore;2016-11-13 02:05:06 +0100;Merge pull request #1840 from ThomasWaldmann/fix-logger
at xattr module import time, loggers are not initialized yet
==
==================
3237db4;Thomas Waldmann;2016-11-12 23:10:40 +0100;at xattr module import time, loggers are not initialized yet

==

borg/xattr.py
==================
5c98b85;TW;2016-11-12 23:04:50 +0100;Merge pull request #1839 from ThomasWaldmann/osxfuse-non-beta
osxfuse non-beta
==
==================
cd8dfda;Thomas Waldmann;2016-11-12 22:55:05 +0100;caskroom osxfuse-beta gone, it's osxfuse now (3.5.3)

==

.travis/install.sh
==================
f568244;TW;2016-11-12 22:55:21 +0100;Merge pull request #1836 from enkore/f/smfsc
repository: check_free_space, special case small repos
==
==================
00fae3f;Marian Beermann;2016-11-12 14:42:11 +0100;repository: check_free_space, special case small repos

==

src/borg/repository.py
==================
80b8670;enkore;2016-11-12 01:23:34 +0100;Merge pull request #1833 from enkore/issue/1821
borg init: fix free space check crashing if disk is full
==
==================
e26348a;enkore;2016-11-11 21:25:30 +0100;Merge pull request #1834 from enkore/issue/1813
Clarify cache/repository README file
==
==================
bd4a0fe;Marian Beermann;2016-11-11 21:24:16 +0100;Clarify cache/repository README file

==

src/borg/cache.py
src/borg/constants.py
src/borg/repository.py
src/borg/upgrader.py
==================
01e56a8;enkore;2016-11-11 19:55:48 +0100;Merge pull request #1835 from enkore/f/sch-master
debug, key: enable --help
==
==================
ac5f9b6;Marian Beermann;2016-11-11 19:54:05 +0100;debug, key: enable --help
A small merge mishap in 2a864be8; 1.0-maint has it correctly.

==

src/borg/archiver.py
==================
6c95557;Marian Beermann;2016-11-11 16:39:11 +0100;repository: test_additional_free_space, assert it still exists

==

src/borg/testsuite/repository.py
==================
5b31a2c;Marian Beermann;2016-11-11 16:17:51 +0100;borg init: fix free space check crashing if disk is full

==

src/borg/repository.py
src/borg/testsuite/repository.py
==================
223f789;enkore;2016-11-11 03:11:38 +0100;Merge pull request #1819 from enkore/issue/1800
Add BLAKE2b key types
==
==================
a31ca4f;Marian Beermann;2016-11-10 22:14:09 +0100;crypto: link against system libb2, if possible

==

docs/global.rst.inc
docs/installation.rst
docs/usage.rst
setup.py
src/borg/blake2-libselect.h
src/borg/crypto.pyx
==================
05ce8e0;Marian Beermann;2016-11-10 12:43:30 +0100;Add test script for blake2b_256 against CPython 3.6 hashlib

==

scripts/py36-blake2.py
==================
76c93bb;Marian Beermann;2016-11-10 11:45:40 +0100;crypto blake2: don't release the GIL during key hashing

==

src/borg/blake2/openssl-b2.c
src/borg/crypto.pyx
==================
00ac7b1;Marian Beermann;2016-11-10 00:41:27 +0100;Add BLAKE2b key types

==

src/borg/archiver.py
src/borg/blake2/openssl-b2.c
src/borg/crypto.pyx
src/borg/key.py
src/borg/testsuite/key.py
==================
19f6f7f;TW;2016-11-10 21:17:13 +0100;Merge pull request #1830 from languitar/1.0-maint
Clarify prune behavior for different archive contents
==
==================
3ee0197;Johannes Wienke;2016-11-10 19:40:08 +0100;Clarify prune behavior for different archive contents
In the online help, explain that archives with different contents need to be
separated via the prefix when pruning to achieve a desired retention policy per
archive set.

Relates to #1824.

==

borg/archiver.py
==================
5fecac6;enkore;2016-11-10 17:35:59 +0100;testsuite/archiver: fix missing newline before RemoteArchiverTestCase

==

borg/testsuite/archiver.py
==================
dc4325b;TW;2016-11-10 17:24:01 +0100;Merge pull request #1826 from textshell/feature/repository-cleanup-rollback-api
Repository: rollback's cleanup parameter is internal.
==
==================
b026c8d;enkore;2016-11-10 16:59:59 +0100;Merge pull request #1827 from textshell/feature/gitattribute-diff-python
.gitattributes: Set python diff mode for all *.py files.
==
==================
74ab7f1;Martin Hostettler;2016-11-10 16:48:35 +0100;.gitattributes: Set python diff mode for all *.py files.

==

.gitattributes
==================
79c77e7;Martin Hostettler;2016-11-10 13:44:58 +0100;Repository: rollback's cleanup parameter is internal.

==

src/borg/repository.py
==================
0cf4a16;TW;2016-11-10 02:24:24 +0100;Merge pull request #1818 from enkore/merge/1.0-maint
merge 1.0-maint
==
==================
09f470b;Marian Beermann;2016-11-07 22:08:11 +0100;Add crypto.blake2b_256

==

src/borg/blake2/COPYING
src/borg/blake2/README.md
src/borg/blake2/blake2-impl.h
src/borg/blake2/blake2.h
src/borg/blake2/blake2b-ref.c
src/borg/crypto.pyx
src/borg/selftest.py
src/borg/testsuite/crypto.py
==================
05a52ec;Marian Beermann;2016-11-09 23:51:34 +0100;Merge branch '1.0-maint' into merge/1.0-maint

==
==================
cf44954;enkore;2016-11-07 21:58:34 +0100;Merge pull request #1674 from enkore/f/stale-lock-murderer
Automatically remove stale locks
==
==================
676e69c;Marian Beermann;2016-10-04 14:26:57 +0200;Parse & pass BORG_HOSTNAME_IS_UNIQUE env var to enable stale lock killing

==

src/borg/cache.py
src/borg/helpers.py
src/borg/locking.py
src/borg/platform/posix.pyx
src/borg/remote.py
src/borg/repository.py
==================
cc14975;Marian Beermann;2016-10-02 10:54:36 +0200;Add tests for stale lock killing and platform.process_alive

==

src/borg/locking.py
src/borg/platform/posix.pyx
src/borg/testsuite/locking.py
src/borg/testsuite/platform.py
==================
2bd8ac7;Marian Beermann;2016-10-02 10:54:30 +0200;platform: bump API version (and check consistency)

==

src/borg/helpers.py
src/borg/platform/__init__.py
src/borg/platform/base.py
src/borg/platform/darwin.pyx
src/borg/platform/freebsd.pyx
src/borg/platform/linux.pyx
==================
7930d05;Marian Beermann;2016-10-01 18:35:06 +0200;import platform module instead of functions
(testability)

==

src/borg/locking.py
==================
8e1df7a;Marian Beermann;2016-10-01 18:33:51 +0200;Use logging instead of prints

==

src/borg/locking.py
==================
c562f77;Marian Beermann;2016-10-01 18:33:41 +0200;Move platform-dependent code to platform package

==

src/borg/locking.py
src/borg/platform/__init__.py
src/borg/platform/posix.pyx
==================
d490292;Oleg Drokin;2016-07-02 21:14:47 -0400;Detect and delete stale locks when it's safe
If BORG_UNIQUE_HOSTNAME shell variable is set, stale locks
in both cache and repository are deleted.

Stale lock is defined as a lock that's originating from the same
hostname as us, and correspond to a pid that no longer exists.

This fixes #562

==

src/borg/cache.py
src/borg/locking.py
src/borg/repository.py
==================
cc499fe;TW;2016-11-05 14:25:10 +0100;Merge pull request #1791 from ThomasWaldmann/vagrant-llfuse-build
vagrant: remove llfuse from tox.ini at a central place
==
==================
19891d6;TW;2016-11-05 14:24:34 +0100;Merge pull request #1792 from ThomasWaldmann/cygwin-no-remote-archiver-tests
skip remote tests on cygwin
==
==================
94ff495;TW;2016-11-05 02:37:43 +0100;Merge pull request #1808 from anarcat/restore-size
restore normal size
==
==================
adfd66d;Antoine Beaupré;2016-11-04 21:27:21 -0400;restore normal size
otherwise code examples overflow

==

docs/conf.py
==================
365ec85;TW;2016-11-05 02:22:39 +0100;Merge pull request #1807 from anarcat/docs-misc
fix more issues with the PDF
==
==================
057ad07;Antoine Beaupré;2016-11-04 21:16:41 -0400;fix a heading that was incorrectly set

==

docs/faq.rst
==================
ec0ef2e;Antoine Beaupré;2016-11-04 21:15:31 -0400;remove third level headings, too verbose

==

docs/book.rst
==================
af23eea;Antoine Beaupré;2016-11-04 20:14:59 -0500;fix levels in authors section
that way in the TOC, it doesn't look like borg authors are attic

==

AUTHORS
docs/authors.rst
==================
45c76c1;TW;2016-11-05 02:04:27 +0100;Merge pull request #1804 from anarcat/security-notes
move security verification to support section
==
==================
319ecd8;Antoine Beaupré;2016-11-04 11:26:02 -0400;fix links in standalone README
github and standalone docutils don't parse :ref: tags correctly

==

README.rst
==================
0cda9d6;Antoine Beaupré;2016-11-04 10:31:27 -0400;add link to security contact in README

==

README.rst
==================
19ae2a7;Antoine Beaupré;2016-11-04 10:28:53 -0400;add FAQ about security

==

docs/faq.rst
==================
b4d0388;Antoine Beaupré;2016-11-03 14:10:38 -0400;move security verification to support section
the rationale is to simplify the README file to the bare
minimum. security researchers will be able to find the contact
information if they look minimally and people installing the software
will find a link where relevant (in binary releases only, since all
the others have other trust paths)

==

README.rst
docs/installation.rst
docs/support.rst
==================
c5f5d17;TW;2016-11-05 01:36:03 +0100;Merge pull request #1805 from anarcat/pdf-docs
improvements to the PDF version of the documentation
==
==================
aeb10d1;Antoine Beaupré;2016-11-03 13:57:49 -0400;show URLs in PDF, better font

==

docs/conf.py
==================
5def235;Antoine Beaupré;2016-11-03 12:54:07 -0500;fix PDF rendering structure
without those changes, all of the toctree document headings do not
show up. they are considered to be "below" the last heading of the
README file.

we also remove the "Notes" section from the readme as there is only
one note, regarding the fork.

we introduce a stub "introduction" element in the toctree, otherwise
it is impossible for the PDF rendered to render the README correctly.

this is to workaround a bug in the PDF renderer.

==

README.rst
docs/book.rst
docs/conf.py
docs/index.rst
docs/introduction.rst
==================
18f3d64;Antoine Beaupré;2016-11-03 12:38:31 -0400;PDF docs: add logo and fix authors
the PDF documentation looks much better with those

==

docs/conf.py
==================
d31a3c7;TW;2016-11-04 20:38:03 +0100;Merge pull request #1803 from anarcat/readme-refresh
move fork differences to FAQ
==
==================
7f9a147;Antoine Beaupré;2016-11-03 14:03:48 -0400;move fork differences to FAQ
it seems now that the fork is more of historical value than a current
thing. people interested in the differences between borg and attic can
look in the FAQ, but I do not see why this is present in the README.

a new section regarding compatibility is created to keep that warning
in place.

==

README.rst
docs/faq.rst
==================
9eb336a;TW;2016-11-03 21:56:23 +0100;Merge pull request #1799 from anarcat/faster-quickstart
faster quickstart
==
==================
c8c0495;Antoine Beaupré;2016-11-03 14:15:06 -0400;faster quickstart
move the note about free space after the step by step example. it is
unlikely that users will hit out of space conditions on their first
run, and at the end of the example, they will see the not anyways.

this is to make the documentation less scary for new users and easier
to use.

==

docs/quickstart.rst
==================
df7191e;Thomas Waldmann;2016-11-02 04:09:16 +0100;skip remote tests on cygwin
remote is broken and hangs infinitely on cygwin.

https://github.com/borgbackup/borg/issues/1268

==

borg/testsuite/archiver.py
borg/testsuite/repository.py
==================
1b462cd;Thomas Waldmann;2016-11-02 03:01:49 +0100;vagrant: remove llfuse from tox.ini at a central place

==

Vagrantfile
==================
e38e416;TW;2016-11-02 01:31:58 +0100;Merge pull request #1780 from ThomasWaldmann/fix-centos6-testing
vagrant: do not try to install llfuse on centos6
==
==================
935d660;TW;2016-11-02 01:31:42 +0100;Merge pull request #1784 from ThomasWaldmann/fix-darwin64-fuse-tests
vagrant: fix fuse test for darwin, fixes #1546
==
==================
34d7420;TW;2016-11-02 01:31:14 +0100;Merge pull request #1787 from ololoru/windows10-maint-1.0
add windows virtual machine
==
==================
9dd57d3;TW;2016-11-02 01:29:20 +0100;Merge pull request #1785 from ThomasWaldmann/merge-1.0-maint
Merge 1.0-maint
==
==================
8a15916;Thomas Waldmann;2016-10-31 05:53:01 +0100;Merge branch '1.0-maint' into merge-1.0-maint
# Conflicts:
#	docs/changes.rst
#	docs/usage/help.rst.inc
#	src/borg/cache.py
#	src/borg/remote.py
#	src/borg/testsuite/__init__.py
#	src/borg/testsuite/archiver.py

==
==================
5b0bff1;ololoru;2016-10-24 21:17:58 -0500;add windows virtual machine
* Default memory size of Windows VM is 2048 mb
* Stop using mls-openssh and replace it with cygwin sshd by updating service start path in registry

==

Vagrantfile
==================
f2ed60b;Thomas Waldmann;2016-10-31 05:02:19 +0100;vagrant: fix fuse test for darwin, fixes #1546
otherwise the "input" dir is root.wheel -rwx------ and gives a PermissionError when trying to access it.

==

borg/testsuite/archiver.py
==================
aa62a16;Thomas Waldmann;2016-10-31 02:36:49 +0100;vagrant: do not try to install llfuse on centos6
it breaks everything...

==

Vagrantfile
==================
8463732;Thomas Waldmann;2016-10-29 01:58:21 +0200;ran build_usage

==

docs/usage/help.rst.inc
==================
89c31d6;TW;2016-10-29 01:44:39 +0200;Merge pull request #1763 from ThomasWaldmann/update-1.0-changes
update CHANGES (1.0-maint)
==
==================
20f4a1f;Thomas Waldmann;2016-10-25 21:23:23 +0200;update CHANGES (1.0-maint)

==

docs/changes.rst
==================
9c07177;TW;2016-10-29 00:46:13 +0200;Merge pull request #1769 from ThomasWaldmann/ssh-url-docs
repo url / archive location docs + typo fix
==
==================
a16c7d8;Thomas Waldmann;2016-10-28 05:04:23 +0200;mention file://

==

docs/usage.rst
==================
11e9780;Thomas Waldmann;2016-10-28 04:57:15 +0200;quickstart: add a comment about other (remote) filesystems

==

docs/quickstart.rst
==================
e0298b2;Thomas Waldmann;2016-10-28 04:51:46 +0200;simplify quickstart
only give one possible ssh url syntax, all others are documented in usage chapter.

==

docs/quickstart.rst
==================
ca15cc8;Thomas Waldmann;2016-10-28 04:36:38 +0200;document repo URLs / archive location

==

docs/usage.rst
==================
9b91793;Thomas Waldmann;2016-10-28 03:32:37 +0200;ssh: repo url docs - fix typo

==

docs/quickstart.rst
==================
de9aa19;TW;2016-10-26 21:19:31 +0200;Merge pull request #1762 from julian-klode/for-1.0/fix-bug-940
RemoteRepository: Fix busy wait in call_many, fixes #940
==
==================
25ef14e;enkore;2016-10-25 20:56:17 +0200;Merge pull request #1756 from ThomasWaldmann/fix-freebsd-fuse-tests
Fix freebsd fuse tests
==
==================
d4072bf;TW;2016-10-25 19:25:17 +0200;Merge pull request #1742 from ThomasWaldmann/migrate-previous-location
avoid previous_location mismatch, fixes #1741
==
==================
b1ac207;TW;2016-10-25 18:50:08 +0200;Merge pull request #1760 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
2df8b74;Andrew Skalski;2016-05-25 18:14:27 -0400;RemoteRepository: Fix busy wait in call_many, fixes #940
(cherry picked from commit 731f6241faa254c379a9bc25dd21133d3604d32a)

==

borg/remote.py
==================
09e74af;Thomas Waldmann;2016-10-24 21:41:20 +0200;Merge branch '1.0-maint'

==
==================
baa77c0;Thomas Waldmann;2016-10-18 21:36:23 +0200;avoid previous_location mismatch, fixes #1741
due to the changed canonicalization for relative pathes in PR #1711 (implement /./ relpath hack),
there would be a changed repo location warning and the user would be asked if this is ok.
this would break automation and require manual intervention, which is unwanted.

thus, we automatically fix the previous_location config entry, if it only changed in the
expected way, but still means the same location.

==

borg/cache.py
==================
02ecf04;Thomas Waldmann;2016-10-24 01:19:36 +0200;fuse tests: catch ENOTSUP on freebsd
seems like fuse does not support xattrs there at all.

==

borg/testsuite/archiver.py
==================
ede3b4a;Thomas Waldmann;2016-10-24 00:49:03 +0200;fuse: test troublesome xattrs last

==

borg/testsuite/archiver.py
==================
48fa449;Thomas Waldmann;2016-10-23 20:36:05 +0200;assert_dirs_equal: add ignore_bsdflags and ignore_xattrs argument
bsdflags are not supported in the FUSE mount.
xattrs are supported, but are tested separately.

==

borg/testsuite/__init__.py
borg/testsuite/archiver.py
==================
7711091;TW;2016-10-24 02:39:16 +0200;Merge pull request #1758 from flokli/patch-2
docs/deployment.rst: do not use bare variables in ansible snippet
==
==================
88f7f86;Florian Klink;2016-10-24 01:09:09 +0200;docs/deployment.rst: do not use bare variables in ansible snippet
The current snippet throws deprecation warnings:

```
[DEPRECATION WARNING]: Using bare variables is deprecated. Update your 
playbooks so that the environment value uses the full variable syntax 
('{{auth_users}}').
This feature will be removed in a future 
release. Deprecation warnings can be disabled by setting 
deprecation_warnings=False in ansible.cfg.
```
==

docs/deployment.rst
==================
0ff2352;TW;2016-10-23 16:48:43 +0200;Merge pull request #1748 from rciorba/shortcut_hashindex_set
shortcut hashindex_set by having hashindex_lookup hint about address
==
==================
766a43a;Radu Ciorba;2016-09-15 21:27:16 +0300;shortcut hashindex_set by having hashindex_lookup hint about address

==

src/borg/_hashindex.c
==================
f086dad;TW;2016-10-22 03:37:46 +0200;Merge pull request #1737 from ThomasWaldmann/vagrant-fix-fuse
Vagrant fix fuse
==
==================
ab8b26b;TW;2016-10-22 00:33:51 +0200;Merge pull request #1752 from ThomasWaldmann/borgversion-enhanced
implement borgmajor/minor/patch placeholders, fixes #1694
==
==================
22f77b9;Thomas Waldmann;2016-10-22 00:20:50 +0200;implement borgmajor/minor/patch placeholders, fixes #1694

==

borg/__init__.py
==================
6b5cb23;TW;2016-10-21 20:54:22 +0200;Merge pull request #1753 from ThomasWaldmann/doc-nonces-dir
document BORG_NONCES_DIR, fixes #1592
==
==================
d363907;Thomas Waldmann;2016-10-21 04:15:33 +0200;document BORG_NONCES_DIR, fixes #1592

==

docs/usage.rst
==================
d49a782;Thomas Waldmann;2016-10-21 03:43:38 +0200;implement borgmajor/minor/patch placeholders, fixes #1694

==

borg/__init__.py
borg/archiver.py
borg/helpers.py
==================
1a272dd;TW;2016-10-20 17:21:27 +0200;Merge pull request #1739 from ThomasWaldmann/borg-check-refactor
borg check --first / --last / --sort / --prefix, fixes #1663
==
==================
f9aa74e;Thomas Waldmann;2016-09-04 04:32:16 +0200;skip fuse test for borg binary + fakeroot
strange: works on wheezy, blows up on xenial

==

borg/testsuite/archiver.py
==================
2b90e45;Thomas Waldmann;2016-09-04 03:01:29 +0200;vagrant: fix fuse permission issues on linux/freebsd, fixes #1544

==

Vagrantfile
==================
4c884fd;Thomas Waldmann;2016-10-18 03:57:42 +0200;borg check --first / --last / --sort / --prefix, fixes #1663

==

src/borg/archive.py
src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
bd9f6a6;enkore;2016-10-20 13:47:43 +0200;Merge pull request #1745 from ThomasWaldmann/centos-selinux-ignore
ignore security.selinux xattrs, fixes #1735
==
==================
c8cae9f;TW;2016-10-20 04:30:29 +0200;Merge pull request #1747 from ThomasWaldmann/fix-byte-range-error
fix byte range error in test, fixes #1740
==
==================
e02d1a6;Thomas Waldmann;2016-10-19 17:38:30 +0200;fix byte range error in test, fixes #1740

==

src/borg/testsuite/key.py
==================
ade405e;Thomas Waldmann;2016-10-19 01:51:25 +0200;ignore security.selinux xattrs, fixes #1735
they fail the FUSE tests on centos7.

==

borg/testsuite/__init__.py
borg/testsuite/archiver.py
==================
1cd4853;TW;2016-10-19 02:34:33 +0200;Merge pull request #1744 from ThomasWaldmann/improve-append-only-docs
add clarification about append-only mode, fixes #1689
==
==================
c000eb8;Thomas Waldmann;2016-10-19 01:13:44 +0200;add clarification about append-only mode, fixes #1689

==

docs/usage.rst
==================
855e0c9;enkore;2016-10-19 01:50:05 +0200;Merge pull request #1743 from ThomasWaldmann/llfuse-requirement
add comment about requiring llfuse, fixes #1726
==
==================
f107008;Thomas Waldmann;2016-10-19 00:56:22 +0200;add comment about requiring llfuse, fixes #1726

==

requirements.d/fuse.txt
setup.py
==================
64d128c;TW;2016-10-18 01:22:10 +0200;Merge pull request #1712 from ThomasWaldmann/mount-some
borg mount --first / --last / --sort / --prefix, fixes #1542
==
==================
ca357a2;TW;2016-10-17 21:02:22 +0200;Merge pull request #1736 from ThomasWaldmann/vagrant-rsync-no-chown
vagrant: no chown when rsyncing
==
==================
57402b1;Thomas Waldmann;2016-10-17 17:37:33 +0200;vagrant: no chown when rsyncing
it tries to do chown -R vagrant.vagrant, but some boxes do not
have a vagrant group and break there. also, we do our own chown
in the provisioning scripts.

==

Vagrantfile
==================
cf9e7ad;TW;2016-10-17 04:13:22 +0200;Merge pull request #1733 from ThomasWaldmann/update-usage
Update usage.rst / api.rst
==
==================
3550b24;Thomas Waldmann;2016-10-17 03:39:38 +0200;ran build_usage

==

docs/usage/info.rst.inc
docs/usage/key_export.rst.inc
docs/usage/serve.rst.inc
==================
b3133f6;Thomas Waldmann;2016-10-17 03:36:49 +0200;update api.rst

==

docs/api.rst
==================
dc596e8;TW;2016-10-17 03:53:16 +0200;Merge pull request #1731 from ThomasWaldmann/update-1.0-changes
update 1.0-maint CHANGES
==
==================
4d7af95;Thomas Waldmann;2016-10-17 02:14:19 +0200;update 1.0 CHANGES

==

docs/changes.rst
==================
6de0985;TW;2016-10-17 03:46:10 +0200;Merge pull request #1732 from ThomasWaldmann/debug-obj-refcount
add borg debug refcount-obj ID subcommand
==
==================
498e718;Thomas Waldmann;2016-10-17 03:16:13 +0200;add borg debug refcount-obj ID subcommand

==

borg/archiver.py
==================
48bcd2a;TW;2016-10-17 02:04:41 +0200;Merge pull request #1730 from ThomasWaldmann/fix-vagrant-netbsd
vagrant / netbsd: use own box, fixes #1671, fixes #1728
==
==================
63ff002;Thomas Waldmann;2016-10-17 02:03:52 +0200;vagrant / netbsd: use own box, fixes #1671, fixes #1728
self-made basic netbsd box includes pre-installed rsync as vagrant is unable to install rsync.
delete line from tox.ini with sed so it does not try to install llfuse (which is broken on netbsd).

==

Vagrantfile
==================
1166ade;enkore;2016-10-15 21:30:47 +0200;Merge pull request #1685 from enkore/f/remote-excs
fix debug get-obj / delete-obj crash if object not found and remote repo 
==
==================
274d891;TW;2016-10-15 17:07:40 +0200;Merge pull request #1724 from ThomasWaldmann/fix-vagrant-openbsd
vagrant / openbsd: use own box, fixes #1695
==
==================
4ca0ed1;Thomas Waldmann;2016-10-15 15:21:38 +0200;vagrant / openbsd: use own box, fixes #1695
self-made basic openbsd box includes pre-installed rsync as vagrant is unable to install rsync.
as the self-made box now has enough space on /, remove workaround for low space.
delete line from tox.ini with sed so it does not try to install llfuse (which is broken on openbsd).

==

Vagrantfile
==================
00f1dcf;TW;2016-10-15 01:27:36 +0200;Merge pull request #1711 from ThomasWaldmann/ssh-url-relative-path
implement /./relpath hack
==
==================
5a12c63;Thomas Waldmann;2016-10-15 01:24:05 +0200;fuse mount options: add tests

==

src/borg/testsuite/archiver.py
==================
b5f9858;Thomas Waldmann;2016-10-13 05:21:52 +0200;move first/last/sort_by-multiple functionality into Manifest.list
also: rename list_filtered to list_considering

==

src/borg/archive.py
src/borg/archiver.py
src/borg/fuse.py
src/borg/helpers.py
==================
694c397;Thomas Waldmann;2016-10-13 04:40:33 +0200;refactor Archiver._get_filtered_archives -> Archives.list_filtered
it did not belong into Archiver class (did not use "self"), but in into Archives.

==

src/borg/archiver.py
src/borg/fuse.py
src/borg/helpers.py
==================
26e6ac4;Thomas Waldmann;2016-10-13 03:08:57 +0200;borg mount --first / --last / --sort / --prefix, fixes #1542
also: use consider_part_files when dealing with multiple archives / whole repo mount

==

src/borg/archiver.py
src/borg/fuse.py
==================
e829e83;Thomas Waldmann;2016-10-13 00:38:04 +0200;implement /./relpath hack, fixes #1655

==

borg/helpers.py
borg/remote.py
borg/testsuite/helpers.py
==================
9138096;TW;2016-10-15 00:44:30 +0200;Merge pull request #1722 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
775440f;Thomas Waldmann;2016-10-15 00:23:21 +0200;Merge branch '1.0-maint' into merge-1.0-maint

==
==================
34bd7cb;enkore;2016-10-14 21:18:30 +0200;Merge pull request #1716 from ThomasWaldmann/merge-1.0-maint
Merge 1.0-maint
==
==================
12a127a;enkore;2016-10-14 10:37:23 +0200;Merge pull request #1719 from ThomasWaldmann/clean_env_10
Clean env in 1.0
==
==================
f81a92b;enkore;2016-10-14 10:35:30 +0200;Merge pull request #1718 from ThomasWaldmann/tests-use-temp-nonces-dir
point XDG_*_HOME to temp dirs for tests, fixes #1714
==
==================
757e038;enkore;2016-10-14 10:31:37 +0200;Merge pull request #1717 from ThomasWaldmann/travis-py36
travis: use 3.6-dev
==
==================
2b27a06;Thomas Waldmann;2016-10-14 04:44:06 +0200;use monkeypatch to set env vars
but only on pytest based tests.

==

borg/testsuite/benchmark.py
borg/testsuite/helpers.py
borg/testsuite/upgrader.py
==================
2679963;Thomas Waldmann;2016-10-14 04:42:13 +0200;add conftest.py hack needed for borg 1.0.x

==

conftest.py
==================
f3efcdb;Thomas Waldmann;2016-10-14 00:46:43 +0200;point XDG_*_HOME to temp dirs for tests, fixes #1714
otherwise it spoils the user's nonces and cache dirs with lots of files.

also: remove all BORG_* env vars from the outer environment

fix get_*_dir tests to use monkeypatch.

==

borg/testsuite/helpers.py
conftest.py
==================
4e4847c;Thomas Waldmann;2016-10-13 23:59:28 +0200;point XDG_*_HOME to temp dirs for tests, fixes #1714
otherwise it spoils the user's nonces and cache dirs with lots of files.

also: remove all BORG_* env vars from the outer environment

==

conftest.py
src/borg/testsuite/helpers.py
src/borg/testsuite/key.py
src/borg/testsuite/nonces.py
==================
c9a3a20;Thomas Waldmann;2016-10-13 20:02:31 +0200;travis: use 3.6-dev
nightly points to python 3.7 now.

==

.travis.yml
==================
b0cc4fd;Thomas Waldmann;2016-10-13 19:10:04 +0200;Merge branch '1.0-maint' into merge-1.0-maint

==
==================
dda439b;enkore;2016-10-13 10:47:13 +0200;Merge pull request #1713 from ThomasWaldmann/fuse_mount-flexibility
fuse_mount contextmanager: accept any options
==
==================
8d9475f;Thomas Waldmann;2016-10-13 03:53:26 +0200;fuse_mount contextmanager: accept any options
not just the -o mount_options, but any options borg mount would take.
simpler, more flexible.

==

borg/testsuite/__init__.py
borg/testsuite/archiver.py
==================
f7d20f8;TW;2016-10-13 00:19:52 +0200;Merge pull request #1710 from ThomasWaldmann/path-with-colon
allow pathes with colons, fixes #1705
==
==================
a2dfe68;TW;2016-10-12 23:25:43 +0200;Merge pull request #1706 from ThomasWaldmann/remove-debug-xxx
remove debug-xxx commands, fixes #1627
==
==================
546c77f;Thomas Waldmann;2016-10-11 00:12:25 +0200;ssh:// Location URL - remove not needed #
nobody could make sense of it, so guess it is a mistake.

==

borg/helpers.py
==================
e9ba14c;Thomas Waldmann;2016-10-10 23:28:22 +0200;Location parsing regexes: use verbose REs
just added whitespace and comments, no semantic changes

==

borg/helpers.py
==================
cf0359e;Thomas Waldmann;2016-10-10 19:16:35 +0200;allow pathes with colons, fixes #1705
also:
- refactor / deduplicate the location parsing regexes
- add comments
- add more tests for Location parsing

==

borg/helpers.py
borg/testsuite/helpers.py
==================
7a83bea;enkore;2016-10-10 11:17:03 +0200;Merge pull request #1690 from ThomasWaldmann/more-informative-integrityerror
borg.key: include chunk id in exception msgs
==
==================
9381c38;enkore;2016-10-10 11:16:39 +0200;Merge pull request #1703 from ThomasWaldmann/improve-scan
Repository.scan(): avoid re-reading same repo object headers repeatedly
==
==================
2e5b2b1;enkore;2016-10-10 11:15:40 +0200;Merge pull request #1709 from ThomasWaldmann/fix-1700
better messages for cache newer than repo, fixes #1700
==
==================
76ade6f;enkore;2016-10-10 11:14:40 +0200;Merge pull request #1708 from ThomasWaldmann/commit-previous-location
update changed repo location immediately after acceptance
==
==================
4fc5a35;Thomas Waldmann;2016-10-10 06:10:39 +0200;better messages for cache newer than repo, fixes #1700

==

borg/cache.py
==================
9ad9ae8;Thomas Waldmann;2016-10-09 18:37:32 +0200;Repository.scan(): avoid iterating same repo segments/objects repeatedly
segments: avoid some listdir()
objects: avoid repeatedly re-reading object headers / seeking in segment

Fixes #1610.

==

src/borg/repository.py
==================
f500689;Thomas Waldmann;2016-10-10 05:18:43 +0200;update changed repo location immediately after acceptance
fixes #1524

before, if a longer backup got interrupted before commit(),
it asked same question again.

==

borg/cache.py
==================
a0df60e;Björn Ketelaars;2016-10-08 08:29:53 +0200;FUSE on OpenBSD
Concerning #1696:

OpenBSD offers in kernel support for FUSE 2.6. Borg relies on llfuse,
which relies on FUSE >2.9.

I'm not aware of plans to bring FUSE on OpenBSD to a more recent
version.

Signed-off-by: Björn Ketelaars <bjorn.ketelaars@hydroxide.nl>

==

Vagrantfile
==================
b88e82d;Thomas Waldmann;2016-10-10 00:22:01 +0200;remove debug-xxx commands, fixes #1627
we use "debug xxx" subcommands now. docs updated.

also makes "borg help" shorter as not all debug-xxx commands
show up, but just 1 main "debug" command.

==

docs/usage.rst
src/borg/archive.py
src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
8567fcf;enkore;2016-10-07 09:49:16 +0200;Merge pull request #1418 from textshell/fix/preload
Cleanup prefetch code in RemoteRepository
==
==================
f355bd2;enkore;2016-10-07 09:47:43 +0200;Merge pull request #1693 from ThomasWaldmann/improve-diff-help
clarify borg diff help, fixes #980
==
==================
a69e346;enkore;2016-10-07 09:46:33 +0200;Merge pull request #1692 from ThomasWaldmann/placeholder-for-integrityerror
IntegrityError: add placeholder for message, fixes #1572
==
==================
f31112b;Thomas Waldmann;2016-10-07 04:09:05 +0200;clarify borg diff help, fixes #980

==

src/borg/archiver.py
==================
9db16cf;TW;2016-10-06 23:45:32 +0200;Merge pull request #1691 from ThomasWaldmann/vagrant-debian7-image-names
vagrant: update image name of boxcutter debian7 boxes
==
==================
7434010;Thomas Waldmann;2016-10-06 23:36:22 +0200;IntegrityError: add placeholder for message, fixes #1572
So that the message we give appears not only in the traceback, but also in the (short) error message.

==

borg/helpers.py
==================
75624f8;Thomas Waldmann;2016-10-06 22:58:02 +0200;vagrant: update image name of boxcutter debian7 boxes
debian711* is 404.

==

Vagrantfile
==================
5f337e2;Thomas Waldmann;2016-10-06 22:46:37 +0200;borg.key: include chunk id in exception msgs
this is a backport of bcdce91dfb2883c139011322a9e8086059fbe5c2 improvements on the exception msgs.

==

borg/key.py
==================
5ccc124;TW;2016-10-06 22:21:38 +0200;Merge pull request #1687 from ThomasWaldmann/backport-bin-to-hex
backport bin_to_hex and use it
==
==================
02557f1;Martin Hostettler;2016-08-05 21:51:01 +0200;RemoteRepository: Rename cache to chunkid_to_msgids. Also fetch_from_cache to pop_preload_msgid.

==

src/borg/remote.py
==================
2608a56;Martin Hostettler;2016-08-05 21:48:23 +0200;RemoteRepository: Always store chunk ids in cache instead of rpc argument encoding of get request.

==

src/borg/remote.py
==================
e9605d6;Martin Hostettler;2016-08-05 21:45:12 +0200;RemoteReposity: prefetch can only be 'get'.

==

src/borg/remote.py
==================
67aafec;Thomas Waldmann;2016-10-06 05:15:01 +0200;backport bin_to_hex and use it
simplifies code and also porting and merging between 1.0 and 1.1/master.

==

borg/archive.py
borg/archiver.py
borg/cache.py
borg/helpers.py
borg/key.py
borg/keymanager.py
borg/repository.py
borg/testsuite/archiver.py
borg/upgrader.py
==================
45a2d8b;TW;2016-10-06 01:48:13 +0200;Merge pull request #1677 from enkore/pr/1676
Added docs explaining multiple --restrict-to-path flags, with example…
==
==================
573cb61;Marian Beermann;2016-10-06 01:00:07 +0200;deployment: synthesize alternative --restrict-to-path example

==

borg/archiver.py
docs/deployment.rst
==================
1030660;TW;2016-10-05 21:00:12 +0200;Merge pull request #1682 from ThomasWaldmann/repo-list-in-order
WIP: repo.scan - list keys in disk-order
==
==================
cdb8d64;Thomas Waldmann;2016-10-04 22:05:26 +0200;check for index vs. segment files object count mismatch

==

src/borg/archive.py
==================
6624ca9;Thomas Waldmann;2016-10-04 04:55:10 +0200;verify_data: do a linear scan in disk-order

==

src/borg/archive.py
==================
9011136;Thomas Waldmann;2016-09-23 21:45:01 +0200;repo.list() yielding IDs in on-disk order

==

src/borg/remote.py
src/borg/repository.py
src/borg/testsuite/repository.py
==================
4c1a920;Marian Beermann;2016-10-05 12:27:26 +0200;debug delete/get obj: fix wrong reference to exception
iow RemoteRepository doesn't define this type, only Repository does.

==

borg/archiver.py
==================
27bc73c;enkore;2016-10-03 14:53:16 +0200;borg info <repo>: print general repo information (#1680)

==

src/borg/archiver.py
src/borg/key.py
==================
cf1c73b;Simon Heath;2016-10-02 17:14:34 -0400;Added docs explaining multiple --restrict-to-path flags, with example (take 2)

==

borg/archiver.py
docs/deployment.rst
==================
ce72d24;enkore;2016-10-02 20:11:34 +0200;Clarify FAQ regarding backup of virtual machines (#1672)

==

docs/faq.rst
==================
e2fc2a1;enkore;2016-10-02 10:44:41 +0200;Merge pull request #1673 from ThomasWaldmann/pyi-use-spec
pyinstaller: use a spec file to build borg.exe binary
==
==================
864333d;Thomas Waldmann;2016-10-02 00:43:06 +0200;pyinstaller: use a spec file to build borg.exe binary
also: exclude osxfuse dylib on Mac OS X

==

Vagrantfile
scripts/borg.exe.spec
==================
4229e77;TW;2016-10-01 23:26:29 +0200;Merge pull request #1669 from ThomasWaldmann/release-b2
Release 1.1.0b2
==
==================
279630f;Thomas Waldmann;2016-10-01 20:25:22 +0200;Merge branch 'f/vagrant/freebsd64-nopy' of github.com:borgbackup/borg into release-b2

==
==================
5baf749;Marian Beermann;2016-10-01 20:17:30 +0200;vagrant freebsd64: fix tox not finding any pythons

==

Vagrantfile
==================
e6241cc;Thomas Waldmann;2016-10-01 18:44:52 +0200;update CHANGES

==

docs/changes.rst
==================
f57feb1;Thomas Waldmann;2016-10-01 18:29:45 +0200;fix module names in api.rst

==

docs/api.rst
==================
0411512;Thomas Waldmann;2016-10-01 18:23:36 +0200;ran build_usage

==

docs/usage/common-options.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/help.rst.inc
docs/usage/info.rst.inc
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
docs/usage/list.rst.inc
==================
24feaf3;enkore;2016-10-01 10:30:48 +0200;Merge pull request #1668 from ThomasWaldmann/bump-hashindex-version-master
hashindex: bump api_version
==
==================
8df6cb8;Thomas Waldmann;2016-09-30 23:59:41 +0200;hashindex: bump api_version
note:
merging the respective changeset from 1.0-maint was not effective
as we already had version 3, so there was no increase.

==

src/borg/hashindex.pyx
src/borg/helpers.py
==================
d1b5587;TW;2016-09-30 23:50:52 +0200;Merge pull request #1667 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
4c01857;Thomas Waldmann;2016-09-30 23:42:48 +0200;Merge branch '1.0-maint' into merge-1.0-maint

==
==================
d8a7b17;TW;2016-09-30 22:44:34 +0200;Merge pull request #1666 from ThomasWaldmann/improve-borg-debug-docs
add more specific warning about write-access debug commands
==
==================
f38c25d;TW;2016-09-30 22:44:05 +0200;Merge pull request #1554 from funkyfuture/archives_filters
Archives filters
==
==================
8318f5a;TW;2016-09-30 21:31:05 +0200;Merge pull request #1664 from ThomasWaldmann/hashindex-api-version-bumo
Hashindex api version bump
==
==================
a65707b;Thomas Waldmann;2016-09-30 21:09:02 +0200;add more specific warning about write-access debug commands

==

docs/usage.rst
==================
4174291;Thomas Waldmann;2016-09-30 20:38:46 +0200;hashindex: bump api version
API_VERSION is used to check whether the compiled binaries are up-to-date.
the tests for the recent iterator fixes of course need updated (fixed) binaries,
so we bump api_version, so not-up-to-date binaries will get identified.

==

borg/hashindex.pyx
borg/helpers.py
==================
089995e;Frank Sachsenheim;2016-09-30 20:01:59 +0200;Changes on filters after feedback

==

src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/archiver.py
==================
bd7cc38;Frank Sachsenheim;2016-09-01 17:36:37 +0200;Changes arg processor names to camelcase

==

src/borg/archiver.py
src/borg/helpers.py
==================
e0e9edf;Frank Sachsenheim;2016-08-13 14:29:23 +0200;Adds archives filters for list

==

src/borg/archiver.py
==================
369d0a0;Frank Sachsenheim;2016-08-13 14:29:23 +0200;Adds archives filters for info

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
f2d4d36;Frank Sachsenheim;2016-07-24 00:40:15 +0200;Allows delete to be used with archive filters

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
17f2363;Frank Sachsenheim;2016-08-22 21:30:38 +0200;Adds --prefix to the archives filters arguments
- adds prefix argument to helpers.Archives.list
- also renames function PrefixSpec to prefix_spec

==

src/borg/archiver.py
src/borg/helpers.py
==================
f6b9276;Frank Sachsenheim;2016-08-13 14:29:23 +0200;Adds arguments to filter archives
These are: --sort-by, --first and --last

Includes a method to obtain a list of archive infos filtered by these

Archives.list:
- ensure reverse is always applied
- always return a list

==

src/borg/archiver.py
src/borg/helpers.py
==================
f276e30;TW;2016-09-30 15:22:26 +0200;Merge pull request #1662 from ThomasWaldmann/update-master-changes
update CHANGES (master / 1.1)
==
==================
f47f7ce;Thomas Waldmann;2016-09-29 19:58:13 +0200;update CHANGES (master / 1.1)

==

docs/changes.rst
==================
23ac8af;TW;2016-09-29 19:52:52 +0200;Merge pull request #1607 from ThomasWaldmann/tune-check-verify-data
borg check --verify-data tuning
==
==================
19eb759;Thomas Waldmann;2016-09-16 02:49:54 +0200;borg check --verify-data tuning

==

src/borg/archive.py
src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
3a3cdad;TW;2016-09-29 17:39:21 +0200;Merge pull request #1661 from ThomasWaldmann/update-1.0-changes
update CHANGES
==
==================
e124f3c;Thomas Waldmann;2016-09-29 17:01:32 +0200;update CHANGES

==

docs/changes.rst
==================
2314d8b;TW;2016-09-29 13:34:49 +0200;Merge pull request #1660 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
ba30098;Thomas Waldmann;2016-09-29 12:57:29 +0200;Merge branch '1.0-maint' into merge-1.0-maint

==
==================
ab9d761;enkore;2016-09-29 11:13:10 +0200;Merge pull request #1659 from ThomasWaldmann/fix-iterator
hashindex: fix iterator implementation
==
==================
8fd0e07;Thomas Waldmann;2016-09-29 04:41:59 +0200;hashindex: fix iterator implementation
NSKeyIterator and ChunkKeyIterator raised StopIteration once only when they reached their end.

But they did not raise StopIteration if one called next() again after they were exhausted,
so they did not comply to the standard iterator protocol.

AFAIK, this did not cause actual problems due to the way these iterators are used,
but when I tried to use itertools.islice() to get n-long sequences from these iterators,
it failed / went into an endless loop.

==

borg/hashindex.pyx
borg/testsuite/hashindex.py
==================
62bec8a;TW;2016-09-27 23:42:27 +0200;Merge pull request #1652 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
186223d;Thomas Waldmann;2016-09-27 23:21:46 +0200;Merge branch '1.0-maint' into merge-1.0-maint

==
==================
4838b9e;Thomas Waldmann;2016-09-27 22:43:11 +0200;vagrant: upgrade osxfuse to 3.5.2

==

Vagrantfile
==================
47cf501;Thomas Waldmann;2016-09-27 22:35:30 +0200;Merge branch '1.0-maint' into merge-1.0-maint

==
==================
fe9816d;Martin Hostettler;2016-09-27 22:01:36 +0200;setup.py: Fix build_usage to always process all commands.

==

setup.py
==================
2a864be;Thomas Waldmann;2016-09-27 21:31:41 +0200;Merge branch '1.0-maint' into merge-1.0-maint
# Conflicts:
#	setup.py
#	src/borg/archiver.py
#	src/borg/helpers.py

==
==================
b84014e;textshell;2016-09-27 15:24:31 +0200;archiver: Add documentation for "key export" and "key import" commands. (#1641)
archiver: Add documentation for "key export" and "key import" commands
==

borg/archiver.py
docs/quickstart.rst
docs/usage.rst
docs/usage/key_export.rst.inc
docs/usage/key_import.rst.inc
==================
ea9e859;enkore;2016-09-27 13:14:16 +0200;Merge pull request #1635 from enkore/issue/1624
Fix broken --progress for double-cell paths
==
==================
9cef0a9;Marian Beermann;2016-09-27 11:35:45 +0200;Fix broken --progress ellipsis for double-cell paths

==

src/borg/archive.py
src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
f2cc97d;TW;2016-09-26 20:09:03 +0200;Merge pull request #1649 from ThomasWaldmann/upgrade-osxfuse
vagrant: update FUSE for macOS
==
==================
bb6c0cd;Thomas Waldmann;2016-09-26 20:08:04 +0200;vagrant: update FUSE for macOS

==

Vagrantfile
==================
1449c31;TW;2016-09-26 20:02:10 +0200;Merge pull request #1646 from textshell/fix/key-import-tests
Fix key import tests
==
==================
15444b1;Martin Hostettler;2016-09-26 19:28:28 +0200;testsuite/archiver.py: Fix key import failure with ArchiverTestCaseBinary

==

borg/testsuite/archiver.py
==================
7c2025a;Martin Hostettler;2016-09-26 19:28:00 +0200;testsuite/archiver.py: Add a comment how to easily test ArchiverTestCaseBinary locally.

==

borg/testsuite/archiver.py
==================
e9486ec;enkore;2016-09-26 09:30:49 +0200;Merge pull request #1643 from ThomasWaldmann/fix-1551
fix closed FD issue, fixes #1551
==
==================
60c5482;Thomas Waldmann;2016-09-26 04:34:25 +0200;fix closed FD issue, fixes #1551

==

borg/repository.py
==================
3881955;TW;2016-09-25 23:33:38 +0200;Merge pull request #1636 from textshell/feature/subcommands
Use subcommands for debug-* and key-*
==
==================
233ae43;TW;2016-09-25 23:26:01 +0200;Merge pull request #1640 from ThomasWaldmann/improve-borg-help
Re-Indent borg help helptexts, again.
==
==================
43432f9;TW;2016-09-25 23:09:47 +0200;Merge pull request #1615 from enkore/issue/1598
Fix #1598
==
==================
bf681e9;Thomas Waldmann;2016-09-25 22:50:08 +0200;Re-Indent borg help helptexts, again.

==

src/borg/archiver.py
==================
f36d551;TW;2016-09-25 22:42:56 +0200;Merge pull request #1634 from ThomasWaldmann/improve-compression-docs
borg help compression, fixes #1582
==
==================
995c3a2;TW;2016-09-25 22:34:32 +0200;Merge pull request #1623 from ThomasWaldmann/yes-retries
yes(): abort on wrong answers, saying so
==
==================
8164524;Marian Beermann;2016-09-25 15:37:50 +0200;Fix broken --progress for double-cell paths

==

src/borg/archive.py
==================
6642dad;TW;2016-09-25 22:14:38 +0200;Merge pull request #1631 from ThomasWaldmann/improve-signal-handling
Improve signal handling
==
==================
5d6d4a1;TW;2016-09-25 21:56:17 +0200;Merge pull request #1639 from textshell/patch-1
development.rst: Add sphinx_rtd_theme to the sphinx install command
==
==================
4f9f25d;Martin Hostettler;2016-09-25 16:33:30 +0200;development.rst: Add sphinx_rtd_theme to the sphinx install command
It’s used by default, so install it as well.

==

docs/development.rst
==================
895decc;enkore;2016-09-25 18:22:56 +0200;Merge pull request #1637 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
d9b880f;Thomas Waldmann;2016-09-23 23:43:16 +0200;fix signal handling, fixes #1620
use context manager for signal handler installation / restoration -
this includes the special case of installing handler SIG_IGN to ignore
a signal and restoring the original (non-ignoring) handler.

use SIG_IGN to avoid a 2nd signal interrupts the handling of the 1st signal.

==

borg/archiver.py
borg/helpers.py
==================
28c57f9;Thomas Waldmann;2016-09-25 17:30:55 +0200;Merge branch '1.0-maint'
# Conflicts:
#	src/borg/archive.py
#	src/borg/archiver.py
#	src/borg/helpers.py
#	src/borg/testsuite/archiver.py

==
==================
a11436c;Martin Hostettler;2016-09-25 16:08:22 +0200;setup.py: Add subcommand support to build_usage.

==

setup.py
==================
5c24248;Martin Hostettler;2016-09-25 15:25:02 +0200;archiver: Create a subcommmand debug for all debug-* commands
The debug commands all should subcommands of a common debug command.

This commit adds this command but keeps the old command names for 1.0.x.
The plan is to remove them in 1.1.0.

==

borg/archiver.py
==================
29b5136;Martin Hostettler;2016-09-25 15:05:39 +0200;archiver: Move key management commands to new key subcommand.

==

borg/archiver.py
borg/keymanager.py
borg/testsuite/archiver.py
==================
66316e1;Marian Beermann;2016-09-25 11:53:54 +0200;Fix indentation in borg help compression

==

src/borg/archiver.py
==================
7b1f103;Marian Beermann;2016-09-17 16:39:55 +0200;Repository: compact: fix incorrect preservation of delete tags

==

src/borg/repository.py
==================
abace16;Marian Beermann;2016-09-25 10:12:42 +0200;Repository.check: log transaction IDs

==

src/borg/repository.py
==================
d6bfdaf;Thomas Waldmann;2016-09-25 02:32:02 +0200;borg help compression, fixes #1582

==

src/borg/archiver.py
==================
b055bb0;TW;2016-09-24 15:54:46 +0200;Merge pull request #1616 from textshell/issue/1555
Implement key import / export
==
==================
55a3331;Martin Hostettler;2016-09-18 17:20:27 +0200;Implement key import / export
We recommed that users backup their keys, this adds simple to use commands
to do so.

Supported formats are the keyfile format used by borg internally and
a special format with by line checksums for printed backups.

For this format the import is an interactive process which checks
each line as soon as it is input.

Fixes #1555

==

borg/archiver.py
borg/keymanager.py
borg/testsuite/archiver.py
==================
d3e79c4;TW;2016-09-23 18:24:10 +0200;Merge pull request #1625 from bauerj/master
Change {utcnow} and {now} to ISO-8601 format
==
==================
a56dc44;Johann Bauer;2016-09-22 10:36:04 +0200;Change {utcnow} and {now} to ISO-8601 format

==

src/borg/archiver.py
src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
79617d4;TW;2016-09-23 03:30:02 +0200;Merge pull request #1629 from ThomasWaldmann/fix-narrow-terminal-crash
adapt formatting to narrow screens, do not crash, fixes #1628
==
==================
3874d62;TW;2016-09-23 02:59:00 +0200;Merge pull request #1604 from textshell/feature/remote-ratelimit
Add --remote-ratelimit
==
==================
7e7dd96;Thomas Waldmann;2016-09-23 00:26:04 +0200;adapt formatting to narrow screens, do not crash, fixes #1628
when screen width was too narrow, the {space} placeholder could get negative,
which crashes as it is a width specification.

now we simplify progress output if screen is narrow.
we stop output completely if screen is ridiculously narrow.

==

borg/helpers.py
==================
7b9d0c9;Thomas Waldmann;2016-09-22 02:43:57 +0200;yes(): abort on wrong answers, saying so
except for the passphrase display as we can only display it as long as we have it in memory,
here: retry, telling the user if he entered something invalid and needs to enter again.

==

borg/archiver.py
borg/cache.py
borg/helpers.py
borg/key.py
==================
84b3295;Martin Hostettler;2016-09-15 22:13:35 +0200;Archiver,RemoteRepository: Add --remote-ratelimit
The --remote-ratelimit option adds a very simple rate limit for the
sending data to the remote.

Currently implemented by sleeping if the transmission speed is greater
than the limit.

==

src/borg/archiver.py
src/borg/remote.py
src/borg/testsuite/remote.py
==================
eac439a;TW;2016-09-17 23:50:56 +0200;Merge pull request #1614 from ThomasWaldmann/trivial-changes
trivial code optimization
==
==================
34ec344;Thomas Waldmann;2016-09-17 17:19:26 +0200;trivial code optimization

==

borg/archive.py
==================
50cef5a;enkore;2016-09-17 12:05:28 +0200;Merge pull request #1612 from senden9/patch-2
Fix inconsistency in FAQ
==
==================
deadc81;Stefano Probst;2016-09-17 09:14:01 +0200; Fix inconsistency in FAQ
The script in the FAQ is named pv-wrapper. But in the variable export pv-wrapper.sh was used.
==

docs/faq.rst
==================
765b8f3;TW;2016-09-16 19:52:22 +0200;Merge pull request #1603 from ThomasWaldmann/fix-fuse-hardlinks
Fix FUSE hardlinks
==
==================
260ef31;Thomas Waldmann;2016-09-15 21:11:23 +0200;fuse: refactor for less encoding dance

==

src/borg/fuse.py
==================
3917047;Thomas Waldmann;2016-09-15 20:31:57 +0200;fuse: fix hardlinks in versions view, fixes #1599

==

src/borg/fuse.py
==================
c021cf4;Thomas Waldmann;2016-09-15 20:29:14 +0200;fuse: add test for hardlinks in versions view

==

src/borg/testsuite/archiver.py
==================
001500a;Thomas Waldmann;2016-09-15 15:41:15 +0200;fuse: refactor file versioning code

==

src/borg/fuse.py
==================
5d22078;Thomas Waldmann;2016-09-15 14:56:11 +0200;fuse: add parameter check to ItemCache.get to make potential failures more clear

==

src/borg/fuse.py
==================
ae5b498;Marian Beermann;2016-09-15 11:23:58 +0200;Repository.check: improve object count mismatch diagnostic

==

src/borg/repository.py
==================
783d01f;TW;2016-09-14 22:55:50 +0200;Merge pull request #1586 from ThomasWaldmann/borg-check-delete-defect-chunks
borg check: delete chunks with integrity errors, fixes #1575
==
==================
b4c7cce;Thomas Waldmann;2016-09-09 01:27:27 +0200;borg check: delete chunks with integrity errors, fixes #1575
so they can be "repaired" immediately and maybe healed later.

==

src/borg/archive.py
src/borg/testsuite/archiver.py
==================
38f217d;enkore;2016-09-14 20:26:28 +0200;Merge pull request #1597 from ThomasWaldmann/fresh-bootloader
Vagrantfile: use TW's fresh-bootloader branch
==
==================
051de77;enkore;2016-09-14 09:33:57 +0200;Merge pull request #1596 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
322d217;Thomas Waldmann;2016-09-14 03:11:11 +0200;Vagrantfile: use TW's fresh-bootloader branch
... until pyinstaller team catches up, merges the fixes and recompiles the bootloader.

==

Vagrantfile
==================
2aa0653;Thomas Waldmann;2016-09-14 02:59:52 +0200;fixup: typo in development.rst

==

docs/development.rst
==================
57a3adb;Thomas Waldmann;2016-09-14 02:55:13 +0200;borg recreate: also catch SIGHUP

==

src/borg/archiver.py
==================
1287d1a;Thomas Waldmann;2016-09-14 02:53:41 +0200;Merge branch '1.0-maint' into merge-1.0-maint
# Conflicts:
#	docs/development.rst
#	src/borg/archive.py
#	src/borg/archiver.py
#	src/borg/hashindex.pyx
#	src/borg/testsuite/hashindex.py

==
==================
b3fac01;TW;2016-09-14 02:26:17 +0200;Merge pull request #1595 from ThomasWaldmann/update-wheezy-box
update wheezy vagrant box to 7.11
==
==================
3c3502a;Thomas Waldmann;2016-09-14 02:22:46 +0200;update wheezy vagrant box to 7.11
7.9 is not available any more.

==

Vagrantfile
==================
8a62b16;enkore;2016-09-13 23:54:08 +0200;Merge pull request #1594 from julian-klode/bugfix/sighup
Handle SIGHUP for proper unlock on lost connection, fixes #1593
==
==================
c8f4e9e;Julian Andres Klode;2016-09-13 21:28:16 +0200;Correctly exit with proper unlock on SIGHUP, fixes #1593
If the connections hangs up, the borg server needs to clean
up, especially unlock the repository, so a later try will
work again.

This is especially problematic with systemd systems that have
KillUserProcesses enabled (which is the default): Logind sends
a SIGHUP message to the session scope when the session ends.

==

borg/archiver.py
==================
3714be0;enkore;2016-09-09 19:31:22 +0200;Merge pull request #1581 from enkore/issue/1580
hashindex: export max load factor to Python-space
==
==================
be3616b;Marian Beermann;2016-09-09 16:11:06 +0200;ArchiveChecker: use MAX_LOAD_FACTOR constant

==

borg/archive.py
borg/testsuite/hashindex.py
==================
142079f;enkore;2016-09-08 23:53:51 +0200;Merge pull request #1585 from enkore/issue/1584
create --read-special fix crash on broken symlink
==
==================
6ff1f62;TW;2016-09-08 20:22:43 +0200;Merge pull request #1567 from ThomasWaldmann/improve-dev-docs
contribution guidelines
==
==================
b2e389e;Thomas Waldmann;2016-09-03 21:05:16 +0200;docs: add contribution guidelines

==

docs/development.rst
==================
f1cf7bc;Marian Beermann;2016-09-08 16:43:48 +0200;process_symlink: fix missing backup_io()
Fixes a chmod/chown/chgrp/unlink/rename/... crash race between getting dirents
and dispatching to process_symlink.

==

borg/archive.py
==================
4cb3355;Marian Beermann;2016-09-08 16:39:44 +0200;create --read-special fix crash on broken symlink
also correctly processes broken symlinks. before this regressed to a crash
(5b45385) a broken symlink would've been skipped.

==

borg/archiver.py
borg/testsuite/archiver.py
==================
1975525;Marian Beermann;2016-09-07 16:08:35 +0200;hashindex: make MAX_VALUE a class constant

==

borg/hashindex.pyx
borg/testsuite/hashindex.py
==================
9fe0140;Marian Beermann;2016-09-07 16:08:07 +0200;hashindex: export max load factor to Python-space

==

borg/hashindex.pyx
borg/testsuite/hashindex.py
==================
b1d3a39;TW;2016-09-06 13:58:51 +0200;Merge pull request #1577 from enkore/issue/1576
Fix second block in "Easy to use" section not showing on GitHub
==
==================
ac8d65c;Marian Beermann;2016-09-06 13:03:59 +0200;Fix second block in "Easy to use" section not showing on GitHub
Fixes #1576

==

README.rst
==================
84e34a7;enkore;2016-09-04 17:55:28 +0200;Merge pull request #1568 from ThomasWaldmann/bestpractices-badge
add bestpractices badge
==
==================
45d7272;Thomas Waldmann;2016-09-03 21:11:47 +0200;add bestpractices badge

==

README.rst
==================
a6fe69c;enkore;2016-09-03 19:52:11 +0200;Merge pull request #1566 from ThomasWaldmann/improve-docs
misc docs improvements
==
==================
f700082;Thomas Waldmann;2016-09-03 19:22:39 +0200;link reference docs and faq about BORG_FILES_CACHE_TTL, fixes #1561

==

docs/faq.rst
docs/usage.rst
==================
2c5b8d6;Thomas Waldmann;2016-09-03 19:05:07 +0200;improve borg info --help, explain size infos, fixes #1532

==

borg/archiver.py
==================
2e1cf17;Thomas Waldmann;2016-09-03 18:41:27 +0200;add release signing key / security contact to README, fixes #1560

==

README.rst
==================
d3cea70;enkore;2016-09-01 21:49:10 +0200;Merge pull request #1558 from ThomasWaldmann/improve-fuse
Improve fuse
==
==================
dd89181;Thomas Waldmann;2016-09-01 05:44:38 +0200;fuse: refactor / optimize process_inner

==

src/borg/fuse.py
==================
6f50cc3;Thomas Waldmann;2016-09-01 05:18:10 +0200;fuse: simplify path segments loop

==

src/borg/fuse.py
==================
d64ccff;Thomas Waldmann;2016-09-01 04:57:11 +0200;fuse: remove unneeded function definition
code only had 1 caller, so just inline it.

==

src/borg/fuse.py
==================
34eb475;Thomas Waldmann;2016-09-01 04:33:42 +0200;fuse: remove unneeded safe_encode
fsencode will happen in _find_inode()

==

src/borg/fuse.py
==================
8b5372b;Thomas Waldmann;2016-09-01 04:30:55 +0200;fuse: slightly refactor shadowing detection
if it is not a directory, the old code was a NOP, so we can just check that first.

==

src/borg/fuse.py
==================
83c9994;Thomas Waldmann;2016-08-28 00:17:24 +0200;ran build_usage

==

docs/usage/check.rst.inc
docs/usage/common-options.rst.inc
docs/usage/create.rst.inc
docs/usage/debug-dump-repo-objs.rst.inc
docs/usage/debug-info.rst.inc
docs/usage/extract.rst.inc
docs/usage/help.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/mount.rst.inc
docs/usage/recreate.rst.inc
==================
6dd29cf;Thomas Waldmann;2016-08-28 00:16:19 +0200;ran build_api, reorder as in 1.0

==

docs/api.rst
==================
3f159ba;Thomas Waldmann;2016-08-28 00:03:16 +0200;update CHANGES

==

docs/changes.rst
==================
e0bb4a4;TW;2016-08-27 23:51:07 +0200;Merge pull request #1129 from ThomasWaldmann/fuse-versions-view
FUSE versions view, fixes #729
==
==================
1f04820;Thomas Waldmann;2016-06-04 18:26:55 +0200;fuse: implement versions view
all archives, all items are read to build a unified view.
files are represented by a same-name directory with the versions of the file.
A filename suffix computed by adler32(chunkids) is used to disambiguate the versions.

also: refactor code a little, create methods for leaves, inner nodes.

==

docs/changes.rst
docs/usage.rst
src/borg/archiver.py
src/borg/fuse.py
src/borg/testsuite/archiver.py
==================
1219ba5;enkore;2016-08-27 22:43:55 +0200;Merge pull request #1537 from enkore/changes/1.1b1
update changes
==
==================
e0b9aed;Marian Beermann;2016-08-27 22:43:41 +0200;update changes (1.1.0b1)

==

docs/changes.rst
==================
69c51f2;enkore;2016-08-27 15:52:21 +0200;Merge pull request #1374 from textshell/issue/1039-aes-iv
Fix AES-CTR nonce reusage
==
==================
620f505;Martin Hostettler;2016-07-25 20:38:31 +0200;Reserve nonce space for AES-CTR before using it.
Reusing the nonce totally breaks AES-CTR confidentiality.

This code uses a reservation of nonce space and stores the next nonce available for
a future reservation on the client and in the repository.

Local storage is needed to protect against evil repositories that try to gain access to
encrypted data by not saving nonce reservations and aborting the connection or otherwise
forcing a rollback.

Storage in the repository is needed to protect against another client writing to the
repository after a transaction was aborted and thus not seeing the last used nonce from
the manifest.

With a real counter mode cipher protection for the multiple client case with an actively
evil repository is not possible. But this still protects against cases where the attacker can
not arbitrarily change the repository but can read everything stored and abort connections
or crash the server.

Fixes #22

==

src/borg/helpers.py
src/borg/key.py
src/borg/nonces.py
src/borg/remote.py
src/borg/repository.py
src/borg/testsuite/archiver.py
src/borg/testsuite/helpers.py
src/borg/testsuite/key.py
src/borg/testsuite/nonces.py
src/borg/testsuite/repository.py
==================
75f6c95;enkore;2016-08-27 14:52:41 +0200;Merge pull request #1540 from enkore/f/recreate-autocmt
recreate: fix crash if recompress and deduplication beyond autocommit…
==
==================
e4e6787;Marian Beermann;2016-08-27 14:31:57 +0200;recreate: fix crash if recompress and deduplication beyond autocommit_threshold
ie. it means that if all the recompressed chunks were already in the repo
no data would be written, so there would be no active txn, so failure
ensues.

==

src/borg/archive.py
==================
e60ed80;enkore;2016-08-27 14:06:32 +0200;Merge pull request #1539 from enkore/f/recreate-cp
recreate: fix crash if archive doesn't have chunker_params
==
==================
e289fb3;Marian Beermann;2016-08-27 14:01:28 +0200;recreate: fix crash if archive doesn't have chunker_params

==

src/borg/archive.py
==================
1d750e8;enkore;2016-08-27 00:36:43 +0200;Merge pull request #1536 from enkore/f/prip2
ProgressIndicatorPercent / extract minor cosmetic enhancement
==
==================
168ce1d;TW;2016-08-27 00:32:40 +0200;Merge pull request #1535 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
f0a3257;Marian Beermann;2016-08-26 22:15:44 +0200;extract: --progress: no extra line for 'Calculating size'

==

src/borg/archiver.py
==================
517ccc2;Marian Beermann;2016-08-26 22:15:29 +0200;ProgressIndicatorPercent: output(message) to override output

==

src/borg/helpers.py
==================
47404df;enkore;2016-08-26 22:06:48 +0200;Merge pull request #1526 from textshell/fix/preload-leak-hardlink
extract: When doing a partial restore don't leak prefetched chunks.
==
==================
25fa443;Thomas Waldmann;2016-08-26 20:59:22 +0200;repo tests: convert some more byte literals to H(x)

==

src/borg/testsuite/repository.py
==================
1974824;Thomas Waldmann;2016-08-26 20:47:23 +0200;Merge branch '1.0-maint'

==
==================
cd39ccb;Marian Beermann;2016-08-25 21:16:20 +0200;fix overeager storing of hardlink masters
n.b. we only need to store them for items that we wouldn't extract.

this also fixes an intersting edge case in extracting hard links
with --strip-components

==

src/borg/archive.py
src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
a6620f0;TW;2016-08-25 02:09:52 +0200;Merge pull request #1531 from ThomasWaldmann/fix-fuse-xattr-fakeroot
work around fuse xattr test issue with recent fakeroot
==
==================
c12bcff;Thomas Waldmann;2016-08-23 22:40:01 +0200;work around fuse xattr test issue with recent fakeroot
fakeroot >= 1.20.2 "supports" xattrs, but this support somehow leads to the fuse tests not seeing
the xattrs in fuse, because the file visible in the fuse mount was not created via fakeroot.

==

borg/testsuite/archiver.py
==================
b5d7f1d;Marian Beermann;2016-08-25 01:12:30 +0200;extract: fix incorrect progress output for hard links
this produces correct output if any (non proper) subset of hardlinks are
extracted.

==

src/borg/archiver.py
src/borg/item.py
==================
17bd6e0;TW;2016-08-24 14:09:06 +0200;Merge pull request #1525 from textshell/fix/remote-manual-ssh
borg serve throws exception while trying to close when it gets eof at start
==
==================
549be21;Martin Hostettler;2016-08-22 20:22:02 +0200;RepositoryServer: Add error message when connection was closed before opening repo.

==

borg/remote.py
==================
79de736;Martin Hostettler;2016-08-22 19:50:53 +0200;remote: Change exception message for unexpected RPC data format to indicate dataflow direction
don't print stacktraces to clean up error messages when sshing into a forces command to borg serve.

==

borg/remote.py
==================
316ad33;TW;2016-08-24 00:24:33 +0200;Merge pull request #1523 from ThomasWaldmann/use-prebuilt-bootloader
Vagrant: pyinstaller: use pre-built linux bootloaders, fixes #1506
==
==================
b403a11;TW;2016-08-23 22:33:15 +0200;Merge pull request #1530 from ThomasWaldmann/simplify-repo-tests
Simplify repo/hashindex tests
==
==================
93517ca;Thomas Waldmann;2016-08-22 05:10:48 +0200;hashindex tests: use H(x) instead of some similar constructs
note: hash values needed updating because H(x) formats differently.

==

borg/testsuite/hashindex.py
==================
0da0914;Thomas Waldmann;2016-08-22 04:52:18 +0200;repo tests: use H(x) instead of some similar constructs

==

borg/testsuite/repository.py
==================
ddb1c60;Thomas Waldmann;2016-08-22 04:42:42 +0200;repo tests: use H(x) instead of byte literals

==

borg/testsuite/repository.py
==================
d938cf4;TW;2016-08-23 15:19:26 +0200;Merge pull request #1529 from svx/1.0-maint
Addjust border color
==
==================
248ccf0;sven;2016-08-23 15:01:39 +0200;Update borg.css

==

docs/borg_theme/css/borg.css
==================
a54205d;TW;2016-08-23 14:55:56 +0200;Merge pull request #1528 from svx/master
Addjust border color
==
==================
ff04c05;sven;2016-08-23 14:27:26 +0200;Addjust border color
This changes the border-color to match with the background-color
==

docs/borg_theme/css/borg.css
==================
b845a07;Martin Hostettler;2016-08-22 23:36:43 +0200;tests: TestBuildFilter: Adjust from item_is_hardlink_master to peek_and_store_hardlink_masters.

==

src/borg/testsuite/archiver.py
==================
a026feb;Martin Hostettler;2016-08-22 23:07:38 +0200;Archiver.build_filter: strip_components is no longer a optional parameter.

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
972392e;Martin Hostettler;2016-08-22 22:58:54 +0200;extract: When doing a partial restore don't leak prefetched chunks.
The filter function passed to iter_items (with preload=True) may never return True for items that
are not really extracted later because that would leak prefetched items.

For restoring hard linked files the item containing the actual chunks might not be matched
or implicitly removed from the restore by strip_components. For this reason the chunk list or all
items that can potentially be used as hardlink target needs to be stored.

To achive both requirements at the same time the filter function needs to store the needed information
for the hardlinks while not returning True just because it could be a hardlink target.

Known problems: When using progress indication the calculated extracted_size now can be smaller
than the actual extracted size in presence of hard links (master is not restored) instead of
bigger (potential master not used in restore).

==

src/borg/archive.py
src/borg/archiver.py
==================
484c091;Martin Hostettler;2016-08-22 19:48:39 +0200;RepositoryServer: Don‘t try to close the repository if it was not yet opened.

==

borg/remote.py
==================
2cfd905;Thomas Waldmann;2016-08-21 01:11:46 +0200;Vagrant: pyinstaller: use pre-built linux bootloaders, fixes #1506

==

Vagrantfile
==================
e0b8635;TW;2016-08-22 01:37:43 +0200;Merge pull request #1521 from ThomasWaldmann/fix-coverage
fix .coverage processing
==
==================
85311f0;Thomas Waldmann;2016-08-22 01:15:03 +0200;fix .coverage processing

==

.travis/upload_coverage.sh
==================
3f5f27f;enkore;2016-08-22 00:36:13 +0200;Merge pull request #1520 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
6da34fc;Thomas Waldmann;2016-08-21 23:37:07 +0200;add debug-info usage help file

==

docs/usage/debug-info.rst.inc
==================
d1d2738;Thomas Waldmann;2016-08-21 18:13:23 +0200;re-enable fuse tests for RemoteArchiver
at some time they had deadlock issues, but it worked for me now.

==

src/borg/testsuite/archiver.py
==================
ebe1143;Thomas Waldmann;2016-08-21 19:27:23 +0200;travis: test fuse-enabled borg

==

.travis/install.sh
tox.ini
==================
2a41569;Thomas Waldmann;2016-08-21 20:17:49 +0200;use trusty for testing, to have a recent FUSE

==

.travis/install.sh
==================
3f30649;Carlo Teubner;2016-06-25 22:38:47 +0100;internals.rst: fix typos

==

docs/internals.rst
==================
a7c370b;Thomas Waldmann;2016-08-21 23:37:07 +0200;add debug-info usage help file

==

docs/usage/debug-info.rst.inc
==================
5859bad;TW;2016-08-21 22:54:58 +0200;Merge pull request #1519 from enkore/issue/1115
Repository: add compact_segments progress
==
==================
ea14384;enkore;2016-08-21 22:47:34 +0200;Merge pull request #1517 from ThomasWaldmann/reenable-remotearchiver-fuse-test
re-enable fuse tests for RemoteArchiver
==
==================
725eaf2;enkore;2016-08-21 22:32:06 +0200;Merge pull request #1518 from ThomasWaldmann/travis-fuse-testing
travis: test fuse-enabled borg
==
==================
32bd295;Thomas Waldmann;2016-08-21 19:27:23 +0200;travis: test fuse-enabled borg

==

.travis/install.sh
tox.ini
==================
7e80f68;Thomas Waldmann;2016-08-21 20:17:49 +0200;use trusty for testing, to have a recent FUSE

==

.travis.yml
.travis/install.sh
==================
53d0140;Marian Beermann;2016-08-21 21:55:53 +0200;Repository: add compact_segments progress

==

src/borg/repository.py
src/borg/testsuite/archiver.py
==================
2f65f7b;TW;2016-08-21 20:24:44 +0200;Merge pull request #1449 from enkore/f/extractprogress
extract --progress
==
==================
ed6a054;enkore;2016-08-21 20:19:29 +0200;Merge pull request #1516 from sudoman/sudoman-doc-changes-0
added doc for "pull" type backup over sshfs
==
==================
ab31ffa;Marian Beermann;2016-08-21 17:36:51 +0200;ProgressIndicatorPercent: remove same_line

==

src/borg/helpers.py
src/borg/testsuite/helpers.py
==================
e7d44ce;Marian Beermann;2016-08-21 17:35:00 +0200;extract: --progress: Calculating size

==

src/borg/archiver.py
src/borg/helpers.py
==================
ab96c64;TW;2016-08-21 18:29:18 +0200;Merge pull request #1513 from ThomasWaldmann/improve-error-logging
improve error logging, fixes #1440
==
==================
273bd57;Thomas Waldmann;2016-08-21 18:13:23 +0200;re-enable fuse tests for RemoteArchiver
at some time they had deadlock issues, but it worked for me now.

==

borg/testsuite/archiver.py
==================
f8bb737;Andrew Engelbrecht;2016-08-21 01:04:16 -0400;added doc for "pull" type backup over sshfs
Fixes #900

==

docs/usage.rst
==================
4d214e2;Marian Beermann;2016-08-09 20:49:56 +0200;Simplify and test Item.file_size

==

src/borg/item.py
src/borg/testsuite/item.py
==================
5924915;Marian Beermann;2016-08-07 14:24:30 +0200;Flip ProgressIndicatorPercent same_line default to True
Every production use of this uses same_line=True

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/repository.py
src/borg/testsuite/helpers.py
src/borg/upgrader.py
==================
8709cec;Marian Beermann;2016-08-07 14:17:56 +0200;borg-extract --progress

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/item.py
src/borg/testsuite/archiver.py
==================
7501430;TW;2016-08-21 00:18:35 +0200;Merge pull request #1514 from ThomasWaldmann/fix-typos
internals.rst: fix typos
==
==================
81dd381;enkore;2016-08-21 00:16:24 +0200;Merge pull request #1507 from ThomasWaldmann/use-modified-pyinstaller
use patched LDLP-preserving pyinstaller
==
==================
1c66622;Carlo Teubner;2016-06-25 22:38:47 +0100;internals.rst: fix typos

==

docs/internals.rst
==================
9baa024;enkore;2016-08-21 00:12:00 +0200;Merge pull request #1508 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
41e4707;Thomas Waldmann;2016-08-20 23:09:42 +0200;fixup: meant "tb", not "traceback"

==

src/borg/archiver.py
==================
357f4ef;TW;2016-08-20 21:19:17 +0200;Merge pull request #1511 from c4rlo/lru-cache
helpers.py: replace memoize with functools.lru_cache
==
==================
a0c8c40;Thomas Waldmann;2016-08-20 17:23:02 +0200;improve error logging, fixes #1440
archiver: split traceback and msg, have separate log level for traceback, log LockTimeout at debug level,
for "Error" exceptions: always log the traceback, either at ERROR or DEBUG level.

remote: if we have an "Error" typed exception instance, we can use its traceback flag and .get_message()
as we do locally.

==

src/borg/archiver.py
src/borg/remote.py
==================
61af307;Carlo Teubner;2016-08-20 13:06:16 +0100;helpers.py: replace memoize usages with lru_cache

==

src/borg/helpers.py
==================
e7fccac;Thomas Waldmann;2016-08-20 12:28:27 +0200;restore original LDLP, if possible, fixes #1498
see https://github.com/pyinstaller/pyinstaller/pull/2148

==

src/borg/remote.py
==================
821fba8;Thomas Waldmann;2016-08-17 17:50:01 +0200;use patched LDLP-preserving pyinstaller, fixes #1416
see https://github.com/pyinstaller/pyinstaller/pull/2148

also: use waf --no-lsb (the bootloader does not build without it on our wheezy32 vagrant VM)

==

Vagrantfile
==================
12ea5d0;TW;2016-08-20 11:46:03 +0200;Merge pull request #1510 from c4rlo/os-devnull
daemonize(): use os.devnull instead of hardcoded /dev/null
==
==================
28076ee;Carlo Teubner;2016-06-25 23:07:21 +0100;helpers.py: replace memoize with functools.lru_cache

==

src/borg/helpers.py
==================
13761c4;Carlo Teubner;2016-06-25 23:56:51 +0100;daemonize(): use os.devnull instead of hardcoded /dev/null

==

src/borg/helpers.py
==================
c355f36;Thomas Waldmann;2016-08-20 00:04:55 +0200;Merge branch '1.0-maint'

==
==================
45fd66f;enkore;2016-08-19 15:22:31 +0200;Merge pull request #1505 from ThomasWaldmann/test-list-format-depr
borg list: test for --list-format deprecation
==
==================
53d14e9;Thomas Waldmann;2016-08-19 14:55:49 +0200;borg list: test for --list-format deprecation

==

src/borg/testsuite/archiver.py
==================
32e84f3;TW;2016-08-19 14:09:34 +0200;Merge pull request #1484 from enkore/issue/1396
Track shadowing of log entries
==
==================
f32c885;Thomas Waldmann;2016-08-18 23:05:58 +0200;update CHANGES with description of issue #1428

==

docs/changes.rst
==================
dde18d6;Thomas Waldmann;2016-08-02 15:50:21 +0200;security fix: --restrict-to-path must not accept pathes with same name prefix
bug: --restrict-to-path /foo  erroneously allowed  /foobar.
even worse: --restrict-to-path /foo/  erroneously allowed  /foobar.

==

borg/remote.py
==================
28cbf24;Thomas Waldmann;2016-08-02 15:01:30 +0200;more tests for --restrict-to-path
especially test that other directory names sharing same name prefix are not allowed.

==

borg/testsuite/archiver.py
==================
cba0c3d;TW;2016-08-18 22:17:18 +0200;Merge pull request #1483 from ThomasWaldmann/update-1.0-changes
WIP: update CHANGES (1.0-maint)
==
==================
2aae0b1;Thomas Waldmann;2016-08-16 00:56:52 +0200;update CHANGES

==

docs/changes.rst
==================
b124ec6;enkore;2016-08-18 21:59:44 +0200;Merge pull request #1492 from enkore/c/textshell/leaky-preload
(cherry pick) Fix leak in borg-extract --strip-components
==
==================
b467132;Marian Beermann;2016-08-18 16:23:36 +0200;Document DownloadPipeline.unpack_many precautions

==

borg/archive.py
borg/testsuite/archiver.py
==================
feb14de;TW;2016-08-18 15:27:14 +0200;Merge pull request #1497 from enkore/issue/1490-2
Fix cosmetics + file leftover for "not a valid borg repository"
==
==================
0fb8f73;TW;2016-08-18 14:24:08 +0200;Merge pull request #1503 from enkore/issue/1501
Cache: release lock if cache is invalid
==
==================
87aacad;enkore;2016-08-18 12:55:25 +0200;Merge pull request #1504 from enkore/issue/1495
Exclude incompatible tests for ArchiverTestCaseBinary
==
==================
ef13d39;Marian Beermann;2016-08-18 12:26:14 +0200;Cache: release lock if cache is invalid

==

borg/cache.py
==================
928f6e0;Marian Beermann;2016-08-17 22:55:45 +0200;repository: fix spurious, empty lock.roster on InvalidRepository exception

==

borg/locking.py
borg/testsuite/locking.py
==================
adaeb32;Marian Beermann;2016-08-17 22:50:38 +0200;Repository: fix repo not closed cleanly on InvalidRepository exception

==

borg/repository.py
==================
c39e395;Marian Beermann;2016-08-17 23:01:20 +0200;Exclude incompatible tests for ArchiverTestCaseBinary

==

src/borg/testsuite/archiver.py
==================
8268e26;Marian Beermann;2016-08-17 22:36:25 +0200;extract: refactor filter building

==

borg/archiver.py
borg/testsuite/archiver.py
==================
724586e;Martin Hostettler;2016-08-09 23:26:56 +0200;Add test for preloading releated leaks on extract with --strip-components

==

borg/remote.py
borg/testsuite/archiver.py
==================
c84ad6b;Martin Hostettler;2016-08-05 22:26:59 +0200;Archiver.do_extract: Fix leak of downloaded chunk contents caused by preloading
Include condition that path is non empty after applying strip_components into
filter passed to iter_items.

All filtering of files to extract must be done in the filter callable used in
archive.iter_items because iter_items will preload all chunks used in items
it returns. If they are not actually extracted the accumulate in the
responsed dict.

==

borg/archiver.py
==================
26e8ff2;Marian Beermann;2016-08-16 12:45:33 +0200;Repository: don't use defaultdict for shadow index
avoids errors by accidentally inserting an empty list and makes it more clear.

==

src/borg/repository.py
==================
833f8d1;Marian Beermann;2016-08-16 12:39:51 +0200;Track entire session
Note how this enables the much stricter check in test_moved_deletes_are_tracked

==

src/borg/repository.py
src/borg/testsuite/repository.py
==================
ac41ebc;Marian Beermann;2016-08-16 02:04:17 +0200;Track shadowing of log entries
Fixes (benign) index vs. log inconsistencies when segments are skipped
during compaction.

==

src/borg/repository.py
src/borg/testsuite/repository.py
==================
21c3fb3;Marian Beermann;2016-08-14 23:24:53 +0200;compact_segments: add segment-level logging

==

src/borg/repository.py
==================
f7c1c71;TW;2016-08-16 21:35:25 +0200;Merge pull request #1489 from enkore/issue/1486
Fix borg-list --list-format
==
==================
8718c24;enkore;2016-08-16 21:28:30 +0200;Merge pull request #1488 from ThomasWaldmann/fix-timestamp-key-name
fix timestamp key name, fixes #1487
==
==================
f3defb0;Marian Beermann;2016-08-16 20:45:32 +0200;Fix borg-list empty format
Should produce empty output, not default output.

==

src/borg/archiver.py
==================
146d531;Marian Beermann;2016-08-16 20:46:54 +0200;Fix borg-list --list-format

==

src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
30cd7f3;Thomas Waldmann;2016-08-16 20:36:29 +0200;fix timestamp key name

==

src/borg/item.py
==================
35a0ab2;enkore;2016-08-16 01:21:19 +0200;Merge pull request #1481 from ThomasWaldmann/debug-info
implement borg debug-info, fixes #1122
==
==================
1bcf3d2;enkore;2016-08-16 01:20:14 +0200;Merge pull request #1482 from ThomasWaldmann/skip-noatime-test-hurd
skip the O_NOATIME test on GNU Hurd, fixes #1315
==
==================
2a434c3;Thomas Waldmann;2016-08-15 19:54:40 +0200;skip the O_NOATIME test on GNU Hurd, fixes #1315
GNU Hurd needs to fix their O_NOATIME, after that we can
re-enable the test on that platform.

==

borg/testsuite/archiver.py
==================
e50646a;Thomas Waldmann;2016-08-15 19:20:51 +0200;implement borg debug-info, fixes #1122
In tracebacks we have it already, but with the command,
you can have it without a traceback also.

==

borg/archiver.py
==================
d5edaa5;enkore;2016-08-15 18:42:58 +0200;Merge pull request #1161 from ThomasWaldmann/pretty-archive
make source more pretty
==
==================
a0df0a9;enkore;2016-08-15 17:35:39 +0200;Merge pull request #1480 from ThomasWaldmann/clean-repo-release
use a clean repo to test / build the release
==
==================
2f70e3f;Thomas Waldmann;2016-08-15 16:01:23 +0200;src cleanup: do not use XXX in strings if just any other string works also
XXX is usually used in comments to mark questionable places in the source.

==

src/borg/testsuite/key.py
==================
3c8d863;Thomas Waldmann;2016-08-15 15:52:19 +0200;src cleanup: get rid of text-as-bytes in borg.remote

==

src/borg/remote.py
==================
e3c155e;Thomas Waldmann;2016-08-15 15:41:24 +0200;use a clean repo to test / build the release

==

docs/development.rst
==================
1f056d9;Thomas Waldmann;2016-08-15 04:17:41 +0200;more safe interface for manifest.archives

==

src/borg/archive.py
src/borg/archiver.py
src/borg/cache.py
src/borg/fuse.py
src/borg/helpers.py
==================
b6d0eb9;Thomas Waldmann;2016-08-15 02:01:13 +0200;add and use ManifestItem

==

src/borg/helpers.py
src/borg/item.py
==================
c8922c8;Thomas Waldmann;2016-08-15 01:11:33 +0200;use ArchiveItem

==

src/borg/archive.py
src/borg/archiver.py
src/borg/cache.py
src/borg/constants.py
src/borg/fuse.py
src/borg/item.py
src/borg/testsuite/archive.py
src/borg/testsuite/archiver.py
==================
585407f;Thomas Waldmann;2016-06-12 19:06:39 +0200;introduce ArchiveItem, see #1157

==

src/borg/item.py
==================
6e9debb;TW;2016-08-14 18:04:41 +0200;Merge pull request #1420 from enkore/f/recreate1.1rc1
recreate goals for 1.1rc1
==
==================
f0e9a55;Marian Beermann;2016-08-09 21:32:03 +0200;recreate: document that absolute patterns won't match

==

src/borg/archiver.py
==================
93b1cf3;Marian Beermann;2016-08-02 15:53:29 +0200;recreate: --target

==

src/borg/archive.py
src/borg/archiver.py
src/borg/testsuite/archiver.py
==================
88798ae;Marian Beermann;2016-07-31 23:09:57 +0200;recreate: --always-recompress, --compression-from
what a mess

==

src/borg/archive.py
src/borg/archiver.py
src/borg/compress.pyx
src/borg/helpers.py
==================
5433b1a;Marian Beermann;2016-07-31 22:00:58 +0200;Add Compressor.detect(data) -> CompressBase impl

==

src/borg/compress.pyx
==================
c2c9064;Marian Beermann;2016-07-31 21:56:51 +0200;Add Key.assert_id function

==

src/borg/key.py
src/borg/testsuite/key.py
==================
a80b371;Marian Beermann;2016-07-31 21:47:31 +0200;Add decompress arg to Key.decrypt

==

src/borg/key.py
src/borg/testsuite/key.py
==================
774609c;TW;2016-08-14 17:27:51 +0200;Merge pull request #1478 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
ac80332;Marian Beermann;2016-08-14 15:51:49 +0200;Merge branch '1.0-maint' into master
# Conflicts:
#	src/borg/repository.py
#	src/borg/testsuite/repository.py

==
==================
42b6a83;Thomas Waldmann;2016-08-14 15:07:18 +0200;fix cyclic import issue, fix tests
needed to increase ChunkBuffer size due to increased items stream chunk size
to get the test working.

==

src/borg/archive.py
src/borg/helpers.py
src/borg/testsuite/archive.py
==================
8be6761;Thomas Waldmann;2016-08-14 15:05:11 +0200;Merge commit 'feb7e2517ef7ec07cc638953a86c726aada7d37e'

==
==================
c19fb8b;TW;2016-08-13 15:18:51 +0200;Merge pull request #1477 from borgbackup/1.0.7rc2rst
Fix changes.rst formatting, clarify changelog
==
==================
17aacb9;enkore;2016-08-13 10:18:41 +0200;Fix changes.rst formatting, clarify changelog

==

docs/changes.rst
==================
4712b9d;TW;2016-08-13 02:24:32 +0200;Merge pull request #1474 from ThomasWaldmann/update-1.0-changes
update CHANGES
==
==================
07b47ef;Thomas Waldmann;2016-08-13 00:49:07 +0200;update CHANGES

==

docs/changes.rst
==================
a126725;TW;2016-08-13 02:13:27 +0200;Merge pull request #1448 from enkore/issue/1442
Fix untracked segments made by moved DELETEs
==
==================
feb7e25;TW;2016-08-13 02:13:11 +0200;Merge pull request #1472 from ThomasWaldmann/lz4-buffer
lz4 reusing helpers.Buffer
==
==================
df96772;TW;2016-08-13 02:02:34 +0200;Merge pull request #1471 from ThomasWaldmann/buffer
refactor buffer code into helpers.Buffer class
==
==================
3b716f9;Marian Beermann;2016-08-13 01:47:51 +0200;Add regression test for 95cf337

==

borg/testsuite/repository.py
==================
95cf337;Marian Beermann;2016-08-08 14:49:25 +0200;Fix untracked segments made by moved DELETEs
Fixes #1442

(note that the segments _still_ get generated, see the comment, they
 should be collected now on the next compaction run)

==

borg/repository.py
==================
e1bc7b6;Thomas Waldmann;2016-08-12 21:10:46 +0200;lz4: reuse helpers.Buffer

==

borg/compress.pyx
==================
ef9e8a5;Thomas Waldmann;2016-08-12 19:34:29 +0200;refactor buffer code into helpers.Buffer class, add tests

==

borg/helpers.py
borg/testsuite/helpers.py
borg/testsuite/xattr.py
borg/xattr.py
==================
00449ad;TW;2016-08-13 00:12:17 +0200;Merge pull request #1470 from ThomasWaldmann/document-archive-limit
document archive limitation, #1452
==
==================
4e5b80b;TW;2016-08-12 18:21:59 +0200;Merge pull request #1464 from ThomasWaldmann/fix-xattr-exception
xattr: dynamically grow result buffer until it fits, fixes #1462
==
==================
3c7dddc;Thomas Waldmann;2016-08-12 18:00:50 +0200;update changelog

==

docs/changes.rst
==================
c834b29;Thomas Waldmann;2016-08-12 17:54:15 +0200;document archive limitation, #1452

==

docs/faq.rst
docs/internals.rst
==================
8630ebf;Thomas Waldmann;2016-08-12 04:21:21 +0200;xattr: fix module docstring

==

borg/xattr.py
==================
b6ead3d;Thomas Waldmann;2016-08-12 04:17:27 +0200;xattr: use some string processing functions, dedup, simplify

==

borg/xattr.py
==================
7ea052a;Thomas Waldmann;2016-08-12 02:55:49 +0200;xattr: buffer full check for freebsd
freebsd 10.2:

it does not give rc < 0 and errno == ERANGE if the buffer was too small,
like linux or mac OS X does.

rv == buffer len might be a signal of truncation.
rv > buffer len would be even worse

not sure if some implementation returns the total length of the data,
not just the amount put into the buffer.

but as we use the returned length to "truncate" the buffer, we better
make sure it is not longer than the buffer.

also: freebsd listxattr memoryview len bugfix

==

borg/xattr.py
==================
4eac66f;Thomas Waldmann;2016-08-11 22:47:12 +0200;xattr: fix race condition in get_all(), see issue #906

==

borg/xattr.py
==================
418794f;Thomas Waldmann;2016-08-11 21:52:48 +0200;xattr: errno ERANGE has different meanings

==

borg/xattr.py
==================
09dbec9;Thomas Waldmann;2016-08-11 20:11:36 +0200;raise OSError including the error message derived from errno
also: deal with path being a integer FD

==

borg/xattr.py
==================
67c6c18;Thomas Waldmann;2016-08-11 19:47:04 +0200;xattr: refactor code, deduplicate
this code would be otherwise duplicated 3 times for linux, freebsd, darwin.

==

borg/xattr.py
==================
17c77a5;Thomas Waldmann;2016-08-11 15:30:50 +0200;xattr: dynamically grow result buffer until it fits, fixes #1462
this also fixes the race condition seen in #1462 because there is only 1 call now.
either it succeeds, then we get the correct length as result and truncate the result value to that length.
or it fails with ERANGE, then we grow the buffer to double size and repeat.
or it fails with some other error, then we throw OSError.

==

borg/testsuite/xattr.py
borg/xattr.py
==================
6bf48bb;enkore;2016-08-12 15:16:36 +0200;Merge pull request #1457 from ThomasWaldmann/explain-compat-typeerror
explain the confusing TypeError, fixes #1456
==
==================
32e6507;TW;2016-08-12 14:05:33 +0200;Merge pull request #1468 from enkore/issue/1467
Print active env var override by default
==
==================
c61a9e8;Marian Beermann;2016-08-12 13:00:53 +0200;Print active env var override by default
Fixes #1467

==

borg/helpers.py
borg/testsuite/helpers.py
==================
e05258f;enkore;2016-08-12 12:54:24 +0200;Merge pull request #1461 from ThomasWaldmann/improve-docs
docs: improve prune examples
==
==================
f8b2ffe;enkore;2016-08-11 14:18:03 +0200;Merge pull request #1458 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
6e658a5;Thomas Waldmann;2016-08-10 15:45:57 +0200;docs: improve prune examples

==

docs/usage.rst
==================
a951d23;enkore;2016-08-10 14:29:46 +0200;Merge pull request #1460 from ThomasWaldmann/fix-init
add transaction_id assertion
==
==================
7b5772d;Thomas Waldmann;2016-08-10 13:56:06 +0200;add transaction_id assertion
an acd_cli (amazon cloud drive fuse filesystem) user had "borg init" crash in the line below.

by adding the assertion we tell that we do not expect the transaction_id to be None there,
so it is easier to differentiate from a random coding error.

==

borg/repository.py
==================
e89c5b1;enkore;2016-08-09 23:37:17 +0200;Merge pull request #1459 from ThomasWaldmann/larger-items-stream-chunks
larger item metadata stream chunks, fixes #1452
==
==================
006d1df;enkore;2016-08-09 23:28:58 +0200;Merge pull request #1450 from enkore/f/recreatefactors
minor recreate refactor
==
==================
7d9fba5;Marian Beermann;2016-08-09 21:20:13 +0200;ArchiveRecreater.copy_items: progress from target instead of source
(it produces the same output, just less confusing)

==

src/borg/archive.py
==================
ff5d9a3;TW;2016-08-09 20:53:07 +0200;Merge pull request #1447 from enkore/f/debug-topic
Debugging topics and some other minor stuff
==
==================
2624d6f;Thomas Waldmann;2016-08-09 20:30:50 +0200;larger item metadata stream chunks, fixes #1452
increasing the mask (target chunk size) from 14 (16kiB) to 17 (128kiB).
this should reduce the amount of item metadata chunks an archive has to reference to 1/8.
this does not completely fix #1452, but at least enables a 8x larger item metadata stream.

==

borg/archive.py
==================
c955d59;Thomas Waldmann;2016-08-09 20:09:13 +0200;Merge branch '1.0-maint'

==
==================
316c0cd;TW;2016-08-09 18:36:55 +0200;Merge pull request #1455 from ThomasWaldmann/fix-compr-buffer-size
LZ4: dynamically enlarge the (de)compression buffer, fixes #1453
==
==================
4c51bed;TW;2016-08-09 18:17:03 +0200;Merge pull request #1454 from ThomasWaldmann/enfore-max-object-size-put
repo: do not put objects that we won't get, fixes #1451
==
==================
20392f8;Thomas Waldmann;2016-08-08 22:00:34 +0200;repo: split size check into too small and too big
also add a hint if somebody needs to restore an archive that has too big objects.

==

borg/repository.py
==================
a360307;Thomas Waldmann;2016-08-08 21:45:53 +0200;repo: do not put objects that we won't get, fixes #1451
we will not get() objects that have a segment entry larger than MAX_OBJECT_SIZE.
thus we should never produce such entries.

also: introduce repository.MAX_DATA_SIZE that gives the max payload size.

==

borg/repository.py
borg/testsuite/repository.py
docs/changes.rst
==================
fc92822;Thomas Waldmann;2016-08-09 17:35:27 +0200;explain the confusing TypeError, fixes #1456

==

borg/remote.py
==================
b0e7bb5;Thomas Waldmann;2016-08-09 17:05:24 +0200;fixup: use thread-local buffer
start with 0 bytes length (saves memory in case lz4 is not used).
always grow when a bigger buffer is needed.
avoid per-call reallocation / freeing / garbage.

==

borg/compress.pyx
==================
d3000a7;Thomas Waldmann;2016-08-09 00:33:12 +0200;LZ4: dynamically enlarge the (de)compression buffer, fixes #1453
the statically allocated COMPR_BUFFER was right size for chunks,
but not for the archive item which could get larger if you have
many millions of files/dirs.

==

borg/archiver.py
borg/compress.pyx
borg/helpers.py
borg/key.py
borg/testsuite/compress.py
==================
51054da;enkore;2016-08-08 20:28:35 +0200;Merge pull request #1444 from ThomasWaldmann/merge-1.0-maint
Merge 1.0 maint
==
==================
0a65e83;Marian Beermann;2016-08-07 12:10:20 +0200;check --verify-data: remove incorrect help paragraph
(since d0ec7e76bb - doesn't mean this probably useful feature may not
 be reimplemented, on the contrary)

==

src/borg/archiver.py
==================
bec5051;Marian Beermann;2016-08-06 22:41:24 +0200;helpers.format_timedelta: use timedelta.total_seconds()

==

src/borg/helpers.py
==================
389ca94;Marian Beermann;2016-08-06 22:38:53 +0200;Silence repeated "Processing files..." log entries when --no-files-cache

==

src/borg/archive.py
==================
4d7a52d;Marian Beermann;2016-08-06 22:37:44 +0200;--debug-topic for granular debug logging
Especially: disables file-compression logging by default

==

src/borg/archive.py
src/borg/archiver.py
src/borg/helpers.py
src/borg/logger.py
==================
7b70b74;Marian Beermann;2016-08-07 12:32:38 +0200;ArchiveRecreater.incref_partial_chunks try to use __contains__

==

src/borg/archive.py
==================
5fe6c09;Marian Beermann;2016-08-07 12:23:37 +0200;Refactor ArchiveRecreater.try_resume

==

src/borg/archive.py
==================
6c1c87f;Thomas Waldmann;2016-08-06 01:28:02 +0200;add forgotten usage help file from build_usage

==

docs/usage/debug-dump-repo-objs.rst.inc
==================
dbe862f;Thomas Waldmann;2016-08-06 01:24:22 +0200;Merge branch '1.0-maint' into merge-1.0-maint

==
==================
a56b010;Thomas Waldmann;2016-08-05 20:26:09 +0200;ran build_usage

==

docs/usage/break-lock.rst.inc
docs/usage/create.rst.inc
docs/usage/help.rst.inc
docs/usage/init.rst.inc
docs/usage/mount.rst.inc
==================
5b575f6;Thomas Waldmann;2016-08-05 20:23:47 +0200;CHANGES: add date to 1.0.7rc1

==

docs/changes.rst
==================
58a9ccb;TW;2016-08-05 20:01:49 +0200;Merge pull request #1441 from ThomasWaldmann/update-1.0-changes
update CHANGES
==
==================
b79e913;Thomas Waldmann;2016-08-05 16:07:33 +0200;update CHANGES

==

docs/changes.rst
==================
18654ea;TW;2016-08-05 19:48:51 +0200;Merge pull request #1371 from ThomasWaldmann/fix-deadlock
fix deadlock
==
==================
33e3348;Thomas Waldmann;2016-08-03 00:34:22 +0200;locking: better differentiate new vs. old clients, lock upgrade for replay
old clients use self.exclusive = None and do a read->write lock upgrade when needed.
new clients use self.exclusive = True/False and never upgrade.

replay fakes an old client by setting self.exclusive = None to get a lock upgrade if needed.

==

borg/remote.py
borg/repository.py
==================
64dcbbf;Thomas Waldmann;2016-07-23 18:22:07 +0200;change RPC API, fix remote repo tests

==

borg/archiver.py
borg/remote.py
borg/testsuite/repository.py
==================
1e739fd;Thomas Waldmann;2016-07-23 16:16:56 +0200;fix local repo / upgrader tests

==

borg/archiver.py
borg/testsuite/archiver.py
borg/testsuite/repository.py
borg/testsuite/upgrader.py
==================
d3d51e1;Thomas Waldmann;2016-07-23 13:56:06 +0200;rename UpgradableLock to Lock
lock upgrading is troublesome / may deadlock, do not advertise it.

==

borg/cache.py
borg/locking.py
borg/repository.py
borg/testsuite/locking.py
borg/testsuite/repository.py
borg/upgrader.py
==================
2a355e5;Thomas Waldmann;2016-07-23 14:13:32 +0200;make sure we have a excl. lock when starting a transaction
if we don't, we try to upgrade the lock.
this is to support old clients talking to a new server and also
to avoid bad consequences from coding mistakes for new clients.

==

borg/repository.py
==================
26007c0;Thomas Waldmann;2016-07-23 13:58:19 +0200;add Lock.got_exclusive_lock

==

borg/locking.py
borg/testsuite/locking.py
==================
976925c;TW;2016-08-05 15:08:16 +0200;Merge pull request #1436 from ThomasWaldmann/fix-fuse-tests
fix fuse tests on OS X, fixes #1433
==
==================
109c095;TW;2016-08-05 14:19:56 +0200;Merge pull request #1435 from ThomasWaldmann/fix-1430
fix unintended file cache eviction, fixes #1430
==
==================
3fac548;TW;2016-08-05 14:08:04 +0200;Merge pull request #1431 from ThomasWaldmann/osxfuse-3.4
Vagrantfile: use FUSE for macOS 3.4.1
==
==================
d050efb;TW;2016-08-05 14:06:20 +0200;Merge pull request #1438 from ThomasWaldmann/debug-dump-repo-objs
borg debug-dump-repo-objs
==
==================
b96bc15;Thomas Waldmann;2016-08-04 00:06:15 +0200;fix unintended file cache eviction, fixes #1430
thanks much to e477 for diagnosing this and finding the right fix.

==

borg/cache.py
==================
4fa420e;Thomas Waldmann;2016-08-04 14:45:53 +0200;borg debug-dump-repo-objs
dump all objects stored in the repository (decrypted and decompressed)

==

borg/archiver.py
borg/testsuite/archiver.py
==================
33ee2b0;TW;2016-08-04 09:56:38 +0200;Merge pull request #1437 from robmv/patch-2
Add backup using stable filesystem names recommendation
==
==================
bc6050b;Robert Marcano;2016-08-03 22:54:51 -0400;Add backup using stable filesystem names recommendation

==

docs/faq.rst
==================
40163c2;Thomas Waldmann;2016-08-04 01:32:01 +0200;fix fuse tests on OS X, fixes #1433
NOATIME support needed checking and the flagfile was UF_NODUMP and thus not there in the backup archive.

Note: i have just duplicated the has_noatime function instead of refactoring it to be global,
to avoid merge conflicts in case we cherry-pick the test improvements from master.

==

borg/testsuite/archiver.py
==================
b5d605e;Thomas Waldmann;2016-08-03 18:23:43 +0200;Vagrantfile: use FUSE for macOS 3.4.1
Note: "FUSE for OS X" was renamed to "FUSE for macOS".

==

Vagrantfile
==================
c7b7e76;TW;2016-08-03 17:47:53 +0200;Merge pull request #1427 from anarcat/patch-4
mention where code, issues and support is
==
==================
9b0d8df;TW;2016-08-03 17:46:34 +0200;Merge pull request #1373 from PlasmaPower/filesystem-test-skipping
Filesystem feature detection and test skipping
==
==================
661e8eb;anarcat;2016-08-02 10:21:35 -0400;point to code, issues and support in devel section
real story: users that are also developpers expect to find out where
to submit issues and pull requests in the development section, but
couldn't. add some meat there and point to the support section for
everything else.

==

docs/development.rst
==================
29e5e55;TW;2016-08-02 23:29:39 +0200;Merge pull request #1412 from ThomasWaldmann/info-repo
borg info REPO
==
==================
770a892;Thomas Waldmann;2016-07-30 23:16:19 +0200;implement borg info REPO
currently it is just the same global stats also shown in "borg info ARCHIVE",
just without the archive-specific stats.

also: add separate test for "borg info".

==

src/borg/archive.py
src/borg/archiver.py
src/borg/testsuite/archive.py
src/borg/testsuite/archiver.py
==================
3456bb0;TW;2016-08-02 18:43:45 +0200;Merge pull request #1423 from leo-b/1.0-maint-version_placeholder
borgversion placeholder 1.0-maint
==
==================
54048a3;Alexander 'Leo' Bergolth;2016-07-28 09:30:46 +0200;add new placeholder {borgversion} substitute placeholders in --remote-path add BORG_VERSION environment variable before executing ssh command

==

borg/archiver.py
borg/helpers.py
borg/remote.py
==================
b7a5638;enkore;2016-08-01 15:51:53 +0200;Merge pull request #1413 from ThomasWaldmann/store-mountpoint-dirs
save mountpoint dirs, fixes #1033
==
==================
2b454fc;Thomas Waldmann;2016-07-31 00:25:53 +0200;save mountpoint dirs, fixes #1033

==

src/borg/archiver.py
==================
e5a3229;enkore;2016-07-31 23:27:36 +0200;Merge pull request #1417 from ThomasWaldmann/glibc-check
glibc check improved / faq added
==
==================
3079b64;enkore;2016-07-31 23:21:15 +0200;Merge pull request #1410 from ThomasWaldmann/doc-tweaks
docs: remove borg list example, be more specific about compression heuristics
==
==================
8e222d8;Thomas Waldmann;2016-07-31 14:42:34 +0200;glibc compatibility: add FAQ entry, fixes #491

==

docs/faq.rst
==================
e1a97c7;Thomas Waldmann;2016-07-31 14:20:06 +0200;glibc_check.py: improve / fix docstring

==

scripts/glibc_check.py
==================
d020c6f;TW;2016-07-31 13:37:38 +0200;Merge pull request #1414 from ThomasWaldmann/configurable-files-cache-ttl
implement BORG_FILES_CACHE_TTL, update FAQ
==
==================
2cfe940;enkore;2016-07-31 11:59:57 +0200;Merge pull request #1415 from ThomasWaldmann/update-faq-with-lock
add hint about borg with-lock to FAQ, fixes #1353
==
==================
b86b5d9;Lee Bousfield;2016-07-24 23:38:28 -0400;Filesystem feature detection and test skipping

==

conftest.py
src/borg/archive.py
src/borg/testsuite/__init__.py
src/borg/testsuite/archiver.py
src/borg/testsuite/platform.py
src/borg/testsuite/upgrader.py
==================
ad38f79;Thomas Waldmann;2016-07-31 02:04:56 +0200;add hint about borg with-lock to FAQ, fixes #1353

==

docs/faq.rst
==================
5f7b466;Thomas Waldmann;2016-07-31 01:33:46 +0200;implement BORG_FILES_CACHE_TTL, update FAQ
raise default ttl to 20 (previously: 10).

==

borg/cache.py
docs/faq.rst
docs/usage.rst
==================
2e969a7;enkore;2016-07-31 00:25:13 +0200;Merge pull request #1408 from ThomasWaldmann/fix-remote-repo-teardown
RemoteRepository init: always call close on exceptions, fixes #1370
==
==================
9865509;Thomas Waldmann;2016-07-30 21:21:45 +0200;docs: remove borg list example, be more specific about compression heuristics

==

docs/usage.rst
src/borg/archiver.py
==================
473b1d0;TW;2016-07-30 21:09:31 +0200;Merge pull request #1409 from ThomasWaldmann/fix-pkg-config-name
OS X: install pkg-config to build with FUSE support, fixes #1400
==
==================
4e737cb;Thomas Waldmann;2016-07-30 21:08:20 +0200;OS X: install pkg-config to build with FUSE support

==

Vagrantfile
docs/installation.rst
==================
5a83f74;Thomas Waldmann;2016-07-30 19:42:25 +0200;RemoteRepository init: always call close on exceptions, fixes #1370
This fixes the cosmetic issue that the cleanup happened in __del__ and caused an AssertionError there.

==

borg/remote.py
==================
02e229b;TW;2016-07-30 16:06:01 +0200;Merge pull request #1377 from enkore/issue/1060
Use atomic file writing and updating for configuration and key files
==
==================
e09a059;enkore;2016-07-30 16:04:59 +0200;Merge pull request #1336 from enkore/issue/1272
Check free space before committing
==
==================
1ccadd4;TW;2016-07-30 15:43:05 +0200;Merge pull request #1403 from ThomasWaldmann/fix-1125
FUSE: always create a root dir, fixes #1125
==
==================
2cb9533;TW;2016-07-30 15:28:29 +0200;Merge pull request #1402 from ThomasWaldmann/fix-1351
Fix 1351
==
==================
e9a73b8;Marian Beermann;2016-07-14 02:08:15 +0200;Check for sufficient free space before committing

==

docs/quickstart.rst
src/borg/_hashindex.c
src/borg/hashindex.pyx
src/borg/helpers.py
src/borg/repository.py
src/borg/testsuite/hashindex.py
src/borg/testsuite/helpers.py
src/borg/testsuite/repository.py
==================
389503d;Marian Beermann;2016-07-14 01:54:47 +0200;Repository.compact_segments: always save_space

==

src/borg/repository.py
src/borg/testsuite/repository.py
==================
63daa54;enkore;2016-07-30 00:02:42 +0200;Merge pull request #1335 from enkore/f/document-platforms
 Platform feature matrix 
==
==================
ba23265;Marian Beermann;2016-07-30 00:01:19 +0200;docs, development: link to appveyor

==

docs/development.rst
==================
4e3bfab;Marian Beermann;2016-07-30 00:01:05 +0200;docs, platform/features: linux has BSD flag emulation

==

docs/installation.rst
==================
3bdfe2a;TW;2016-07-29 21:03:05 +0200;Merge pull request #1217 from ThomasWaldmann/in-file-checkpoints
in-file checkpoints
==
==================
32320c2;Thomas Waldmann;2016-07-29 00:14:06 +0200;FUSE: always create a root dir, fixes #1125
also: refactor / deduplicate directory creation

==

borg/fuse.py
==================
e06b89a;TW;2016-07-28 22:34:03 +0200;Merge pull request #1401 from PlasmaPower/fuse-cache-partially-read
borg mount: cache partially read data chunks
==
==================
97383e9;Thomas Waldmann;2016-07-28 22:23:38 +0200;transform unpacker exception only at 1 place

==

borg/archive.py
==================
852c583;Thomas Waldmann;2016-07-28 22:12:34 +0200;handle unpacker exception with tighter scope

==

borg/archive.py
==================
edea587;Thomas Waldmann;2016-07-28 22:10:29 +0200;catch unpacker exceptions, resync, fixes #1351

==

borg/archive.py
==================
d126265;Lee Bousfield;2016-07-28 15:57:03 -0400;borg mount: cache partially read data chunks
Cherry-pick of bfb00df from master to 1.0-maint

==

borg/archiver.py
borg/fuse.py
==================
9f996da;TW;2016-07-28 20:18:32 +0200;Merge pull request #1380 from jzacsh/document-envvars-pitfalls
doc: quickstart on shell pitfalls for env. vars
==
==================
1eaf1b7;Jonathan Zacsh;2016-07-26 15:49:43 -0400;follow automation quickstart w/env. var pitfalls
Mostly commentary on proper `export` usage, pitfall w/sudo, and debugging tips.

==

docs/quickstart.rst
==================
999f0ae;Thomas Waldmann;2016-07-28 17:55:40 +0200;fix chunk refcounts considering part files

==

src/borg/archive.py
==================
04ad1d1;Thomas Waldmann;2016-07-22 00:19:56 +0200;use "part file", "part", etc. consistently
use .borg_part_N as filename to avoid collisions

==

docs/faq.rst
src/borg/archive.py
src/borg/archiver.py
src/borg/constants.py
src/borg/item.py
==================
a7fca52;Thomas Waldmann;2016-07-21 23:56:58 +0200;create part items rather than checkpoint items
checkpoint items: chunks abc, abcdef, abcdefghi, ....
part items: chunks abc, def, ghi

solves the "restore a big file over unstable connection issue" (not very comfortably, but
one can just extract one part after the other and concatenate them to get the full file)

==

docs/faq.rst
src/borg/archive.py
==================
e5bd6ce;Thomas Waldmann;2016-07-21 22:24:48 +0200;add --consider-checkpoint-files option, update FAQ

==

docs/faq.rst
src/borg/archive.py
src/borg/archiver.py
==================
0ea6745;Thomas Waldmann;2016-07-21 21:11:47 +0200;update faq: we have in-file checkpoints now
note: until there is some means to list and extract the (partial) checkpoint
items, we do not need to talk about them.

==

docs/faq.rst
==================
49233be;Thomas Waldmann;2016-06-27 00:25:05 +0200;filter out checkpoint files
do not:
- list them
- extract them
- diff them
- include them for recreate

==

src/borg/archive.py
==================
dd5f957;Thomas Waldmann;2016-06-26 18:07:01 +0200;in-file checkpoints, fixes #1198, fixes #1093
also: unify code for stdin and on-disk file processing

==

src/borg/archive.py
src/borg/constants.py
src/borg/item.py
==================
75d91c4;Thomas Waldmann;2016-06-26 17:20:29 +0200;file chunking: refactor code a little
so it directly works with item.chunks list instead of a temporary list.

==

src/borg/archive.py
==================
bda50b5;Thomas Waldmann;2016-06-26 17:14:13 +0200;stdin chunking: get Item into usable state early

==

src/borg/archive.py
==================
9226fc6;Thomas Waldmann;2016-06-26 16:59:38 +0200;split stat_attrs into cheap and expensive part
we already have stat results in st, so computing stat_simple_attrs is
rather cheap (except the username/groupname lookup maybe) and gets the
most important stuff right in the Item, so it is brought early into a
good state.

after chunking, stat_ext_attrs is called to add the more expensive-to-get
attributes, like bsdflags, xattrs and ACLs.

==

src/borg/archive.py
==================
0df4f1e;enkore;2016-07-28 19:13:28 +0200;Merge pull request #1397 from enkore/issue/1395
Fix some issues in --verify-data
==
==================
0ae48da;Marian Beermann;2016-07-28 18:41:19 +0200;ObjectNotFound: give ID as hex-string

==

src/borg/repository.py
==================
d0ec7e7;Marian Beermann;2016-07-28 18:41:08 +0200;Fix borg-check --verify-data failing with rebuilt objects
There are some instances where --repair would do something. In these
instances --verify-data would fail if --repair was not given also, since
the changes without --repair are only in the index, but not in the
repository.

==

src/borg/archive.py
==================
1b6b0cf;Marian Beermann;2016-07-28 18:40:20 +0200;Fix borg-check --verify-data tripping over ObjectNotFounds

==

src/borg/archive.py
==================
7942967;TW;2016-07-28 16:37:59 +0200;Merge pull request #1394 from PlasmaPower/trailing-whitespace
Remove trailing whitespace (master)
==
==================
b652f40;Lee Bousfield;2016-07-28 10:35:41 -0400;Remove trailing whitespace

==

docs/changes.rst
docs/deployment.rst
src/borg/platform/posix.pyx
==================
6c1c83c;TW;2016-07-28 14:36:48 +0200;Merge pull request #1389 from enkore/merge/1.0-maint3
Merge branch '1.0-maint' into master
==
==================
1bad3fc;Marian Beermann;2016-07-28 09:48:41 +0200;Merge branch '1.0-maint' into master

==
==================
10ecb17;TW;2016-07-28 01:15:32 +0200;Merge pull request #1386 from PlasmaPower/init-append-only
Add --append-only to borg init (1.0-maint)
==
==================
ac8c811;Marian Beermann;2016-07-28 00:29:23 +0200;Merge branch '1.0-maint' into master

==
==================
f811624;enkore;2016-07-28 00:17:26 +0200;Merge pull request #1388 from enkore/f/document-platforms2
Platform feature matrix
==
==================
c5fffbe;Marian Beermann;2016-07-27 23:54:15 +0200;Platform feature matrix

==

docs/development.rst
docs/faq.rst
docs/installation.rst
==================
769f9d8;TW;2016-07-27 17:07:21 +0200;Merge pull request #1387 from PlasmaPower/remove-trailing-whitespace
Remove trailing whitespace
==
==================
0a4a95e;Lee Bousfield;2016-07-27 09:12:52 -0400;Remove trailing whitespace

==

README.rst
docs/changes.rst
docs/installation.rst
docs/internals.rst
docs/misc/internals-picture.txt
docs/misc/prune-example.txt
tox.ini
==================
88a4989;Lee Bousfield;2016-07-22 13:58:53 -0400;Add --append-only to borg init

==

borg/archiver.py
borg/remote.py
borg/repository.py
==================
2e3fc9d;Marian Beermann;2016-07-26 22:49:25 +0200;SyncFile/SaveFile: default binary=False, just like open()

==

src/borg/cache.py
src/borg/key.py
src/borg/platform/base.py
src/borg/platform/linux.pyx
src/borg/repository.py
==================
863ab66;Marian Beermann;2016-07-26 22:40:23 +0200;SaveFile: unlink(tmppath): only ignore FileNotFoundError

==

src/borg/platform/base.py
==================
dec671d;Marian Beermann;2016-07-26 22:39:45 +0200;SaveFile: os.replace instead of rename

==

src/borg/platform/base.py
==================
e32dcc4;TW;2016-07-26 21:09:00 +0200;Merge pull request #1379 from PlasmaPower/stdio-broken-pipe
Ignore stdout/stderr broken pipe errors
==
==================
9fe4473;Lee Bousfield;2016-07-26 13:41:38 -0400;Ignore stdout/stderr broken pipe errors

==

borg/archiver.py
borg/helpers.py
==================
3c2d418;enkore;2016-07-23 23:45:16 +0200;Merge pull request #1368 from PlasmaPower/user-exists-value-error
Catch a ValueError when checking if a user exists
==
==================
ff108ef;Lee Bousfield;2016-07-23 15:03:22 -0400;Catch a ValueError when checking if a user exists

==

src/borg/testsuite/platform.py
==================
91a9c35;enkore;2016-07-23 20:15:24 +0200;Merge pull request #1367 from PlasmaPower/noatime-fix
Fixed noatime detection
==
==================
868586d;Lee Bousfield;2016-07-23 13:05:35 -0400;Fixed noatime detection

==

src/borg/testsuite/archiver.py
==================
ffdd3a5;TW;2016-07-23 16:43:19 +0200;Merge pull request #1365 from PlasmaPower/testing-outside-vagrant
Allow running tests outside of Vagrant
==
==================
88bffab;Lee Bousfield;2016-07-23 09:38:43 -0400;Allow running tests outside of Vagrant
Fixes #1361

==

src/borg/testsuite/platform.py
==================
c0615c7;TW;2016-07-23 16:18:10 +0200;Merge pull request #1358 from PlasmaPower/git-ignore-platform-c
Ignore generated platform C files
==
==================
2eef0fb;Lee Bousfield;2016-07-22 14:02:21 -0400;Ignore generated platform C files

==

.gitignore
==================
43b075e;TW;2016-07-23 10:40:40 +0200;Merge pull request #1360 from PlasmaPower/git-ignore-coverage
gitignore .coverage.*
==
==================
477b374;Lee Bousfield;2016-07-22 18:55:14 -0400;gitignore .coverage.*

==

.gitignore
==================
b33f8b4;Thomas Waldmann;2016-07-21 21:03:22 +0200;update faq with new 30 mins checkpoint interval

==

docs/faq.rst
==================
bc56cef;enkore;2016-07-18 12:56:44 +0200;Merge pull request #1348 from LocutusOfBorg/reproducible-build-stable
Use an OrderedDict for helptext, making the build reproducible
==
==================
69f8d3c;Chris Lamb;2016-07-18 12:14:48 +0200;Use an OrderedDict for helptext, making the build reproducible Closes #1346

==

borg/archiver.py
==================
95ce40b;TW;2016-07-18 08:06:36 +0200;Merge pull request #1334 from enkore/issue/1333
faq: 'A' unchanged file; remove ambiguous entry age sentence.
==
==================
a2ea1d7;TW;2016-07-18 07:56:50 +0200;Merge pull request #1344 from enkore/fix/merges
Fix some item subscripts that came from 1.0-maint
==
==================
52a72cf;Marian Beermann;2016-07-17 19:13:09 +0200;Fix some item subscripts that came from 1.0-maint

==

src/borg/archive.py
src/borg/archiver.py
==================
7e6d6bf;enkore;2016-07-15 22:28:21 +0200;Merge pull request #1331 from pankajkgarg/1.0-maint
Fixed the issue of absense of vagrant user on xenial64
==
==================
5f713ec;Pankaj Garg;2016-07-15 00:33:49 +0530;Fixed the issue of xenial64 box being unable to run because vagrant user is absent

==

Vagrantfile
==================
b9952ef;Marian Beermann;2016-07-15 00:43:49 +0200;faq: 'A' unchanged file; remove ambiguous entry age sentence.

==

docs/faq.rst
==================
963bdd3;TW;2016-07-14 14:53:21 +0200;Merge pull request #1330 from enkore/issue/972
recreate: fix hogged signal handlers
==
==================
361bf32;TW;2016-07-14 14:41:30 +0200;Merge pull request #1327 from enkore/issue/1324
Fix borg break-lock ignoring BORG_REPO env var
==
==================
eddda72;TW;2016-07-14 14:37:52 +0200;Merge pull request #1329 from enkore/merge/1.0-maint2
Merge branch '1.0-maint' into master
==
==================
fcb6930;Marian Beermann;2016-07-14 02:11:11 +0200;recreate: fix hogged signal handlers

==

src/borg/archiver.py
src/borg/helpers.py
==================
2e6eb63;Marian Beermann;2016-07-14 01:28:21 +0200;Merge branch '1.0-maint' into master

==
==================
7053a72;Marian Beermann;2016-07-13 20:04:20 +0200;Fix borg break-lock ignoring BORG_REPO env var

==

borg/archiver.py
==================
bbb280c;Thomas Waldmann;2016-07-12 23:10:13 +0200;ran build_usage

==

docs/usage/help.rst.inc
==================
52cc8a9;TW;2016-07-12 22:49:04 +0200;Merge pull request #1323 from enkore/changes/1.0.6
update CHANGES for 1.0.6
==
==================
06a1a89;Marian Beermann;2016-07-12 20:55:26 +0200;update CHANGES

==

docs/changes.rst
==================
841d0fd;enkore;2016-07-12 20:14:04 +0200;Merge pull request #1317 from enkore/issue/1315
test_atime: try to open with O_NOATIME to determine support
==
==================
8474f4e;enkore;2016-07-12 16:46:32 +0200;Merge pull request #1320 from enkore/issue/1314
Correctly handle multiple LD_PRELOAD entries
==
==================
4891d33;Marian Beermann;2016-07-12 16:45:20 +0200;test_atime: detect O_NOATIME support by checking atime and flags

==

borg/testsuite/archiver.py
==================
70c2d69;Marian Beermann;2016-07-12 16:07:22 +0200;xattr LD_PRELOAD: diaper

==

borg/xattr.py
==================
2c61652;James Clarke;2016-06-19 22:04:03 +0100;Correctly handle multiple LD_PRELOAD entries; fixes #1111

==

borg/xattr.py
==================
c07d91e;Marian Beermann;2016-07-12 14:42:00 +0200;test_atime: exclude GNU Hurd from this test
It has O_NOATIME, opening doesn't fail with EPERM, but it still updates
the atime of the file.

==

borg/testsuite/archiver.py
==================
e28c2d4;TW;2016-07-12 14:09:06 +0200;Merge pull request #1318 from enkore/issue/1314
xattr: don't log before logging is set up
==
==================
0e0f487;Marian Beermann;2016-07-12 13:17:54 +0200;test_atime: try to open with O_NOATIME to determine support

==

borg/testsuite/archiver.py
==================
98530ff;Marian Beermann;2016-07-12 11:57:58 +0200;xattr: don't log before logging is set up

==

borg/xattr.py
==================
131d238;TW;2016-07-11 23:19:30 +0200;Merge pull request #1313 from ThomasWaldmann/fix-highlighting
docs: fix the highlighting
==
==================
cf4d761;Thomas Waldmann;2016-07-11 23:16:53 +0200;docs: fix the highlighting
default is "python", that's why some help fragments and bash scripts looked strange.

==

README.rst
docs/api.rst
docs/deployment.rst
docs/development.rst
docs/faq.rst
docs/installation.rst
docs/internals.rst
docs/quickstart.rst
docs/usage.rst
==================
b48de14;enkore;2016-07-11 21:30:35 +0200;Merge pull request #1312 from ThomasWaldmann/improve-sparse-test
more compatible sparse file testing, fixes #1310
==
==================
0fb6cb8;Thomas Waldmann;2016-07-11 20:20:10 +0200;more compatible sparse file testing, fixes #1310
removed the pointless platform check.

just first test the input file with the same checks we expect succeeding
on the extracted file. skip sparse archiving / extraction testing if the input
file checks fail - likely we have a problem with the OS or the FS then.

==

borg/testsuite/archiver.py
==================
8c48023;Thomas Waldmann;2016-07-11 02:47:43 +0200;add picture made by anarcat

==

docs/misc/internals-picture.txt
==================
3baa8a3;Thomas Waldmann;2016-07-11 01:23:27 +0200;Merge branch '1.0-maint'
# Conflicts:
#	docs/changes.rst
#	docs/usage/mount.rst.inc
#	src/borg/archive.py
#	src/borg/archiver.py
#	src/borg/fuse.py
#	src/borg/testsuite/archiver.py

==
==================
b8198c4;Thomas Waldmann;2016-07-10 19:00:55 +0200;ran build_usage

==

docs/usage/check.rst.inc
docs/usage/mount.rst.inc
==================
f39b44c;enkore;2016-07-10 18:51:47 +0200;Merge pull request #1308 from ThomasWaldmann/update-1.0-changes
update CHANGES
==
==================
232abd1;Thomas Waldmann;2016-07-10 18:37:30 +0200;update CHANGES

==

docs/changes.rst
==================
e50c789;TW;2016-07-10 17:51:28 +0200;Merge pull request #1304 from ThomasWaldmann/binary-test-issue-rmtreefail
binary test issues
==
==================
2639b5d;enkore;2016-07-10 17:43:54 +0200;Merge pull request #1303 from enkore/issue/1302
fuse: EIO on damaged files unless told not to (-o allow_damaged_files)
==
==================
57dcb93;TW;2016-07-10 17:27:15 +0200;Merge pull request #1306 from ThomasWaldmann/docs-issues
docs issues
==
==================
4fecd22;Thomas Waldmann;2016-07-10 03:05:28 +0200;api.rst: remove problematic stuff, fixes #881
some cython stuff can't be processed by sphinx.
some platform-dependant modules can't get imported.

also: reordered modules in api.rst so order makes some sense.

==

docs/api.rst
==================
2f21488;Thomas Waldmann;2016-07-10 02:45:36 +0200;fix most python-source related sphinx warnings

==

borg/helpers.py
borg/locking.py
borg/shellpattern.py
docs/usage/help.rst.inc
==================
5660cd1;Thomas Waldmann;2016-07-10 02:32:58 +0200;fix most non-python-source related sphinx warnings
literal blocks must be followed by an empty line

suppressed the non-local image uri warning via sphinx config

the links on the resources page must have different label texts

setup.py: do not generate pointless "::\n" - it does not create a literal block if the stuff below is not indented

==

borg/archiver.py
docs/conf.py
docs/resources.rst
setup.py
==================
1c7bdcd;Marian Beermann;2016-07-10 17:25:38 +0200;test_fuse_allow_damaged_files: assert exact error code

==

borg/testsuite/archiver.py
==================
5a952ec;Marian Beermann;2016-07-10 00:20:11 +0200;fuse: clean imports, move mount to after __init__ *
* since the two are always called in direct succession and
  perform related setup.

==

borg/fuse.py
==================
cb4a52e;Marian Beermann;2016-07-10 02:19:27 +0200;fuse: EIO on damaged files unless told not to (-o allow_damaged_files)

==

borg/archiver.py
borg/fuse.py
borg/testsuite/__init__.py
borg/testsuite/archiver.py
==================
12f7455;TW;2016-07-10 01:19:56 +0200;Merge pull request #1305 from enkore/f/changelog-dated
changelog: Added release dates to older borg releases
==
==================
c4a8c53;Marian Beermann;2016-07-10 00:55:40 +0200;changelog: Added release dates to older borg releases

==

docs/changes.rst
==================
35c39b5;Thomas Waldmann;2016-07-10 00:17:12 +0200;skip 2 usually failing tests for the binary, see #862
likely related to the subprocess being created for the binary and fakeroot.

==

borg/testsuite/archiver.py
==================
73e4635;enkore;2016-07-10 00:09:42 +0200;Merge pull request #1300 from ThomasWaldmann/heal-items
heal items
==
==================
984bb0a;Thomas Waldmann;2016-07-09 23:57:37 +0200;use ignore_errors=True workaround for test teardown cleanup, see #862

==

borg/testsuite/archiver.py
==================
ad1be9d;enkore;2016-07-09 21:18:10 +0200;Merge pull request #1301 from ThomasWaldmann/warn-extract-damaged
warn if a file with damaged chunks is extracted, fixes #1299
==
==================
f4be2b3;Marian Beermann;2016-07-09 21:10:46 +0200;Use platform.SaveFile for repository, cache and key files
Fixes #1060

==

src/borg/cache.py
src/borg/key.py
src/borg/repository.py
==================
36ebc82;Marian Beermann;2016-07-09 21:07:56 +0200;Add platform.SaveFile

==

src/borg/platform/__init__.py
src/borg/platform/base.py
src/borg/platform/linux.pyx
==================
403cdd5;Thomas Waldmann;2016-07-09 20:58:02 +0200;update help about healing

==

borg/archiver.py
==================
0668cdf;Thomas Waldmann;2016-07-09 20:45:26 +0200;add test for healing

==

borg/testsuite/archiver.py
==================
48f112e;Thomas Waldmann;2016-07-09 18:19:25 +0200;warn if a file with damaged chunks is extracted, fixes #1299
before 1.0.4/1.0.5 we had no means to tell if a file has been "repaired" with all-zero
chunks, but now we can see it if chunks_healthy key is present.

==

borg/archive.py
==================
9b4bf8d;enkore;2016-07-09 17:49:50 +0200;Merge pull request #1296 from enkore/issue/1295
fuse: fix directories being shadowed when contained paths where also …
==
==================
c163349;enkore;2016-07-09 17:44:41 +0200;Merge pull request #1294 from enkore/f/hashindex-rc
Fix missing return code check in ChunkIndex._add
==
==================
1e32ed1;enkore;2016-07-09 17:44:10 +0200;Merge pull request #1298 from ThomasWaldmann/borg-check-hash-load
fix/optimize initial hash table size for borg check
==
==================
85fe7d7;Thomas Waldmann;2016-07-09 16:38:07 +0200;heal files if missing chunks re-appear, fixes #148
also: improve logging for archive check

==

borg/archive.py
==================
409ab9f;Thomas Waldmann;2016-07-09 14:36:09 +0200;fix/optimize initial hash table size for borg check
initial size should be so that the hash table does not need resizing -
it must always stay below the MAX_LOAD_FACTOR.

==

borg/archive.py
==================
39f4841;Marian Beermann;2016-07-09 02:28:54 +0200;fuse: fix directories being shadowed when contained paths where also specified

==

borg/fuse.py
==================
02bb79d;Marian Beermann;2016-07-09 01:34:59 +0200;hashindex.c: hashindex_resize check hashindex_set rc (contract)

==

borg/_hashindex.c
==================
5d2dbff;Marian Beermann;2016-07-09 01:26:59 +0200;hashindex: remove declarations of removed functions

==

borg/hashindex.pyx
==================
3a81a94;Marian Beermann;2016-07-09 01:26:24 +0200;Fix missing return code check in ChunkIndex._add
(used by ChunkIndex.merge and ChunkIndex.add)

==

borg/hashindex.pyx
==================
9bfd233;enkore;2016-07-08 22:19:48 +0200;Merge pull request #1292 from ThomasWaldmann/more-fuse-tests
More fuse tests
==
==================
edb7051;Thomas Waldmann;2016-07-08 21:54:25 +0200;add more FUSE tests, fixes #1284

==

borg/testsuite/archiver.py
==================
846febb;Thomas Waldmann;2016-07-08 19:53:14 +0200;merge both fuse mounting tests

==

borg/testsuite/archiver.py
==================
41348a7;Thomas Waldmann;2016-07-08 19:18:03 +0200;deduplicate fuse (u)mount code

==

borg/testsuite/__init__.py
borg/testsuite/archiver.py
==================
f0930b8;Thomas Waldmann;2016-07-08 18:58:44 +0200;Merge branch '1.0-maint'

==
==================
4f7a211;TW;2016-07-08 18:31:26 +0200;Merge pull request #1290 from enkore/issue/1287-bp
sync_dir: silence fsync() failing with EINVAL
==
==================
567617e;Marian Beermann;2016-07-08 18:05:21 +0200;sync_dir: silence fsync() failing with EINVAL

==

src/borg/platform/base.py
==================
f1d3fd4;TW;2016-07-08 17:56:57 +0200;Merge pull request #1288 from enkore/issue/1287
sync_dir: silence fsync() failing with EINVAL
==
==================
0005023;Marian Beermann;2016-07-08 17:36:30 +0200;sync_dir: silence fsync() failing with EINVAL
Some network filesystems don't support this.

==

borg/platform.py
==================
65475ea;TW;2016-07-08 14:00:07 +0200;Merge pull request #1286 from enkore/issue/1269
Remove InternalOSError
==
==================
73ba642;TW;2016-07-08 13:49:51 +0200;Merge pull request #1285 from enkore/issue/1222
wrap get_flags with backup_io
==
==================
6c3ca63;Marian Beermann;2016-07-08 13:35:12 +0200;Remove InternalOSError
obsoleted by 5b453856ec23 and e96905c6b

==

src/borg/helpers.py
src/borg/repository.py
src/borg/testsuite/repository.py
==================
11e0246;Marian Beermann;2016-07-08 13:29:48 +0200;1.0-maint merge fixup (hexlify..decode -> bin_to_hex)

==

src/borg/archive.py
==================
aade62c;Marian Beermann;2016-07-08 13:26:06 +0200;wrap get_flags with backup_io

==

src/borg/archive.py
src/borg/archiver.py
==================
fe62724;Thomas Waldmann;2016-07-08 12:13:52 +0200;Merge branch '1.0-maint'

==
==================
66cc520;Thomas Waldmann;2016-07-07 22:25:49 +0200;update CHANGES

==

docs/changes.rst
==================
88e7b53;TW;2016-07-07 22:17:14 +0200;Merge pull request #1283 from ThomasWaldmann/backports-from-master-faq
backport some FAQ entries from master branch
==
==================
1fe3781;Thomas Waldmann;2016-07-07 21:56:06 +0200;backport some FAQ entries from master branch

==

docs/faq.rst
docs/usage.rst
==================
1b92151;TW;2016-07-07 21:13:47 +0200;Merge pull request #1281 from enkore/fix/fuse-xattr-crash
Fix FUSE crash in xattr code on Linux
==
==================
31bbdc3;Marian Beermann;2016-07-07 20:33:44 +0200;Fix FUSE crash in xattr code on Linux introduced in 4d7b0f35

==

borg/fuse.py
==================
f0026d7;Thomas Waldmann;2016-07-07 19:02:50 +0200;add release helper scripts

==

scripts/release
scripts/sign-binaries
==================
a80dad0;Thomas Waldmann;2016-07-07 17:50:30 +0200;Vagrantfile: centos6: no FUSE, don't build binary
Trying to install llfuse breaks borg installation (lots of compiler errors).

Also, we're building the binaries on Debian wheezy since a while, no need
to build them on centos6. Esp. since the Centos6 based binaries showed
strange slowness in the past.

==

Vagrantfile
==================
a4c9909;Thomas Waldmann;2016-07-07 17:45:42 +0200;Vagrantfile: add xz for redhat-like dists
It was missing on centos6 and then pyenv fails to install the pythons.

==

Vagrantfile
==================
3218c59;Thomas Waldmann;2016-07-07 05:04:19 +0200;ran build_api / build_usage

==

docs/api.rst
docs/usage/help.rst.inc
==================
a4603cf;Thomas Waldmann;2016-07-07 04:57:44 +0200;update CHANGES

==

docs/changes.rst
==================
cc1d1d4;TW;2016-07-07 04:25:17 +0200;Merge pull request #1279 from ThomasWaldmann/netbsd-no-fuse
do not install llfuse on netbsd (broken)
==
==================
d6d4d31;Thomas Waldmann;2016-07-07 04:23:07 +0200;do not install llfuse on netbsd (broken)
it even breaks the whole build / installation.

==

Vagrantfile
==================
91d1a4f;TW;2016-07-07 04:12:47 +0200;Merge pull request #1278 from ThomasWaldmann/update-cygwin-docs
update cygwin installation docs
==
==================
694db39;TW;2016-07-07 04:01:31 +0200;Merge pull request #1277 from ThomasWaldmann/fuse-xattr-errcode
fuse: getxattr fail must use errno.ENOATTR, fixes #1126
==
==================
4d7b0f3;Thomas Waldmann;2016-07-07 03:38:21 +0200;fuse: getxattr fail must use errno.ENOATTR, fixes #1126
The problem was that OS X Finder queried some OS X specific xattrs
and if they were not present, the wrong errno (ENODATA) was included
in the raised FUSEError exception. According to the llfuse docs, the
errno must be ENOATTR for this case.

Obviously, Finder didn't handle this well and denied access to the
file. Also, file size was displayed as "zero bytes" although we
return the correct value.

==

borg/fuse.py
==================
6987b8b;TW;2016-07-07 03:34:03 +0200;Merge pull request #1276 from ThomasWaldmann/update-osxfuse
update OSXfuse to version 3.3.3
==
==================
135d082;Thomas Waldmann;2016-07-07 03:31:26 +0200;update OSXfuse to version 3.3.3

==

Vagrantfile
==================
d0c1662;TW;2016-07-06 23:34:50 +0200;Merge pull request #1275 from ThomasWaldmann/healthy-chunks-list
fixup: only create chunks_healthy if we actually replaced chunks
==
==================
b0b2ebb;Thomas Waldmann;2016-07-06 23:10:04 +0200;fixup: only create chunks_healthy if we actually replaced chunks

==

borg/archive.py
==================
acda5bc;TW;2016-07-06 22:59:56 +0200;Merge pull request #1274 from ThomasWaldmann/healthy-chunks-list
repair: remember the good chunks
==
==================
5105a0a;Thomas Waldmann;2016-07-06 22:42:18 +0200;repair: remember the good chunks
if we do not lose the original chunk ids list when "repairing" a file (replacing missing
chunks with all-zero chunks), we have a chance to heal the file back into its original
state later, in case the chunks re-appear (e.g. in a fresh backup).

==

borg/archive.py
==================
a1f8a23;TW;2016-07-06 20:50:57 +0200;Merge pull request #1074 from ThomasWaldmann/travis-trusty
Travis using ubuntu trusty
==
==================
735d058;Thomas Waldmann;2016-05-21 19:29:04 +0200;travis: use ubuntu trusty beta infrastructure (not: precise)
use python 3.5.2 on trusty travis-ci machines
their 3.5(.0) misses lzma support at the moment.
after this is fixed, we likely want to go back to 3.5(.0) to run the tests.

==

.travis.yml
.travis/install.sh
==================
12f55f4;Thomas Waldmann;2016-07-06 01:33:53 +0200;Merge branch '1.0-maint'

==
==================
8db670c;Thomas Waldmann;2016-07-06 00:37:01 +0200;update CHANGES

==

docs/changes.rst
==================
9fa8aa4;TW;2016-07-06 00:23:55 +0200;Merge pull request #1263 from enkore/issue/1262
Repository: cleanup on ENOSPC
==
==================
e825f17;TW;2016-07-06 00:22:32 +0200;Merge pull request #1271 from ThomasWaldmann/autogenerated-hint
auto-generated hint, fixes #1250
==
==================
3346025;TW;2016-07-05 23:31:36 +0200;Merge pull request #1270 from ThomasWaldmann/scripts
Scripts
==
==================
740c638;Thomas Waldmann;2016-07-05 23:30:08 +0200;update usage files

==

docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/debug-delete-obj.rst.inc
docs/usage/debug-dump-archive-items.rst.inc
docs/usage/debug-get-obj.rst.inc
docs/usage/debug-put-obj.rst.inc
docs/usage/delete.rst.inc
docs/usage/extract.rst.inc
docs/usage/help.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/list.rst.inc
docs/usage/migrate-to-repokey.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/upgrade.rst.inc
==================
2f2925e;Thomas Waldmann;2016-07-05 23:29:23 +0200;add a do-not-edit note to auto-generated files

==

setup.py
==================
e0f549a;Thomas Waldmann;2016-07-05 22:45:25 +0200;move the hash sizes script also to scripts/

==

borg/hash_sizes.py
scripts/hash_sizes.py
==================
e023053;Thomas Waldmann;2016-07-05 22:43:38 +0200;add a glibc compat check script

==

scripts/glibc_check.py
==================
7ed425d;Marian Beermann;2016-07-05 11:58:44 +0200;Repository: cleanup on ENOSPC

==

borg/repository.py
docs/internals.rst
docs/quickstart.rst
==================
2922948;Jens Rantil;2016-07-05 17:28:24 +0200;Update faq.rst
Fix misspelling.
==

docs/faq.rst
==================
7987434;TW;2016-07-05 17:33:56 +0200;Merge pull request #1266 from ThomasWaldmann/fix-chown-cygwin
catch "invalid argument" on cygwin, fixes #257
==
==================
8a040f7;TW;2016-07-05 17:33:21 +0200;Merge pull request #1265 from ThomasWaldmann/fix-sparse-test-prep
sparse test: fix sparseness assertion in test prep, fixes #1264
==
==================
72a7c0b;Thomas Waldmann;2016-07-05 17:20:23 +0200;catch "invalid argument" on cygwin, fixes #257
obviously cygwin (windows) does not like the made-up uid 100 gid 200
and raises "invalid argument" OSError.

==

borg/testsuite/archiver.py
==================
498d4b1;Thomas Waldmann;2016-07-05 16:49:50 +0200;sparse test: fix sparseness assertion in test prep, fixes #1264
use the same condition for the input file as also later for the extracted file.

the test preparation sparseness assertion failed on cygwin / ntfs, because the
input file uses ~40MB in blocks vs. total_len ~80MB.

==

borg/testsuite/archiver.py
==================
6977fcf;TW;2016-07-05 01:04:48 +0200;Merge pull request #1202 from ThomasWaldmann/update-1.0-changes
update CHANGES
==
==================
19d1bbf;Thomas Waldmann;2016-07-05 00:44:00 +0200;add advice about issue #1138, fixes #1223

==

docs/changes.rst
==================
54e5667;Thomas Waldmann;2016-06-25 02:33:49 +0200;update CHANGES

==

docs/changes.rst
==================
2fd6e5c;enkore;2016-07-04 23:38:02 +0200;Merge pull request #1260 from ThomasWaldmann/update-frontpage
update frontpage / support docs
==
==================
65c1f40;TW;2016-07-04 23:36:17 +0200;Merge pull request #1261 from dragetd/patch-doc-compression
Update docs about lzma compression levels above 6
==
==================
ee2ba29;enkore;2016-07-04 23:33:43 +0200;Merge pull request #1259 from ThomasWaldmann/env-var-remote-path
add missing BORG_REMOTE_PATH env var, fixes #1258
==
==================
3811447;TW;2016-07-04 23:32:10 +0200;Merge pull request #1239 from ThomasWaldmann/forced-archive-delete
Forced archive delete
==
==================
07d0a61;Thomas Waldmann;2016-07-01 04:27:06 +0200;forced archive deletion, fixes #1139

==

borg/archive.py
borg/archiver.py
==================
20eab2b;Thomas Waldmann;2016-07-04 22:37:24 +0200;update frontpage / support docs
less items in frontpage link list
add IRC chat link
minor other changes

==

README.rst
docs/support.rst
==================
0b48876;Michael Gajda;2016-07-04 21:51:11 +0200;Update docs about lzma compreesion levels above 6
lzma compression levels above 6 do not increase compression ration but waste a lot of cpu cycles.

==

docs/usage/create.rst.inc
==================
f363ddd;Thomas Waldmann;2016-07-04 19:07:37 +0200;Merge branch '1.0-maint'

==
==================
3325126;Thomas Waldmann;2016-07-04 15:06:20 +0200;add missing BORG_REMOTE_PATH env var, fixes #1258

==

borg/archiver.py
borg/remote.py
docs/usage.rst
==================
458edf3;TW;2016-07-04 14:29:34 +0200;Merge pull request #1242 from ThomasWaldmann/fix-1214
fixes for --read-special mode
==
==================
d59a1d5;Thomas Waldmann;2016-07-02 21:34:45 +0200;doc and help update for --read-special

==

borg/archiver.py
docs/usage.rst
==================
00a5470;Thomas Waldmann;2016-07-02 21:04:51 +0200;symlink processing for --read-special mode
processing depends on symlink target:
- if target is a special file: process the symlink as a regular file
- if target is anything else: process the symlink as symlink

refactor code a little to avoid duplication.

==

borg/archive.py
borg/archiver.py
==================
5476ece;Thomas Waldmann;2016-07-02 20:17:07 +0200;fake regular file mode for --read-special mode, fixes #1214

==

borg/archive.py
==================
a3ef692;Thomas Waldmann;2016-07-02 19:44:26 +0200;reimplement --read-special, fixes #1241

==

borg/archive.py
borg/archiver.py
==================
58515d0;Thomas Waldmann;2016-07-02 18:51:03 +0200;remove old implementation of --read-special
this was a bit too simple, better implementation see next changesets.

==

borg/archiver.py
==================
7c8783e;Thomas Waldmann;2016-07-02 18:47:22 +0200;Revert "in --read-special mode, follow symlinks, fixes #1215"
This reverts commit c3073bacbb4850cf3a526ac08db42b05f3e33684.

Needs to be solved differently, see following changesets.

==

borg/archiver.py
==================
c959740;enkore;2016-07-04 09:02:35 +0200;Merge pull request #1255 from enkore/issue/1235
Repository: Read v2 hints files
==
==================
eea4692;TW;2016-07-04 04:40:27 +0200;Merge pull request #1234 from enkore/issue/1231
Implement fail-safe error handling for borg-extract 
==
==================
7231107;Thomas Waldmann;2016-07-04 03:47:54 +0200;update cygwin installation docs
cython is installed with pip later.
liblz4 is available from normal cygwin packages now.
creation of virtualenv worked now without issues.

==

docs/installation.rst
==================
f3aaffd;Marian Beermann;2016-07-04 00:55:12 +0200;Repository: fix hints file unknown version error handling bug

==

borg/repository.py
==================
e774045;Marian Beermann;2016-07-04 00:44:25 +0200;Repository: Read v2 hints files
Fixes #1235

==

borg/repository.py
==================
93f4b09;Marian Beermann;2016-07-03 23:58:12 +0200;BackupOSError documentation

==

borg/archive.py
==================
7db952a;Marian Beermann;2016-07-03 23:57:55 +0200;fixup rename

==

borg/archive.py
borg/testsuite/archive.py
==================
59077e5;TW;2016-07-03 17:41:31 +0200;Merge pull request #1251 from nomeata/1.0-maint
Documentation: Explicate that Fnmatch is default
==
==================
f6deb09;Joachim Breitner;2016-07-03 16:27:02 +0200;Documentation: Explicate that Fnmatch is default
This fixes #1247. It also regenerates the usage documentation, so that
styling fixex in that section (as well as other existing changes) make
it into the files in docs/.

==

borg/archiver.py
docs/usage/create.rst.inc
docs/usage/help.rst.inc
docs/usage/prune.rst.inc
docs/usage/serve.rst.inc
==================
4e3eafa;TW;2016-07-03 12:57:35 +0200;Merge pull request #1245 from ThomasWaldmann/fix-1197
close the repo on exit - even if rollback did not work, fixes #1197
==
==================
9725c03;Thomas Waldmann;2016-07-03 02:58:17 +0200;close the repo on exit - even if rollback did not work, fixes #1197

==

borg/remote.py
==================
9ae1351;enkore;2016-07-02 13:49:16 +0200;Merge pull request #1238 from ThomasWaldmann/double-sync
sync the containing directory also
==
==================
99566a3;Thomas Waldmann;2016-07-01 02:07:30 +0200;sync the containing directory also

==

borg/platform.py
borg/repository.py
==================
74e5e75;enkore;2016-07-01 01:56:02 +0200;Merge pull request #1237 from ThomasWaldmann/double-sync
make sure data hits disk before commit tag, fixes #1236
==
==================
fde5a60;Thomas Waldmann;2016-07-01 01:11:12 +0200;make sure data hits disk before commit tag, fixes #1236

==

borg/repository.py
==================
02c72b9;TW;2016-07-01 00:30:15 +0200;Merge pull request #1232 from PlasmaPower/serve-append-only
Add --append-only to borg serve (1.0-maint)
==
==================
26bf500;Marian Beermann;2016-07-01 00:07:38 +0200;Add missing error handler in directory attr restore loop (2/2)

==

borg/archiver.py
==================
e365d64;Marian Beermann;2016-07-01 00:06:21 +0200;Add missing error handler in directory attr restore loop (1/2)

==

borg/archiver.py
==================
b241f95;Marian Beermann;2016-07-01 00:14:10 +0200;Implement fail-safe error handling for borg-extract
Note that this isn't nearly as critical as the other error handling bug,
since nothing is written. So it's "merely" misleading error reporting.

==

borg/archive.py
borg/archiver.py
==================
5e260fd;Marian Beermann;2016-07-01 00:13:53 +0200;Rename input_io*() -> backup_io*()

==

borg/archive.py
borg/archiver.py
borg/testsuite/archive.py
==================
93b740a;TW;2016-07-01 00:06:14 +0200;Merge pull request #1233 from PlasmaPower/git-ignore-eggs
Add .eggs to .gitignore
==
==================
58e42de;Lee Bousfield;2016-06-30 18:00:39 -0400;Add .eggs to .gitignore

==

.gitignore
==================
c515d60;Lee Bousfield;2016-06-30 11:59:12 -0400;Add --append-only to borg serve
Fixes #1168

==

borg/archiver.py
borg/remote.py
borg/repository.py
borg/testsuite/repository.py
docs/usage.rst
==================
69f73b1;enkore;2016-06-30 17:09:56 +0200;Merge pull request #1227 from ThomasWaldmann/checkpoint-interval
increase checkpoint-interval default from 300 to 1800s, fixes #896
==
==================
87d6755;Thomas Waldmann;2016-06-29 18:28:33 +0200;Merge branch '1.0-maint'

==
==================
1242653;enkore;2016-06-29 17:12:11 +0200;Merge pull request #1216 from ThomasWaldmann/read-special-follow-symlink
in --read-special mode, follow symlinks, fixes #1215
==
==================
67c6999;enkore;2016-06-29 17:07:51 +0200;Merge pull request #1211 from enkore/issue/1138
Fix incorrect propagation of OSErrors in create code
==
==================
b0eb1af;enkore;2016-06-29 17:00:47 +0200;Merge pull request #1218 from ThomasWaldmann/fix-vagrant-openbsd
Vagrantfile: use openbsd 5.9, fixes #716
==
==================
523ea29;enkore;2016-06-29 16:57:43 +0200;Merge pull request #1212 from ThomasWaldmann/prune-example
add prune visualization / example, fixes #723
==
==================
e81fc43;Thomas Waldmann;2016-06-29 01:04:24 +0200;Vagrantfile: use openbsd 5.9, fixes #716
machine already has python3.4.
rsync works now.
fuse does not work on openbsd (and breaks borg install, if tried).

==

Vagrantfile
==================
c3073ba;Thomas Waldmann;2016-06-28 18:49:51 +0200;in --read-special mode, follow symlinks, fixes #1215

==

borg/archiver.py
==================
e96905c;Marian Beermann;2016-06-27 22:44:41 +0200;Fix error swallowing of ignored responses in RPC code

==

borg/remote.py
==================
431441f;Marian Beermann;2016-06-27 22:00:24 +0200;input_io_* tests

==

borg/testsuite/archive.py
==================
c773c88;Thomas Waldmann;2016-06-27 21:20:12 +0200;add prune visualization / example, fixes #723

==

docs/misc/prune-example.txt
docs/usage.rst
==================
5b45385;Marian Beermann;2016-06-27 20:56:41 +0200;Fix incorrect propagation of OSErrors in create code

==

borg/archive.py
borg/archiver.py
==================
c201654;Thomas Waldmann;2016-06-27 20:05:20 +0200;increase checkpoint-interval default from 300 to 1800s, fixes #896
doing a checkpoint can be expensive, if the repo connection is slow and/or
accessed via a network filesystem and/or the repo is large.

thus: don't do it too often.

==

src/borg/archiver.py
==================
49feacf;TW;2016-06-27 19:55:23 +0200;Merge pull request #1210 from ThomasWaldmann/build-binaries-with-3.5.2
use python 3.5.2 to build the binaries
==
==================
c6a72bb;Thomas Waldmann;2016-06-27 18:42:12 +0200;use python 3.5.2 to build the binaries

==

Vagrantfile
==================
6a5121a;TW;2016-06-27 17:22:12 +0200;Merge pull request #1207 from ThomasWaldmann/issue-1205
use bytes type for ACL attributes, fixes #1205
==
==================
5791b89;Thomas Waldmann;2016-06-26 23:04:04 +0200;use bytes type for ACL attributes, fixes #1205
this saves some encoding / decoding dance compared to having a str interface.

==

src/borg/item.py
==================
323894d;Thomas Waldmann;2016-06-26 20:46:12 +0200;Merge branch '1.0-maint'

==
==================
36b1863;Thomas Waldmann;2016-06-26 20:45:22 +0200;use long long for AES block counter, fixes #1206

==

borg/crypto.pyx
==================
ed128e5;Thomas Waldmann;2016-06-25 17:18:14 +0200;Merge branch '1.0-maint'

==
==================
79c59bf;TW;2016-06-25 15:31:53 +0200;Merge pull request #1201 from ThomasWaldmann/doc-updates
Doc updates
==
==================
b10025c;Thomas Waldmann;2016-06-24 23:30:27 +0200;document sshd settings, fixes #545

==

docs/faq.rst
==================
f54f159;Thomas Waldmann;2016-06-24 22:32:38 +0200;more details about checkpoints, add split trick, fixes #1171

==

docs/faq.rst
==================
ad65c5a;Thomas Waldmann;2016-06-24 21:48:21 +0200;support docs: add freenode web chat link, fixes #1175

==

docs/support.rst
==================
3ff6ac0;TW;2016-06-24 18:29:03 +0200;Merge pull request #1179 from Abogical/list-format
Apply --format when listing repository archives, fixes #1166
==
==================
c2eae54;TW;2016-06-24 17:53:54 +0200;Merge pull request #1199 from verygreen/bug1195
Ignore empty index file.
==
==================
13b6f17;enkore;2016-06-24 17:20:07 +0200;Merge pull request #1193 from ThomasWaldmann/openssl-1.0-1.1-compat
OpenSSL 1.0 and 1.1 compatibility
==
==================
f99792d;Oleg Drokin;2016-06-23 13:00:05 -0400;Ignore empty index file.
Empty index file is most likely a result from an unclean
shutdown in the middle of write, e.g. on ext4 with delayed
allocation enabled (default).
Ignoring such a file would get it recreated by other parts of code,
where as not ignoring it leads to an exception about
not being able to read enough bytes from the index.

this commit fixes #1195

Signed-off-by: Oleg Drokin <green@linuxhacker.ru>

==

borg/repository.py
==================
5b34483;enkore;2016-06-23 17:38:04 +0200;Merge pull request #1194 from ThomasWaldmann/more-placeholders
add placeholder support at missing places, add missing help
==
==================
12cb66b;Thomas Waldmann;2016-06-22 08:44:14 +0200;fix "patterns" help formatting, too
this way it renders nicely in html (via sphinx) and on console

==

borg/archiver.py
==================
5ae3409;Thomas Waldmann;2016-06-22 00:31:31 +0200;update docs about placeholders

==

borg/archiver.py
docs/quickstart.rst
docs/usage.rst
==================
6407742;Thomas Waldmann;2016-06-21 23:36:30 +0200;support placeholders for --prefix (everywhere), fixes #1027
this fixes a ugly inconsistency: you could use placeholder for borg create's archivename.
but you could not use them for borg prune's prefix option.

==

borg/archiver.py
borg/helpers.py
==================
b072e99;Thomas Waldmann;2016-06-21 23:14:44 +0200;fix invalid placeholder in unit test

==

borg/testsuite/archiver.py
==================
b630ae9;Thomas Waldmann;2016-06-21 23:00:08 +0200;catch and format exceptions in arg parsing

==

borg/archiver.py
==================
ad17294;Thomas Waldmann;2016-06-21 22:46:12 +0200;improve exception handling for placeholder replacement
do not ignore bad placeholders and just return empty string,
this could have bad consequences, e.g. with --prefix '{invalidplaceholder}':
a typo in the placeholder name would cause the prefix to be the empty string.

==

borg/helpers.py
borg/testsuite/helpers.py
==================
52007db;Thomas Waldmann;2016-06-21 22:02:13 +0200;add tests for format_line

==

borg/testsuite/helpers.py
==================
0f7eb87;Thomas Waldmann;2016-06-21 21:52:20 +0200;slightly refactor placeholder related code
- move from instance method to global function, so it can be used in other contexts also
- rename preformat_text -> replace_placeholders

==

borg/helpers.py
==================
b5362fa;Thomas Waldmann;2016-06-21 20:20:48 +0200;make borg build/work on OpenSSL 1.0 and 1.1, fixes #1187
in openssl 1.1, the cipher context is opaque, members can not
be accessed directly. we only used this for ctx.iv to determine
the current IV (counter value).

now, we just remember the original IV, count the AES blocks we
process and then compute iv = iv_orig + blocks.

that way, it works on OpenSSL 1.0.x and >= 1.1 in the same way.

==

borg/crypto.pyx
borg/testsuite/crypto.py
==================
27c0d0f;Thomas Waldmann;2016-06-21 20:06:36 +0200;move attic test dependency into own file
so you can just empty that file to remove the attic-based tests
when testing in a OpenSSL 1.1 environment.

==

requirements.d/attic.txt
tox.ini
==================
6658112;Abogical;2016-06-21 16:18:19 +0300;Add documentation for listing repository archives

==

docs/usage/list.rst.inc
src/borg/archiver.py
src/borg/helpers.py
==================
a19c986;Thomas Waldmann;2016-06-20 23:40:30 +0200;crypto: use pointer to cipher context
this is one of the steps needed to make borg compatible to openssl 1.1.

==

borg/crypto.pyx
==================
87173d2;Abogical;2016-06-20 17:44:41 +0300;Added testsuite for listing repository archives

==

src/borg/testsuite/archiver.py
==================
c839eb6;Abogical;2016-06-20 17:02:49 +0300;Apply --format when listing repository archives

==

src/borg/archiver.py
src/borg/helpers.py
==================
0942bcd;Abogical;2016-06-20 00:02:12 +0300;Move code block for the write() function at do_list()

==

src/borg/archiver.py
==================
0b96890;enkore;2016-06-19 23:34:16 +0200;Merge pull request #1188 from jrtc27/ldpreload-eatmydata
Correctly handle multiple LD_PRELOAD entries; fixes #1111
==
==================
d4f5172;James Clarke;2016-06-19 22:04:03 +0100;Correctly handle multiple LD_PRELOAD entries; fixes #1111

==

src/borg/xattr.py
==================
91f92d6;TW;2016-06-19 22:48:33 +0200;Merge pull request #1173 from ThomasWaldmann/fix-sparse-test
fix sparse file test, fixes #1170
==
==================
37835f7;Thomas Waldmann;2016-06-19 15:11:36 +0200;Merge branch '1.0-maint'

==
==================
195a6b9;TW;2016-06-19 15:09:26 +0200;Merge pull request #1186 from ThomasWaldmann/ignore-F405
flake8: ignore F405, fixes #1185
==
==================
278cf0b;Thomas Waldmann;2016-06-19 14:55:57 +0200;helpers: fix "undefined name 'e'" in exception handler

==

borg/helpers.py
==================
745007b;Thomas Waldmann;2016-06-19 14:39:45 +0200;flake8: ignore F405, fixes #1185
We know that star imports have their issues and we only have one of them,
for good reasons. Thus, we switch off that new F405 test/message.

==

setup.cfg
==================
d9a14e3;TW;2016-06-18 14:49:18 +0200;Merge pull request #1184 from c4rlo/linux-syncfile-errno-fix
platform.linux: small SyncFile error handling fix
==
==================
e41ef84;TW;2016-06-18 14:45:56 +0200;Merge pull request #1182 from c4rlo/typo-fixes
typo fixes in comment+docstring
==
==================
58d236c;Carlo Teubner;2016-06-18 13:39:22 +0100;platform.linux: small SyncFile error handling fix

==

src/borg/platform/linux.pyx
==================
ff470f4;Carlo Teubner;2016-06-18 12:57:54 +0100;typo fixes in comment+docstring

==

src/borg/archiver.py
src/borg/selftest.py
==================
9be32e9;Thomas Waldmann;2016-06-15 12:22:29 +0200;fix sparse file test, fixes #1170
found out that xfs is doing stuff behind the scenes: it is pre-allocating 16MB
to prevent fragmentation (in my case, value depends on misc factors).

fixed the test so it just checks that the extracted sparse file uses less (not
necessary much less) space than a non-sparse file would use.

another problem showed up when i tried to verify the holes in the sparse file
via SEEK_HOLE, SEEK_DATA:
after the few bytes of real data in the file, there was another 16MB
preallocated space.
So I ended up checking just the hole at the start of the file.

tested on: ext4, xfs, zfs, btrfs

==

borg/testsuite/archiver.py
==================
9a64835;Thomas Waldmann;2016-06-12 23:36:56 +0200;Merge branch '1.0-maint'
Also: add missing keys to ARCHIVE_KEYS set.

==
==================
22e14a0;enkore;2016-06-12 18:24:15 +0200;Merge pull request #1160 from ThomasWaldmann/fix-1159
Fix 1159
==
==================
69c3b5e;Thomas Waldmann;2016-06-12 16:06:16 +0200;rebuild_manifest: refactor archive metadata dict validation
this was already done in a similar way for item metadata dict validation.

also: check for some more required keys - the old code would crash if 'name' or 'time' key were missing.

==

borg/archive.py
==================
03f6282;Thomas Waldmann;2016-06-12 15:29:59 +0200;make rebuild_manifest more future-proof

==

borg/archive.py
==================
8664178;Thomas Waldmann;2016-06-12 15:07:49 +0200;rename valid_msgpacked_item to valid_msgpacked_dict
the code is generic, it can also be used for other msgpacked dictionaries.

==

borg/archive.py
borg/testsuite/archive.py
==================
8c26945;TW;2016-06-12 14:51:46 +0200;Merge pull request #1158 from ThomasWaldmann/pretty-key
add Key/EncryptedKey PropDict, see #1157
==
==================
fa77e74;TW;2016-06-12 14:48:17 +0200;Merge pull request #1154 from hemio-ev/uuid-format-tags
Adds uuid to archive format tags
==
==================
90d621c;enkore;2016-06-12 14:44:27 +0200;Merge pull request #1149 from ThomasWaldmann/validkeys-in-manifest
item_keys in manifest, validate item keys
==
==================
d2468d3;Thomas Waldmann;2016-06-12 04:28:40 +0200;add Key/EncryptedKey PropDict

==

src/borg/item.py
src/borg/key.py
==================
a7b5165;Thomas Waldmann;2016-06-12 00:10:39 +0200;better validation of item metadata dicts, fixes #1130
the previous check only checked that we got a dict, but did not validate the dict keys.
this triggered issues with e.g. (invalid) integer keys.

now it validates the keys:
- some required keys must be present
- the set of keys is a subset of all valid keys

==

borg/archive.py
==================
78121a8;Thomas Waldmann;2016-06-09 23:38:12 +0200;store item_keys into manifest, fixes #1147
we need a list of valid item metadata keys. using a list stored in the repo manifest
is more future-proof than the hardcoded ITEM_KEYS in the source code.

keys that are in union(item_keys_from_repo, item_keys_from_source) are considered valid.

==

borg/archive.py
borg/helpers.py
borg/testsuite/archive.py
==================
d45a13b;Michael Herold;2016-06-11 22:57:03 +0200;Changes archive format from uuid to uuid4
This allows for future support of other uuid versions

==

docs/usage/create.rst.inc
src/borg/archiver.py
src/borg/helpers.py
==================
4c98b91;TW;2016-06-11 18:28:00 +0200;Merge pull request #1153 from witten/patch-2
Update resources.rst to rename atticmatic to borgmatic
==
==================
5aa97e2;Michael Herold;2016-06-11 12:03:55 +0200;Adds uuid to archive format tags

==

docs/usage/create.rst.inc
src/borg/archiver.py
src/borg/helpers.py
==================
7642632;Dan Helfman;2016-06-10 19:27:19 -0700;Update resources.rst to rename atticmatic to borgmatic
atticmatic wrapper script has been renamed to borgmatic!
==

docs/resources.rst
==================
34d07d1;TW;2016-06-10 21:09:44 +0200;Merge pull request #1150 from enkore/fix/solaris
Fix test_sparse_file for solaris
==
==================
b86775a;jenkins;2016-06-10 12:00:22 +0200;Fix test_sparse_file for solaris

==

src/borg/testsuite/archiver.py
==================
d9b77d5;TW;2016-06-09 22:08:55 +0200;Merge pull request #1148 from ThomasWaldmann/fix-1135
fix resync and msgpacked item qualifier, fixes #1135
==
==================
918e0b2;Thomas Waldmann;2016-06-09 21:08:39 +0200;fix resync and msgpacked item qualifier, fixes #1135
when trying to resync and skip invalid data, borg tries to qualify a byte sequence as
valid-looking msgpacked item metadata dict (or not) before even invoking msgpack's unpack.

besides previously hard to understand code, there were 2 issues:

- a missing check for map16 - this type is what msgpack uses if the dict has more than
15 items (could happen in future, not for 1.0.x).

- missing checks for str8/16/32 - str16 is what msgpack uses if the bytestring has more than 31 bytes
(borg does not have that long key names, thus this wasn't causing any harm)

this misqualification (valid data considered invalid) could lead to a wrong resync, skipping valid items.

added more comments and tests.

==

borg/archive.py
borg/testsuite/archive.py
==================
b5b4a72;TW;2016-06-09 21:41:02 +0200;Merge pull request #1137 from ThomasWaldmann/no-manifest
better error handling for missing repo manifest, fixes #1043
==
==================
e10d543;Thomas Waldmann;2016-06-05 02:14:14 +0200;delete a repo without manifest

==

borg/archiver.py
==================
6a70d99;Thomas Waldmann;2016-06-05 01:22:43 +0200;make borg check work for empty repo

==

borg/archive.py
==================
7501c3b;Thomas Waldmann;2016-06-05 01:05:32 +0200;better error handling for missing repo manifest, fixes #1043
can happen for not correctly initialized repos or corrupted repos.

here: borg list failing more pretty

==

borg/helpers.py
==================
d813775;Thomas Waldmann;2016-06-09 20:29:44 +0200;Merge branch '1.0-maint'

==
==================
9ef565b;Thomas Waldmann;2016-06-09 20:21:48 +0200;Merge branch '1.0-maint'

==
==================
a8c4c9f;TW;2016-06-06 16:12:46 +0200;Merge pull request #1144 from ThomasWaldmann/fix-prune-docs
fix / clarify prune help, fixes #1143
==
==================
fb89152;Thomas Waldmann;2016-06-06 16:11:22 +0200;fix / clarify prune help, fixes #1143

==

borg/archiver.py
==================
ee5e89b;TW;2016-06-05 13:29:52 +0200;Merge pull request #1136 from ThomasWaldmann/env-security-cleanup
remove passphrase from subprocess environment, fixes #1105
==
==================
ca35d9f;Thomas Waldmann;2016-06-05 00:25:30 +0200;remove passphrase from subprocess environment, fixes #1105

==

borg/remote.py
==================
8083799;TW;2016-06-04 23:33:59 +0200;Merge pull request #1134 from enkore/fix/SyncFileX
SyncFile: open with O_EXCL (or equivalent)
==
==================
e41f3ec;Marian Beermann;2016-06-04 22:47:25 +0200;SyncFile: open with O_EXCL (or equivalent)

==

src/borg/platform/base.py
==================
62a2a73;TW;2016-06-04 18:21:53 +0200;Merge pull request #1132 from ThomasWaldmann/fuse-changes
fuse: simplify timestamp processing
==
==================
504af02;TW;2016-06-04 17:51:08 +0200;Merge pull request #1117 from ThomasWaldmann/items-refactor
refactor to use Item class
==
==================
75244ea;Thomas Waldmann;2016-06-04 17:34:03 +0200;fuse: simplify timestamp processing

==

src/borg/fuse.py
==================
60da321;Thomas Waldmann;2016-06-01 01:45:45 +0200;refactor to use Item class, fixes #1071

==

src/borg/archive.py
src/borg/archiver.py
src/borg/cache.py
src/borg/constants.py
src/borg/fuse.py
src/borg/helpers.py
src/borg/item.py
src/borg/platform/darwin.pyx
src/borg/platform/freebsd.pyx
src/borg/platform/linux.pyx
src/borg/testsuite/archive.py
src/borg/testsuite/archiver.py
src/borg/testsuite/item.py
src/borg/testsuite/platform.py
==================
53937a2;TW;2016-06-04 17:18:20 +0200;Merge pull request #1131 from ThomasWaldmann/freebsd-llfuse-requirements
llfuse: update version requirement for freebsd
==
==================
60fad63;TW;2016-06-04 17:14:33 +0200;Merge pull request #1120 from anarcat/patch-4
update install docs table again
==
==================
5167dca;anarcat;2016-06-03 10:45:06 -0400;update install docs table again
* sort install list (fedora was out of place)
* add EPEL
* borg is not young anymore, warn about old distros
* more coherent *BSD ports naming
* add raspbian, openindiana and mageia

==

docs/installation.rst
==================
8e7ed8e;Thomas Waldmann;2016-06-04 15:53:30 +0200;llfuse: update version requirement for freebsd
as the requirement string is a AND operation, I used the rough "<2.0" requirement
and then excluded the non-working versions.

==

setup.py
==================
9452cd8;TW;2016-06-03 20:39:40 +0200;Merge pull request #1123 from ThomasWaldmann/fix-vagrant
vagrant: fix path to borg package, add hidden import
==
==================
87b85a3;Thomas Waldmann;2016-06-03 18:00:01 +0200;vagrant: fix path to borg package, add hidden import

==

Vagrantfile
==================
bf5406d;enkore;2016-05-31 17:28:19 +0200;Merge pull request #1113 from enkore/feature/pltstr
platform_base should use platform-provided implementations when needed
==
==================
0ca1a18;Marian Beermann;2016-05-31 02:35:54 +0200;Make borg.platform a package

==

setup.py
src/borg/platform.py
src/borg/platform/__init__.py
src/borg/platform/base.py
src/borg/platform/darwin.pyx
src/borg/platform/freebsd.pyx
src/borg/platform/linux.pyx
src/borg/platform/posix.pyx
src/borg/platform_base.py
src/borg/platform_darwin.pyx
src/borg/platform_freebsd.pyx
src/borg/platform_linux.pyx
src/borg/platform_posix.pyx
src/borg/repository.py
src/borg/testsuite/platform.py
==================
0333f91;Marian Beermann;2016-05-31 02:22:38 +0200;platform: rearrange imports

==

src/borg/platform.py
==================
2d90bb2;Marian Beermann;2016-05-31 02:22:27 +0200;Compose platform_base from the platform-specific functionality
Noticed while working on the windows branch.

==

src/borg/platform_base.py
==================
a1c4d45;enkore;2016-05-31 15:07:14 +0200;Merge pull request #1112 from ThomasWaldmann/refactor-helper-imports
split helpers import into multiple ones
==
==================
d3deec9;Thomas Waldmann;2016-05-31 01:18:03 +0200;cleanup / reorder imports
import stdlib
from stdlib import x

import 3rd party

import borg stuff

==

src/borg/archive.py
src/borg/archiver.py
src/borg/cache.py
src/borg/fuse.py
src/borg/helpers.py
src/borg/key.py
src/borg/platform_darwin.pyx
src/borg/platform_freebsd.pyx
src/borg/remote.py
src/borg/repository.py
src/borg/shellpattern.py
src/borg/testsuite/archiver.py
src/borg/testsuite/helpers.py
src/borg/testsuite/key.py
src/borg/testsuite/lrucache.py
src/borg/upgrader.py
==================
49484d6;Thomas Waldmann;2016-05-31 00:33:13 +0200;split helpers import into multiple ones

==

src/borg/archive.py
src/borg/archiver.py
src/borg/cache.py
src/borg/fuse.py
src/borg/item.py
src/borg/key.py
src/borg/locking.py
src/borg/platform_darwin.pyx
src/borg/platform_freebsd.pyx
src/borg/platform_linux.pyx
src/borg/remote.py
src/borg/repository.py
src/borg/testsuite/archiver.py
src/borg/testsuite/helpers.py
src/borg/testsuite/key.py
src/borg/testsuite/repository.py
src/borg/upgrader.py
==================
d62f551;Thomas Waldmann;2016-05-30 23:00:33 +0200;sphinx: fix sys.path so it finds the borg package

==

docs/conf.py
==================
0aec338;TW;2016-05-30 22:50:12 +0200;Merge pull request #1016 from ThomasWaldmann/move-to-src
move to src/
==
==================
c157878;Thomas Waldmann;2016-05-30 22:10:03 +0200;tox.ini: remove changedir

==

tox.ini
==================
7e0ea16;Thomas Waldmann;2016-05-30 19:41:30 +0200;Merge branch 'master' into move-to-src

==
==================
045e5a1;Thomas Waldmann;2016-05-30 19:38:16 +0200;Merge branch 'master' into move-to-src

==
==================
6b666b2;TW;2016-05-30 19:21:05 +0200;Merge pull request #1108 from ThomasWaldmann/nitpicks
log format tests: be more clear about new and old
==
==================
76d429e;Thomas Waldmann;2016-05-30 18:57:57 +0200;log format tests: be more clear about new and old

==

borg/testsuite/repository.py
==================
479819e;TW;2016-05-30 18:47:33 +0200;Merge pull request #1096 from edgewood/simplify_remote_logging_test
Break out remote log and stderr handling code to simplify testing
==
==================
e69bc36;TW;2016-05-30 17:15:23 +0200;Merge pull request #858 from enkore/issue/843
Auto-recover from corrupted index/hints file(s)
==
==================
1ec149f;enkore;2016-05-29 22:41:22 +0200;Merge pull request #1095 from Voltara/master
RemoteRepository: Fix busy wait in call_many, fixes #940
==
==================
d1ce746;Marian Beermann;2016-05-29 19:52:53 +0200;borg.hashindex: use PyErr_SetFromErrnoWithFilename
instead of home-grown (i.e. not medical grade) OSError raising.

==

borg/hashindex.pyx
==================
9ebb37c;Marian Beermann;2016-05-29 18:51:09 +0200;testsuite/repository: fixup for 7a569bc

==

borg/testsuite/repository.py
==================
3be3de7;enkore;2016-05-29 00:50:03 +0200;Merge pull request #1097 from RonnyPfannschmidt/header-fix
obtain ioctl from sys/ioctl.h as per manpage
==
==================
7b564e5;Ronny Pfannschmidt;2016-05-28 23:51:13 +0200;obtain ioctl from sys/ioctl.h as per manpage
fixed build failure on fedora

==

borg/platform_linux.pyx
==================
d42f1e6;Ed Blackman;2016-05-27 17:16:31 -0400;Break out remote log and stderr handling code to simplify testing
May fix issue 1081, but that issue is hard to reproduce.

==

borg/remote.py
borg/testsuite/repository.py
==================
1f33861;Marian Beermann;2016-04-24 23:42:24 +0200;Repository: better error reporting for index/hints failures

==

borg/hashindex.pyx
borg/helpers.py
borg/repository.py
==================
d979a84;Marian Beermann;2016-04-22 11:40:16 +0200;Handle permission and similar errors on the index

==

borg/hashindex.pyx
borg/repository.py
borg/testsuite/repository.py
==================
252c1b9;Marian Beermann;2016-04-08 15:38:13 +0200;Auto-recover from corrupted index/hints file(s)
And don't swallow all OSErrors when creating archives. We need to work on
that on a more general level...

==

borg/hashindex.pyx
borg/helpers.py
borg/repository.py
borg/testsuite/repository.py
==================
f517152;TW;2016-05-27 22:06:48 +0200;Merge pull request #1041 from enkore/feature/newcompact
Repository: compact v2
==
==================
731f624;Andrew Skalski;2016-05-25 18:14:27 -0400;RemoteRepository: Fix busy wait in call_many, fixes #940

==

borg/remote.py
==================
7aed2d1;TW;2016-05-26 00:14:03 +0200;Merge pull request #1094 from enkore/stuff/tests
Travis workers hate him: improve testing speed with one simple trick
==
==================
478a6f2;Marian Beermann;2016-05-25 22:29:38 +0200;Lower PBKDF2 iteration count for the tests
This cuts testing time to about one third for me.

==

conftest.py
==================
0e3bba7;Marian Beermann;2016-05-25 22:01:38 +0200;Don't rebuild command line parser for each invocation
Makes tests faster

==

borg/archiver.py
setup.py
==================
2806133;Marian Beermann;2016-05-25 12:15:46 +0200;testsuite/repository: test .compact, _build_sparse

==

borg/testsuite/repository.py
==================
4619f78;Marian Beermann;2016-05-16 21:15:07 +0200;Terms, principles of Repository

==

borg/repository.py
==================
b8d1bc1;Marian Beermann;2016-05-21 19:17:14 +0200;Repository: don't read+verify old entries for size retrieval

==

borg/repository.py
==================
f99ad4c;Marian Beermann;2016-05-21 18:45:47 +0200;Repository: compact v2
- Track free space information for each sparse segment
- Don't compact large segments with little free space

==

borg/repository.py
==================
4302ffb;enkore;2016-05-24 23:11:03 +0200;Merge pull request #1092 from ThomasWaldmann/fix-stdout
fix crashing borg extract --stdout, fixes #1064
==
==================
4c4aa64;TW;2016-05-24 22:56:59 +0200;Merge pull request #1091 from ThomasWaldmann/swidth-fallback
fall back to len() if wcswidth returns negative value
==
==================
9fff2af;Thomas Waldmann;2016-05-24 22:40:20 +0200;fix crashing borg extract --stdout, fixes #1064

==

borg/archive.py
==================
c4c11d7;Thomas Waldmann;2016-05-24 22:16:47 +0200;fall back to len() if wcswidth returns neg. value, fixes #1090

==

borg/platform_posix.pyx
==================
e134f65;enkore;2016-05-24 21:41:28 +0200;Merge pull request #1089 from enkore/fix/tox-yes-again
fix tox build for environment-python != containing-python in yet-anot…
==
==================
4f1157c;Marian Beermann;2016-05-24 20:57:52 +0200;fix tox build for environment-python != containing-python in yet-another instance
this instance: the repository worktree is *not* named borg.

==

conftest.py
==================
684efd0;enkore;2016-05-24 18:52:50 +0200;Merge pull request #1075 from enkore/fix/commitcheck-2
Repository: avoid reading large segments for commit state check
==
==================
33f3a70;enkore;2016-05-24 18:44:44 +0200;Merge pull request #1077 from ThomasWaldmann/do-not-chunk-small-files
chunker: speed up remainder <= min_size case
==
==================
7a569bc;Marian Beermann;2016-05-23 00:42:31 +0200;Repository: avoid reading large segments for commit state check

==

borg/repository.py
borg/testsuite/archiver.py
borg/testsuite/repository.py
==================
5fa5275;enkore;2016-05-22 20:06:40 +0200;Merge pull request #1084 from enkore/fix/plsf
Fix referencing error in platform_linux.set_flags
==
==================
cdb8cc5;Marian Beermann;2016-05-22 19:54:08 +0200;Fix referencing error in platform_linux.set_flags

==

borg/platform_linux.pyx
==================
ec90f9a;enkore;2016-05-22 19:31:36 +0200;Merge pull request #1083 from enkore/fix/ppc
Fix bug on powerpc linux
==
==================
f27f0e1;Marian Beermann;2016-05-22 19:15:21 +0200;Fix bug on powerpc linux

==

borg/platform_linux.pyx
==================
279fb39;enkore;2016-05-22 18:15:22 +0200;Merge pull request #1082 from enkore/issue/1080
List files excluded via UF_NODUMP
==
==================
ed6f6b9;Marian Beermann;2016-05-22 17:34:58 +0200;platform_linux.set_flags: don't raise on EOPNOTSUPP

==

borg/platform_linux.pyx
==================
ffa7816;Marian Beermann;2016-05-22 15:50:24 +0200;List files excluded via UF_NODUMP

==

borg/archiver.py
borg/testsuite/archiver.py
==================
5675e4f;TW;2016-05-22 13:38:47 +0200;Merge pull request #1073 from ThomasWaldmann/test-py36
test on py36
==
==================
a1365c9;TW;2016-05-22 13:38:22 +0200;Merge pull request #1079 from enkore/issue/1078
Fix crash regression for UDS introduced in 805f631
==
==================
e7523b7;Marian Beermann;2016-05-22 11:29:44 +0200;Fix fuse tests when flags are available
e.g. fuse installed, TMPDIR != tmpfs

==

borg/testsuite/archiver.py
==================
ce6b838;Marian Beermann;2016-05-22 11:09:07 +0200;Fix crash regression for UDS introduced in 805f631

==

borg/platform_linux.pyx
borg/testsuite/archiver.py
==================
96a798d;Thomas Waldmann;2016-05-22 01:22:52 +0200;chunker: add a comment about a potential speedup

==

borg/_chunker.c
==================
8834f6f;Thomas Waldmann;2016-05-21 23:16:18 +0200;chunker: do not buzhash if not needed, fixes #1021
For small remainders of files (last chunk), we do not need to buzhash if it
is already clear that there is not enough left (we want at least min_size big
chunks).

Small files are handled by same code - as they only give 1 chunk, that is
the last chunk (see above).

See "Cases" considerations below.

For big files, we do not need to buzhash the first min_size bytes of a chunk -
we do not want to cut there anyway, so we can start buzhashing at offset
min_size.

Cases (before this change)
--------------------------

- A) remaining <= window_size

  - would do 2 chunker_fill calls (both line 253) and trigger eof with the 2nd call
  - no buzhashing
  - result is 1 <remaining> length chunk

- B) window_size < remaining <= min_size:

  - the chunker would do 1 chunker_fill call (line 253) that would read the entire remaining file (but not trigger eof yet)
  - would compute all possible remaining - window_size + 1 buzhashes, but without a chance for a cut,
    because there is also the n < min_size condition
  - would do another chunker_fill call (line 282), but not get more data, so loop ends
  - result is 1 <remaining> length chunk

- C) file > min_size:

  - normal chunking

Cases (after this change)
-------------------------

- A) similar to above A), but up to remaining < min_size + window_size + 1,
  so it does not buzhash if there is no chance for a cut.

- B) see C) above

==

borg/_chunker.c
borg/chunker.pyx
borg/testsuite/archiver.py
==================
166352e;TW;2016-05-21 21:17:13 +0200;Merge pull request #1076 from ThomasWaldmann/docs-chunker-kernel-version
clarify comment about linux kernel versions, fixes #1024
==
==================
99fa484;Thomas Waldmann;2016-05-21 21:08:03 +0200;clarify comment about linux kernel versions
currently, ALL linux kernels are affected.

==

borg/_chunker.c
==================
d27a352;Thomas Waldmann;2016-05-21 19:24:18 +0200;test on py36

==

.travis.yml
tox.ini
==================
24204b1;Thomas Waldmann;2016-05-21 19:18:54 +0200;remove conftest sys.path hack, fixes #1072
not needed any more as the code is now below src/.

==

conftest.py
==================
3ce35f6;Thomas Waldmann;2016-05-21 19:06:01 +0200;Merge branch 'master' into move-to-src

==
==================
1a02770;enkore;2016-05-21 10:16:19 +0200;Merge pull request #981 from ThomasWaldmann/items-refactor
Items refactoring
==
==================
e6cf4ee;Thomas Waldmann;2016-04-27 23:17:10 +0200;disallow setting unknown attributes, use StableDict as .as_dict() result

==

borg/item.py
borg/testsuite/item.py
==================
46362a1;Thomas Waldmann;2016-04-25 14:12:39 +0200;add more tests

==

borg/testsuite/item.py
==================
e81407f;Thomas Waldmann;2016-04-25 14:08:47 +0200;add bigint coding, allow None as user/group

==

borg/helpers.py
borg/item.py
borg/testsuite/item.py
==================
c18209f;Thomas Waldmann;2016-04-25 07:39:17 +0200;split into generic PropDict and special Item class

==

borg/item.py
==================
c6f5989;Thomas Waldmann;2016-04-25 05:57:30 +0200;Item implementation + tests

==

borg/item.py
borg/testsuite/item.py
==================
b8303a3;Thomas Waldmann;2016-05-20 22:48:57 +0200;Merge branch '1.0-maint'

==
==================
21a3026;Thomas Waldmann;2016-05-20 20:00:24 +0200;freebsd: use a older llfuse release that builds
llfuse >0.41.1 <=1.0.0 does not build on freebsd.
the issue is already fixed, but no new release yet.

==

Vagrantfile
setup.py
==================
5be71b5;Thomas Waldmann;2016-05-20 14:38:09 +0200;update CHANGES

==

docs/changes.rst
==================
956f76c;TW;2016-05-20 15:13:53 +0200;Merge pull request #865 from edgewood/master
Print --list output (only) without requiring --info
==
==================
8d8374d;Thomas Waldmann;2016-05-20 14:34:48 +0200;ran build_api + build_usage

==

docs/api.rst
docs/usage/create.rst.inc
==================
938628f;TW;2016-05-20 14:06:27 +0200;Merge pull request #1062 from ThomasWaldmann/update-1.0-docs
update CHANGES
==
==================
1e061a2;Thomas Waldmann;2016-05-19 17:52:02 +0200;update CHANGES

==

docs/changes.rst
==================
f974770;TW;2016-05-20 13:55:12 +0200;Merge pull request #1066 from enkore/issue/1063
RepositoryCache: don't cache large objects
==
==================
f7f95ae;Marian Beermann;2016-05-20 02:01:07 +0200;RepositoryCache: don't cache large objects
avoids excessive cache repository disk usage

==

borg/remote.py
==================
d043794;enkore;2016-05-19 17:12:52 +0200;Merge pull request #1052 from enkore/fix/commitcheck
Repository: fix commit tags being seen in data
==
==================
714e93b;Marian Beermann;2016-05-19 01:11:51 +0200;Repository: fix commit tags being seen in data

==

borg/repository.py
borg/testsuite/repository.py
==================
13a4e40;enkore;2016-05-19 00:29:14 +0200;Merge pull request #1053 from ThomasWaldmann/wcswidth
add swidth call, fixes #1051
==
==================
a8e457f;Thomas Waldmann;2016-05-18 23:59:47 +0200;move Statistics class to archive module, avoid cyclic import
also move the tests accordingly.

==

borg/archive.py
borg/archiver.py
borg/helpers.py
borg/testsuite/archive.py
borg/testsuite/helpers.py
==================
226e551;Ed Blackman;2016-05-17 22:59:58 -0400;Print implied output without --info/-v
There are persistent questions why output from options like --list
and --stats doesn't show up.  Also, borg currently isn't able to
show *just* the output for a given option (--list, --stats,
--show-rc, --show-version, or --progress), without other INFO level
messages.

The solution is to use more granular loggers, so that messages
specific to a given option goes to a logger designated for that
option.  That option-specific logger can then be configured
separately from the regular loggers.

Those option-specific loggers can also be used as a hook in a
BORG_LOGGING_CONF config file to log the --list output to a separate
file, or send --stats output to a network socket where some daemon
could analyze it.

Steps:
- create an option-specific logger for each of the implied output options
- modify the messages specific to each option to go to the correct logger
- if an implied output option is passed, change the option-specific
  logger (only) to log at INFO level
- test that root logger messages don't come through option-specific loggers

They shouldn't, per https://docs.python.org/3/howto/logging.html#logging-flow
but test just the same.  Particularly test a message that can come from
remote repositories.

Fixes #526, #573, #665, #824

==

borg/archiver.py
borg/helpers.py
borg/testsuite/archiver.py
borg/testsuite/helpers.py
docs/changes.rst
docs/development.rst
docs/quickstart.rst
docs/usage.rst
==================
afb9dc9;Ed Blackman;2016-05-17 22:59:58 -0400;Update logging parser to allow remotes to pass logger name
Parser now understands both old format messages (to keep talking to
old server) and new format messages that pass a logger name.  If
logger name is passed, the message is directed to the same logger
locally.

This could be cherry-picked to 1.x-maint (and 0.x-maint?) to allow
point releases to understand borg 1.1 server messages changed in the
next commit.  Worst case, currently existing 0.x and 1.0.x clients
talking to a 1.1.x server will see messages like:
	borg.repository Remote: hi
	borg.archiver Remote: foo
instead of
	Remote: hi
	Remote: foo

==

borg/logger.py
borg/remote.py
borg/testsuite/repository.py
==================
bf00eba;Thomas Waldmann;2016-05-18 18:32:29 +0200;use swidth when doing terminal  output width computations, fixes #1051
cjk glyphs occupy 2 cells' width on the terminal.

==

borg/helpers.py
==================
596a276;Thomas Waldmann;2016-05-18 18:07:10 +0200;setup.py: add check for platform_darwin.c
this was just forgotten...

==

setup.py
==================
5c6cfc6;TW;2016-05-18 17:56:26 +0200;Merge pull request #1058 from enkore/issue/1056
When probing key files, do binary reads
==
==================
d7500a1;Thomas Waldmann;2016-05-18 16:08:27 +0200;create new platform_posix module
move common posix cython code there.

==

borg/platform_darwin.pyx
borg/platform_freebsd.pyx
borg/platform_linux.pyx
borg/platform_posix.pyx
setup.py
==================
b540420;Thomas Waldmann;2016-05-18 04:26:43 +0200;add swidth call to determine string width on terminal
on posix platforms, this is a small wrapper around wcswidth(3).

==

borg/platform.py
borg/platform_base.py
borg/platform_darwin.pyx
borg/platform_freebsd.pyx
borg/platform_linux.pyx
borg/testsuite/platform.py
==================
088bccc;TW;2016-05-18 17:39:01 +0200;Merge pull request #1057 from enkore/issue/1055
Fix tox
==
==================
24cd303;Marian Beermann;2016-05-18 17:37:47 +0200;When probing key files, do binary reads

==

borg/key.py
==================
43258ab;Marian Beermann;2016-05-18 17:08:45 +0200;Fix tox

==

conftest.py
==================
ac2617f;enkore;2016-05-18 00:23:17 +0200;Merge pull request #1050 from enkore/feature/linux-bsdflags
Translate Linux fsflags to BSD flags and vice versa
==
==================
805f631;Marian Beermann;2016-05-18 00:22:49 +0200;Translate Linux fsflags to BSD flags and vice versa

==

borg/archive.py
borg/archiver.py
borg/helpers.py
borg/platform.py
borg/platform_base.py
borg/platform_linux.pyx
borg/testsuite/__init__.py
borg/testsuite/archiver.py
borg/testsuite/conftest.py
conftest.py
==================
eaf0f62;TW;2016-05-17 19:28:14 +0200;Merge pull request #1049 from enkore/feature/sigterm
Handle SIGTERM
==
==================
6cf6102;Marian Beermann;2016-05-17 18:57:53 +0200;Handle SIGTERM and make a clean exit

==

borg/archiver.py
==================
47d29e7;enkore;2016-05-17 15:33:46 +0200;Merge pull request #1047 from enkore/feature/init-doc
init: move epilogue from docs/usage into help output
==
==================
deab8ca;Marian Beermann;2016-05-17 01:00:46 +0200;init: move epilogue from docs/usage into help output
Also tell which algos are used and that HW accel is supported.

==

borg/archiver.py
docs/usage.rst
==================
be555d4;enkore;2016-05-15 02:06:17 +0200;Merge pull request #985 from enkore/feature/fastlio
Improved LoggedIO write performance
==
==================
c52861e;Marian Beermann;2016-05-14 22:46:41 +0200;Improve LoggedIO write performance, make commit mechanism more solid
- Instead of very small (5 MB-ish) segment files, use larger ones
- Request asynchronous write-out or write-through (TODO) where it is supported,
  to achieve a continuously high throughput for writes
- Instead of depending on ordered writes (write data, commit tag, sync)
  for consistency, do a double-sync commit as more serious RDBMS also do
  i.e. write data, sync, write commit tag, sync
  Since commits are very expensive in Borg at the moment this makes no
  difference performance-wise.

New platform APIs: SyncFile, sync_dir

[x] Naive implementation (equivalent to what Borg did before)
[x] Linux implementation
[ ] Windows implementation
[-] OSX implementation (F_FULLSYNC)

==

borg/constants.py
borg/helpers.py
borg/platform.py
borg/platform_base.py
borg/platform_darwin.pyx
borg/platform_freebsd.pyx
borg/platform_linux.pyx
borg/repository.py
docs/usage.rst
==================
3bc2206;enkore;2016-05-13 23:17:29 +0200;Merge pull request #975 from enkore/feature/paranoid-check
check: support integrity verification
==
==================
0bceaf0;Marian Beermann;2016-05-13 22:50:34 +0200;check: support integrity verification with --verify-data

==

borg/archive.py
borg/archiver.py
borg/testsuite/archiver.py
==================
0e8bd0a;enkore;2016-05-13 22:31:49 +0200;Merge pull request #912 from enkore/stuff/decrypt-integrity-test
decrypt integrity test + some other tests
==
==================
ad5ae32;Marian Beermann;2016-05-13 22:06:38 +0200;testsuite/key: Use pytest built-in fixture

==

borg/testsuite/key.py
==================
6a15e8d;Marian Beermann;2016-05-09 12:02:16 +0200;testsuite/key: environment_variable -> monkeypatch.setenv

==

borg/testsuite/__init__.py
borg/testsuite/key.py
==================
c6f7866;Marian Beermann;2016-05-08 23:13:39 +0200;testsuite/key: add TestPassphrase

==

borg/testsuite/key.py
==================
e5356b7;Marian Beermann;2016-04-16 18:45:53 +0200;testsuite/key: port to pytest, test_decrypt_integrity w/ 'carpet bombing'

==

borg/testsuite/key.py
==================
dece06f;Marian Beermann;2016-04-16 00:20:55 +0200;KeyTestCase, test_decrypt_integrity

==

borg/testsuite/__init__.py
borg/testsuite/key.py
==================
037d54e;Marian Beermann;2016-03-18 02:58:29 +0100;ArchiverTestCase, test_symlink_extract

==

borg/testsuite/archiver.py
==================
d4225f7;enkore;2016-05-09 07:51:28 +0200;Merge pull request #1032 from ThomasWaldmann/remove-openssl-random
remove openssl RAND_bytes from crypto.pyx
==
==================
595e7c1;Thomas Waldmann;2016-05-09 04:14:50 +0200;remove openssl RAND_bytes from crypto.pyx
was forgotten there and not used any more since a while.

also removed the hint about PyCrypto being an alternative to crypto.pyx,
it was not updated since 2014, looks pretty stale.

==

borg/crypto.pyx
==================
6222ec9;TW;2016-05-07 21:26:37 +0200;Merge pull request #1029 from ThomasWaldmann/prune-fix-indexerror
prune: fix IndexError
==
==================
a44e131;Thomas Waldmann;2016-05-07 21:03:31 +0200;prune: fix IndexError
if giving --prefix resulted in an empty archives_checkpoints list, it crashed with an IndexError.

==

borg/archiver.py
==================
2cc117f;TW;2016-05-07 20:41:53 +0200;Merge pull request #1028 from ThomasWaldmann/improve-example-script
improve backup example script, fixes #1020
==
==================
7214c36;TW;2016-05-07 20:41:30 +0200;Merge pull request #1023 from ThomasWaldmann/use-clean-lines
load_excludes: reuse existing clean_lines function
==
==================
7cd8793;TW;2016-05-07 19:24:07 +0200;Merge pull request #1026 from ThomasWaldmann/improve-extract-docs
better help / docs for borg extract --dry-run, fixes #1022
==
==================
06caee2;Thomas Waldmann;2016-05-07 19:22:48 +0200;improve backup example script, fixes #1020

==

docs/quickstart.rst
==================
512e7ec;TW;2016-05-07 18:54:58 +0200;Merge pull request #1025 from ThomasWaldmann/remove-tabs
_chunker.c: remove tab characters
==
==================
d298844;Thomas Waldmann;2016-05-07 18:53:58 +0200;better help / docs for borg extract --dry-run, fixes #1022

==

borg/archiver.py
docs/usage.rst
==================
61a73f5;Thomas Waldmann;2016-05-07 18:18:40 +0200;_chunker.c: remove tab characters
always use 4 spaces for indenting.

==

borg/_chunker.c
==================
ee8f753;Thomas Waldmann;2016-05-07 17:02:09 +0200;load_excludes: reuse existing clean_lines function

==

borg/helpers.py
==================
18263f6;TW;2016-05-06 17:04:51 +0200;Merge pull request #1019 from ThomasWaldmann/pkgsrc-osx-prefix
seek /opt/pkg (pkgsrc OS X) for openssl and lz4
==
==================
0fa663f;Thomas Waldmann;2016-05-06 14:55:27 +0200;seek /opt/pkg (pkgsrc OS X) for openssl and lz4
Add /opt/pkg (used by pkgsrc on Mac OS X) to possible openssl and
lz4 header path.

    from 2015Q2 onwards the prefix has changed to /opt/pkg
    in order to be compatible with El Capitan's
    "System Integrity Protection" feature.

-- pkgsrc.joynet.com

thanks to @weakish for finding this!

==

setup.py
==================
7683936;Thomas Waldmann;2016-05-05 20:59:53 +0200;fix packaging/git/coverage for src/ path

==

.coveragerc
.gitignore
MANIFEST.in
setup.py
tox.ini
==================
d1ea925;Thomas Waldmann;2016-05-05 20:19:50 +0200;move borg package to src/

==

borg/__init__.py
borg/__main__.py
borg/_chunker.c
borg/_hashindex.c
borg/archive.py
borg/archiver.py
borg/cache.py
borg/chunker.pyx
borg/compress.pyx
borg/constants.py
borg/crypto.pyx
borg/fuse.py
borg/hash_sizes.py
borg/hashindex.pyx
borg/helpers.py
borg/key.py
borg/locking.py
borg/logger.py
borg/lrucache.py
borg/platform.py
borg/platform_darwin.pyx
borg/platform_freebsd.pyx
borg/platform_linux.pyx
borg/remote.py
borg/repository.py
borg/selftest.py
borg/shellpattern.py
borg/testsuite/__init__.py
borg/testsuite/archive.py
borg/testsuite/archiver.py
borg/testsuite/benchmark.py
borg/testsuite/chunker.py
borg/testsuite/compress.py
borg/testsuite/conftest.py
borg/testsuite/crypto.py
borg/testsuite/hashindex.py
borg/testsuite/helpers.py
borg/testsuite/key.py
borg/testsuite/locking.py
borg/testsuite/logger.py
borg/testsuite/lrucache.py
borg/testsuite/platform.py
borg/testsuite/repository.py
borg/testsuite/shellpattern.py
borg/testsuite/upgrader.py
borg/testsuite/xattr.py
borg/upgrader.py
borg/xattr.py
src/borg/__init__.py
src/borg/__main__.py
src/borg/_chunker.c
src/borg/_hashindex.c
src/borg/archive.py
src/borg/archiver.py
src/borg/cache.py
src/borg/chunker.pyx
src/borg/compress.pyx
src/borg/constants.py
src/borg/crypto.pyx
src/borg/fuse.py
src/borg/hash_sizes.py
src/borg/hashindex.pyx
src/borg/helpers.py
src/borg/key.py
src/borg/locking.py
src/borg/logger.py
src/borg/lrucache.py
src/borg/platform.py
src/borg/platform_darwin.pyx
src/borg/platform_freebsd.pyx
src/borg/platform_linux.pyx
src/borg/remote.py
src/borg/repository.py
src/borg/selftest.py
src/borg/shellpattern.py
src/borg/testsuite/__init__.py
src/borg/testsuite/archive.py
src/borg/testsuite/archiver.py
src/borg/testsuite/benchmark.py
src/borg/testsuite/chunker.py
src/borg/testsuite/compress.py
src/borg/testsuite/conftest.py
src/borg/testsuite/crypto.py
src/borg/testsuite/hashindex.py
src/borg/testsuite/helpers.py
src/borg/testsuite/key.py
src/borg/testsuite/locking.py
src/borg/testsuite/logger.py
src/borg/testsuite/lrucache.py
src/borg/testsuite/platform.py
src/borg/testsuite/repository.py
src/borg/testsuite/shellpattern.py
src/borg/testsuite/upgrader.py
src/borg/testsuite/xattr.py
src/borg/upgrader.py
src/borg/xattr.py
==================
d22bbe1;TW;2016-05-05 19:13:18 +0200;Merge pull request #1015 from ThomasWaldmann/checkpoint-docs
faq: be more detailed about how checkpoints work, fixes #994
==
==================
4c52fcf;Thomas Waldmann;2016-05-05 18:59:03 +0200;faq: be more detailed about how checkpoints work, fixes #994

==

docs/faq.rst
==================
571329e;TW;2016-05-05 18:31:04 +0200;Merge pull request #1013 from ThomasWaldmann/docs-fix-issue-links
faq: fix issue links
==
==================
6e12d9c;TW;2016-05-05 18:30:20 +0200;Merge pull request #1012 from ThomasWaldmann/append-only-docs
FAQ: add entries about compromised machines and other troubles, fixes #1011
==
==================
619654b;Thomas Waldmann;2016-05-05 18:16:32 +0200;faq: fix issue links

==

docs/faq.rst
==================
8304b8a;Thomas Waldmann;2016-05-05 17:52:31 +0200;FAQ: add entries about compromised machines and other troubles
also: fix append-only mode description - "multiple machines" and "central server" are over-specific and not required for this scenario.

==

docs/faq.rst
docs/usage.rst
==================
37de94e;TW;2016-05-05 15:38:23 +0200;Merge pull request #1008 from ThomasWaldmann/cleanup-checkpoints
prune: kill all checkpoints except the latest, fixes #998
==
==================
dabf816;Thomas Waldmann;2016-05-03 23:06:26 +0200;prune: cleanup checkpoints
kill all the checkpoints when pruning, except the latest one which might be
useful for continuing an interrupted backup. kill the latest checkpoint also
if it is already superceded by a successful backup.

note: this only works on checkpoints matched by --prefix, other checkpoints
      are not touched.

==

borg/archiver.py
borg/testsuite/archiver.py
==================
39c0757;Thomas Waldmann;2016-05-05 13:55:38 +0200;Merge branch '1.0-maint'

==
==================
f963864;TW;2016-05-05 13:51:59 +0200;Merge pull request #996 from ThomasWaldmann/update-1.0-docs
update CHANGES in 1.0-maint
==
==================
6ae1999;TW;2016-05-05 13:49:21 +0200;Merge pull request #1010 from ThomasWaldmann/doc-tags
borg create help: document format tags, fixes #894
==
==================
7457c0f;Thomas Waldmann;2016-04-30 00:45:34 +0200;update CHANGES in 1.0-maint

==

docs/changes.rst
==================
9e09786;Thomas Waldmann;2016-05-05 13:38:08 +0200;borg create help: document format tags, fixes #894
docs: rephrased, more useful examples

==

borg/archiver.py
docs/usage.rst
==================
f070e23;Thomas Waldmann;2016-05-03 22:07:12 +0200;Merge branch '1.0-maint'

==
==================
61b4a56;TW;2016-05-03 20:34:56 +0200;Merge pull request #1007 from ThomasWaldmann/compression-predictor
compression heuristics based on lz4, fixes #1006
==
==================
f44b4bb;Thomas Waldmann;2016-05-03 00:11:25 +0200;travis / OSX: add xz package for python lzma support

==

.travis/install.sh
==================
75b3e78;Thomas Waldmann;2016-05-02 21:50:59 +0200;implement compression heuristics based on lz4-compressibility, fixes #1006
also: add some tests that invoke all supported compression algorithms

==

borg/archiver.py
borg/helpers.py
borg/testsuite/archiver.py
==================
5ec627b;TW;2016-05-03 00:21:05 +0200;Merge pull request #990 from ThomasWaldmann/with-lock
borg with-lock REPO CMD ARGS
==
==================
962c2e9;Thomas Waldmann;2016-04-28 01:28:43 +0200;borg with-lock REPO CMD ARGS

==

borg/archiver.py
borg/testsuite/archiver.py
docs/usage.rst
docs/usage/with-lock.rst.inc
==================
21f7538;TW;2016-05-02 01:26:06 +0200;Merge pull request #1000 from ThomasWaldmann/prune-ignore-checkpoints
borg prune: ignore checkpoints, fixes #997
==
==================
12fb137;TW;2016-05-02 01:22:10 +0200;Merge pull request #1001 from ThomasWaldmann/env-borg-key-file
add BORG_KEY_FILE
==
==================
b743fd0;Thomas Waldmann;2016-05-02 01:12:15 +0200;borg prune: ignore checkpoints, fixes #997
also:
- add a test for this
- add some words to borg create help about the archive name

==

borg/archiver.py
borg/testsuite/archiver.py
==================
e7ca74f;Thomas Waldmann;2016-05-02 00:38:16 +0200;move BORG_KEY_FILE closer to BORG_KEYS_DIR

==

docs/usage.rst
==================
0bdc757;Thomas Waldmann;2016-05-01 22:10:29 +0200;add tests for BORG_KEY_FILE env var

==

borg/testsuite/key.py
==================
a5ba0ab;Félix Sipma;2016-04-22 19:48:26 +0200;support new env var 'BORG_KEY_FILE'

==

borg/key.py
docs/usage.rst
==================
b641d11;Thomas Waldmann;2016-05-01 20:28:17 +0200;Merge branch '1.0-maint'

==
==================
240e569;Thomas Waldmann;2016-05-01 20:18:17 +0200;fix vagrant ssh syntax, fixes #999

==

docs/development.rst
==================
700e715;Thomas Waldmann;2016-04-30 00:32:25 +0200;add missing docs for borg break-lock, fixes #992

==

docs/usage.rst
==================
7718d73;TW;2016-04-30 00:15:01 +0200;Merge pull request #995 from ThomasWaldmann/update-site-urls
update readthedocs urls, fixes #991
==
==================
4b73ebc;Thomas Waldmann;2016-04-29 03:19:27 +0200;update readthedocs urls, fixes #991

==

README.rst
docs/resources.rst
setup.py
==================
369af5f;enkore;2016-04-28 01:07:28 +0200;Merge pull request #970 from enkore/feature/selftest
Add power-on self-test
==
==================
fcd323f;Marian Beermann;2016-04-23 11:39:42 +0200;Bump API version of crypto.pyx (overlooked in c5bd7f2)

==

borg/crypto.pyx
borg/helpers.py
==================
8d3b1a5;Marian Beermann;2016-04-28 00:06:19 +0200;Add self tests
These run in ~100 ms here, so even on much slower machines (where also
Python setup will be slower) it shouldn't be noticeable at all.

==

borg/archiver.py
borg/selftest.py
borg/testsuite/__init__.py
borg/testsuite/archiver.py
borg/testsuite/chunker.py
borg/testsuite/conftest.py
borg/testsuite/crypto.py
borg/testsuite/hashindex.py
==================
2bb9bc4;TW;2016-04-27 23:41:54 +0200;Merge pull request #810 from ThomasWaldmann/flexible-compression
Flexible compression - pattern matching on path/filename
==
==================
f20a78c;Thomas Waldmann;2016-04-19 01:13:10 +0200;flexible compression

==

borg/archive.py
borg/archiver.py
borg/helpers.py
borg/key.py
borg/testsuite/helpers.py
docs/misc/compression.conf
==================
425cb95;TW;2016-04-26 17:39:36 +0200;Merge pull request #984 from anarcat/patch-3
fix debian sid cross-reference in install docs
==
==================
0a30d40;anarcat;2016-04-25 22:54:36 -0400;fix debian sid cross-reference in install docs

==

docs/installation.rst
==================
ddc7687;TW;2016-04-25 19:47:32 +0200;Merge pull request #977 from ThomasWaldmann/info-show-duration
make borg info more similar to borg create --stats, add duration
==
==================
f6d363e;TW;2016-04-25 15:30:14 +0200;Merge pull request #956 from icefoxen/master
Added Salt example to documentation
==
==================
2ccc02d;Thomas Waldmann;2016-04-24 01:29:17 +0200;make borg info more similar to borg create --stats, add duration

==

borg/archive.py
borg/archiver.py
==================
96226b5;enkore;2016-04-25 14:23:28 +0200;Merge pull request #976 from ThomasWaldmann/issue-974
fixes Issue 974
==
==================
81a1952;TW;2016-04-24 02:35:34 +0200;Merge pull request #978 from ThomasWaldmann/fix-osx
vagrant: OS X update osxfuse / fix lzma, fixes #933
==
==================
5a7c027;Thomas Waldmann;2016-04-24 02:25:04 +0200;vagrant: OS X update osxfuse / fix lzma, fixes #933

==

Vagrantfile
==================
d883791;Thomas Waldmann;2016-04-23 22:57:04 +0200;use safe_encode/decode

==

borg/archive.py
borg/archiver.py
==================
d3fe134;Thomas Waldmann;2016-04-23 22:42:56 +0200;add a bin_to_hex helper and some properties

==

borg/archive.py
borg/archiver.py
borg/cache.py
borg/helpers.py
borg/key.py
borg/remote.py
borg/repository.py
borg/testsuite/archiver.py
borg/testsuite/helpers.py
borg/testsuite/key.py
borg/upgrader.py
==================
65f442d;enkore;2016-04-23 18:07:01 +0200;Merge pull request #965 from enkore/fix/mount-perf
borg mount: cache partially read data chunks
==
==================
bfb00df;Marian Beermann;2016-04-23 18:03:05 +0200;borg mount: cache partially read data chunks
Fixes #966

==

borg/archiver.py
borg/fuse.py
==================
a220a2d;TW;2016-04-23 13:55:37 +0200;Merge pull request #969 from rumpelsepp/patch-2
docs/installation: Add FreeBSD Ports tree
==
==================
17afc7d;TW;2016-04-23 13:54:08 +0200;Merge pull request #961 from scoobadog/fedora-instructions
Fix Fedora installation instructions
==
==================
61a8ff4;Janne K;2016-04-23 11:51:38 +0300;Package is not needed in Korora

==

docs/installation.rst
==================
ab4a1a1;Stefan Tatschner;2016-04-23 09:02:02 +0200;docs/installation: Add FreeBSD Ports tree
https://svnweb.freebsd.org/ports?view=revision&revision=413469

It is not yet in "pkg"; that will automatically happen in the next quarterly period.
==

docs/installation.rst
==================
71c2c27;TW;2016-04-23 02:15:54 +0200;Merge pull request #958 from ThomasWaldmann/update-changes
update CHANGES
==
==================
257995d;Janne K;2016-04-22 17:07:31 +0300;Fix Fedora installation instructions
Update installation instructions so that the following error won't occur:

gcc: error: /usr/lib/rpm/redhat/redhat-hardened-cc1: No such file or directory
error: command 'gcc' failed with exit status 1

==

docs/installation.rst
==================
f8fb99d;Thomas Waldmann;2016-04-22 03:33:03 +0200;update CHANGES

==

docs/changes.rst
==================
7ffbd4a;TW;2016-04-22 02:01:41 +0200;Merge pull request #941 from ThomasWaldmann/keep-last-n
implement --keep-last N via --keep-secondly N, also --keep-minutely, fixes #537
==
==================
aa0a445;TW;2016-04-22 01:57:56 +0200;Merge pull request #957 from ThomasWaldmann/test-partial-chunk
ChunkBuffer: add test for leaving partial chunk in buffer, fixes #945
==
==================
5e47000;Thomas Waldmann;2016-04-22 01:20:47 +0200;ChunkBuffer: add test for leaving partial chunk in buffer

==

borg/testsuite/archive.py
==================
43fc7a2;Simon Heath;2016-04-21 15:11:43 -0400;Fixed formatting

==

docs/deployment.rst
==================
621aed0;Simon Heath;2016-04-21 15:10:25 -0400;Contributed Salt example to docs

==

docs/deployment.rst
==================
035a884;enkore;2016-04-19 09:22:10 +0200;Merge pull request #946 from enkore/issue/945
Fix #945
==
==================
528913b;Marian Beermann;2016-04-19 09:18:46 +0200;Fix #945

==

borg/archive.py
==================
0877d10;Thomas Waldmann;2016-04-19 02:14:03 +0200;Merge branch 'master' into keep-last-n

==
==================
4f507c0;TW;2016-04-19 01:18:24 +0200;Merge pull request #943 from enkore/merge/1.0-maint
Merge/1.0 maint
==
==================
76d0c20;enkore;2016-04-19 00:53:58 +0200;Merge branch '1.0-maint' into master

==
==================
3060332;TW;2016-04-19 00:50:45 +0200;Merge pull request #944 from ThomasWaldmann/fix-942
prune: fix bad validator, fixes #942
==
==================
d52b5cf;Thomas Waldmann;2016-04-19 00:05:44 +0200;prune: fix bad validator, fixes #942

==

borg/archiver.py
==================
b4c4a24;Thomas Waldmann;2016-04-18 23:05:53 +0200;prune: simplify code, have unified output list in reverse time order
to better visualize the "thinning out", we now list all archives in
reverse time order. at the left of each entry we tell whether we delete
or keep the archive.

previously it first listed all kept archives, then all deleted archives.

==

borg/archiver.py
==================
47103f9;Thomas Waldmann;2016-04-18 22:38:20 +0200;prune: reorder help text, important -> easy -> more difficult
also rephrase slightly, hopefully more clear now.

==

borg/archiver.py
==================
f09812d;Thomas Waldmann;2016-04-18 21:56:05 +0200;implement --keep-last N via --keep-secondly N, also --keep-minutely
assuming that there is not more than 1 backup archive made in 1s,
--keep-last N and --keep-secondly N are equivalent.

==

borg/archiver.py
==================
14bd4c7;TW;2016-04-18 20:40:20 +0200;Merge pull request #932 from enkore/feature/inorder
create: Visit files in inode order
==
==================
87e211f;TW;2016-04-18 20:23:30 +0200;Merge pull request #934 from ThomasWaldmann/pass-meta
pass meta-data around, fixes #765
==
==================
a345b34;Thomas Waldmann;2016-03-18 03:16:12 +0100;pass meta-data around, fixes #765
_Chunk is a namedtuple of (meta, data), create chunks using Chunk(data, **meta).

This does not yet have any visible functionality, meta is always empty dict right now.

==

borg/archive.py
borg/archiver.py
borg/cache.py
borg/fuse.py
borg/helpers.py
borg/key.py
borg/testsuite/archive.py
borg/testsuite/archiver.py
borg/testsuite/helpers.py
borg/testsuite/key.py
==================
f13aef5;Marian Beermann;2016-04-17 16:41:03 +0200;create: Visit files in inode order

==

borg/archiver.py
borg/helpers.py
borg/testsuite/archiver.py
==================
775b9c3;enkore;2016-04-17 20:25:16 +0200;Merge pull request #920 from enkore/fix/caps
Fix capabilities extraction on Linux
==
==================
5b6377e;TW;2016-04-17 20:22:16 +0200;Merge pull request #927 from ThomasWaldmann/move-constants
move some constants to new constants module
==
==================
5de002c;TW;2016-04-17 16:29:16 +0200;Merge pull request #931 from ka7/spelling_fix
fix spelling, as of lintian.debian.org
==
==================
6b93042;klemens;2016-04-17 16:24:26 +0200;fix sepelling, as of lintian.debian.org

==

borg/archiver.py
==================
9a70a20;Thomas Waldmann;2016-04-17 03:15:19 +0200;move some constants to new constants module

==

borg/archive.py
borg/archiver.py
borg/constants.py
borg/helpers.py
borg/key.py
borg/repository.py
borg/testsuite/archiver.py
borg/testsuite/chunker.py
borg/testsuite/upgrader.py
==================
77966c7;TW;2016-04-17 01:58:44 +0200;Merge pull request #925 from enkore/fix/hashindexadd
Cache: update add_chunk to use ChunkIndex.add
==
==================
ec782ef;TW;2016-04-17 01:18:35 +0200;Merge pull request #923 from ThomasWaldmann/docs-buzhash
docs: added some insights by "Voltara", fixes #903
==
==================
2f9e4e7;TW;2016-04-17 01:18:09 +0200;Merge pull request #922 from ThomasWaldmann/docs-clarify-info
docs: clarify what "deduplicated size" means
==
==================
719a27d;Marian Beermann;2016-04-17 00:40:08 +0200;Cache: update add_chunk to use ChunkIndex.add, fix unique count

==

borg/cache.py
==================
01fac8d;Marian Beermann;2016-04-17 00:37:40 +0200;ChunkIndex.add: overwrite current (c)size w/ new values

==

borg/hashindex.pyx
borg/testsuite/hashindex.py
==================
39a40cd;Marian Beermann;2016-04-16 23:52:16 +0200;Fix capabilities extraction on Linux
They are extracted correctly, for a little while at least, since chown()
*resets* all capabilities on the chowned file. Which I find curious,
since chown() is a privileged syscall. Probably a safeguard for
sysadmins who are unaware of capabilities.

The solution is to set the xattrs last, after chown()ing files.

==

borg/archive.py
borg/testsuite/archiver.py
borg/xattr.py
==================
ec93073;Thomas Waldmann;2016-04-16 23:27:01 +0200;docs: added some insights by "Voltara", fixes #903

==

borg/_chunker.c
==================
11fdaea;Thomas Waldmann;2016-04-16 22:35:50 +0200;docs: clarify what "deduplicated size" means

==

borg/archiver.py
==================
30f7320;TW;2016-04-16 21:46:41 +0200;Merge pull request #918 from ThomasWaldmann/namedtuple2
better readability and less errors with namedtuples, fixes #823
==
==================
3f474ff;Thomas Waldmann;2016-04-16 17:48:47 +0200;better readability and less errors with namedtuples, fixes #823

==

borg/archive.py
borg/archiver.py
borg/cache.py
borg/hashindex.pyx
borg/helpers.py
borg/testsuite/archiver.py
==================
4de14fd;Thomas Waldmann;2016-04-16 16:58:43 +0200;Merge branch '1.0-maint'

==
==================
8662202;Thomas Waldmann;2016-04-16 02:39:22 +0200;update CHANGES

==

docs/changes.rst
==================
813dbc4;Thomas Waldmann;2016-04-16 02:36:06 +0200;Merge branch '1.0-maint' of github.com:borgbackup/borg into 1.0-maint

==
==================
f162477;TW;2016-04-16 02:29:35 +0200;Merge pull request #914 from verygreen/fix-fadvise
Workround a bug in Linux fadvise FADV_DONTNEED, fixes #907
==
==================
ce176b5;Oleg Drokin;2016-04-15 19:27:44 -0400;Workround a bug in Linux fadvise FADV_DONTNEED, fixes #907
Despite what the man page says, Linux does not discard the initial
partial page only. The ending page would be truncated no matter if
it is partial or not.
Page-align the fadvise size to take care of this.
Also while we are at it, roll back initial fadvise offset to the
previous page boundary to actually throw away that page as we
no longer need it having read the second part now and the first
time in the previous call.

This patch has a noticeable impact in my Linux testing when the file
is on the rotating media. The total test runtime decreased by a bit
over 10%, but since over half of that time was actually cpu time,
the actual iowait time decreased around 20%.

==

borg/_chunker.c
==================
956e995;Thomas Waldmann;2016-04-16 00:59:59 +0200;update CHANGES

==

docs/changes.rst
==================
c4d1d01;Thomas Waldmann;2016-04-16 00:57:20 +0200;use latest llfuse for vagrant machines

==

Vagrantfile
==================
104e885;TW;2016-04-15 12:08:08 +0200;Merge pull request #910 from ThomasWaldmann/docs-clarify-mountpoint
docs fixes
==
==================
43b4fda;Thomas Waldmann;2016-04-15 03:38:43 +0200;docs: fix confusing usage of "repo" as archive name

==

docs/quickstart.rst
docs/usage.rst
==================
bc854e3;Thomas Waldmann;2016-04-15 03:35:37 +0200;docs: use /path/to/repo, fixes #901
/mnt/backup was confusing as people like to mount their backup disk on /mnt/backup,
but borg init /mnt/backup does not work if that directory already exists because it is
the mountpoint. it would work, if /mnt was the mountpoint, but that is not obvious
and also unusual.

==

README.rst
docs/quickstart.rst
docs/usage.rst
==================
68e8707;Thomas Waldmann;2016-04-15 03:09:18 +0200;update CHANGES

==

docs/changes.rst
==================
dd95d0e;enkore;2016-04-15 00:06:25 +0200;Merge pull request #891 from enkore/feature/cython-summarize
Add overflow checks to refcounting, port stuff to Cython etc
==
==================
29ebdba;Marian Beermann;2016-04-12 00:10:44 +0200;refcounting: use uint32_t, protect against overflows, fix merging for BE

==

borg/_hashindex.c
borg/archive.py
borg/cache.py
borg/hashindex.pyx
borg/testsuite/hashindex.py
==================
c90745c;Marian Beermann;2016-04-11 23:48:01 +0200;Port hashindex_summarize into ChunkIndex.summarize

==

borg/_hashindex.c
borg/hashindex.pyx
borg/testsuite/hashindex.py
==================
0a253ed;TW;2016-04-13 16:09:14 +0200;Merge pull request #898 from ThomasWaldmann/1.0-maint
reproducible doc for ProgressIndicator*
==
==================
60ca65a;Danny Edel;2016-03-14 09:44:24 +0100;reproducible doc for ProgressIndicator*
building the API docs captured sys.stderr's IO charset, making the build
unreproducible.

==

borg/helpers.py
==================
d308421;TW;2016-04-12 12:54:45 +0200;Merge pull request #892 from ThomasWaldmann/fix-compare-content
compare_content: fix wrong added/removed file size
==
==================
6922452;Thomas Waldmann;2016-04-12 03:08:03 +0200;compare_content: fix wrong added/removed file size
bug: c[1] was not the size, but the byte at index 1 of the id bytestring!

==

borg/archiver.py
==================
c2f9533;TW;2016-04-11 23:21:48 +0200;Merge pull request #887 from enkore/issue/886
hashindex_summarize: fix missing byte-order conversion
==
==================
90a9fbd;Marian Beermann;2016-04-11 22:08:07 +0200;hashindex_summarize: fix missing byte-order conversion
Fixes #886

==

borg/_hashindex.c
==================
d8c630b;TW;2016-04-11 14:16:22 +0200;Merge pull request #884 from enkore/issue/874
borg delete: fix --cache-only for broken caches
==
==================
f8be0cf;enkore;2016-04-11 13:11:07 +0200;Merge pull request #882 from frispete/master
Fix package naming for openSUSE
==
==================
d12c1de;Marian Beermann;2016-04-11 12:50:39 +0200;borg delete: fix --cache-only for broken caches
This also makes --cache-only idempotent: it won't fail if the cache
is already deleted.

Fixes #874

==

borg/archiver.py
borg/cache.py
==================
4bf40f4;Hans-Peter Jansen;2016-04-11 10:08:16 +0200;Fix package naming for openSUSE

==

docs/installation.rst
==================
378140a;TW;2016-04-10 20:20:42 +0200;Merge pull request #878 from Ape/pr/diff_symlink_fix
Fix 'borg diff' when symlink is replacing or being replaced
==
==================
6133a6e;TW;2016-04-10 19:59:54 +0200;Merge pull request #879 from bpereto/fedora-docs
added package link to docs for fedora
==
==================
ed868ef;Lauri Niskanen;2016-04-10 18:27:29 +0300;Add more advanced symlink test cases for 'borg diff'

==

borg/testsuite/archiver.py
==================
9fc5df4;Lauri Niskanen;2016-04-10 18:23:22 +0300;Fix 'borg diff' when symlink is replacing or being replaced
Previously on some cases where symlink replaced something else or was replaced
by something else, `borg diff` failed with `KeyError: b'source'`. This commit
fixes the issue.

==

borg/archiver.py
==================
1e1dae3;Benjamin Pereto;2016-04-10 17:55:36 +0200;added package docs for fedora

==

docs/installation.rst
==================
c3e6bc2;TW;2016-04-10 17:20:41 +0200;Merge pull request #812 from enkore/feature-rewrite
feature recreate
==
==================
ea1ebb8;TW;2016-04-10 17:06:45 +0200;Merge pull request #868 from anarcat/patch-2
add link to OpenBSD port and OpenSUSE
==
==================
d5ad063;Marian Beermann;2016-04-10 16:49:17 +0200;recreate: add experimental warning for now

==

borg/archiver.py
borg/testsuite/archiver.py
docs/usage.rst
==================
8dbbc35;TW;2016-04-10 16:52:39 +0200;Merge pull request #875 from bket/1.0-maint
fix issue #873 - running borg with --one-file-system traverses in excluded filesystems
==
==================
fd10d13;Björn Ketelaars;2016-04-10 16:24:58 +0200;fix issue #873

==

borg/archiver.py
==================
0bc0fa2;Marian Beermann;2016-04-10 15:59:10 +0200;recreate: improve tests, docs, check chunk availability[1]
[1] So if e.g. delete/prune/check are run these can delete the
    recreate_partial_chunks. This is now caught and handled correctly.

==

borg/archive.py
borg/archiver.py
borg/testsuite/archiver.py
docs/usage/recreate.rst.inc
==================
4b5e6ff;Marian Beermann;2016-04-10 14:09:05 +0200;Assimilate "borg comment" into "borg recreate"

==

borg/archive.py
borg/archiver.py
borg/testsuite/archiver.py
docs/usage.rst
docs/usage/comment.rst.inc
docs/usage/recreate.rst.inc
==================
a3ee9d2;Marian Beermann;2016-04-07 11:29:52 +0200;borg recreate: Re-create existing archives.
Use with caution: permanent data loss by specifying incorrect patterns
is easily possible. Make a dry run to make sure you got everything right.

borg recreate has many uses:
- Can selectively remove files/dirs from old archives, e.g. to free
  space or purging picturarum biggus dickus from history
- Recompress data
- Rechunkify data, to have upgraded Attic / Borg 0.xx archives deduplicate
  with Borg 1.x archives. (Or to experiment with chunker-params for
  specific use cases

It is interrupt- and resumable.

Chunks are not freed on-the-fly.
Rationale:
  Makes only sense when rechunkifying, but logic on which new chunks to
  free what input chunks is complicated and *very* delicate.

Future TODOs:
- Refactor tests using py.test fixtures
  -- would require porting ArchiverTestCase to py.test: many changes,
     this changeset is already borderline too large.
- Possibly add a --target option to not replace the source archive
  -- with the target possibly in another Repo
     (better than "cp" due to full integrity checking, and deduplication
      at the target)
- Detect and skip (unless --always-recompress) already recompressed chunks

Fixes #787 #686 #630 #70 (and probably some I overlooked)
Also see #757 and #770

==

borg/archive.py
borg/archiver.py
borg/cache.py
borg/helpers.py
borg/testsuite/archiver.py
borg/testsuite/helpers.py
docs/usage.rst
docs/usage/recreate.rst.inc
==================
d4aac62;TW;2016-04-10 01:39:59 +0200;Merge pull request #867 from enkore/feature/btrf1
better help texts and sphinx reproduction of the help
==
==================
0a369c0;Marian Beermann;2016-04-10 01:28:18 +0200;Better help texts and Sphinx reproduction of usage
- Group options
- Nicer list of options in Sphinx
- Deduplicate 'Common options'
  (including --help)

The latter is done by explicitly declaring --help in the common_parser,
which is then inherited by the sub-parsers; no change in observable
behaviour.

==

borg/archiver.py
docs/borg_theme/css/borg.css
docs/usage.rst
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/comment.rst.inc
docs/usage/common-options.rst.inc
docs/usage/create.rst.inc
docs/usage/debug-delete-obj.rst.inc
docs/usage/debug-dump-archive-items.rst.inc
docs/usage/debug-get-obj.rst.inc
docs/usage/debug-put-obj.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/list.rst.inc
docs/usage/migrate-to-repokey.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/upgrade.rst.inc
setup.py
==================
cece7f9;Thomas Waldmann;2016-04-10 01:13:35 +0200;merged 1.0-maint into master

==
==================
d8f2d19;TW;2016-04-09 22:45:40 +0200;Merge pull request #869 from anarcat/patch-3
cleanup ubuntu in install list
==
==================
17c0a3a;anarcat;2016-04-09 16:27:43 -0400;cleanup ubuntu in install list
ubuntu was showing up twice in the list of supported OSes... it seems it was because the line was getting too long, so I removed the "names" and kept only the numbers to keep the line short.
==

docs/installation.rst
==================
3cd6f52;anarcat;2016-04-09 16:19:03 -0400;add link to OpenBSD port and OpenSUSE
see the ever-growing #105
==

docs/installation.rst
==================
6a3f2d7;Thomas Waldmann;2016-04-08 23:41:15 +0200;update CHANGES

==

docs/changes.rst
==================
d5d037b;Thomas Waldmann;2016-04-08 23:38:46 +0200;ran build_api build_usage

==

docs/api.rst
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/debug-delete-obj.rst.inc
docs/usage/debug-dump-archive-items.rst.inc
docs/usage/debug-get-obj.rst.inc
docs/usage/debug-put-obj.rst.inc
docs/usage/delete.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/list.rst.inc
docs/usage/migrate-to-repokey.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/upgrade.rst.inc
==================
299e9e2;TW;2016-04-08 23:19:54 +0200;Merge pull request #861 from ThomasWaldmann/info-not-v
reorder log level options, so --info shows up in help
==
==================
7861de3;Thomas Waldmann;2016-04-08 22:55:07 +0200;reorder log level options, so --info shows up in help

==

borg/archiver.py
==================
e9b3b3f;Thomas Waldmann;2016-04-08 19:52:47 +0200;updated CHANGES

==

docs/changes.rst
==================
938302f;TW;2016-04-08 18:52:50 +0200;Merge pull request #847 from Ape/pr/archive_comments
Add archive comments
==
==================
327c721;Lauri Niskanen;2016-04-06 14:04:18 +0300;Add archive comments
- Archives now have a new metadata field 'comment'
- 'info' command shows a comment if it's present
- 'create' command now has option '--comment' for adding comments to archives.
- A new command 'comment' is added for modifying the comments on existing
  archives.

Resolves #842.

==

borg/archive.py
borg/archiver.py
borg/testsuite/archiver.py
docs/usage.rst
docs/usage/comment.rst.inc
docs/usage/create.rst.inc
==================
7e38493;Lauri Niskanen;2016-04-08 08:07:14 +0300;Extract set_meta method on Archive

==

borg/archive.py
==================
104e871;TW;2016-04-08 14:05:45 +0200;Merge pull request #857 from enkore/issue/850
init: clean up partial repo if passphrase input is aborted
==
==================
59886b4;Marian Beermann;2016-04-08 12:07:53 +0200;init: clean up partial repo if passphrase input is aborted
Fixes #850

==

borg/archiver.py
borg/testsuite/archiver.py
==================
305273d;TW;2016-04-06 23:40:57 +0200;Merge pull request #852 from enkore/feature/1.0ignore-inode
1.0-maint, borg create: add --ignore-inode option [to fix sshfs performance]
==
==================
29bc396;Marian Beermann;2016-04-06 23:17:06 +0200;borg create: add --ignore-inode option
This is mainly meant for use with network file systems like sshfs and
possibly CIFS, which don't convey proper inode numbers.

==

borg/archive.py
borg/archiver.py
borg/cache.py
==================
9d13a10;TW;2016-04-06 15:17:36 +0200;Merge pull request #848 from Ape/pr/escape_cmdline
Escape cmdline arguments that have spaces in them
==
==================
df7aa64;TW;2016-04-06 15:06:52 +0200;Merge pull request #845 from enkore/issue/844
Test suite: Reset exit code of persistent archiver
==
==================
d0c56a9;Lauri Niskanen;2016-04-06 14:33:52 +0300;Escape cmdline arguments that have spaces in them
`borg info` command shows the command line that was used to create the archive.
If the command line has arguments with spaces in them the printed command will
not work. This commit will escape these arguments by enclosing it to quotation
marks.

==

borg/archiver.py
==================
b59f92a;Marian Beermann;2016-04-06 10:04:35 +0200;Test suite: Reset exit code of persistent archiver
#844

==

borg/testsuite/archiver.py
==================
515b745;TW;2016-04-04 21:47:21 +0200;Merge pull request #839 from enkore/issue/791
If BORG_PASSPHRASE is present but wrong, don't prompt for password, f…
==
==================
9a7bad2;TW;2016-04-04 21:37:04 +0200;Merge pull request #838 from enkore/issue/792
Remote: don't print tracebacks for Error exceptions handled downstream
==
==================
890e44e;Marian Beermann;2016-04-03 21:44:29 +0200;RemoteRepository: clean up pipe if remote open() fails

==

borg/remote.py
==================
425a4d8;Marian Beermann;2016-04-04 17:09:52 +0200;Remote: don't print tracebacks for Error exceptions handled downstream
(What we'd really want is to have proper exception transporting over
 the RPC)

Fixes #792

==

borg/remote.py
==================
8f716d8;Marian Beermann;2016-04-03 21:37:15 +0200;If BORG_PASSPHRASE is present but wrong, don't prompt for password, fail instead.
Leaves PassphraseKey alone, since I cannot test it.

Fixes #791

==

borg/key.py
==================
e6fff5f;TW;2016-04-03 20:51:02 +0200;Merge pull request #836 from ThomasWaldmann/complete-log-levels
add --warning, --error, --critical for completeness, fixes #826
==
==================
a519333;TW;2016-04-03 20:17:09 +0200;add --warning, --error, --critical for completeness, fixes #826
it's not recommended to suppress warnings or errors,
but the user may decide this on his own.

note: --warning is not given to borg serve so a <= 1.0.0 borg
will still work as server. it is not needed as it is the default.

==

borg/archiver.py
borg/remote.py
docs/usage.rst
==================
7b6ae60;TW;2016-04-03 19:15:30 +0200;Merge pull request #834 from enkore/issue/826
ArchiveChecker: move "orphaned objects check skipped" to INFO log level
==
==================
fec9228;TW;2016-04-03 18:28:48 +0200;Merge pull request #832 from anarcat/patch-2
add jessie-backports to supported platforms
==
==================
d7299c9;Marian Beermann;2016-04-03 17:58:15 +0200;ArchiveChecker: move "orphaned objects check skipped" to INFO log level
Fixes #826

==

borg/archive.py
==================
287f495;anarcat;2016-04-03 12:23:32 -0400;add jessie-backports to supported platforms
see #105
==

docs/installation.rst
==================
86361fd;TW;2016-04-03 17:49:37 +0200;update CHANGES
the password roundtrip was already in 1.0.0, removed it from 1.0.1 changes.
rephrase / prettify some stuff.

==

docs/changes.rst
==================
fc10ac0;TW;2016-04-03 17:36:38 +0200;Merge pull request #830 from enkore/feature/1.0ctxmng
Make Repository a context manager, use decorators for wrapping withs
==
==================
83586ae;Marian Beermann;2016-04-03 17:14:43 +0200;Make Repository a context manager, use decorators for wrapping withs
(Remote)Repository.close() is not a public API anymore, but a private
API. It shall not be used from within other classes than Repository
or it's tests. The proper way is to use a context manager now. However,
for RPC/Remote compatibility with Borg 1.0 it is kept and unchanged.

Repositories are not opened by __init__ now anymore, it is done
by binding it to a context manager. (This SHOULD be compatible both ways
with remote, since opening the repo is handled by a RepositoryServer method)

Decorators @with_repository() and @with_archive simplify
context manager handling and remove unnecessary indentation.

Backported to 1.0-maint

==

borg/archiver.py
borg/remote.py
borg/repository.py
borg/testsuite/__init__.py
borg/testsuite/archiver.py
borg/testsuite/repository.py
borg/testsuite/upgrader.py
borg/upgrader.py
==================
d6590b4;TW;2016-04-01 00:19:01 +0200;Merge pull request #821 from borgbackup/1.0-maint
merge 1.0-maint
==
==================
8d9dbc6;TW;2016-03-31 23:53:19 +0200;Merge pull request #820 from ipha/master
fix incorrect _ns variables
==
==================
ad57178;TW;2016-03-31 23:45:47 +0200;Merge pull request #819 from enkore/fix/chunker-io2
Chunker: fix wrong EOF assumption, check for return type
==
==================
f406bf7;Mitch Bigelow;2016-03-31 17:31:53 -0400;fix incorrect _ns variables

==

borg/fuse.py
==================
061bf59;Marian Beermann;2016-03-31 22:03:17 +0200;Chunker: fix wrong EOF assumption[1], check for return type[2]
[1]
This worked incidentally because OSes tend to return at least one page
worth of data when EOF is not reached. Increasing WINDOW_SIZE beyond
the page size might have lead to data loss.

[2]
If read() of the passed Python object returned something not-bytes,
PyBytes_Size returns -1 (ssize_t) which becomes a very larger number for
memcpy()s size_t.

==

borg/_chunker.c
borg/testsuite/chunker.py
==================
2f74d2e;Thomas Waldmann;2016-03-31 21:44:43 +0200;update CHANGES

==

docs/changes.rst
==================
1cc053b;wormingdead;2016-03-25 22:43:29 -0700;Document logo font. Recreate logo png. Remove GIMP logo file.

==

docs/_static/logo.png
docs/_static/logo.xcf
docs/_static/logo_font.txt
==================
e494d24;Alexander Pyhalov;2016-03-27 15:03:27 +0300;failing hashindex tests on netbsd, fixes #804

==

borg/_hashindex.c
==================
c35dbac;Thomas Waldmann;2016-03-31 21:28:35 +0200;update CHANGES

==

docs/changes.rst
==================
d56e4c5;TW;2016-03-31 20:28:49 +0200;Merge pull request #818 from borgbackup/1.0-maint
merge append-only from 1.0 maint
==
==================
8cfc930;TW;2016-03-31 19:57:13 +0200;Merge pull request #817 from enkore/feature/append-only
Feature append only
==
==================
8f6ce90;Marian Beermann;2016-03-31 18:52:40 +0200;append-only mode: docs reformulated

==

docs/usage.rst
==================
effa992;Marian Beermann;2016-03-31 18:23:08 +0200;append-only mode: use single file for log, disallow check --repair, docs

==

borg/repository.py
docs/usage.rst
==================
6841be3;TW;2016-03-31 18:15:57 +0200;Merge pull request #789 from enkore/feature-hmac
Replace stdlib hmac, zero-copy decrypt
==
==================
233e239;TW;2016-03-31 18:13:00 +0200;Merge pull request #816 from Ape/pr/sort_diff_output
Add '--sort' option for sorting diff command output
==
==================
9d1a30c;Lauri Niskanen;2016-03-31 10:33:03 +0300;Add '--sort' option for sorting diff command output
Previously, on 'borg diff', the output always had first the modifications, then
additions, and finally removals. Output may be easier to follow if the various
kinds of changes are interleaved. This commit is a simple solution that first
collects the output lines and sorts them by file path before printing. This new
behavior is optional and disabled by default. It can be enabled with '--sort'
command line option.

This option will be especially useful after the planned multi-threading changes
arrive. Multi-threading may shuffle the archive order of files making diff
output hard to follow without sorting.

Resolves #797.

==

borg/archiver.py
borg/testsuite/archiver.py
docs/usage/diff.rst.inc
==================
ffc8cf6;Marian Beermann;2016-03-31 16:24:10 +0200;Append-only mode for repositories
New repository config item, repository.append_only, causes Borg to never
delete or append to existing data files. Hints and indices are handled
as before, old ones are deleted, because they can get quite large, but
are automatically reconstructed: no need to keep them.

When append_only is activated a file /path/to/repo/transactions/<NUMBER>
will be created for every commit.
Deleting all segments <NUMBER+1> and higher will rollback to that commit.

Note that this only influences Borg behaviour. Since repository config
can't be altered remotely (except for repository.key) this can't be
disabled when accessed remotely over SSH with "borg serve" as the
forced command.

This is only a feature to support the use case, and does not replace
appropriate file system permissions or monitoring.

Resolves #809

==

borg/repository.py
borg/testsuite/repository.py
==================
2a026bd;TW;2016-03-31 15:50:19 +0200;Merge pull request #815 from edgewood/master
Add 'x' status for excluded paths (#814)
==
==================
2ab324c;Ed Blackman;2016-03-30 12:17:54 -0400;Add 'x' status for excluded paths (#814)
Makes it easy to see paths excluded by --exclude* options for testing of
regexes, and for ongoing monitoring that files desired for backup aren't
getting excluded accidentally.

==

borg/archiver.py
borg/testsuite/archiver.py
docs/usage.rst
==================
5a0f75d;TW;2016-03-28 01:14:00 +0200;Merge pull request #806 from pyhalov/804
failing hashindex tests on netbsd, fixes #804
==
==================
a97c9f9;Alexander Pyhalov;2016-03-27 15:03:27 +0300;failing hashindex tests on netbsd, fixes #804

==

borg/_hashindex.c
==================
c5bd7f2;Marian Beermann;2016-03-27 01:12:23 +0100;Replace stdlib hmac with OpenSSL, zero-copy decrypt
AESKeyBase.decrypt makes less copies of the data, specifically data[41:],
which copies the payload, is gone. This is possible since this commit
makes our lil' crypto API compatible with simple buffers.

In Cython there is a syntax for creating memoryviews from buffer-enabled
objects, however, it doesn't support read-only buffers. ro_buffer gets
this job done, though, and also does the proper type checking
(by PyBUF_SIMPLE).

Note: msgpack doesn't support memoryviews. Otherwise we could avoid
      copying the en/de-crypted output with the final "return out[:ctl]"

This commit leads to a solid 10-15 % increase in performance of hash-lists
and extract.

The hmac_sha256() function releases the GIL.

==

borg/crypto.pyx
borg/key.py
borg/testsuite/crypto.py
==================
1787cf1;TW;2016-03-26 23:06:59 +0100;Merge pull request #783 from Ape/pr/improved_diff_format
Improved diff format
==
==================
d5f0453;Lauri Niskanen;2016-03-21 14:48:22 +0200;Add Lauri Niskanen to AUTHORS

==

AUTHORS
==================
4eba7d3;Lauri Niskanen;2016-03-25 08:44:09 +0200;Preserve archive order of added and removed files

==

borg/archiver.py
==================
1d3e69e;Lauri Niskanen;2016-03-21 14:48:08 +0200;Improve 'borg diff' output format
The main design goals of the new format:
 - One file takes exactly one line of output
 - The format is easy to read with typical, long list of changes
 - Metadata changes are visible and easy to examine
 - Unuseful information is not shown

Resolves #757.

==

borg/archiver.py
borg/testsuite/archiver.py
docs/usage.rst
==================
c405122;Lauri Niskanen;2016-03-24 11:18:34 +0200;Add option for an explicit sign in sizeof_fmt functions in helpers

==

borg/helpers.py
borg/testsuite/helpers.py
==================
db171e9;TW;2016-03-26 21:34:06 +0100;Merge pull request #777 from enkore/feature-ctxmng
Feature ctxmng: Repository context manager
==
==================
7225def;TW;2016-03-26 17:51:12 +0100;Merge pull request #803 from borgbackup/1.0-maint
merge 1.0 maint
==
==================
bf20847;TW;2016-03-26 17:16:13 +0100;Merge pull request #801 from ThomasWaldmann/cosmetic-fix
fix capitalization, add ellipses, change log level to debug for 2 mes…
==
==================
74f15e2;TW;2016-03-26 17:15:11 +0100;Merge pull request #800 from ThomasWaldmann/vagrant-xenial
vagrant: add ubuntu/xenial 64bit
==
==================
3e12037;Thomas Waldmann;2016-03-26 14:31:54 +0100;fix capitalization, add ellipses, change log level to debug for 2 messages, fixes #798

==

borg/archive.py
borg/cache.py
==================
54b7ac6;Thomas Waldmann;2016-03-26 14:21:10 +0100;Merge branch 'lfam-packaged-for-guix'

==
==================
d6b85a6;Thomas Waldmann;2016-03-26 14:20:48 +0100;Merge branch 'packaged-for-guix' of https://github.com/lfam/borg into lfam-packaged-for-guix

==
==================
cd3c367;Thomas Waldmann;2016-03-26 14:14:15 +0100;vagrant: add ubuntu/xenial 64bit
this box has still some issues, but hopefully they will be fixed soon.

==

Vagrantfile
==================
a706399;TW;2016-03-26 12:56:22 +0100;Merge pull request #799 from wormingdead/master
Your project's blurry logo drove me to correct it. I found the font in Google's database.
==
==================
f5ea7f5;wormingdead;2016-03-25 22:43:29 -0700;Document logo font. Recreate logo png. Remove GIMP logo file.

==

docs/_static/logo.png
docs/_static/logo.xcf
docs/_static/logo_font.txt
==================
9068a40;TW;2016-03-25 13:35:13 +0100;Merge pull request #794 from infectormp/patch-1
Installation: Mention Gentoo package
==
==================
7412e30;infectormp;2016-03-25 09:21:18 +0300;Installation: Mention Gentoo package
docs/installation.rst: Add Gentoo package to list of distribution packages.
==

docs/installation.rst
==================
587abf5;lfam;2016-03-25 00:13:24 -0400;Installation: Mention GNU Guix package.
* docs/installation.rst: Add GNU Guix package to list of distribution packages.
==

docs/installation.rst
==================
7caec01;Marian Beermann;2016-03-23 00:41:15 +0100;Make Repository a context manager, use decorators for wrapping withs
(Remote)Repository.close() is not a public API anymore, but a private
API. It shall not be used from within other classes than Repository
or it's tests. The proper way is to use a context manager now. However,
for RPC/Remote compatibility with Borg 1.0 it is kept and unchanged.

Repositories are not opened by __init__ now anymore, it is done
by binding it to a context manager. (This SHOULD be compatible both ways
with remote, since opening the repo is handled by a RepositoryServer method)

Decorators @with_repository() and @with_archive simplify
context manager handling and remove unnecessary indentation.

==

borg/archiver.py
borg/remote.py
borg/repository.py
borg/testsuite/__init__.py
borg/testsuite/archiver.py
borg/testsuite/repository.py
borg/testsuite/upgrader.py
borg/upgrader.py
==================
6013138;Thomas Waldmann;2016-03-21 16:14:24 +0100;Merge branch 'master' of github.com:borgbackup/borg

==
==================
de7582a;Thomas Waldmann;2016-03-21 16:13:08 +0100;Merge branch '1.0-maint'

==
==================
40dbb74;Thomas Waldmann;2016-03-21 16:11:43 +0100;fix cygwin requirements (gcc-g++)

==

docs/installation.rst
==================
42beb2d;TW;2016-03-21 16:07:52 +0100;Merge pull request #785 from pyhalov/illumos-build-1.0
Fix build on illumos
==
==================
e435a5a;TW;2016-03-21 16:04:35 +0100;Merge pull request #784 from pyhalov/doors-1.0
Don't try to backup doors or event ports (Solaris and derivates).
==
==================
f63be63;Alexander Pyhalov;2016-03-21 11:18:43 +0300;Fix build on illumos

==

borg/_hashindex.c
==================
e98f823;Alexander Pyhalov;2016-03-21 11:23:55 +0300;Don't try to backup doors or event ports

==

borg/archiver.py
==================
2f7d8aa;TW;2016-03-19 22:02:57 +0100;Merge pull request #778 from borgbackup/1.0-maint
merge 1.0 maint
==
==================
f486a67;Thomas Waldmann;2016-03-19 21:19:30 +0100;do not sleep for >60s while waiting for lock, fixes #773

==

borg/locking.py
==================
ba68c17;TW;2016-03-18 16:28:51 +0100;Merge pull request #767 from enkore/feature-diff-docs
Update usage docs (diff and list)
==
==================
9cf1299;Marian Beermann;2016-03-18 15:42:32 +0100;borg diff help: clarify: for new archives different chunker params still require content compare

==

borg/archiver.py
docs/usage/diff.rst.inc
==================
e64d91b;Marian Beermann;2016-03-18 13:30:39 +0100;Update borg diff help message regarding --same-chunker-params

==

borg/archiver.py
docs/usage/diff.rst.inc
==================
0e9aea2;Marian Beermann;2016-03-18 13:30:02 +0100;Update borg diff example

==

docs/usage.rst
==================
343d84b;Marian Beermann;2016-03-18 13:29:49 +0100;ItemFormatter: group keys in help output

==

borg/helpers.py
docs/usage/list.rst.inc
==================
89120a9;Marian Beermann;2016-03-18 12:17:57 +0100;Update usage docs

==

borg/archiver.py
docs/usage.rst
docs/usage/diff.rst.inc
docs/usage/list.rst.inc
==================
77dfcbc;TW;2016-03-18 00:46:39 +0100;Merge pull request #763 from enkore/issue-761
fix links failing for extracting subtrees, fixes #761
==
==================
9211d0f;Marian Beermann;2016-03-17 22:39:57 +0100;borg extract: fix links failing for sub-tree extractions
fixes #761

==

borg/archive.py
borg/archiver.py
borg/helpers.py
borg/testsuite/archiver.py
==================
15c20dc;TW;2016-03-17 18:11:19 +0100;Merge pull request #759 from nachtgeist/public
refactor get_home_dir
==
==================
61db791;TW;2016-03-17 18:10:54 +0100;Merge pull request #751 from enkore/feature-newlist
ItemFormatter for printing items, borg list redo.
==
==================
4151db2;Marian Beermann;2016-03-17 17:32:23 +0100;Redo borg list
- This is compatible except for {formatkeys}, which has been replaced
  by "borg list --help"
- --list-format is deprecated, use --format instead
  (using deprecated arguments will print a warning and an exit code of 1)
- borg list now supports the usual [PATH [PATHS…]] syntax and excludes
- Additional keys: csize, num_chunks, unique_chunks, NUL
- Supports guaranteed_available hashlib hashes
  (to avoid varying functionality depending on environment)
  (also, the other hashes are really obscure, like MD-4)

==

borg/archiver.py
borg/helpers.py
borg/testsuite/archiver.py
borg/testsuite/helpers.py
==================
9adf13d;Daniel Reichelt;2016-03-17 03:30:31 +0100;add changes from running build_api and build_usage

==

docs/api.rst
docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/debug-delete-obj.rst.inc
docs/usage/debug-dump-archive-items.rst.inc
docs/usage/debug-get-obj.rst.inc
docs/usage/debug-put-obj.rst.inc
docs/usage/delete.rst.inc
docs/usage/diff.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/list.rst.inc
docs/usage/migrate-to-repokey.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/upgrade.rst.inc
==================
6dd5f6a;Daniel Reichelt;2016-03-17 02:55:55 +0100;refactor retrieval of a user's home into get_home_dir()

==

borg/helpers.py
borg/remote.py
borg/upgrader.py
==================
220d44b;TW;2016-03-17 01:58:57 +0100;Merge pull request #745 from nachtgeist/public
provide wrapper for borg mount, fixes #743
==
==================
e1f6a34;Daniel Reichelt;2016-03-17 01:40:17 +0100;provide wrapper for borg mount, fixes #743
- add archiver.main_mount()

- provide borgfs behaviour when the monolithic binary is called via a
  symlink called borgfs

- docs: update usage of mount subcommand, provide examples for borgfs and
  add symlink creation to standalone binary installation

- run build_usage

- add entry point in setup.py

- patch helpers.py:get_keys_dir() to allow mounting fstab entries with
  "user" option set

  Without this, setuid() called at some point by mount changes the HOME
  environment variable to '/root' and os.expanduser('~') would return
  '/root' as well, thus the mount would fail with
 	 PermissionError: [Errno 13] Permission denied: '/root/.config'
  After setuid(), the HOME variable stays intact, so we still can
  explicitly query USER's home.

  Also, os.path.expanduser() behaves differently for '~' and '~someuser'
  as parameters: when called with an explicit username, the possibly set
  environment variable HOME is no longer respected. So we have to check if
  it is set and only expand the user's home directory if HOME is unset.

- add myself to AUTHORS

==

AUTHORS
borg/archiver.py
borg/helpers.py
docs/installation.rst
docs/usage.rst
docs/usage/mount.rst.inc
setup.py
==================
f0cb637;TW;2016-03-17 00:23:23 +0100;Merge pull request #740 from enkore/feature-diff
borg diff: find different files between archives
==
==================
489eb78;Marian Beermann;2016-03-14 20:25:30 +0100;Possible fix to silently skipping EIO and the like? #748

==

borg/_chunker.c
==================
b4b3986;TW;2016-03-15 20:40:51 +0100;Merge pull request #752 from enkore/feature-ignore-inode
Feature --ignore--inode, fixes #628
==
==================
c16ed82;Marian Beermann;2016-03-15 19:08:36 +0100;borg create --ignore-inode: add explanatory text to long help

==

borg/archiver.py
==================
db9515e;Marian Beermann;2016-03-15 18:19:44 +0100;borg diff: wording of --numeric-owner help text

==

borg/archiver.py
==================
2f2d88b;Marian Beermann;2016-03-15 18:19:34 +0100;borg diff: use proper validator for archive name (ARCHIVE2)

==

borg/archiver.py
==================
26fe2a3;enkore;2016-03-12 12:40:39 +0100;borg diff: find different files between archives

==

AUTHORS
borg/archive.py
borg/archiver.py
borg/testsuite/archiver.py
==================
57c2d03;Marian Beermann;2016-03-15 15:38:55 +0100;borg create: add --ignore-inode option
This is mainly meant for use with network file systems like sshfs and
possibly CIFS, which don't convey proper inode numbers.

==

borg/archive.py
borg/archiver.py
borg/cache.py
==================
5e5bab3;TW;2016-03-15 15:09:07 +0100;Merge pull request #742 from ThomasWaldmann/improve-prune-log
format_archive: also output archive id, fixes #731
==
==================
84370e1;TW;2016-03-15 15:08:12 +0100;Merge pull request #741 from ThomasWaldmann/show_version
implement --show-version: shows/logs the borg version, fixes #725
==
==================
347615b;TW;2016-03-15 15:07:19 +0100;Merge pull request #749 from enkore/issue-748
fix to silently skipping EIO and the like #748
==
==================
14a6489;TW;2016-03-15 14:38:47 +0100;Merge pull request #746 from dannyedel/reproducible-fix--api-iocharset
Build api.html reproducibly for ProgressIndicatorEndless/Percent
==
==================
fbc4c0c;Marian Beermann;2016-03-14 20:25:30 +0100;Possible fix to silently skipping EIO and the like? #748

==

borg/_chunker.c
==================
8c574ae;Danny Edel;2016-03-14 09:44:24 +0100;reproducible doc for ProgressIndicator*
building the API docs captured sys.stderr's IO charset, making the build
unreproducible.

==

borg/helpers.py
==================
d5f2fd3;Thomas Waldmann;2016-03-12 23:30:15 +0100;format_archive: also output archive id, fixes #731
used by borg list, prune, delete.

before: <name> <datetime>

now:    <name> <datetime> [<id>]

it's a bit less pretty now, but better for automation as the id always stays same while the name can be changed.

==

borg/helpers.py
==================
a924c22;Thomas Waldmann;2016-03-12 22:50:32 +0100;implement --show-version: shows/logs the borg version, fixes #725
It logs at INFO level, so add -v to see actually see it.

==

borg/archiver.py
==================
648761f;TW;2016-03-12 02:14:45 +0100;Merge pull request #739 from ThomasWaldmann/remove-libc-display
remove useless/misleading libc version display, fixes #738
==
==================
3115bb4;Thomas Waldmann;2016-03-12 01:29:14 +0100;remove useless/misleading libc version display, fixes #738
platform.libc_ver() is broken, it uses string comparison to compare version numbers.

==

borg/helpers.py
==================
9be520b;TW;2016-03-12 00:51:14 +0100;Merge pull request #737 from ThomasWaldmann/document-network-fs-issues
document how to debug / file filesystem issues, fixes #664
==
==================
b6966a5;Thomas Waldmann;2016-03-12 00:48:26 +0100;document how to debug / file filesystem issues, fixes #664
if the filesystem issue can't be reproduced with a known-good,
local fs like ext4 on linux, the issue is likely not borg's fault.

==

docs/faq.rst
==================
b2b5ca7;TW;2016-03-12 00:09:13 +0100;Merge pull request #736 from ThomasWaldmann/fix-reproducible
fix reproducible build of api docs, fixes #399
==
==================
7abcaa0;Thomas Waldmann;2016-03-11 23:37:37 +0100;fix reproducible build of api docs

==

borg/archive.py
==================
95f9286;TW;2016-03-10 22:35:25 +0100;Merge pull request #733 from ipha/master
Unpack file stats before passing to fuse
==
==================
ec0e155;TW;2016-03-10 22:24:58 +0100;Merge pull request #728 from alexskc/master
CSS !important overwrite. Fix borgbackup/borg#727
==
==================
3537749;Mitch Bigelow;2016-03-10 15:50:45 -0500;file stats are packed with 'int_to_bigint' in the archive. Unpack these before passing to llfuse

==

borg/fuse.py
==================
2931891;alexskc;2016-03-09 19:01:49 -0600;CSS !important overwrite. Fix borgbackup/borg#727

==

docs/borg_theme/css/borg.css
==================
07cd2fa;TW;2016-03-09 16:01:42 +0100;Merge pull request #726 from ThomasWaldmann/fuse-requirements
update llfuse requirement, llfuse 1.0 works
==
==================
dd6a795;Thomas Waldmann;2016-03-09 15:45:10 +0100;update llfuse requirement, llfuse 1.0 works

==

requirements.d/fuse.txt
setup.py
==================
c7776fa;Thomas Waldmann;2016-03-05 20:12:28 +0100;update OS / dist packages on build machines, fixes #717

==

Vagrantfile
==================
a2e356d;TW;2016-03-05 16:37:20 +0100;Merge pull request #715 from ThomasWaldmann/roundtrip-password
implement password roundtrip, fixes #695
==
==================
95c4cf2;Thomas Waldmann;2016-03-05 16:21:44 +0100;implement password roundtrip, fixes #695

==

borg/key.py
docs/changes.rst
docs/usage.rst
==================
96702ec;Thomas Waldmann;2016-03-05 14:46:28 +0100;prepare CHANGES for 1.0.0

==

docs/changes.rst
==================
f34710f;TW;2016-03-05 03:28:54 +0100;Merge pull request #713 from ThomasWaldmann/update-changes
updated CHANGES
==
==================
fa79765;Thomas Waldmann;2016-03-05 02:23:01 +0100;updated CHANGES

==

docs/changes.rst
==================
b046006;TW;2016-03-05 02:19:14 +0100;Merge pull request #712 from ThomasWaldmann/pw-retries
added retry counter for passwords, fixes #703
==
==================
3dc2fc0;Thomas Waldmann;2016-03-05 00:54:19 +0100;added retry counter for passwords, fixes #703

==

borg/key.py
==================
bc93dfa;TW;2016-03-03 11:09:06 +0100;Merge pull request #710 from petrcech/patch-1
Update README.rst to new changelog location
==
==================
351da4c;petrcech;2016-03-03 07:08:19 +0100;Update README.rst to new changelog location
Update README.rst to new changelog location in docs/changes.rst
==

README.rst
==================
421dfe3;TW;2016-03-02 17:59:06 +0100;Merge pull request #709 from manwegit/feature/TT-to-AUTHORS
Add myself (Teemu) to AUTHORS
==
==================
76da910;Teemu Toivanen;2016-03-02 17:52:48 +0200;Add myself (Teemu) to AUTHORS

==

AUTHORS
==================
fbc4172;TW;2016-03-02 15:49:55 +0100;Merge pull request #705 from manwegit/feature/docs-bwlimit
Faq: how to limit bandwidth
==
==================
592a1a8;TW;2016-03-02 15:43:51 +0100;Merge pull request #708 from ThomasWaldmann/fix-compiler-warnings
fix compiler warnings, fixes #697
==
==================
39b6b57;TW;2016-03-02 14:47:16 +0100;Merge pull request #707 from ThomasWaldmann/fix-changes
changes: fix old chunker params, fixes #698
==
==================
b461091;Thomas Waldmann;2016-03-02 14:45:02 +0100;fix compiler warnings, fixes #697

==

borg/_chunker.c
==================
1324ef5;Thomas Waldmann;2016-03-02 14:22:52 +0100;changes: fix old chunker params, fixes #698

==

docs/changes.rst
==================
9883b1a;Teemu Toivanen;2016-03-01 14:58:36 +0200;Faq: how to limit bandwidth
Example to faq documentation how bandwidth limiting can be done with pipeviewer.

==

docs/faq.rst
==================
80cd1d6;TW;2016-03-01 15:34:40 +0100;Merge pull request #702 from manwegit/feature/disable_remote_mkdirs
Remote end does not need cache nor keys directories, do not make them.
==
==================
9c9ac2f;Teemu Toivanen;2016-02-29 21:47:26 +0200;Remote end does not need cache nor keys directories, do not make them.
Move keys and cache creation to get_keys_dir and get_cache_dir helper functions.
And remove keys_dir and cache_dir from run(). cache and keys will only be created
by code which uses them. Remote end should not call get_keys_dir and get_cache_dir

==

borg/archiver.py
borg/helpers.py
==================
66c5735;Thomas Waldmann;2016-02-28 00:35:02 +0100;update CHANGES

==

docs/changes.rst
==================
111bb19;Thomas Waldmann;2016-02-27 21:31:30 +0100;Vagrant: drop ubuntu precise (12.04)
it only has python 3.2 and we require >= 3.4.

==

Vagrantfile
==================
21d9436;Thomas Waldmann;2016-02-27 21:22:06 +0100;Vagrant: use pyinstaller v3.1.1

==

Vagrantfile
==================
a4ec69c;Thomas Waldmann;2016-02-27 20:59:32 +0100;setup.py: add note about llfuse 0.42

==

setup.py
==================
3ae8a95;Thomas Waldmann;2016-02-27 20:55:14 +0100;ran build_api and build_usage

==

docs/usage/list.rst.inc
docs/usage/prune.rst.inc
==================
1ce41da;Thomas Waldmann;2016-02-27 20:53:05 +0100;update CHANGES, 1.0.0rc2

==

docs/changes.rst
==================
64c7b5d;Thomas Waldmann;2016-02-27 19:05:46 +0100;fix travis badge

==

README.rst
==================
6967a6e;TW;2016-02-27 18:01:22 +0100;Merge pull request #694 from ThomasWaldmann/update-docs
update and improve docs
==
==================
af2eaaa;Thomas Waldmann;2016-02-27 17:22:56 +0100;update and improve docs
use the travis status image as png as svg does not show an image in firefox.

==

README.rst
docs/faq.rst
docs/installation.rst
docs/quickstart.rst
docs/usage.rst
==================
7b5c799;TW;2016-02-26 14:29:51 +0100;Merge pull request #693 from ThomasWaldmann/update-changes
Update changes
==
==================
6561ad4;Thomas Waldmann;2016-02-26 00:57:50 +0100;CHANGES: move compat notes to top

==

docs/changes.rst
==================
d6fb77f;Thomas Waldmann;2016-02-26 00:56:10 +0100;update CHANGES

==

docs/changes.rst
==================
de644a0;TW;2016-02-25 23:49:03 +0100;Merge pull request #692 from manwegit/feature/format_archive
Archive name formatting on create
==
==================
a94471d;Teemu Toivanen;2016-02-24 23:47:42 +0200;Usage examples for create format tags

==

docs/usage.rst
==================
79f4257;Teemu Toivanen;2016-02-24 23:32:02 +0200;unit test for archive format tests formatting with {pid} and not equal results from same time string. (adds import time to tests)

==

borg/testsuite/helpers.py
==================
f7c1632;Teemu Toivanen;2016-02-10 11:39:35 +0200;Add format options to location.
Add support for python format options for location:
tags:
 pid
 fqdn
 hostname
 now
 utcnow
 user

==

borg/helpers.py
==================
c0ba5da;TW;2016-02-24 16:18:29 +0100;Merge pull request #688 from ThomasWaldmann/feature/list-formatting
borg list formatting
==
==================
dc5467e;Thomas Waldmann;2016-02-21 21:35:00 +0100;simplify processing for borg list --short
just use the respective format string.

==

borg/archiver.py
==================
d14e6f7;Thomas Waldmann;2016-02-21 21:11:56 +0100;--list-format: make it compatible with old archives
they do not have atime and ctime, use mtime instead.

==

borg/archiver.py
==================
f766680;Thomas Waldmann;2016-02-21 21:05:30 +0100;refactored --list-format code a bit
note: LF as line ending is enough, python will translate that to CRLF on the platforms (windows) needing CRLF.

==

borg/archiver.py
==================
b28f4d8;Thomas Waldmann;2016-02-21 19:47:25 +0100;fix formatkeys so it always has all available formatting keys
- always: no matter whether we use a user-defined format or not
- all: fix bug: it only had the basic keys, not the advanced keys

==

borg/archiver.py
==================
08a7ce5;Thomas Waldmann;2016-02-21 19:04:22 +0100;Merge branch 'feature/list-formatting' of https://github.com/manwegit/borg into feature/list-formatting

==
==================
4c31e7a;TW;2016-02-21 17:25:26 +0100;Merge pull request #687 from ThomasWaldmann/fix-attic-changelog
fix ReST syntax for old attic changelog
==
==================
5bfb1df;Thomas Waldmann;2016-02-21 17:24:34 +0100;fix ReST syntax for old attic changelog

==

docs/changes.rst
==================
bbf8b6e;TW;2016-02-21 14:26:42 +0100;Merge pull request #685 from jungle-boogie/patch-2
 freebsd dependency installation and fuse configuration, fixes #649
==
==================
1d4f591;jungle-boogie;2016-02-20 14:12:57 -0800;updated freeBSD docs
With the now improved steps, I was able to build Borg on a vagrant image:
% borg -V
borg 1.0.0rc2.dev40+ngfb83f61
==

docs/installation.rst
==================
fdf1dd7;jungle-boogie;2016-02-20 10:24:43 -0800; freebsd fuse for mount for #649

==

docs/installation.rst
==================
fb83f61;TW;2016-02-20 13:33:43 +0100;Merge pull request #682 from ThomasWaldmann/validate-newname
add a simple archivename validator, fixes #680
==
==================
6ff78cf;TW;2016-02-20 13:30:45 +0100;Merge pull request #679 from ThomasWaldmann/prune--list
borg prune -v --list enables the keep/prune list output, fixes #658
==
==================
3d0e511;TW;2016-02-20 13:29:36 +0100;Merge pull request #678 from ThomasWaldmann/fix-open
fix _open_rb noatime handling, fixes #657
==
==================
4a60d77;Thomas Waldmann;2016-02-19 23:01:20 +0100;add a simple archivename validator, fixes #680

==

borg/archiver.py
borg/helpers.py
==================
63ce999;Thomas Waldmann;2016-02-18 23:44:23 +0100;borg prune -v --list enables the keep/prune list output, fixes #658
so one can also have --stats without that.

==

borg/archiver.py
borg/testsuite/archiver.py
==================
e072a52;Thomas Waldmann;2016-02-18 23:01:55 +0100;fix _open_rb noatime handling, fixes #657
(not tested by me for the #657 scenario, but at least all our unit tests, including the atime test, worked)

==

borg/archive.py
==================
a44c1f5;TW;2016-02-18 22:54:52 +0100;Merge pull request #676 from ThomasWaldmann/block-dev-restore-docs
docs: add example how to restore a raw device, fixes #671
==
==================
3151f31;TW;2016-02-18 22:52:22 +0100;Merge pull request #675 from ThomasWaldmann/develop-dependency-docs
docs: add a hint about the dev headers needed when installing …
==
==================
347778b;Thomas Waldmann;2016-02-18 21:38:31 +0100;docs: add example how to restore a raw device
also: do not use /dev/sda in case someone stupidly tries out the examples.
/dev/sdx should be safe for people who do not understand what they do.

==

docs/usage.rst
==================
5e5911d;Thomas Waldmann;2016-02-18 21:30:44 +0100;docs: add a hint about the dev headers needed when installing from source

==

docs/installation.rst
==================
8c083c7;TW;2016-02-17 02:08:07 +0100;Merge pull request #670 from ThomasWaldmann/fuse-compat-fixes
Fuse compat fixes
==
==================
44c8a4a;Thomas Waldmann;2016-02-17 01:05:04 +0100;fix pep8 failures

==

borg/fuse.py
setup.py
==================
89b2421;TW;2016-02-17 01:00:51 +0100;Merge pull request #667 from ThomasWaldmann/add-delete-docs
docs: add examples for delete (and handle delete after list, …
==
==================
ecdbfcb;Thomas Waldmann;2016-02-17 00:56:19 +0100;Merge https://github.com/Nikratio/borg into fuse-compat-fixes

==
==================
566c9d4;TW;2016-02-17 00:50:37 +0100;Merge pull request #668 from ThomasWaldmann/create-stats-isodate
docs: update example for borg create -v --stats (use iso datetime …
==
==================
91f10e1;Thomas Waldmann;2016-02-17 00:43:05 +0100;docs: update example for borg create -v --stats (use iso datetime format), fixes #663
the code already was updated after 1.0.0rc1, but not the quickstart docs.

==

docs/quickstart.rst
==================
0b44944;Thomas Waldmann;2016-02-17 00:30:33 +0100;docs: add examples for delete (and handle delete after list, before prune), fixes #656

==

docs/usage.rst
==================
dbec05a;Nikolaus Rath;2016-02-16 10:28:16 -0800;Make python-llfuse 0.42 compatible.
--HG--
extra : amend_source : 6004af01c4ee6f7ddf6f4138bfc9bbdf2a785eb2

==

borg/fuse.py
setup.py
==================
de79ac4;TW;2016-02-16 00:22:49 +0100;Merge pull request #662 from jhemmje/master
Updated and verified examples in docs/
==
==================
bf31fe3;jhemmje;2016-02-15 21:38:11 +0100;docs: Updated examples in usage.rst, fixes #644

==

docs/usage.rst
==================
7e7c33c;jhemmje;2016-02-15 21:38:02 +0100;docs: Updated examples in quickstart.rst, fixes #644

==

docs/quickstart.rst
==================
aeec295;jhemmje;2016-02-15 21:37:50 +0100;docs: Updated examples in deployment.rst, fixes #644

==

docs/deployment.rst
==================
61a40cb;Teemu Toivanen;2016-02-05 11:52:02 +0200;add test for list --list-format

==

borg/testsuite/archiver.py
==================
4a82d69;Teemu Toivanen;2016-02-03 20:14:15 +0200;Fix coding style and whitespaces in code, travis/flake8

==

borg/archiver.py
borg/helpers.py
==================
648aac5;TW;2016-02-09 14:57:03 +0100;Merge pull request #648 from Silvenga/update-documentation
Added example to BORG_RSH documentation.
==
==================
2b8083b;Mark Lopez;2016-02-08 19:54:20 -0600;Fixed typo.

==

docs/usage.rst
==================
0845678;TW;2016-02-08 23:47:57 +0100;Merge pull request #652 from ThomasWaldmann/fix-timestamps
borg create --stats: show timestamps in localtime, use same labels/fo…
==
==================
824ba53;Thomas Waldmann;2016-02-08 20:17:35 +0100;borg create --stats: show timestamps in localtime, use same labels/formatting as borg info, fixes #651
"borg info" also shows these timestamps in localtime.

 Note: in the archive, the timestamps are stored as UTC.

==

borg/archive.py
==================
99a3bab;Mark Lopez;2016-02-07 22:05:30 -0600;Added example to BORG_RSH documentation.

==

docs/usage.rst
==================
b1dacd8;Thomas Waldmann;2016-02-08 01:11:03 +0100;CHANGES minor fixes

==

docs/changes.rst
==================
08fe16c;Thomas Waldmann;2016-02-07 22:54:53 +0100;allow llfuse version 0.41.x, fixes #642

==

requirements.d/fuse.txt
setup.py
==================
5ffb0fd;Thomas Waldmann;2016-02-07 21:08:20 +0100;borg upgrade: add to docs that only LOCAL repos are supported

==

borg/archiver.py
docs/usage/upgrade.rst.inc
==================
409c06c;Thomas Waldmann;2016-02-07 21:05:12 +0100;moved TODO to issue #645 on github

==

borg/archiver.py
==================
6db6c22;Thomas Waldmann;2016-02-07 21:01:49 +0100;docs: add faq entry and point to issue 636

==

docs/faq.rst
==================
50a82e9;Thomas Waldmann;2016-02-07 19:45:32 +0100;update CHANGES

==

docs/changes.rst
==================
6c278e2;Thomas Waldmann;2016-02-07 19:33:26 +0100;docs: formatting fixed

==

docs/usage.rst
==================
316f5a3;Thomas Waldmann;2016-02-07 19:23:06 +0100;docs: borg upgrade also handles borg 0.xx -> 1.0

==

borg/archiver.py
docs/usage/upgrade.rst.inc
==================
2f95c8e;Thomas Waldmann;2016-02-07 19:15:30 +0100;docs: use pip extras or requirements file to install llfuse

==

docs/installation.rst
==================
c2edfab;Thomas Waldmann;2016-02-07 19:08:03 +0100;all FUSE related version requirements in 1 place

==

docs/installation.rst
setup.py
==================
69300e4;Thomas Waldmann;2016-02-07 19:03:32 +0100;document and automate llfuse requirement

==

docs/installation.rst
requirements.d/fuse.txt
setup.py
==================
c42f3d0;Thomas Waldmann;2016-02-07 14:50:39 +0100;run build_usage

==

docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/extract.rst.inc
docs/usage/init.rst.inc
docs/usage/list.rst.inc
docs/usage/prune.rst.inc
docs/usage/upgrade.rst.inc
==================
2170d6e;Thomas Waldmann;2016-02-07 14:44:49 +0100;fix order in release process docs
it is important to first do all the changes that modify the release contents,
then tag/sign it, then build the binaries via vagrant.

Only then the binaries will have the correct version number.

==

docs/development.rst
==================
46059f0;TW;2016-02-07 03:04:41 +0100;Merge pull request #640 from ThomasWaldmann/update-changes
update CHANGES for 1.0.0rc1
==
==================
04bf8d8;TW;2016-02-07 03:04:06 +0100;Merge pull request #639 from ThomasWaldmann/fix-missing-time_end
fix missing time_end metadata in old archives, fix updating end time
==
==================
8a8f026;Thomas Waldmann;2016-02-07 03:01:26 +0100;update CHANGES for 1.0.0rc1

==

docs/changes.rst
==================
c2e6cc1;TW;2016-02-07 02:37:37 +0100;Merge pull request #638 from ThomasWaldmann/better-debug
show cwd, pid, sys.argv, ssh original command below tracebacks, fixes…
==
==================
73e15ac;Thomas Waldmann;2016-02-07 02:35:31 +0100;fix missing time_end metadata in old archives, fix updating end time

==

borg/archive.py
==================
6754427;Thomas Waldmann;2016-02-07 02:16:48 +0100;show cwd, pid, sys.argv, ssh original command below tracebacks, fixes #637

==

borg/helpers.py
==================
94451cd;Thomas Waldmann;2016-02-06 20:24:20 +0100;update CHANGES

==

docs/changes.rst
==================
1b76c39;Teemu Toivanen;2016-02-03 11:34:56 +0200;Optimize default listing

==

borg/archiver.py
==================
14f0fa6;Teemu Toivanen;2016-02-05 20:34:48 +0200;archive file listing output formatting Coding style fixup Add --list-format exmaple to usage examples

==

borg/archiver.py
borg/helpers.py
docs/usage.rst
==================
39c3906;TW;2016-02-05 17:04:38 +0100;Merge pull request #634 from ThomasWaldmann/create-starttime-duration
Create starttime duration
==
==================
1702b53;TW;2016-02-05 17:04:01 +0100;Merge pull request #632 from ThomasWaldmann/fix-610
Cache: fix exception handling in __init__, release lock, fixes #610
==
==================
a9f523e;Thomas Waldmann;2016-02-05 02:02:04 +0100;archive metadata: store backup END time into 'time_end', display it in "borg info", fixes #627
 ... except if a timestamp is given via cli, then store that time into 'time_end'

==

borg/archive.py
borg/archiver.py
==================
38d2237;Thomas Waldmann;2016-02-05 00:23:54 +0100;archive metadata: store backup START time into 'time'
except if a timestamp is given via cli, then store that time into 'time'

==

borg/archive.py
==================
a078d73;Thomas Waldmann;2016-02-05 00:18:24 +0100;archive creation start/end timestamp: use utc
the timestamp given via cli is already expected to be utc.

the timestamp which is automatically created when no cli timestamp is given is also utc.

thus, also use utc for .start and .end.

==

borg/archive.py
borg/archiver.py
==================
4843719;Thomas Waldmann;2016-02-04 23:19:35 +0100;Cache: fix exception handling in __init__, release lock, fixes #610

==

borg/cache.py
==================
4355150;Thomas Waldmann;2016-02-04 20:48:43 +0100;docs: OS X binary does not work for older OS X releases, fixes #629

==

docs/installation.rst
==================
435d30d;Thomas Waldmann;2016-02-01 03:22:02 +0100;docs: updates and fixes

==

docs/development.rst
docs/faq.rst
docs/installation.rst
docs/internals.rst
docs/quickstart.rst
docs/support.rst
==================
0a0f483;Thomas Waldmann;2016-02-01 01:18:37 +0100;docs about borg serve's special support for forced/original ssh commands, fixes #544

==

docs/deployment.rst
docs/usage.rst
==================
9278550;TW;2016-01-31 21:40:15 +0100;Merge pull request #619 from ypid/docs-fixes-2
Docs fixes.
==
==================
a7ed461;Robin Schneider;2016-01-31 11:51:59 +0100;Use `--one-file-system` instead of `--do-not-cross-mountpoints` in docs.
Related to #296 in which support for `--do-not-cross-mountpoints` has
been deprecated.

==

docs/usage.rst
==================
57b0ab7;Robin Schneider;2016-01-31 11:50:06 +0100;Fixed spelling in deployment docs.

==

docs/deployment.rst
==================
d522cd6;TW;2016-01-30 23:22:22 +0100;Merge pull request #617 from ThomasWaldmann/update-changes
updates CHANGES
==
==================
a65b7ec;Thomas Waldmann;2016-01-30 23:05:40 +0100;updates CHANGES

==

docs/changes.rst
==================
ae63f3c;TW;2016-01-30 22:33:10 +0100;Merge pull request #616 from ThomasWaldmann/cleanup
cleanup, flake8, fixes #4
==
==================
47e6304;Thomas Waldmann;2016-01-30 22:03:09 +0100;add flake8 tox env to travis config

==

.travis.yml
==================
2a2362f;Thomas Waldmann;2016-01-30 22:01:27 +0100;add flake8 style checking

==

setup.cfg
tox.ini
==================
4b339f5;Thomas Waldmann;2016-01-30 21:32:45 +0100;cosmetic source cleanup (flake8)

==

borg/__main__.py
borg/archive.py
borg/archiver.py
borg/cache.py
borg/fuse.py
borg/helpers.py
borg/key.py
borg/locking.py
borg/remote.py
borg/testsuite/archiver.py
borg/testsuite/benchmark.py
borg/testsuite/compress.py
borg/testsuite/helpers.py
borg/testsuite/locking.py
borg/testsuite/repository.py
borg/upgrader.py
borg/xattr.py
setup.py
==================
49cf25f;TW;2016-01-30 20:07:57 +0100;Merge pull request #615 from ThomasWaldmann/fix-trailing-slashes
use os.path.normpath on repository paths, fixes #606
==
==================
9797ab0;TW;2016-01-30 20:04:09 +0100;Merge pull request #612 from ThomasWaldmann/fix-544
borg serve: overwrite client's --restrict-to-path with forced command's …
==
==================
5d93b6c;TW;2016-01-30 20:02:38 +0100;Merge pull request #613 from ThomasWaldmann/xdg-base-dir-keys
use xdg base dir for keys
==
==================
8ec62d5;Thomas Waldmann;2016-01-30 00:39:25 +0100;use os.path.normpath on repository paths, fixes #606
this does NOT fix absolute vs. relative path usage,
but as this also deals with remote paths, this can't be done in general.

==

borg/helpers.py
==================
d6b43a7;Thomas Waldmann;2016-01-30 00:01:44 +0100;Merge branch 'master' of github.com:borgbackup/borg

==
==================
7773e63;Thomas Waldmann;2016-01-30 00:01:13 +0100;fix some minor cosmetic code/docs issues

==

borg/archiver.py
borg/helpers.py
borg/key.py
borg/locking.py
borg/remote.py
borg/upgrader.py
docs/global.rst.inc
==================
68157d6;TW;2016-01-29 21:54:19 +0100;Merge pull request #614 from ThomasWaldmann/list-short-repo
implement --short for borg list REPO, fixes #611
==
==================
12fe47f;Thomas Waldmann;2016-01-29 01:50:51 +0100;implement --short for borg list REPO, fixes #611

==

borg/archiver.py
==================
695dc68;Thomas Waldmann;2016-01-29 01:40:29 +0100;slightly rephrase prune help

==

borg/archiver.py
==================
e7add13;Thomas Waldmann;2016-01-29 01:23:24 +0100;add upgrader which moves the keys to new location

==

borg/archiver.py
borg/upgrader.py
==================
e06b716;Thomas Waldmann;2016-01-28 23:15:49 +0100;update docs / docstring about new key location

==

borg/archiver.py
borg/upgrader.py
docs/internals.rst
docs/quickstart.rst
docs/usage.rst
==================
b8d954e;Thomas Waldmann;2016-01-28 22:26:58 +0100;use XDG_CONFIG_HOME for borg keys instead of ~/.borg, fixes #515

==

borg/helpers.py
borg/testsuite/helpers.py
==================
7ea2404;Thomas Waldmann;2016-01-28 21:59:24 +0100;borg serve: overwrite client's --restrict-to-path with forced command's option value, fixes #544
we also make sure the client is not cheating, like giving another subcommand or his own --restrict-to-path.

==

borg/archiver.py
borg/testsuite/archiver.py
==================
824e548;Thomas Waldmann;2016-01-28 20:32:30 +0100;add missing example for --list option of borg create

==

docs/usage.rst
==================
e7c2189;Thomas Waldmann;2016-01-28 20:25:55 +0100;implement --list for borg extract
before, borg extract always emitted the full file list at info log level.
now, you need to give --list to get the full file list (consistent with borg create --list).

this is currently only useful if you also use other output-generating options,
e.g. --show-rc - you can now leave away --list to only get that other output.

later, if extract gets more output-generating options, --list will get more useful.

==

borg/archiver.py
==================
74ac982;TW;2016-01-26 19:12:23 +0100;Merge pull request #605 from m3741/fix-604
Fix for Issue #604
==
==================
dcffa5c;Adam Kouse;2016-01-26 11:51:38 -0500;Single quote exclude line that includes an asterisk to prevent shell expansion

==

docs/quickstart.rst
==================
fd9f979;TW;2016-01-26 13:34:13 +0100;Merge pull request #601 from trassl/master
Reformat commands list
==
==================
3061b30;Christoph Trassl;2016-01-25 17:40:52 +0100;Reformat commands list.

==

borg/archiver.py
==================
9f70a4c;TW;2016-01-25 14:06:05 +0100;Merge pull request #596 from Herover/patch-1
Fix dead link to license
==
==================
29b84a1;Herover;2016-01-25 13:33:48 +0100;Use https on updated license link

==

README.rst
==================
8f18b4b;TW;2016-01-25 10:51:56 +0100;Merge pull request #597 from LocutusOfBorg/patch-1
Delete Ubuntu Vivid, EOL
==
==================
37eb22a;Gianfranco Costamagna;2016-01-25 09:07:30 +0100;Delete Ubuntu Vivid, EOL
Ubuntu Vivid is not supported anymore.
==

docs/installation.rst
==================
20bc823;TW;2016-01-25 00:16:26 +0100;Merge pull request #594 from ThomasWaldmann/update-changes10
update CHANGES for 1.0
==
==================
7cb6b56;Herover;2016-01-24 19:26:05 +0100;Fix dead link to license

==

README.rst
==================
d2bfa24;Thomas Waldmann;2016-01-24 17:54:36 +0100;update CHANGES

==

docs/changes.rst
==================
0ec998c;TW;2016-01-24 16:45:03 +0100;Merge pull request #505 from ThomasWaldmann/prep-rel1
Prepare release 1.0
==
==================
3476fff;Thomas Waldmann;2016-01-16 00:12:11 +0100;remove deprecated "--compression <number>"
use --compression zlib,<number> instead
in case of 0, you could also use --compression none

==

borg/helpers.py
borg/testsuite/helpers.py
==================
ad31fcd;Thomas Waldmann;2016-01-16 00:02:59 +0100;remove deprecated "--hourly/daily/weekly/monthly/yearly"
use --keep-hourly/daily/weekly/monthly/yearly instead

note: kept the code and test, we might have deprecated option in future, too

==

borg/archiver.py
borg/testsuite/archiver.py
==================
079646e;Thomas Waldmann;2016-01-15 23:53:57 +0100;remove deprecated "--do-not-cross-mountpoints"
use --one-file-system instead

==

borg/archiver.py
==================
e1515ee;Thomas Waldmann;2016-01-15 23:51:06 +0100;remove deprecated "borg verify"
use borg extract --dry-run ...

==

borg/archiver.py
borg/testsuite/archiver.py
==================
1fc99ec;Thomas Waldmann;2016-01-15 07:25:43 +0100;update docs, remove references to passphrase mode

==

docs/internals.rst
docs/usage.rst
==================
815d2e2;Thomas Waldmann;2016-01-15 06:58:41 +0100;remove support for --encryption=passphrase, clean up

==

borg/archiver.py
borg/key.py
==================
2f9b643;Thomas Waldmann;2016-01-15 06:34:09 +0100;migrate-to-repokey command, dispatch passphrase type to repokey handler
every chunk has the encryption key type as first byte and we do not want to rewrite the whole repo
to change the passphrase type to repokey type. thus we simply dispatch this type to repokey
handler.
if there is a repokey that contains the same secrets as they were derived from the passphrase, it will just work.
if there is none yet, one needs to run migrate-to-repokey command to create it.

==

borg/archiver.py
borg/key.py
borg/testsuite/archiver.py
borg/testsuite/benchmark.py
==================
b2dedee;Thomas Waldmann;2015-12-20 01:34:00 +0100;refactor yes(), cleanup env var semantics, fixes #355
refactorings:

- introduced concept of default answer:

if the answer string is in the defaultish sequence, the return value of yes() will be the default.
e.g. if just pressing <enter> when asked on the console or if an empty string or "default" is
in the environment variable for overriding.

if an environment var has an invalid value and no retries are enabled: return default
if retries are enabled, next retry won't use the env var again, but either ask via input().

- simplify:

only one default - this should be a SAFE default as it is used in some special conditions
like EOF or invalid input with retries disallowed.

no isatty() magic, the "yes" shell command exists, so we could receive input even if it is not from a tty.

- clean:

separate retry flag from retry_msg

==

borg/archiver.py
borg/cache.py
borg/helpers.py
borg/testsuite/archiver.py
borg/testsuite/benchmark.py
borg/testsuite/helpers.py
docs/usage.rst
==================
6d615ec;Thomas Waldmann;2015-12-19 14:30:05 +0100;change encryption to be on by default (repokey mode)
it's 2015, let's be safe-by-default and unsafe-as-option.

also: show default mode in builtin help

==

borg/archiver.py
borg/remote.py
borg/repository.py
borg/testsuite/archiver.py
docs/quickstart.rst
==================
169634f;Thomas Waldmann;2015-12-18 21:44:14 +0100;change the builtin default for --chunker-params, create 2MiB chunks, fixes #343
one of the biggest issues with borg < 1.0 was that it had a default target chunk
size of 64kiB, thus it created a lot of chunks, a huge chunk management overhead
(high RAM and disk usage).

==

borg/archive.py
docs/internals.rst
docs/misc/create_chunker-params.txt
docs/usage.rst
==================
5607e5a;Thomas Waldmann;2015-12-18 21:05:59 +0100;use os.urandom instead of own cython openssl RAND_bytes wrapper, fixes #493

==

borg/crypto.pyx
borg/key.py
borg/testsuite/benchmark.py
borg/testsuite/crypto.py
==================
3ade3d8;Thomas Waldmann;2015-12-15 19:48:40 +0100;use hashlib.pbkdf2_hmac from py stdlib instead of own openssl wrapper
this is available in python 3.4+.

note:
before removing the pbkdf tests, i ran them with the pbkdf from stdlib to make sure it gives same result.
long term testing of this now belongs into stdlib tests, not into borg.

==

borg/crypto.pyx
borg/key.py
borg/testsuite/crypto.py
==================
2cc0225;Thomas Waldmann;2015-12-15 19:01:52 +0100;use hmac.compare_digest instead of == operator
this is available in python 3.3+

==

borg/key.py
==================
9fa18c9;Thomas Waldmann;2015-12-15 18:46:25 +0100;use stat.filemode instead of homegrown code

==

borg/archiver.py
borg/helpers.py
==================
7c8bfe6;Thomas Waldmann;2015-12-15 01:25:25 +0100;__file__ is now always an absolute path (3.4)

==

borg/testsuite/archiver.py
==================
0be62d4;Thomas Waldmann;2015-12-15 01:08:35 +0100;stuff found on "Porting to Python 3.3"

==

borg/archiver.py
setup.py
==================
8e13d31;Thomas Waldmann;2015-12-15 01:00:28 +0100;use PyMemoryView_FromMemory (py 3.3+)

==

borg/_chunker.c
==================
ef00f5d;Thomas Waldmann;2015-12-15 00:41:50 +0100;we always have shutil.get_terminal_size on py 3.3+

==

borg/helpers.py
==================
fc326df;Thomas Waldmann;2015-12-15 00:26:06 +0100;a2b_base64 now also accepts ascii-only str objects

==

borg/key.py
==================
fc52101;Thomas Waldmann;2015-12-15 00:17:03 +0100;suppress unneeded exception context (PEP 409)

==

borg/archive.py
borg/cache.py
borg/fuse.py
borg/helpers.py
borg/key.py
borg/locking.py
borg/remote.py
borg/repository.py
borg/testsuite/__init__.py
==================
a6f9c29;Thomas Waldmann;2015-12-15 00:09:36 +0100;use new OS and IO exception hierarchy of py 3.3

==

borg/archiver.py
borg/locking.py
borg/repository.py
borg/testsuite/archiver.py
==================
19729d3;Thomas Waldmann;2015-12-14 23:37:23 +0100;requirements: use latest pytest-cov, not blocked by py32 any more
also: pytest-benchmark 3.x is released, just use latest

==

requirements.d/development.txt
==================
4444113;Thomas Waldmann;2015-12-14 23:07:06 +0100;remove misc. compat code not needed for py 3.4+

==

borg/compress.pyx
borg/key.py
borg/remote.py
borg/repository.py
borg/xattr.py
==================
6a56292;Thomas Waldmann;2015-12-14 22:58:32 +0100;simplify to print(...., flush=True)

==

borg/helpers.py
==================
fe8762a;Thomas Waldmann;2015-12-14 22:53:31 +0100;os.utime on py 3.4+ always supports fd and follow_symlinks

==

borg/archive.py
borg/testsuite/__init__.py
==================
265da62;Thomas Waldmann;2015-12-14 22:39:43 +0100;remove conditionals/wrappers, we always have stat nanosecond support on 3.4+
also: no wrapper needed for binascii.unhexlify any more

==

borg/archive.py
borg/archiver.py
borg/cache.py
borg/helpers.py
borg/repository.py
borg/testsuite/__init__.py
borg/testsuite/archiver.py
borg/testsuite/key.py
==================
1999888;Thomas Waldmann;2015-12-14 22:15:32 +0100;remove support for missing PermissionError on py 3.2

==

borg/archive.py
borg/testsuite/archiver.py
==================
dabac6a;Thomas Waldmann;2015-12-14 22:08:53 +0100;use mock from stdlib, fixes #145

==

borg/testsuite/archive.py
borg/testsuite/archiver.py
borg/testsuite/repository.py
requirements.d/development.txt
==================
8a819d4;Thomas Waldmann;2015-12-14 21:23:52 +0100;remove borg.support, fixes #358
we only needed it because argparse was broken on some 3.2.x and 3.3.x pythons.

==

borg/archiver.py
borg/helpers.py
borg/support/__init__.py
borg/support/argparse.py
setup.py
==================
a2843bc;Thomas Waldmann;2015-12-14 21:11:38 +0100;docs: require python 3.4+
remove references to older pythons.

==

docs/development.rst
docs/faq.rst
docs/installation.rst
docs/usage.rst
==================
7d59122;Thomas Waldmann;2015-12-14 21:02:02 +0100;remove support for python 3.2.x and 3.3.x, require 3.4+, fixes #65, fixes #221

==

.travis.yml
.travis/install.sh
Vagrantfile
setup.py
tox.ini
==================
de124aa;TW;2016-01-24 14:53:08 +0100;Merge pull request #593 from anarcat/deambigp
disambiguate -p versus -P
==
==================
777fc89;Thomas Waldmann;2016-01-24 14:49:07 +0100;Vagrantfile: rsync symlinks as symlinks, fixes #592

==

Vagrantfile
==================
22efee3;Antoine Beaupré;2016-01-23 20:49:12 -0500;disambiguate -p versus -P
we now use -P for --prefix and -p for --progress. previously, the
result of -p depended on the command: some were using it for
--progress, some for --prefix. this was confusing and was making it
impossible to both --progress and --prefix with on-letter options

--progress is likely used more often and interactively, so it get the
keystroke shortcut (lower "-p")

--prefix is used more rarely / in scripts, but important/dangerous for
prune, so it get the extra keystroke (higher "-P")

If somebody used -p someprefix and does not fix that to -P, it will
result in "no archive specified" or "unrecognized argument". So it
will neither cause pruning to remove wrong data nor go unnoticed.

Closes: #563

==

borg/archiver.py
==================
12c7ef1;Thomas Waldmann;2016-01-23 23:06:05 +0100;Vagrantfile: avoid pkg-config missing error msg on netbsd

==

Vagrantfile
==================
9ea79d7;Thomas Waldmann;2016-01-23 22:57:26 +0100;add chunks.archive.d trick to FAQ

==

docs/changes.rst
docs/faq.rst
==================
74a9e8d;Thomas Waldmann;2016-01-23 22:10:42 +0100;Vagrantfile: remove python 3.2, use older pip/venv for trusty
pyenv installs latest virtualenv/pip that is not compatible with py 3.2 any more

I did a local python 3.2 tox run - it works.

==

Vagrantfile
==================
f4561e8;Thomas Waldmann;2016-01-23 21:43:24 +0100;update CHANGES

==

docs/changes.rst
==================
dee1d46;Thomas Waldmann;2016-01-23 20:54:20 +0100;ran setup.py build_usage

==

docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/extract.rst.inc
docs/usage/help.rst.inc
docs/usage/migrate-to-repokey.rst.inc
docs/usage/upgrade.rst.inc
==================
162d94b;Thomas Waldmann;2016-01-23 20:52:04 +0100;ran setup.py build_api

==

docs/api.rst
==================
e2f5983;Thomas Waldmann;2016-01-23 20:00:03 +0100;finer repo check progress indicator
a step size of 5% was way too much, now doing 0.1%

==

borg/repository.py
==================
541bbd4;Thomas Waldmann;2016-01-23 15:21:38 +0100;add --list requirement hint

==

docs/changes.rst
==================
f27cbd8;TW;2016-01-23 14:19:51 +0100;Merge pull request #589 from hansmi/chg30
Update changes for shell-style pattern support
==
==================
14934da;Michael Hanselmann;2016-01-23 11:05:06 +0100;Update changes for shell-style pattern support

==

docs/changes.rst
==================
a237c1f;Thomas Waldmann;2016-01-22 23:12:08 +0100;add virtualenv<14.0 to requirements so tox does not pull in a py32 incompatible one

==

requirements.d/development.txt
==================
69c8edc;Thomas Waldmann;2016-01-22 22:14:41 +0100;require virtualenv<14.0 so we get a py32 compatible pip

==

.travis/install.sh
==================
bceaf71;TW;2016-01-22 21:59:33 +0100;Merge pull request #587 from anarcat/netbsd
add netbsd install instructions
==
==================
da7bc4a;Antoine Beaupré;2016-01-22 14:35:53 -0500;add netbsd install instructions

==

docs/installation.rst
==================
068c68b;TW;2016-01-22 20:14:37 +0100;Merge pull request #584 from hansmi/shell-pattern
Add shell-style pattern syntax
==
==================
297ce6d;TW;2016-01-22 14:04:36 +0100;Merge pull request #586 from ThomasWaldmann/fix-rh-docs
add gcc gcc-c++ to redhat/fedora/corora install docs, fixes #583
==
==================
92969ea;Thomas Waldmann;2016-01-22 14:03:48 +0100;add gcc gcc-c++ to redhat/fedora/corora install docs

==

docs/installation.rst
==================
c7fb598;Michael Hanselmann;2016-01-21 14:24:35 +0100;Add shell-style pattern syntax
The fnmatch module in Python's standard library implements a pattern
format for paths which is similar to shell patterns. However, “*”
matches any character including path separators. This newly introduced
pattern syntax with the selector “sh” no longer matches the path
separator with “*”. Instead “**/” can be used to match zero or more
directory levels.

==

borg/archiver.py
borg/helpers.py
borg/shellpattern.py
borg/testsuite/helpers.py
borg/testsuite/shellpattern.py
docs/usage.rst
==================
382b792;Michael Hanselmann;2016-01-21 14:24:32 +0100;Reformat pattern syntax descriptions as definition list
There are already three different styles and a fourth will be added.
A definition list is easier to navigate when trying to find the
description of a specific style.

==

borg/archiver.py
==================
2703c64;TW;2016-01-20 20:50:55 +0100;Merge pull request #579 from ThomasWaldmann/update-changes
update CHANGES
==
==================
854215b;Thomas Waldmann;2016-01-20 01:00:35 +0100;mention pp: in CHANGES

==

docs/changes.rst
==================
3496fc4;TW;2016-01-20 00:52:30 +0100;Merge pull request #577 from Profpatsch/master
Fix upgrade without ~/attic/keys existing.
==
==================
cf0262c;Profpatsch;2016-01-18 18:12:44 +0100;Fix upgrade without ~/attic/keys existing.
fixes #576

==

borg/upgrader.py
==================
2dde49f;Thomas Waldmann;2016-01-19 01:02:14 +0100;update CHANGES

==

docs/changes.rst
==================
1e1812c;TW;2016-01-18 23:07:22 +0100;Merge pull request #575 from hansmi/extract-pattern-support
Extract pattern support
==
==================
dad0ba9;Michael Hanselmann;2016-01-18 16:45:48 +0100;Remove old-style pattern handling functions
Remove the “adjust_pattern” and “exclude_path” functions and replace
them with the recently introduced pattern matcher class.

==

borg/archiver.py
borg/helpers.py
==================
ceae4a9;Michael Hanselmann;2016-01-18 16:45:42 +0100;Support patterns on extraction, fixes #361
This change implements the functionality requested in issue #361:
extracting files with a given extension. It does so by permitting
patterns to be used instead plain prefix paths. The pattern styles
supported are the same as for exclusions.

==

borg/archiver.py
borg/testsuite/archiver.py
==================
848375e;Michael Hanselmann;2016-01-18 13:09:08 +0100;Add and document path prefix as pattern style
The “extract” command supports extracting all files underneath a given
set of prefix paths. The forthcoming support for extracting files using
a pattern (i.e. only files ending in “.zip”) requires the introduction
of path prefixes as a third pattern style, making it also available for
exclusions.

==

borg/archiver.py
borg/helpers.py
borg/testsuite/helpers.py
==================
b6362b5;Michael Hanselmann;2016-01-18 13:08:49 +0100;Flexible default pattern style
A function to parse pattern specifications was introduced in commit
2bafece. Since then it had a hardcoded default style of “fm”, meaning
fnmatch. With the forthcoming support for extracting files using
patterns this default style must be more flexible.

==

borg/helpers.py
==================
1fa4d2e;Michael Hanselmann;2016-01-18 13:05:48 +0100;Use constants for pattern style prefixes
The prefix used for pattern styles should be kept together with the
respective style implementation.

==

borg/helpers.py
==================
190107a;Michael Hanselmann;2016-01-18 15:11:28 +0100;Replace use of “exclude_path” in tests
The newly added pattern matcher class can replace the “exclude_path”
function. The latter is going to be removed in a later change.

==

borg/testsuite/helpers.py
==================
9747755;Michael Hanselmann;2016-01-18 13:32:49 +0100;Add pattern matcher wrapper
The utility functions “adjust_patterns” and “exclude_path” produce
respectively use a standard list object containing pattern objects.
With the forthcoming introduction of patterns for filtering files
to be extracted it's better to move the logic of these classes into
a single class.

The wrapper allows adding any number of patterns to an internal list
together with a value to be returned if a match function finds that
one of the patterns matches. A fallback value is returned otherwise.

==

borg/helpers.py
borg/testsuite/helpers.py
==================
c1feb4b;Michael Hanselmann;2016-01-15 22:11:47 +0100;Simplify pattern tests
- Stop using “adjust_pattern” and “exclude_path” as they're utility
  functions not relevant to testing pattern classes
- Cover a few more cases, especially with more than one path separator
  and relative paths
- At least one dedicated test function for each pattern style as opposed
  to a single, big test mixing styles
- Use positive instead of negative matching (i.e. the expected list of
  resulting items is a list of items matching a pattern)

==

borg/testsuite/helpers.py
==================
560a61b;Michael Hanselmann;2016-01-18 15:27:37 +0100;Add myself to AUTHORS

==

AUTHORS
==================
522c14c;TW;2016-01-18 19:15:53 +0100;Merge pull request #572 from rot13/master
Disable unneeded SSH features in authorized_keys example for security.
==
==================
987aaa3;Piotr Pawlow;2016-01-18 18:49:07 +0100;Added SSH key options to the usage example.

==

docs/usage.rst
==================
a3fa965;Piotr Pawlow;2016-01-18 18:39:11 +0100;Added no-agent-forwarding,no-user-rc to SSH key options.

==

docs/deployment.rst
==================
59540aa;TW;2016-01-18 18:27:26 +0100;Merge pull request #578 from ThomasWaldmann/update-vagrantfile
Vagrantfile: use pyinstaller 3.1, freebsd sqlite3 fix, fixes #569
==
==================
efec1a3;Thomas Waldmann;2016-01-18 18:25:10 +0100;Vagrantfile: use pyinstaller 3.1, freebsd sqlite3 fix, fixes #569

==

Vagrantfile
==================
3b6fdbc;TW;2016-01-18 17:06:23 +0100;Merge pull request #574 from rumpelsepp/patch-1
Fix markup in README.rst
==
==================
897c763;Stefan Tatschner;2016-01-18 16:30:27 +0100;Fix markup in README.rst
Github generated wrong markup, because of a few whitespace errors.
This patch fixes the rst markup of the README.rst file.
==

README.rst
==================
735fe55;TW;2016-01-18 16:16:54 +0100;Merge pull request #571 from ThomasWaldmann/fix-570
fix crash when using borg create --dry-run --keep-tag-files, fixes #570
==
==================
7851df0;Piotr Pawlow;2016-01-18 14:35:11 +0100;Disable unneeded SSH features in authorized_keys example for security.

==

docs/quickstart.rst
==================
4c00bb0;Thomas Waldmann;2016-01-18 14:30:41 +0100;fix crash when using borg create --dry-run --keep-tag-files, fixes #570

==

borg/archiver.py
==================
f2f2810;TW;2016-01-18 11:02:13 +0100;Merge pull request #568 from ypid/docs-fixes
Docs fixes.
==
==================
32900c8;Robin Schneider;2016-01-18 10:38:55 +0100;`Mi` does stand for a IEC binary prefix e.g. 2^20.

==

docs/internals.rst
==================
665c3db;Robin Schneider;2016-01-18 09:32:51 +0100;Improved understandability of sentence in deployment.rst.
Thanks to @xor-gate.

Related to https://github.com/borgbackup/borg/pull/529/files#r49952612

==

docs/deployment.rst
==================
1f49d16;Robin Schneider;2016-01-18 09:00:07 +0100;Fixed my changes. Thanks to @ThomasWaldmann for the review!

==

docs/internals.rst
docs/usage.rst
==================
1878e22;TW;2016-01-18 01:00:17 +0100;Merge pull request #566 from ThomasWaldmann/cache-ctxmgr
implement and use context manager for Cache, partial fix for #285
==
==================
704b505;TW;2016-01-18 00:58:23 +0100;Merge pull request #565 from ThomasWaldmann/repocache-ctxmgr
Repocache ctxmgr
==
==================
8b9ae0a;Robin Schneider;2016-01-17 23:49:54 +0100;More – → -- (CLI) fixes. Fixed spelling. AES-256 is used.
* According to the comment in `borg/key.py`.

==

docs/faq.rst
docs/internals.rst
==================
576348a;Robin Schneider;2016-01-17 22:31:08 +0100;Use HTTPS everywhere. Especially when the website already redirects to HTTPS.

==

README.rst
borg/testsuite/archiver.py
docs/deployment.rst
docs/faq.rst
docs/global.rst.inc
==================
89ce86a;Robin Schneider;2016-01-17 22:23:54 +0100;Fixed more in usage.rst. - → –; – → -- (CLI); Bullet list.

==

docs/usage.rst
==================
1f1ff61;Robin Schneider;2016-01-17 21:15:26 +0100;borg prune only knows "--keep-within" and not "--within".

==

borg/archiver.py
==================
83c5321;Robin Schneider;2016-01-17 20:13:45 +0100;Fixed RST warning markup.

==

docs/usage.rst
==================
19eb8e2;Robin Schneider;2016-01-17 20:12:23 +0100;Use ``--option`` in RST to not render "--" as "–".

==

docs/internals.rst
docs/quickstart.rst
docs/usage.rst
==================
22f218b;Thomas Waldmann;2016-01-17 01:09:13 +0100;implement and use context manager for Cache, partial fix for #285
also: make check in Lock.close more precise, check for "is not None".

note: a lot of blocks were just indented to be under the "with" statement,
in one case a block had to be moved into a function.

==

borg/archiver.py
borg/cache.py
==================
5ec2a3a;Thomas Waldmann;2016-01-17 00:28:54 +0100;use the RepositoryCache context manager also in fuse code

==

borg/archiver.py
borg/fuse.py
==================
4d73f3c;Thomas Waldmann;2016-01-16 23:42:54 +0100;implement and use context manager for RepositoryCache, fixes #548

==

borg/archive.py
borg/cache.py
borg/fuse.py
borg/remote.py
==================
08e7c54;TW;2016-01-16 21:18:57 +0100;Merge pull request #564 from ThomasWaldmann/progress-flags
Progress flags
==
==================
2f05e4a;Thomas Waldmann;2016-01-16 20:57:22 +0100;use the usual commandline arguments order for borg prune examples, fixes #560
borg prune <options> <repo>

==

docs/usage.rst
==================
9198f69;Thomas Waldmann;2016-01-16 20:46:49 +0100;implement --progress option for borg delete <archive>

==

borg/archive.py
borg/archiver.py
==================
0213164;Thomas Waldmann;2016-01-16 20:32:24 +0100;implement --progress option for borg upgrade, fixes #291

==

borg/archiver.py
borg/upgrader.py
==================
e68b800;Thomas Waldmann;2016-01-16 18:58:52 +0100;remove unused "repair" rpc method
there is no such method in the code.
we use "check" method to repair the repo, so maybe this was left over
from a time when repair was separate from check.

==

borg/remote.py
==================
c667d33;TW;2016-01-16 18:46:13 +0100;Merge pull request #561 from ThomasWaldmann/fix-locking
fix locking, partial fix for #502
==
==================
845d214;Thomas Waldmann;2015-12-22 12:11:36 +0100;fix locking, partial fix for #502
the problem was that the borg process removed its own shared lock when upgrading it to an exclusive lock.
this is fine if we get the exclusive lock, but if we don't, we must re-add our shared lock.

this fixes the KeyError in locking.py:217

==

borg/locking.py
==================
f35ba0b;TW;2016-01-15 22:42:20 +0100;Merge pull request #559 from ThomasWaldmann/metastream-chunker
finer chunker granularity for items metadata stream, fixes #547, fixes #487
==
==================
d565274;TW;2016-01-15 21:51:04 +0100;Merge pull request #558 from xor-gate/doc-deployment
Docs/deployment: Fixes on incorrect markup
==
==================
d248a7d;TW;2016-01-15 21:50:04 +0100;Merge pull request #557 from hansmi/pattern-cleanup
Rename pattern classes and refactor tests
==
==================
888e078;Thomas Waldmann;2016-01-15 20:56:21 +0100;use finer chunker granularity for items metadata stream, fixes #547, fixes #487
the items metadata stream is usually not that big (compared to the file content data) -
it is just file and dir names and other metadata.

if we use too rough granularity there (and big minimum chunk size), we usually will get no deduplication.

==

borg/archive.py
docs/internals.rst
==================
b8789f7;TW;2016-01-15 20:54:28 +0100;Merge pull request #552 from ThomasWaldmann/hashtable-resizing
Hashtable resizing
==
==================
a1e1ce5;Jerry Jacobs;2016-01-15 19:06:20 +0100;Update README.md with doc|stable shield, minor markup fixes on docs/deployment.rst

==

README.rst
docs/deployment.rst
==================
ac9d296;Thomas Waldmann;2016-01-15 19:52:19 +0100;exclude hash_sizes.py from coverage testing
this is a one-time tool for developers to generate a value table for borg.
the tool is not used at borg runtime.

==

.coveragerc
==================
3717945;TW;2016-01-15 19:25:16 +0100;Merge pull request #556 from LocutusOfBorg/fix-ppa
Move to my ppa and add Trusty/Vivid packages
==
==================
3a39ddb;Michael Hanselmann;2016-01-15 15:41:02 +0100;Rename pattern classes for consistency
The class names “IncludePattern” and “ExcludePattern” may have been
appropriate when they were the only styles. With the recent addition of
regular expression support and with at least one more style being added
in forthcoming changes these classes should be renamed to be more
descriptive. “ExcludeRegex” is also renamed to match the new names.

==

borg/archiver.py
borg/helpers.py
borg/testsuite/helpers.py
==================
2c7ab85;Michael Hanselmann;2016-01-15 16:52:55 +0100;Refactor Unicode pattern tests
The unit tests for Unicode in path patterns contained a lot of
unnecessary duplication. One set of duplication was for Mac OS X (also
known as Darwin) as it normalizes Unicode in paths to NFD. Then each
test case was repeated for every type of pattern.

With this change the tests become parametrized using py.test. The
duplicated code has been removed.

==

borg/testsuite/helpers.py
==================
e644dae;Gianfranco Costamagna;2016-01-15 13:50:24 +0100;Move to my ppa and add Trusty/Vivid packages

==

docs/installation.rst
==================
d08c51b;Thomas Waldmann;2016-01-15 10:34:05 +0100;add gource video to resources docs, fixes #507

==

docs/resources.rst
==================
a1b2a83;TW;2016-01-15 10:08:53 +0100;Merge pull request #555 from dannyedel/fix-spelling-errors
docs: Correct small typos in changes and usage
==
==================
6cedfbe;Danny Edel;2016-01-15 09:24:00 +0100;Correct small typos in changes and usage

==

docs/changes.rst
docs/usage.rst
==================
b6c47ba;TW;2016-01-14 22:02:12 +0100;Merge pull request #554 from ThomasWaldmann/update-docs
update docs / make them more clear about -v
==
==================
1f79555;TW;2016-01-14 19:37:04 +0100;Merge pull request #546 from ThomasWaldmann/simple-man-page
sphinx configuration: fix to create a simple man page from usage docs
==
==================
8ce84ca;Thomas Waldmann;2016-01-14 19:34:07 +0100;update docs / make them more clear about -v

==

docs/quickstart.rst
docs/usage.rst
==================
34142ad;TW;2016-01-14 19:33:43 +0100;Merge pull request #553 from ThomasWaldmann/list-option
add --list option for borg create
==
==================
96f88a2;Thomas Waldmann;2016-01-14 18:57:05 +0100;add --list option for borg create
like --stats enables statistics output, --list enables the file/dirs list output.

==

borg/archiver.py
borg/testsuite/archiver.py
==================
fa054d0;TW;2016-01-14 17:16:24 +0100;Merge pull request #551 from hansmi/upgrade-spelling
Capitalization fixes for upgrade help epilog
==
==================
b6d0ee7;Michael Hanselmann;2016-01-14 17:00:45 +0100;Capitalization fixes for upgrade help epilog

==

borg/archiver.py
==================
5cb47cb;Thomas Waldmann;2016-01-14 03:56:12 +0100;hashindex: explain hash_sizes

==

borg/_hashindex.c
==================
083f5e3;Thomas Waldmann;2016-01-14 03:20:17 +0100;hashindex: fix upper limit
use num_buckets (== fully use what we currently have allocated)

==

borg/_hashindex.c
==================
0966580;Thomas Waldmann;2016-01-09 17:27:45 +0100;move func defs to avoid implicit declaration compiler warning

==

borg/_hashindex.c
==================
91cde72;Thomas Waldmann;2016-01-09 16:16:41 +0100;hashindex: minor refactor
- rename BUCKET_(LOWER|UPPER)_LIMIT to HASH_(MIN|MAX)_LOAD
   as this value is usually called the hash table's minimum/maximum load factor.
- remove MAX_BUCKET_SIZE (not used)
- regroup/reorder definitions

==

borg/_hashindex.c
==================
d88df3e;Thomas Waldmann;2016-01-09 16:07:54 +0100;hashtable size follows a growth policy, fixes #527
also: refactor / dedupe some code into functions

==

borg/_hashindex.c
borg/hash_sizes.py
==================
89169c3;TW;2016-01-14 14:33:53 +0100;Merge pull request #542 from ThomasWaldmann/fix-stats-logging
log stats consistently, fixes #526
==
==================
95fd224;TW;2016-01-14 14:32:34 +0100;Merge pull request #497 from hansmi/master
Implement exclusions using regular expressions
==
==================
3a18248;TW;2016-01-13 22:39:30 +0100;Merge pull request #529 from xor-gate/doc-deployment
Docs: deployment example
==
==================
d6c5e4d;TW;2016-01-13 22:36:33 +0100;Merge pull request #550 from anarcat/install
expand install docs table
==
==================
77238d1;Antoine Beaupré;2016-01-13 15:23:34 -0500;fix table syntax and links

==

docs/installation.rst
==================
cd14b76;Antoine Beaupré;2016-01-13 15:18:19 -0500;add NixOS

==

docs/installation.rst
==================
178b9dc;Antoine Beaupré;2016-01-13 15:18:03 -0500;sort OS list alphabetically

==

docs/installation.rst
==================
3e434ce;Antoine Beaupré;2016-01-13 15:17:54 -0500;mention debian testing, ubuntu backport

==

docs/installation.rst
==================
a7c1419;Jerry Jacobs;2016-01-06 22:47:34 +0100;docs/deployment: Add borg storage server setup example

==

docs/deployment.rst
docs/index.rst
==================
2369b8a;Michael Hanselmann;2016-01-13 14:30:54 +0100;Strip whitespace when loading exclusions from file
Patterns to exclude files can be loaded from a text file using the
“--exclude-from” option. Whitespace at the beginning or end of lines was
not stripped. Indented comments would be interpreted as a pattern and
a misplaced space at the end of a line--some text editors don't strip
them--could cause an exclusion pattern to not match as desired. With the
recent addition of regular expression support for exclusions the spaces
can be matched if necessary (“^\s” or “\s$”), though it's highly
unlikely that there are many paths deliberately starting or ending with
whitespace.

==

borg/archiver.py
borg/helpers.py
borg/testsuite/helpers.py
==================
2bafece;Michael Hanselmann;2015-12-16 00:14:02 +0100;Implement exclusions using regular expressions
The existing option to exclude files and directories, “--exclude”, is
implemented using fnmatch[1]. fnmatch matches the slash (“/”) with “*”
and thus makes it impossible to write patterns where a directory with
a given name should be excluded at a specific depth in the directory
hierarchy, but not anywhere else. Consider this structure:

  home/
  home/aaa
  home/aaa/.thumbnails
  home/user
  home/user/img
  home/user/img/.thumbnails

fnmatch incorrectly excludes “home/user/img/.thumbnails” with a pattern
of “home/*/.thumbnails” when the intention is to exclude “.thumbnails”
in all home directories while retaining directories with the same name
in all other locations.

With this change regular expressions are introduced as an additional
pattern syntax. The syntax is selected using a prefix on “--exclude”'s
value. “re:” is for regular expression and “fm:”, the default, selects
fnmatch. Selecting the syntax is necessary when regular expressions are
desired or when the desired fnmatch pattern starts with two alphanumeric
characters followed by a colon (i.e. “aa:something/*”). The exclusion
described above can be implemented as follows:

  --exclude 're:^home/[^/]+/\.thumbnails$'

The “--exclude-from” option permits loading exclusions from a text file
where the same prefixes can now be used, e.g. “re:\.tmp$”.

The documentation has been extended and now not only describes the two
pattern styles, but also the file format supported by “--exclude-from”.

This change has been discussed in issue #43 and in change request #497.

[1] https://docs.python.org/3/library/fnmatch.html

Signed-off-by: Michael Hanselmann <public@hansmi.ch>

==

borg/archiver.py
borg/helpers.py
borg/testsuite/archiver.py
borg/testsuite/helpers.py
docs/usage.rst
==================
93c9c49;Michael Hanselmann;2016-01-13 14:26:50 +0100;Reduce code duplication in inclusion/exclusion pattern logic
The two classes for applying inclusion and exclusion patterns contained
unnecessarily duplicated logic. The introduction of a shared base class
allows for easier reuse, especially considering that two more classes
are going to be added in forthcoming changes (regular expressions and
shell-style patterns).

==

borg/helpers.py
==================
5d40eba;Michael Hanselmann;2016-01-12 10:04:01 +0100;Convert pattern test to py.test
The test for exclusion patterns was written using the standard unittest
module. The py.test module provides facilities to parametrize the test.

==

borg/testsuite/helpers.py
==================
7420ea0;Thomas Waldmann;2016-01-13 01:18:07 +0100;sphinx configuration: fix to create a simple man page from usage docs

==

docs/conf.py
==================
4216a94;Thomas Waldmann;2016-01-13 00:42:23 +0100;it's 2016

==

LICENSE
docs/conf.py
==================
86ec384;Thomas Waldmann;2016-01-13 00:36:14 +0100;Authors: make it more clear what refers to borg and what to attic
With some sphinx output formats (e.g. "man") that was not too
clear before this change.

==

AUTHORS
==================
9a2d1eb;Thomas Waldmann;2016-01-13 00:25:43 +0100;docs: replace "|project_name|" with just "Borg", less ugly

==

docs/global.rst.inc
==================
0f4d3b2;Thomas Waldmann;2016-01-12 23:49:19 +0100;minor development docs fixes

==

docs/development.rst
==================
4a9672e;TW;2016-01-12 19:58:04 +0100;Merge pull request #538 from ThomasWaldmann/fix-library-path
unset LD_LIBRARY_PATH before invoking ssh, hopefully fixes #514
==
==================
2921b60;TW;2016-01-12 19:57:41 +0100;Merge pull request #539 from ThomasWaldmann/add-version
display borg version below tracebacks, fixes #532
==
==================
0f02513;TW;2016-01-12 19:57:14 +0100;Merge pull request #540 from ThomasWaldmann/isotimestamp-with-wkday
add abbreviated weekday to timestamp format, fixes #496
==
==================
d02def5;TW;2016-01-12 19:29:07 +0100;Merge pull request #543 from hansmi/dedent-pattern-help
Dedent pattern help text
==
==================
98da9d1;Michael Hanselmann;2016-01-12 12:31:01 +0100;Dedent pattern help text
The help text describing patterns should be dedented like other
multi-paragraph text blocks.

==

borg/archiver.py
==================
84672f7;Thomas Waldmann;2016-01-12 00:41:06 +0100;log stats consistently, fixes #526
prune and create now both require --verbose --stats to show stats.
it was implemented in this way (and not with print) so you can feed the stats data
into the logging system, too.

delete now says "Archive deleted" in verbose mode (for consistency,
it already said "Repository deleted" when deleting a repo).

also: add helpers.log_multi to comfortably and prettily output a block of log lines

==

borg/archiver.py
borg/helpers.py
==================
e5c29bd;Thomas Waldmann;2016-01-11 23:31:24 +0100;add abbreviated weekday to timestamp format, fixes #496

==

borg/helpers.py
==================
857f563;Thomas Waldmann;2016-01-11 23:22:04 +0100;display borg version below tracebacks, fixes #532

==

borg/helpers.py
==================
c5dcf46;TW;2016-01-11 19:52:32 +0100;Merge pull request #531 from hansmi/add-exclude-from-test
Factorize and test loading of excludes from file
==
==================
02e0465;Michael Hanselmann;2016-01-07 11:24:47 +0100;Factorize and test loading of excludes from file
The parsing code for exclude files (given via `--exclude-from`) was not
tested. Its core is factorized into a separate function to facilitate an
easier test. The observable behaviour is unchanged.

==

borg/helpers.py
borg/testsuite/helpers.py
==================
170f847;Thomas Waldmann;2016-01-11 02:08:58 +0100;unset LD_LIBRARY_PATH before invoking ssh, hopefully fixes #514

==

borg/remote.py
==================
89fbaa9;TW;2016-01-11 00:03:49 +0100;Merge pull request #518 from htgoebel/patch-1
Update FAQ
==
==================
0c2e517;Hartmut Goebel;2016-01-09 23:50:41 +0100;Update FAQ
Clarify that user and group of owner are stored as name, except if --numeric-owner is given.

==

docs/faq.rst
==================
047cfc9;TW;2016-01-09 05:14:43 +0100;Merge pull request #534 from lfam/contrib-docs
docs: Give project name in usage example.
==
==================
077ebe8;Leo Famulari;2016-01-08 21:02:03 -0500;docs: Give project name in usage example.
* docs/usage.rst: Replace "|project_name|" with "borg" because the
abstraction doesn't work in usage examples.

==

docs/usage.rst
==================
267347a;TW;2016-01-07 18:21:11 +0100;Merge pull request #530 from hansmi/fix-typo
Fix typo in comment
==
==================
d668901;Michael Hanselmann;2016-01-07 11:05:28 +0100;Fix typo in comment

==

borg/helpers.py
==================
19afaa8;TW;2016-01-06 15:11:32 +0100;Merge pull request #525 from dragetd/fix-docs
docs: standalone binary needs exec on temp
==
==================
48e9b9c;TW;2016-01-06 14:43:17 +0100;Merge pull request #524 from ThomasWaldmann/libc-loader-fallback
add some error handling/fallback for C library loading, fixes #494
==
==================
fb64173;Michael Gajda;2016-01-06 13:35:28 +0100;Documentation: Standalone binary / pyinstaller extracts dependencies into /tmp. Currently /tmp requires about ~28MB of free space. It also needs exec permissions. Closes #499

==

docs/installation.rst
==================
d706ad5;TW;2015-12-31 18:25:14 +0100;Merge pull request #516 from elnappo/patch-1
Allow simple copy-paste for package installation with apt
==
==================
eb642f0;Fabian Weisshaar;2015-12-30 15:06:31 +0100;Allow simple copy-paste for package installation with apt

==

docs/installation.rst
==================
4639617;TW;2015-12-29 11:56:17 +0100;Merge pull request #511 from ThomasWaldmann/progress-update-quicker
output progress indication from inner loop, fixes #500
==
==================
4ed71e2;Thomas Waldmann;2015-12-27 14:10:41 +0100;add some error handling/fallback for C library loading, fixes #494

==

borg/xattr.py
==================
c9afa2b;Thomas Waldmann;2015-12-27 11:06:03 +0100;output progress indication from inner loop, fixes #500
- so it shows progress while it backups a bigger file
- so it announces the filename earlier

also: move rate limiting code to show_progress()

==

borg/archive.py
borg/helpers.py
==================
546052e;Thomas Waldmann;2015-12-20 16:38:38 +0100;README: minor grammar fix, minor other changes

==

README.rst
==================
8cb901b;TW;2015-12-20 02:21:53 +0100;Merge pull request #504 from ThomasWaldmann/fix-503
fix badly named environment variable, fixes #503
==
==================
57b913b;Thomas Waldmann;2015-12-20 02:03:33 +0100;fix badly named environment variable, fixes #503
added: BORG_DELETE_I_KNOW_WHAT_I_AM_DOING for the check in "borg delete"

==

borg/archiver.py
borg/testsuite/archiver.py
borg/testsuite/benchmark.py
docs/usage.rst
==================
ae4a569;TW;2015-12-14 15:10:57 +0100;Merge pull request #486 from anarcat/docs-ml
rephrase the mailing list section
==
==================
f861f1f;Antoine Beaupré;2015-12-13 15:59:33 -0500;rephrase the mailing list section

==

docs/support.rst
==================
c200b79;Thomas Waldmann;2015-12-13 21:34:37 +0100;development docs: run build_api and build_usage before tagging release

==

docs/development.rst
==================
393e36b;Thomas Waldmann;2015-12-13 19:58:32 +0100;updated internals docs: hash table max. load factor is 0.75 now

==

docs/internals.rst
==================
2ecfa54;Thomas Waldmann;2015-12-13 15:47:03 +0100;ran build_api and build_usage

==

docs/_static/logo.xcf
docs/api.rst
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/prune.rst.inc
==================
f3d60fd;Thomas Waldmann;2015-12-13 15:38:23 +0100;update CHANGES

==

docs/changes.rst
==================
3180bc5;TW;2015-12-13 14:43:12 +0100;Merge pull request #485 from ThomasWaldmann/fuse-improvements
results of some llfuse experiments
==
==================
95f6cd4;Thomas Waldmann;2015-12-13 14:26:49 +0100;Merge branch 'master' of github.com:borgbackup/borg

==
==================
7b61731;Thomas Waldmann;2015-12-13 14:23:44 +0100;Merge branch 'ThomasWaldmann-remote-logging'

==
==================
3fd6e75;TW;2015-12-13 01:19:56 +0100;Merge pull request #484 from ThomasWaldmann/check-prefix
Check prefix, fixes #206
==
==================
0c16689;Thomas Waldmann;2015-12-13 00:51:39 +0100;fix python 3.2 str.splitlines() compatibility issue

==

borg/remote.py
==================
aa97724;Thomas Waldmann;2015-12-13 00:39:15 +0100;add --prefix to check to check only some specific archives, fixes #206

==

borg/archive.py
borg/archiver.py
borg/testsuite/archiver.py
==================
9421209;Thomas Waldmann;2015-12-12 22:45:29 +0100;log remote exceptions, add remote sysinfo

==

borg/archiver.py
borg/remote.py
==================
2df0bb1;Thomas Waldmann;2015-12-12 22:13:41 +0100;remote stderr: keep line endings as is
so even the \r trick works for overwriting the same line.

==

borg/remote.py
==================
2e2e145;Thomas Waldmann;2015-12-12 21:24:21 +0100;sane remote logging, remote stderr, fixes #461

==

borg/archiver.py
borg/logger.py
borg/remote.py
==================
229512b;Thomas Waldmann;2015-12-12 18:25:38 +0100;determine log level from the logger, so it works with logging.conf also

==

borg/remote.py
borg/testsuite/repository.py
==================
f59db03;Thomas Waldmann;2015-12-12 17:24:40 +0100;ProgressIndicator: flush the output file or it won't work correctly via ssh
likely due to buffering, the progress indication was not visible.

==

borg/helpers.py
==================
eab60cc;Thomas Waldmann;2015-12-12 15:31:43 +0100;pass through some global options from client to server
new: logging level options
refactored:
- umask option and remote_path
- cleanly separated ssh command from borg command

==

borg/archiver.py
borg/remote.py
borg/testsuite/repository.py
borg/testsuite/upgrader.py
==================
c194f3c;Thomas Waldmann;2015-12-12 13:58:16 +0100;give (all) args to open_repository

==

borg/archiver.py
==================
9c271af;Thomas Waldmann;2015-12-12 13:50:24 +0100;unify repo/archive parameter name to "location"

==

borg/archiver.py
borg/key.py
borg/testsuite/key.py
==================
c4610c1;Thomas Waldmann;2015-12-12 22:02:10 +0100;remove old mailing list archive references
the old archives were merged into the new archives.

==

README.rst
docs/support.rst
==================
e3d5898;Thomas Waldmann;2015-12-11 22:18:18 +0100;borg upgrade - use inplace parameter, fixes #466
i checked it: copying the index.* and hints.* files in advance is not needed, open() and close() do not modify them.

also: fix unicode exception with encoded filename

==

borg/upgrader.py
==================
bbeda1f;TW;2015-12-10 13:34:02 +0100;Merge pull request #481 from ThomasWaldmann/fix-progress
remove --progress magic, fixes #476
==
==================
17bfcf3;TW;2015-12-10 13:33:41 +0100;Merge pull request #482 from ThomasWaldmann/fix-upgrade
Fix borg upgrade, issue #466
==
==================
60babd1;Thomas Waldmann;2015-12-10 11:59:13 +0100;borg upgrade - do not overwrite backup_repo/index.*, fixes #466
the code obviously wrote to both index.* files as they were hardlinked.
now we make a normal copy of index (and also hints) to avoid this.

==

borg/upgrader.py
==================
cd804e7;Thomas Waldmann;2015-12-10 11:35:48 +0100;borg upgrade - move some code to convert_repo_index
it was a bit confusing to have repo-related code in a method called "convert_cache".
also fixed a typo "index index".

==

borg/upgrader.py
==================
7acda55;Thomas Waldmann;2015-12-10 11:11:06 +0100;borg upgrade - fix locking
because Repository.__init__ normally opens and locks the repo, and the upgrader just
inherited from (borg) Repository, it created a lock file there before the "backup copy"
was made.

No big problem, but a bit unclean.

Fixed it to not lock at the beginning, then make the copy, then lock.

==

borg/upgrader.py
==================
e9ab11b;Thomas Waldmann;2015-12-10 10:51:56 +0100;borg upgrade - fix README contents

==

borg/upgrader.py
==================
34b3576;Thomas Waldmann;2015-12-10 10:28:43 +0100;remove --progress magic, fixes #476
For 0.29 we worked towards a "silent by default" behaviour, so interactive usage will include -v more frequently in future.

But I noticed that this conflicts with the progress display. This would be no problem if users willingly decide which one
of --verbose or --progress they want to see, but before this fix, the progress display was activated magically when
a tty was detected. So, to counteract this magic, users would need to use --no-progress.

That's backwards imho, so I removed the magic again and users have to give --progress when they want
to see a progress indicator. Or (alternatively) they give --verbose when they want to see the long file list.

==

borg/archiver.py
borg/testsuite/archiver.py
==================
8671be1;Thomas Waldmann;2015-12-10 10:09:06 +0100;Increase FUSE read_size to 1024.
From https://github.com/borgbackup/borg/pull/480 discussion:

Did you try 1024 (linux cache block size) or 4096 (internal sector size of bigger
hdds, also used in msgpack fallback.py as lower bound, see link)?

I've tested different values - 512 and 1024 are slightly better than 4096 in my case.

read_size = 1    ls -laR: 75.57 sec
read_size = 64   ls -laR: 27.81 sec
read_size = 512          ls -laR: 27.40 sec
read_size = 1024         ls -laR: 27.20 sec
read_size = 4096         ls -laR: 30.15 sec
read_size = 0    ls -laR: 442.96 sec (default)

OK, maybe we should go for 1024 then. That happens to be < MTU size, so in case someone works on NFS
(or other network FS) we will have less reads, less network packets, less latency.

==

borg/fuse.py
==================
c4588e4;TW;2015-12-10 10:05:09 +0100;Merge pull request #480 from alex3d/patch-1
Optimized fuse inode cache
==
==================
458fc74;Thomas Waldmann;2015-12-09 00:55:48 +0100;results of some llfuse experiments
filed some bug reports, added some notes to Vagrantfile.

==

Vagrantfile
==================
20fb4c4;Thomas Waldmann;2015-12-08 23:44:00 +0100;use python 3.5.1 to build binaries

==

Vagrantfile
==================
3f1e354;TW;2015-12-08 23:37:15 +0100;Merge pull request #428 from ThomasWaldmann/purge-using-least-space
compact_segments: save_space -> free unused segments quickly
==
==================
3256f22;alex3d;2015-12-09 00:34:25 +0300;Optimized fuse inode cache
 Single-shot unpacker read buffer decreased from (default) 1Mb to 512b.
"ls -alR" on ~100k files backup mounted with fuse went from ~7min to 30 seconds.
==

borg/fuse.py
==================
b4a8941;TW;2015-12-08 19:32:18 +0100;Merge pull request #478 from rumpelsepp/docs
Fix wrong installation instructions for archlinux
==
==================
f1b9b95;Stefan Tatschner;2015-12-08 14:30:42 +0100;Fix wrong installation instructions for archlinux
On arch I don't want to perform a full system upgrade when
installing a new package; so let's drop the "yu" part.

==

docs/installation.rst
==================
499b6f7;Thomas Waldmann;2015-12-08 18:27:23 +0100;add a test that invokes borg prune --save-space

==

borg/testsuite/archiver.py
==================
bec2f72;Thomas Waldmann;2015-12-08 18:22:24 +0100;mention --save-space at the place we talk about keeping disk space free

==

docs/quickstart.rst
==================
0c076ad;Thomas Waldmann;2015-11-18 02:27:25 +0100;compact_segments: save_space -> free unused segments quickly
as soon as one target segment is full, it is a good time to commit it and remove the source segments
that are already completely unused (because they were transferred int the target segment).

so, for compact_segments(save_space=True), the additional space needed should be about 1 segment size.

note: we can't just do that at the end of one source segment as this might create very small
target segments, which is not wanted.

==

borg/archive.py
borg/archiver.py
borg/remote.py
borg/repository.py
borg/testsuite/repository.py
==================
5f1fcb3;Thomas Waldmann;2015-12-08 17:47:00 +0100;add hint "not released yet" to latest changelog entry

==

docs/changes.rst
==================
f97b9eb;Thomas Waldmann;2015-12-08 12:16:58 +0100;updated CHANGES

==

docs/changes.rst
==================
41eab54;Thomas Waldmann;2015-12-08 10:33:27 +0100;add borg upgrade to the docs, fixes #464

==

docs/usage.rst
==================
f7abff8;Thomas Waldmann;2015-12-08 10:21:20 +0100;ran build_usage

==

docs/usage/break-lock.rst.inc
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/debug-delete-obj.rst.inc
docs/usage/debug-dump-archive-items.rst.inc
docs/usage/debug-get-obj.rst.inc
docs/usage/debug-put-obj.rst.inc
docs/usage/delete.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/upgrade.rst.inc
==================
9c3b206;Thomas Waldmann;2015-12-08 10:12:15 +0100;fix mailing list address in setup.py, fixes #468

==

setup.py
==================
f2d41b1;Thomas Waldmann;2015-12-08 10:03:22 +0100;Merge branch 'ThomasWaldmann-silent'

==
==================
b41f6df;Thomas Waldmann;2015-12-08 01:56:44 +0100;Merge branch 'silent' of https://github.com/ThomasWaldmann/borg into ThomasWaldmann-silent

==
==================
74ee815;Thomas Waldmann;2015-12-08 01:45:22 +0100;add developer docs about output and logging

==

docs/development.rst
==================
cb821b1;Thomas Waldmann;2015-12-08 01:37:34 +0100;remove --log-level, add --debug and --info option, update docs
removed --log-level due to overlap with how --verbose works now.

for consistency, added --info as alias to --verbose (as the effect is
setting INFO log level).

also added --debug which sets DEBUG log level.
note: there are no messages emitted at DEBUG level yet.

WARNING is the default (because we want mostly silent behaviour,
except if something serious happens), so we don't need --warning
as an option.

==

borg/archiver.py
borg/testsuite/archiver.py
docs/changes.rst
docs/usage.rst
==================
68225af;Thomas Waldmann;2015-12-08 00:21:46 +0100;archive checker: remove report_progress, fix log levels

==

borg/archive.py
borg/archiver.py
borg/testsuite/archiver.py
==================
d05b9b8;TW;2015-12-07 22:32:55 +0100;Merge pull request #473 from ThomasWaldmann/hashindex-add
hashindex_add C implementation
==
==================
207bf5d;TW;2015-12-07 19:27:20 +0100;Merge pull request #472 from yagebu/master
fix format of umask in help pages
==
==================
720fc49;Thomas Waldmann;2015-12-07 19:13:58 +0100;hashindex_add C implementation
this was also the loop contents of hashindex_merge, but we also need it callable from Cython/Python code.

this saves some cycles, esp. if the key is already present in the index.

==

borg/_hashindex.c
borg/cache.py
borg/hashindex.pyx
==================
3ca1d33;Jakob Schnitzer;2015-12-07 18:40:06 +0100;fix format of umask in help pages
fixes #463

==

borg/archiver.py
==================
c7bde3b;TW;2015-12-07 17:55:05 +0100;Merge pull request #471 from yagebu/master
helpers: remove functions that are only used once
==
==================
17952df;Jakob Schnitzer;2015-12-07 14:17:36 +0100;helpers: remove functions that are only used once
The read_msgpack and write_msgpack functions were only used in one place
each.  Since msgpack is read and written in lots of places, having
functions with these generic names is confusing. Also, the helpers
module is quite a mess, so reducing its size seems to be a good idea.

==

borg/helpers.py
borg/repository.py
==================
689e40c;TW;2015-12-07 03:27:28 +0100;Merge pull request #470 from DanielDent/patch-1
Load over SSL (avoids mixed content)
==
==================
8c91923;Daniel Dent;2015-12-06 18:08:32 -0800;Load over SSL (avoids mixed content)

==

README.rst
==================
2e5baa6;TW;2015-12-03 21:16:11 +0100;Merge pull request #459 from ThomasWaldmann/increase-rpc-api-version
increase rpc protocol version to 2, fixes #458
==
==================
6d083c0;Thomas Waldmann;2015-12-03 17:50:37 +0100;increase rpc protocol version to 2
this is needed because due to the locking improvements, some rpc calls' signature changed slightly.

==

borg/remote.py
==================
1f8b64c;Thomas Waldmann;2015-12-03 17:35:52 +0100;readme: add note about clientside encryption

==

README.rst
==================
19f0b16;TW;2015-12-03 17:14:49 +0100;Merge pull request #457 from ThomasWaldmann/docs-add-resources
docs: add resources, fixes #149
==
==================
f1f2e78;Thomas Waldmann;2015-12-03 17:13:39 +0100;docs: move related projects to resources section

==

README.rst
docs/resources.rst
==================
b0975a7;Thomas Waldmann;2015-12-03 16:58:48 +0100;docs: add resources section, with videos, talks, presentations

==

docs/index.rst
docs/resources.rst
==================
f563409;TW;2015-12-03 15:04:44 +0100;Merge pull request #455 from ThomasWaldmann/add-progress-indication
Add progress indication, fixes #394
==
==================
df24ce5;Thomas Waldmann;2015-12-03 14:45:16 +0100;progress indicators: add tests

==

borg/testsuite/helpers.py
==================
887196b;Thomas Waldmann;2015-12-03 14:14:28 +0100;progress indicators: better docstring, minor code improvement

==

borg/helpers.py
==================
9005586;TW;2015-12-02 16:45:39 +0100;Merge pull request #452 from ThomasWaldmann/hashtable
misc. hash table tuning
==
==================
10bf6fd;TW;2015-12-02 16:42:54 +0100;Merge pull request #456 from skorokithakis/master
Display proper repo URL.
==
==================
d572cea;Stavros Korokithakis;2015-12-02 16:51:49 +0200;Display proper repo URL.

==

borg/archiver.py
==================
21bd01e;Thomas Waldmann;2015-12-02 02:55:59 +0100;add a --filter option replacing --changed/--unchanged
the problem here was that we do not just have changed and unchanged items,
but also a lot of items besides regular files which we just back up "as is" without
determining whether they are changed or not. thus, we can't support changed/unchanged
in a way users would expect them to work.

the A/M/U status only applies to the data content of regular files (compared to the index).
for all items, we ALWAYS save the metadata, there is no changed / not changed detection there.

thus, I replaced this with a --filter option where you can just specify which
status chars you want to see listed in the output.

E.g. --filter AM will only show regular files with A(dded) or M(odified) state, but nothing else.
Not giving --filter defaults to showing all items no matter what status they have.

Output is emitted via logger at info level, so it won't show up except if the logger is at that level.

==

borg/archiver.py
borg/testsuite/archiver.py
docs/usage.rst
==================
fe6916b;Thomas Waldmann;2015-12-02 01:26:26 +0100;refactor upgrade progress indication code to use ProgressIndicatorPercent

==

borg/upgrader.py
==================
7a1316c;Thomas Waldmann;2015-11-22 19:53:44 +0100;implement ProgressIndicators, use it for repo check and segment replay, fixes #195, fixes #188

==

borg/archiver.py
borg/helpers.py
borg/repository.py
==================
fffdb59;TW;2015-12-02 00:53:59 +0100;Merge pull request #454 from skorokithakis/master
Clarify encryption.
==
==================
e6d3720;Stavros Korokithakis;2015-12-02 01:48:08 +0200;Clarify encryption.

==

docs/quickstart.rst
==================
9dc18f4;TW;2015-12-01 23:37:57 +0100;Merge pull request #453 from N-006/patch-1
Borg moved to Arch Linux [community]
==
==================
5280c08;Vlad;2015-12-02 00:16:25 +0200;Borg moved to Arch Linux [community]

==

docs/installation.rst
==================
610300c;Thomas Waldmann;2015-12-01 21:18:58 +0100;misc. hash table tuning
BUCKET_UPPER_LIMIT: 90% load degrades hash table performance severely,
so I lowered that to 75% (which is a usual value - java uses 75%, python uses 66%).
I chose the higher value of both because we also should not consume too much
memory, considering the RAM usage already is rather high.

MIN_BUCKETS: I can't explain why, but benchmarks showed that choosing 2^N as
table size severely degrades performance (by 3 orders of magnitude!). So a prime
start value improves this a lot, even if we later still use the grow-by-2x algorithm.

hashindex_resize: removed the hashindex_get() call as we already know that the values
come at key + key_size address.

hashindex_init: do not calloc X*Y elements of size 1, but rather X elements of size Y.
Makes the code simpler, not sure if it affects performance.

The tests needed fixing as the resulting hashtable blob is now of course different due
to the above changes, so its sha hash changed.

==

borg/_hashindex.c
borg/testsuite/hashindex.py
==================
b09643e;Antoine Beaupré;2015-11-24 12:11:43 -0500;change file status test and cleanup last ref to --verbose
this ports the changes here to #445

==

borg/testsuite/archiver.py
docs/usage.rst
==================
1785ca5;Antoine Beaupré;2015-11-23 19:54:30 -0500;do not display unchanged files by default
add a --unchanged topical file to display those files

==

borg/archiver.py
borg/testsuite/archiver.py
==================
fce5aed;Antoine Beaupré;2015-11-23 17:30:49 -0500;move changed with other topical flags
we need to have a sane default there otherwise the option may not be defined in some sub-commands and will crash

==

borg/archiver.py
==================
a062e8f;Antoine Beaupré;2015-11-23 12:52:24 -0500;update documentation to follow changes

==

docs/usage.rst
==================
8d3d1c2;Antoine Beaupré;2015-11-23 12:38:11 -0500;silence borg by default
this also prints file status on stderr directly, bypassing the logger
as we do with other topical flags (like progress and status)

==

borg/archiver.py
borg/testsuite/archiver.py
==================
9899eaf;Antoine Beaupré;2015-11-23 12:10:21 -0500;silence file listing unless --changed is present

==

borg/archiver.py
borg/testsuite/archiver.py
==================
6b265f2;Antoine Beaupré;2015-11-23 12:00:57 -0500;alias --verbose to --log-level=info
print_verbose is now simply logger.info() and is always displayed if
log level allows it. this affects only the `prune` and `mount`
commands which were the only users of the --verbose option. the
additional display is which archives are kept and pruned and a single
message when the fileystem is mounted.

files iteration in create and extract is now printed through a
separate function which will be later controled through a topical
flag.

==

borg/archiver.py
==================
d1377e5;TW;2015-11-24 18:04:09 +0100;Merge pull request #445 from anarcat/status-bug
add test for the weird unchanged file status
==
==================
a8227ae;Thomas Waldmann;2015-11-24 17:38:12 +0100;update CHANGES

==

docs/changes.rst
==================
48bb4c3;Antoine Beaupré;2015-11-23 19:48:33 -0500;cross-reference the status oddity in the usage

==

docs/faq.rst
docs/usage.rst
==================
af7b179;Antoine Beaupré;2015-11-23 19:43:41 -0500;clarify documentation on the A status oddity

==

docs/faq.rst
==================
a75d772;Antoine Beaupré;2015-11-23 19:37:43 -0500;add test for the weird unchanged file status
this tests the behaviour found in #403 and documented in #418, but doesn't fail on the unexpected A

==

borg/testsuite/archiver.py
==================
f834e33;TW;2015-11-23 18:48:45 +0100;Merge pull request #437 from anarcat/no-progress
fix --no-progress
==
==================
2ac515a;anarcat;2015-11-23 12:41:20 -0500;fix typos

==

borg/testsuite/archiver.py
==================
0196d80;Antoine Beaupré;2015-11-22 21:24:37 -0500;fix progress tests on travis
we now check if we really have a terminal before doing the fancy auto-detection testing

==

borg/testsuite/archiver.py
==================
2b8b31b;Thomas Waldmann;2015-11-22 15:39:31 +0100;update pytest-benchmark requirement
it's released now. \o/

==

requirements.d/development.txt
==================
04f081f;TW;2015-11-22 14:15:24 +0100;Merge pull request #442 from ThomasWaldmann/fix-compiler-warnings
get rid of C compiler warnings, fixes #391
==
==================
faacd18;TW;2015-11-22 14:09:07 +0100;Merge pull request #443 from ThomasWaldmann/tb-add-sysinfo
include system info below traceback, fixes #324
==
==================
3972269;TW;2015-11-22 14:08:47 +0100;Merge pull request #441 from ThomasWaldmann/break-lock
Break lock
==
==================
2d4a71a;TW;2015-11-22 14:08:25 +0100;Merge pull request #439 from ThomasWaldmann/avoid-orphan-locks
Avoid orphan locks, see #285
==
==================
08346dd;TW;2015-11-22 14:08:08 +0100;Merge pull request #438 from ThomasWaldmann/max-lock-wait
Max lock wait, fixes #210
==
==================
adb35ab;Thomas Waldmann;2015-11-21 22:51:59 +0100;include system info below traceback, fixes #324

==

borg/archiver.py
borg/helpers.py
==================
7247043;Thomas Waldmann;2015-11-21 22:08:30 +0100;get rid of C compiler warnings, fixes #391

==

borg/_chunker.c
borg/_hashindex.c
==================
38994c7;Thomas Waldmann;2015-11-21 20:50:53 +0100;implement borg break-lock REPO command, fixes #157
due to borg's architecture, breaking the repo lock needs first creating a repository object.
this would usually try to get a lock and then block if there already is one.
thus I added a flag to open without trying to create a lock.

==

borg/archiver.py
borg/cache.py
borg/remote.py
borg/repository.py
borg/testsuite/archiver.py
==================
1093894;Thomas Waldmann;2015-11-21 16:53:33 +0100;UpgradableLock: release exclusive lock in case of exceptions
also: add some comments about how to use the locks in the safest way

==

borg/locking.py
==================
f19e95f;Thomas Waldmann;2015-11-21 15:34:51 +0100;implement --lock-wait, support timeout for UpgradableLock, fixes #210
also: simplify exceptions / exception handling

==

borg/archiver.py
borg/cache.py
borg/locking.py
borg/remote.py
borg/repository.py
borg/testsuite/locking.py
borg/testsuite/repository.py
==================
b3b4db4;Thomas Waldmann;2015-11-21 02:26:50 +0100;rename print_info to print_verbose
better name as it is only outputting if verbose flag is set.

==

borg/archiver.py
==================
6abf762;Thomas Waldmann;2015-11-21 02:22:26 +0100;remove rarely used print_status method

==

borg/archiver.py
==================
25140e8;Thomas Waldmann;2015-11-21 02:09:16 +0100;add --log-level to set the level of the builtin logging configuration, fixes #426

==

borg/archiver.py
borg/logger.py
docs/usage.rst
==================
e372dfb;TW;2015-11-21 01:38:37 +0100;Merge pull request #422 from ThomasWaldmann/logging-config
configure logging via env var
==
==================
c4dae52;Thomas Waldmann;2015-11-15 20:17:54 +0100;configure logging via env var, use LazyLogger
logging.raiseExceptions not needed any more for py >= 3.2

==

borg/archiver.py
borg/logger.py
borg/testsuite/logger.py
docs/usage.rst
==================
a6f8436;Antoine Beaupré;2015-11-20 15:01:29 -0500;move toggle action to beginning of class so it can be reused

==

borg/archiver.py
==================
a40729f;Antoine Beaupré;2015-11-20 14:56:18 -0500;--progress option was backwards
adds unit tests and ensures we detect --progress correctly in all cases

==

borg/archiver.py
borg/testsuite/archiver.py
==================
a7eb83e;TW;2015-11-20 20:08:39 +0100;Merge pull request #419 from anarcat/no-progress
add a --no-progress flag to forcibly disable progress info
==
==================
5dda00c;TW;2015-11-20 19:34:12 +0100;Merge pull request #435 from ThomasWaldmann/rtd-improvements
style changes of previous changeset did not work on rtd, try 2
==
==================
42e9a77;Thomas Waldmann;2015-11-20 19:32:04 +0100;style changes of previous changeset did not work on rtd, try 2

==

docs/conf.py
==================
3c121c2;TW;2015-11-20 19:13:48 +0100;Merge pull request #434 from ThomasWaldmann/rtd-improvements
rtd docs: color and logo improvements
==
==================
077bcd0;Thomas Waldmann;2015-11-20 19:06:40 +0100;logo: have a separate, bigger logo (do not reuse the favicon)
currently just scaled up / converted to png from the favicon.ico.

==

docs/_static/logo.png
docs/conf.py
==================
87bb886;Thomas Waldmann;2015-11-20 18:51:11 +0100;rtd theme adjustment: borg darkness for the upper left corner

==

docs/borg_theme/css/borg.css
docs/conf.py
==================
7a08368;Thomas Waldmann;2015-11-20 17:56:35 +0100;fix html_theme_path overriding previous definition of it

==

docs/conf.py
==================
57ffa4d;Thomas Waldmann;2015-11-20 15:49:53 +0100;more precise binary installation steps

==

docs/installation.rst
==================
67c8573;Thomas Waldmann;2015-11-20 01:12:31 +0100;upgrade OS X FUSE to 3.0.9, update release todo docs

==

Vagrantfile
docs/development.rst
==================
b1ba7a8;Thomas Waldmann;2015-11-19 20:03:50 +0100;--keep-tag-files: fix file status, fix multiple tag files in one directory, fixes #432

==

borg/archiver.py
borg/helpers.py
borg/testsuite/archiver.py
==================
dcab7dd;Thomas Waldmann;2015-11-18 15:40:23 +0100;new mailing list borgbackup@python.org
also: remove mailing list and irc channel address from development docs,
it is enough to have this information on the main page and on the support page.

==

README.rst
docs/development.rst
docs/support.rst
==================
04b4d63;TW;2015-11-17 00:51:06 +0100;Merge pull request #421 from ThomasWaldmann/datetime-iso-style
use ISO-8601 date and time format, fixes #375
==
==================
2e64c29;Thomas Waldmann;2015-11-16 23:51:21 +0100;use ISO-8601 date and time format, fixes #375

==

borg/archiver.py
borg/helpers.py
docs/conf.py
docs/usage.rst
==================
3aa3148;TW;2015-11-16 21:43:41 +0100;Merge pull request #418 from ThomasWaldmann/update-faq
FAQ entry about unexpected 'A' status for unchanged file(s), fixes #403
==
==================
559c890;Thomas Waldmann;2015-11-16 16:03:55 +0100;add FAQ entry about unexpected 'A' status for unchanged file(s), fixes #403

==

docs/faq.rst
==================
9b1ca5c;Antoine Beaupré;2015-11-16 15:26:50 -0500;force --no to be at the start of option

==

borg/archiver.py
==================
5be060d;Antoine Beaupré;2015-11-16 11:27:27 -0500;add a --no-progress flag to forcibly disable progress info
--progress isn't a "toggle" anymore, in that it will never disable progress information: always enable it.

example:

$ borg create ~/test/borg2::test$(date +%s) . ; echo ^shows progress
reading files cache
processing files
^shows progress
$ borg create ~/test/borg2::test$(date +%s) . < /dev/null; echo ^no progress
reading files cache
processing files
^no progress
$ borg create --progress ~/test/borg2::test$(date +%s) . < /dev/null; echo ^progress forced
reading files cache
processing files
^progress forced
$ borg create --no-progress ~/test/borg2::test$(date +%s) . ; echo ^no progress
reading files cache
processing files
^no progress

we introduce a ToggleAction that can be used for other options, but
right now is just slapped in there near the code, which isn't that
elegant. inspired by:

http://stackoverflow.com/questions/11507756/python-argparse-toggle-flags

note that this is supported out of the box by click:
http://click.pocoo.org/5/options/#boolean-flags

fixes #398

==

borg/archiver.py
==================
3847290;Thomas Waldmann;2015-11-16 15:37:29 +0100;add 'E' file status to docs

==

docs/usage.rst
==================
d387ded;TW;2015-11-16 15:34:21 +0100;Merge pull request #417 from anarcat/more-docs
More docs
==
==================
9172362;Antoine Beaupré;2015-11-16 09:07:59 -0500;correct ubuntu release number

==

docs/installation.rst
==================
3bbd331;Antoine Beaupré;2015-11-15 22:42:49 -0500;use 'distribution' more consistently

==

docs/installation.rst
==================
d78d6d6;Antoine Beaupré;2015-11-15 22:40:00 -0500;turn distro list into a table, adding Debian, Ubuntu, OSX

==

docs/installation.rst
==================
2c3f3f1;Antoine Beaupré;2015-11-15 22:20:07 -0500;install docs: don't use "from" twice
it always abstracts "pypi" and "github" away (technical words that are
not necessary). pip remains.

==

docs/installation.rst
==================
3a72fbe;Thomas Waldmann;2015-11-15 20:30:58 +0100;update CHANGES

==

docs/changes.rst
==================
0070ef0;Thomas Waldmann;2015-11-15 20:23:33 +0100;minor install docs fixes

==

docs/installation.rst
==================
eefc137;TW;2015-11-15 20:19:17 +0100;Merge pull request #412 from anarcat/install-docs-nitpick
Install docs nitpick
==
==================
fac1160;TW;2015-11-15 16:32:31 +0100;Merge pull request #416 from ThomasWaldmann/pyinstaller-no-hidden-import
avoid hidden import, make it easy for pyinstaller
==
==================
234a88b;Thomas Waldmann;2015-11-15 15:52:02 +0100;avoid hidden import, make it easy for pyinstaller
this fixes #218 in an easier way so one doesn't have to type
--hidden-import=logging.config all the time when using pyinstaller.

==

Vagrantfile
borg/logger.py
docs/development.rst
==================
ff6e955;TW;2015-11-15 14:50:04 +0100;Merge pull request #415 from ThomasWaldmann/flag-docs
add docs for item flags / status output, fixes #402
==
==================
d6b8de9;Thomas Waldmann;2015-11-15 14:31:25 +0100;add docs for item flags / status output, fixes #402

==

borg/archiver.py
docs/usage.rst
==================
aa4c768;Antoine Beaupré;2015-11-14 21:08:28 -0500;move pyinstaller mention out of heading
pyinstaller probably means nothing for most people, while standalone binary is more meaningful

==

docs/installation.rst
==================
a8d2c18;Antoine Beaupré;2015-11-14 21:07:16 -0500;split packaging meta-info in a separate paragraph and link to github

==

docs/installation.rst
==================
9f8700e;Antoine Beaupré;2015-11-14 21:03:38 -0500;restructure install page headings
do not repeat "installation" all the time, and regroup git and pip under "from source"

also link to the sections in the summary

==

docs/installation.rst
==================
44f54c4;TW;2015-11-15 01:46:11 +0100;Merge pull request #411 from jungle-boogie/patch-1
correct install link
==
==================
5942b79;jungle-boogie;2015-11-14 16:13:25 -0800;correct install link

==

README.rst
==================
fd5ccad;Thomas Waldmann;2015-11-14 23:48:44 +0100;update CHANGES

==

docs/changes.rst
==================
d52c093;TW;2015-11-14 22:32:47 +0100;Merge pull request #408 from anarcat/static-usage
Static usage generation
==
==================
811c18d;Antoine Beaupré;2015-11-13 10:46:13 -0500;explain how to regenerate usage and API files and when

==

docs/development.rst
==================
8e36075;Antoine Beaupré;2015-11-13 10:42:16 -0500;commit usage files directly into git
the generation of those files was causing us way too much pain to
justify automatically generating them all the time.

those will have to be re-generated with `build_api` or `build_usage`
as appropriate, for example when function signatures or commandline
flags change.

see #384

==

.gitignore
docs/api.rst
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/debug-delete-obj.rst.inc
docs/usage/debug-dump-archive-items.rst.inc
docs/usage/debug-get-obj.rst.inc
docs/usage/debug-put-obj.rst.inc
docs/usage/delete.rst.inc
docs/usage/extract.rst.inc
docs/usage/help.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/rename.rst.inc
docs/usage/serve.rst.inc
docs/usage/upgrade.rst.inc
==================
f13dd6e;Antoine Beaupré;2015-11-13 10:38:50 -0500;completely remove have_cython() hack
this was making us require mock, which is really a test component and
shouldn't be part of the runtime dependencies. furthermore, it was
making the imports and the code more brittle: it may have been
possible that, through an environment variable, backups could be
corrupted because mock libraries would be configured instead of real
once, which is a risk we shouldn't be taking.

finally, this was used only to build docs, which we will build and
commit to git by hand with a fully working borg when relevant.

see #384.

==

borg/archive.py
borg/archiver.py
borg/cache.py
borg/fuse.py
borg/helpers.py
borg/key.py
borg/remote.py
borg/repository.py
docs/usage.rst
setup.py
==================
f52fb41;Antoine Beaupré;2015-11-13 10:31:56 -0500;Revert "use build_py to fix build on RTD", disables docs build
This reverts commit 86487d192a9a5ab7ff4eedb92d793485b4c30268.

We will instead commit the generated `.rst` usage and API files
directly into git. The setup commands remain to generate them when the
usage or API changes, but as things are the hoops required to generate
those RST files are way too complicated to justify simply build docs.

See #384.

Conflicts:
	setup.py

==

setup.py
==================
be73e7c;TW;2015-11-09 04:27:56 +0100;Merge pull request #396 from ThomasWaldmann/exclude_if_present
Exclude if present
==
==================
7d178e0;Thomas Waldmann;2015-11-09 04:08:49 +0100;Implement --keep-tag-files to preserve directory roots/tag-files
We also add --keep-tag-files to keep in the archive the root directory and the
tag/exclusion file in the archive.

This is taken from a attic PR (and adapted for borg):
    commit f61e22cacc90e76e6c8f4b23677eee62c09e97ac
    Author: Yuri D'Elia <yuri.delia@eurac.edu>
    Date:   Mon Dec 15 12:27:43 2014 +0100

==

borg/archiver.py
borg/helpers.py
borg/testsuite/archiver.py
==================
a6a8a4e;Thomas Waldmann;2015-11-09 03:41:06 +0100;Implement --exclude-if-present
Add a new --exclude-if-present command-line flag to ``borg create``.  If
specified, directories containing the specified tag file will be excluded from
the backup. The flag can be repeated to ignore more than a single tag file,
irregardless of the contents.

This is taken from a attic PR (and adapted for borg):
    commit 3462a9ca90388dc5d8b4fa4218a32769676b3623
    Author: Yuri D'Elia <yuri.delia@eurac.edu>
    Date:   Sun Dec 7 19:15:17 2014 +0100

==

borg/archiver.py
borg/helpers.py
borg/testsuite/archiver.py
==================
4a2e4ec;Thomas Waldmann;2015-11-08 17:10:18 +0100;update CHANGES

==

docs/changes.rst
==================
3f6530d;TW;2015-11-08 16:56:39 +0100;Merge pull request #388 from ThomasWaldmann/no-docs-build-by-default
do not try to build api / usage docs for production install
==
==================
3238b8e;Thomas Waldmann;2015-11-08 16:16:43 +0100;do not try to build api / usage docs for production install
it requires "mock" (and later also sphinx) and we do not (want to) have that in setup_requires.

I removed the build.sub_commands.append(...) because that made setup.py install run build_api
and build_usage automatically for production installs. the comment said it does not work on
readthedocs anyway.

build_api and build_usage can still be run manually.

==

setup.py
==================
9292ce1;TW;2015-11-08 16:02:13 +0100;Merge pull request #386 from bket/nameerror
Catch msgpack error in archive.py
==
==================
e6911b2;Björn Ketelaars;2015-11-08 14:24:58 +0100;Avoid using msgpack.packb at import time.
move item_keys = ... to __init__ (self.item_keys = ...)

Solution from/discussed with TW.

==

borg/archive.py
==================
f48a5ae;Thomas Waldmann;2015-11-08 02:17:37 +0100;fix formatting issue in changes.rst

==

docs/changes.rst
==================
0075725;Thomas Waldmann;2015-11-08 02:00:51 +0100;try to fix build on readthedocs

==

borg/helpers.py
==================
cd40ec2;Thomas Waldmann;2015-11-08 01:29:53 +0100;update CHANGES

==

docs/changes.rst
==================
5595d56;Thomas Waldmann;2015-11-08 01:05:55 +0100;deal with unicode errors for symlinks in same way as for regular files, fixes #382

==

borg/archive.py
==================
ba67b96;Thomas Waldmann;2015-11-08 00:57:02 +0100;have a helpful warning message about how to fix wrong locale setup, fixes #382

==

borg/archiver.py
==================
244303a;Thomas Waldmann;2015-11-07 19:55:17 +0100;add ACL keys the RobustUnpacker must know about

==

borg/archive.py
==================
3d2a1da;Thomas Waldmann;2015-11-07 16:13:24 +0100;use latest pytest-benchmark

==

requirements.d/development.txt
==================
c9090fc;Thomas Waldmann;2015-11-07 15:37:05 +0100;helper: minor style fix

==

borg/helpers.py
==================
303bed9;Thomas Waldmann;2015-11-07 15:17:40 +0100;docs: minor development docs update

==

docs/development.rst
==================
8cc726a;Thomas Waldmann;2015-11-07 00:30:02 +0100;make basic test more robust, try 2
check if we have all expected files in list output (but ignore extra lines,
like "can't load libfakeroot" or so).

==

borg/testsuite/archiver.py
==================
eb3bc10;Thomas Waldmann;2015-11-07 00:11:36 +0100;make basic test more robust
counting lines is a bad idea. just one unrelated output line and the test fails.
thus we rather check if what we expect is in the output.

==

borg/testsuite/archiver.py
==================
c34ef37;Thomas Waldmann;2015-11-06 22:04:37 +0100;CHANGES: some fixes, add compatibility notes

==

docs/changes.rst
==================
47fec58;Thomas Waldmann;2015-11-06 21:33:43 +0100;updated CHANGES

==

docs/changes.rst
==================
1a20d3d;TW;2015-11-06 21:05:30 +0100;Merge pull request #366 from ThomasWaldmann/fix-364
Fix borg check crashing on some repos, issue #364
==
==================
c01efa4;Thomas Waldmann;2015-11-06 19:37:39 +0100;repository: refactor some duplicate code

==

borg/repository.py
==================
b1eb784;Thomas Waldmann;2015-11-06 18:31:06 +0100;docs: add section about debug commands

==

docs/usage.rst
==================
6c1b765;Thomas Waldmann;2015-11-06 18:22:30 +0100;docs: group general stuff under 1 headline, fix another headline level

==

docs/usage.rst
==================
864fa9a;TW;2015-11-06 18:08:05 +0100;Merge pull request #370 from ThomasWaldmann/debug-helpers
Debug helpers
==
==================
37c8aa2;Thomas Waldmann;2015-11-06 17:45:30 +0100;debug-get-obj command

==

borg/archiver.py
borg/testsuite/archiver.py
==================
a2fc479;Thomas Waldmann;2015-11-06 17:31:05 +0100;debug-put-obj command

==

borg/archiver.py
borg/testsuite/archiver.py
==================
9986705;Thomas Waldmann;2015-11-06 16:51:39 +0100;add some tests for the debug commands

==

borg/testsuite/archiver.py
==================
583a89c;TW;2015-11-06 16:27:03 +0100;Merge pull request #379 from jaltek/patch-1
Fix for link to "The Borg collective"
==
==================
bc6b92f;Jan;2015-11-06 16:22:05 +0100;Fix for link to "The Borg collective"
Fixed the link to "The Borg collective".
==

README.rst
==================
ea10551;TW;2015-11-06 16:07:22 +0100;Merge pull request #378 from ThomasWaldmann/list-with-prefix
borg list --prefix=thishostname- REPO, fixes #205
==
==================
7da730a;Thomas Waldmann;2015-11-06 15:45:49 +0100;borg list --prefix=thishostname- REPO, fixes #205
lists only archives with names starting with the given prefix.

==

borg/archiver.py
borg/testsuite/archiver.py
==================
a4bb859;Thomas Waldmann;2015-11-06 15:01:37 +0100;do not mention the deprecated passphrase mode

==

borg/key.py
==================
4c6be00;Thomas Waldmann;2015-11-06 14:58:12 +0100;remove some superfluous / duplicate log messages

==

borg/cache.py
==================
0f0a21c;Thomas Waldmann;2015-11-04 01:51:34 +0100;Merge branch 'master' of github.com:borgbackup/borg

==
==================
f6244f0;Thomas Waldmann;2015-11-04 01:51:09 +0100;docs: warn about not running out of space

==

docs/quickstart.rst
==================
39b5734;Thomas Waldmann;2015-11-04 01:05:21 +0100;debugging helper: borg debug-delete-obj

==

borg/archiver.py
==================
47813f6;Thomas Waldmann;2015-11-03 23:45:49 +0100;archiver checker: better error logging, give chunk_id and sequence numbers
can be used together with borg debug-dump-archive-items.

==

borg/archive.py
==================
d2b7dbc;Thomas Waldmann;2015-11-03 22:51:59 +0100;debugging helper: borg debug-dump-archive-items

==

borg/archiver.py
==================
15dd64c;TW;2015-11-03 20:43:17 +0100;Merge pull request #369 from ThomasWaldmann/fix-key-check
Fix key check
==
==================
12b5d07;Thomas Waldmann;2015-11-03 20:21:52 +0100;fix RobustUnpacker, it missed some metadata keys. add check for unknown metadata keys.
not just the new atime and ctime keys were missing, but also bsdflags.

==

borg/archive.py
==================
fa35525;Thomas Waldmann;2015-11-03 19:52:49 +0100;create from stdin: also save atime, ctime
cosmetic, just for completeness.

==

borg/archive.py
==================
f28d5d1;Thomas Waldmann;2015-11-03 19:39:05 +0100;disk full test: some improvements
- can create 0-byte files now
- frees space early (avoids running out of disk space at repo init time)
- creates multiple reserve files, so we do not only reserve some space,
  but also some inodes
 - only print output if there is an error RC
 - if make_files makes us run out of space, that is not interesting, just start
   a new iteration from scratch

==

borg/testsuite/archiver.py
==================
f804c6f;Thomas Waldmann;2015-11-03 13:52:26 +0100;repository check code: added some comments

==

borg/repository.py
==================
98f3b8d;Thomas Waldmann;2015-11-03 13:46:00 +0100;fix "check" for repos that have incomplete chunks, fixes #364
added try/finally (the code in between was just indented, no
other code changes) to make sure it sets self.index back to None,
even if the code crashes e.g. due to an IntegrityError caused
by an incomplete segment caused by a disk full condition.

also, in prepare_txn, create an empty in-memory index if transaction_id
is None, which is required by the Repository.check code to work correctly.
If the index is not empty there, it will miscalculate segment usage
(self.segments).

==

borg/repository.py
==================
1f27182;TW;2015-11-03 01:06:41 +0100;Merge pull request #363 from ThomasWaldmann/corruption-test
add a test to find disk-full issues, #327
==
==================
22262e3;Thomas Waldmann;2015-11-03 00:41:20 +0100;add a test to find disk-full issues, #327

==

borg/testsuite/archiver.py
==================
a69f7b0;Thomas Waldmann;2015-11-02 21:06:04 +0100;vagrant: use pyinstaller from develop branch, fixes #336
it has some fixes that are not in pyinstaller 3.0 release (and not in master branch).

==

Vagrantfile
==================
bdf7dc6;Thomas Waldmann;2015-11-02 20:53:04 +0100;docs: add example for rename

==

docs/usage.rst
==================
6d5cc06;Thomas Waldmann;2015-11-02 20:36:13 +0100;remove unused imports, add missing imports

==

borg/archiver.py
borg/cache.py
borg/key.py
borg/logger.py
borg/repository.py
borg/testsuite/logger.py
setup.py
==================
734dae8;Thomas Waldmann;2015-11-02 19:47:09 +0100;improve chunker params docs, fixes #362

==

docs/internals.rst
docs/usage.rst
==================
36cc377;Thomas Waldmann;2015-11-02 01:59:22 +0100;use default_notty=False for confirmations, fixes #345
this is so that e.g. cron jobs do not hang indefinitely if yes() is called,
but it will just default to "no" if not tty is connected.

if you need to enforce a "yes" answer (which is not recommended for
the security critical questions), you can use the environment:

BORG_CHECK_I_KNOW_WHAT_I_AM_DOING=Y

==

borg/archiver.py
borg/cache.py
==================
e623189;Thomas Waldmann;2015-11-02 00:14:01 +0100;emit a deprecation warning for --compression N
deprecating it in the source is not enough, we also need to tell the users to fix their scripts.

==

borg/helpers.py
==================
6d0570a;TW;2015-11-01 23:40:00 +0100;Merge pull request #357 from ThomasWaldmann/coverage-fixes
fix .coverragerc omits, fixes #319
==
==================
23a3e3b;Thomas Waldmann;2015-11-01 23:22:04 +0100;do not measure coverage for fuse.py
it's always at 0% although we do have fuse tests. guess one can't measure such code with coverage.py.

==

.coveragerc
==================
ff66271;Thomas Waldmann;2015-11-01 23:20:32 +0100;only measure coverage for borgbackup code, not for tests

==

.coveragerc
==================
35280e9;Thomas Waldmann;2015-11-01 23:06:52 +0100;label platform code, exclude freebsd and unknown platform from coverage measurement
this coverage configuration is mostly for travis and there we only can test linux and darwin.

==

.coveragerc
borg/platform.py
borg/xattr.py
==================
d7b6cc3;Thomas Waldmann;2015-11-01 22:36:18 +0100;fix .coverragerc path
as the cwd is in toxworkdir, .coveragerc is in ../

==

tox.ini
==================
8493cfb;Thomas Waldmann;2015-11-01 22:18:47 +0100;fix .coverragerc omits
seems like they need a */ prefix

also: exclude everything below support/ - this is 3rd party stuff.

==

.coveragerc
==================
12758f1;TW;2015-11-01 19:44:54 +0100;Merge pull request #354 from ThomasWaldmann/cleanup-confirmations
Cleanup confirmations
==
==================
0a6e6cf;Thomas Waldmann;2015-11-01 19:18:29 +0100;refactor confirmation code, reduce code duplication, add tests

==

borg/archiver.py
borg/cache.py
borg/helpers.py
borg/testsuite/helpers.py
==================
3690005;Thomas Waldmann;2015-11-01 19:10:50 +0100;move test utilities to testsuite package, add FakeInputs utility

==

borg/testsuite/__init__.py
borg/testsuite/archiver.py
==================
37a02a8;TW;2015-11-01 01:12:05 +0100;Merge pull request #352 from ThomasWaldmann/issue-351
Issue 351
==
==================
4a1c995;Thomas Waldmann;2015-11-01 00:53:55 +0100;add --show-rc option enable "terminating with X status, rc N" output, fixes #351
this is needed for tools like borgweb (or in general: when the rc value / exit status should
be logged for later review or directly seen on screen).

this is off by default, so the output is less verbose (and also does not fail tests which
counts lines).

==

borg/archiver.py
==================
4bf8c8a;Thomas Waldmann;2015-11-01 00:40:32 +0100;separate parse_args() from run()
parse_args concentrates on only processing arguments, including pre and post processing.
this needs to be called before run(), which is now receiving the return value of parse_args.

this was done so we can have the parsed args outside of the run function, e.g. in main().

==

borg/archiver.py
borg/testsuite/archiver.py
==================
7ea701f;Thomas Waldmann;2015-11-01 00:01:23 +0100;fix test failure for borg.exe
fatal error is rc 2 now (EXIT_ERROR)

==

borg/testsuite/archiver.py
==================
f651b01;TW;2015-10-31 23:19:26 +0100;Merge pull request #350 from ThomasWaldmann/fix-307
prettier connection closed message, fixes #307
==
==================
5f86959;TW;2015-10-31 22:44:04 +0100;Merge pull request #349 from ThomasWaldmann/pretty-errors
prettier error messages, fixes #57
==
==================
39e4f34;TW;2015-10-31 22:43:36 +0100;Merge pull request #348 from ThomasWaldmann/warn-slow-msgpack
emit a warning if we have a slow msgpack installed
==
==================
d41f7d1;TW;2015-10-31 22:43:08 +0100;Merge pull request #344 from rpodgorny/no-rawconfigparser
move away from RawConfigParser to ConfigParser
==
==================
1740384;Thomas Waldmann;2015-10-31 22:41:08 +0100;prettier connection closed message, fixes #307

==

borg/remote.py
==================
762fdaa;Thomas Waldmann;2015-10-31 22:23:32 +0100;prettier error messages, fixes #57
subclasses of "Error": do not show traceback
(this is used when a failure is expected and has rather trivial reasons and usually
does not need debugging)

subclasses of "ErrorWithTraceback": show a traceback
(this is for severe and rather unexpected stuff, like consistency / corruption issues
or stuff that might need debugging)

I reviewed all the Error subclasses whether they fit into the one or other class.

Also: fixed docstring typo, docstring formatting

==

borg/archiver.py
borg/cache.py
borg/helpers.py
borg/key.py
borg/locking.py
borg/remote.py
borg/repository.py
==================
3490469;Thomas Waldmann;2015-10-31 20:37:21 +0100;emit a warning if we have a slow msgpack installed
the reason for a slow msgpack can be:
- pip install: missing compiler (gcc)
- pip install: missing compiler parts (e.g. gcc-c++)
- pip install: cached wheel package that was built while the compiler wasn't present
- distribution package: badly built msgpack package

==

borg/archiver.py
borg/helpers.py
borg/testsuite/helpers.py
==================
3c2dee6;Thomas Waldmann;2015-10-31 19:50:53 +0100;vagrant: fix msgpack installation on centos, fixes #342

==

Vagrantfile
==================
44083f7;Thomas Waldmann;2015-10-29 16:22:02 +0100;updated CHANGES

==

docs/changes.rst
==================
5cc25d9;Radek Podgorny;2015-10-29 02:37:43 +0100;move away from RawConfigParser to ConfigParser
this is a recommended thing since direct use of RawConfigParser
is not deprecated according to python docs.

==

borg/cache.py
borg/repository.py
borg/testsuite/archiver.py
==================
5992d4b;Thomas Waldmann;2015-10-28 02:02:33 +0100;Merge branch 'review-logging-levels'

==
==================
b4aab65;TW;2015-10-27 23:25:58 +0100;Merge pull request #341 from ThomasWaldmann/python35
also test py35 on travis
==
==================
9d0d37f;Thomas Waldmann;2015-10-27 23:06:32 +0100;also test py35 on travis

==

.travis.yml
.travis/install.sh
==================
b453547;TW;2015-10-27 23:01:05 +0100;Merge pull request #340 from ThomasWaldmann/fix-fuse-locking
fuse mount: fix unlocking of repository at umount time, fixes #331
==
==================
dd577bf;Thomas Waldmann;2015-10-27 22:37:36 +0100;fuse mount: fix unlocking of repository at umount time, fixes #331
there were 2 issues:
lock used another pid and tid than release because daemonize() made it different processes/threads.
solved by just determining PID only once and not using TID any more.

the other issue was that the repo needed and explicit closing.

==

borg/archiver.py
borg/locking.py
==================
b787ac6;Thomas Waldmann;2015-10-27 20:46:57 +0100;docs: remove api docs (too much breakage on rtd)

==

docs/index.rst
==================
fe87cb9;TW;2015-10-26 23:43:04 +0100;Merge pull request #335 from ThomasWaldmann/save-atime-ctime
backup atime and ctime additionally to mtime, fixes #317
==
==================
92d31be;Thomas Waldmann;2015-10-26 23:16:41 +0100;atime unit test: test adapts to O_NOATIME support on platform

==

borg/testsuite/archiver.py
==================
3e73998;Thomas Waldmann;2015-10-26 23:08:37 +0100;atime unit test: do not compare input file's current atime
and explain why (missing O_NOATIME open mode modified the atime at backup time).

==

borg/testsuite/archiver.py
==================
7659991;Thomas Waldmann;2015-10-26 22:34:08 +0100;atime unit test: hardcode "round" timestamps
just to avoid rounding / precision issues with floating point computations on py < 3.3
I used 2 hardcoded "full second" values on the input file and check if they get restored
correctly.

==

borg/testsuite/archiver.py
==================
c492011;Thomas Waldmann;2015-10-26 02:07:55 +0100;backup atime and ctime additionally to mtime, fixes #317
restore: mtime and atime
FUSE: support ctime and atime additionally to mtime

==

borg/archive.py
borg/fuse.py
borg/helpers.py
borg/testsuite/archiver.py
==================
b89b5c2;Thomas Waldmann;2015-10-26 01:44:43 +0100;Merge branch 'master' of github.com:borgbackup/borg

==
==================
0942bc0;Thomas Waldmann;2015-10-26 01:43:58 +0100;fix reading files without touching their atime

==

borg/archive.py
==================
f7d724c;Thomas Waldmann;2015-10-26 01:37:28 +0100;tests: only use mtime once in directory comparison tuples

==

borg/testsuite/__init__.py
==================
f285e90;Thomas Waldmann;2015-10-25 02:53:36 +0200;archiver: add E status as error indication
E means that an error occured when processing this (single) item

==

borg/archiver.py
==================
7b73abd;Thomas Waldmann;2015-10-25 02:35:42 +0200;archiver: rename print_x methods so they correspond to log levels
also:

remove some "Warning: " msg prefixes - if we emit at WARNING level,
it is obviously a warning.

remove some "borg: " msg prefixes.

==

borg/archiver.py
==================
bfbdbfb;TW;2015-10-25 00:04:32 +0200;Merge pull request #332 from ThomasWaldmann/screencast
borgbackup install+basics presentation(asciinema + script)
==
==================
42fc228;Thomas Waldmann;2015-10-24 23:58:05 +0200;embed the asciinema preview image / link into the README

==

README.rst
==================
a16ae01;Thomas Waldmann;2015-10-24 23:40:51 +0200;borgbackup install+basics presentation(asciinema + script)

==

docs/misc/asciinema/install_and_basics.json
docs/misc/asciinema/install_and_basics.txt
==================
d8d3c85;Thomas Waldmann;2015-10-23 02:29:41 +0200;fix logging levels
All normal informational output is now logged at INFO level.
To actually see normal output, the logger is configured to level INFO also.

Log levels:
WARNING is for warnings, ERROR is for (fatal) errors, DEBUG is for debugging.

logging levels must only be used according to this semantics and must not be
(ab)used to let something show up (although the logger would usually hide it)
or hide something (although the logger would usually show it).

Controlling the amount of output shown on INFO level:
--verbose, --progress, --stats are currently used for this.
more such flags might be added later as needed.

if they are set, more output is logged (at INFO level).

also: change strange setup_logging return value

==

borg/archiver.py
borg/logger.py
borg/testsuite/archiver.py
borg/testsuite/logger.py
==================
39fb9b1;Thomas Waldmann;2015-10-22 01:40:34 +0200;update docs about return codes

==

docs/usage.rst
==================
52fd2ad;TW;2015-10-22 01:04:36 +0200;Merge pull request #320 from ThomasWaldmann/final-status
Final status
==
==================
5bcd483;Thomas Waldmann;2015-10-22 00:45:29 +0200;add tests for return codes

==

borg/testsuite/archiver.py
==================
9c45d70;TW;2015-10-21 16:56:49 +0200;Merge pull request #323 from anarcat/version-arg
add standard --version argument
==
==================
3996caa;anarcat;2015-10-21 10:51:27 -0400;add my email address to authors

==

AUTHORS
==================
bfaa046;Antoine Beaupré;2015-10-16 11:40:22 -0400;add standard --version argument
this way the version can be discovered by scripts without having to
part the output of 'help'.

it is removed from the 'help' output itself because it is prettier
without the complete version number, and then the description can be
reused elsewhere as well without needing the version number

==

borg/archiver.py
==================
a1f88c7;TW;2015-10-21 15:30:23 +0200;Merge pull request #322 from anarcat/docs
explicitely commit to the units standard
==
==================
76c0804;Antoine Beaupré;2015-10-21 09:25:46 -0400;explicitely commit to the units standard, see #289

==

docs/usage.rst
==================
557d8c7;TW;2015-10-21 02:15:22 +0200;Merge pull request #318 from anarcat/flake8
small flake8 changes
==
==================
05c4255;Antoine Beaupré;2015-10-20 19:54:57 -0400;flake8 cleanup broke the upgrader, re-import Repository

==

borg/testsuite/upgrader.py
==================
72c9848;Thomas Waldmann;2015-10-21 01:11:51 +0200;refactor return codes, fixes #61
0 = success (logged as INFO)
1 = warning (logged as WARNING)
2 = (fatal and abrupt) error (logged as ERROR)

please use the EXIT_(SUCCESS,WARNING,ERROR) constants from helpers module.

==

borg/archiver.py
borg/helpers.py
==================
1439f3b;Thomas Waldmann;2015-10-20 23:57:56 +0200;give a final status into the log output, including exit code, fixes #58

==

borg/archiver.py
==================
9577121;Thomas Waldmann;2015-10-20 23:27:11 +0200;vagrant: tests: announce whether fakeroot is used or not

==

Vagrantfile
==================
af23666;Thomas Waldmann;2015-10-20 22:46:47 +0200;tests: catch stderr also, some tests expect stderr contents in "output"
weird: the remote archive fuse tests deadlock, that's why I replaced them by dummies

==

borg/testsuite/archiver.py
==================
439c870;TW;2015-10-20 22:16:36 +0200;Merge pull request #316 from anarcat/file-sizes
improve file size displays
==
==================
3ea10f8;Thomas Waldmann;2015-10-20 22:14:33 +0200;vagrant: add vagrant user to fuse group for debianoid systems also

==

Vagrantfile
==================
03d381c;Antoine Beaupré;2015-10-20 14:40:09 -0400;describe the current style guide in documentation

==

docs/development.rst
==================
8651f87;Antoine Beaupré;2015-10-20 14:36:18 -0400;fix flake8 warnings in my recent PRs

==

borg/testsuite/logger.py
borg/testsuite/upgrader.py
==================
e1b2f0f;Antoine Beaupré;2015-10-20 14:36:01 -0400;remove silenced warnings that were not triggered anyways
line length comes from @tw - i would prefer 80 columns personnally, but don't want to argue over that bikeshed

the 120 limit *does* trigger warnings right now, but it's better to do that than to make the problem worse for future PRs

==

setup.cfg
==================
aad6afb;Antoine Beaupré;2015-10-20 13:36:13 -0400;pep8 the whole darn helpers module

==

borg/helpers.py
borg/testsuite/helpers.py
==================
1bbbdea;Thomas Waldmann;2015-10-20 19:23:47 +0200;vagrant: produce borg.exe in /vagrant/borg and have it in PATH, so tests will find and test it

==

Vagrantfile
==================
21fdc91;Antoine Beaupré;2015-10-20 12:58:59 -0400;clarify size tests

==

borg/testsuite/helpers.py
==================
416e423;Antoine Beaupré;2015-10-20 12:58:50 -0400;introduce variable precision

==

borg/helpers.py
borg/testsuite/helpers.py
==================
c7c1b92;Antoine Beaupré;2015-10-20 12:42:54 -0400;convert to more flexible size formatters
those can now support both file sizes (in SI/decimal format, powers of 10) and memory sizes (in binary format, powers of 2)

tests still fail because the result is always displayed as floats

==

borg/helpers.py
borg/testsuite/helpers.py
==================
de390b1;Antoine Beaupré;2015-10-20 12:31:06 -0400;add file size tests, failing
the tests are failing because 1KB gets displayed as 1000 bytes, but also because higher prefixes are missing

==

borg/testsuite/helpers.py
==================
a4f136a;Thomas Waldmann;2015-10-20 16:23:23 +0200;update CHANGES.rst (add issue / PR numbers)

==

docs/changes.rst
==================
344a25c;Thomas Waldmann;2015-10-20 15:52:22 +0200;update CHANGES.rst

==

docs/changes.rst
==================
a4e3d14;TW;2015-10-20 02:38:41 +0200;Merge pull request #313 from anarcat/docs
various docs fixes
==
==================
21f2698;TW;2015-10-19 22:25:46 +0200;Merge pull request #303 from anarcat/verbosity
Verbosity
==
==================
de9e9d1;Antoine Beaupré;2015-10-19 16:25:24 -0400;soften environment security warning to a note, and cross-ref to avoid dupe

==

docs/faq.rst
docs/quickstart.rst
==================
38bde26;Antoine Beaupré;2015-10-19 15:47:05 -0400;remove needless double type conversion
i got confused and thought i was setting the environment (in which case you need to cast to str anyways, so this was wrong even then)

==

borg/helpers.py
==================
a3084b7;Antoine Beaupré;2015-10-19 14:41:02 -0400;try to fix build on py32 again

==

borg/helpers.py
==================
c7c02ef;Antoine Beaupré;2015-10-19 12:15:39 -0400;fix path to favicon

==

docs/conf.py
==================
5cd5fa7;Antoine Beaupré;2015-10-19 11:29:22 -0400;warn users about the environment on multi-user systems

==

docs/faq.rst
docs/quickstart.rst
==================
3d906ab;Antoine Beaupré;2015-10-19 11:17:10 -0400;word-wrap a bullet list as paragraphs instead
it looks nicer that way

==

docs/faq.rst
==================
b122fca;Antoine Beaupré;2015-10-19 11:12:14 -0400;use titles instead of definitions in FAQ
this way the titles show up in the table of contents and we can link
to individual entries

==

docs/faq.rst
==================
500c2a8;Antoine Beaupré;2015-10-19 11:09:28 -0400;fix warnings in docs generation

==

README.rst
docs/development.rst
docs/faq.rst
==================
780a7d8;Antoine Beaupré;2015-10-19 11:08:19 -0400;remove mention of "borg" in changelog title
we know what we are looking at already...

also demote the attic changelog so it doesn't show in the main table
of contents.

==

docs/changes.rst
==================
a395054;anarcat;2015-10-19 11:05:00 -0400;Merge pull request #311 from ThomasWaldmann/fixme-argv
implement cmdline metadata value decoding
==
==================
12d22d5;Antoine Beaupré;2015-10-19 09:10:45 -0400;try to fix build on py32

==

borg/helpers.py
==================
f9bccd1;Antoine Beaupré;2015-10-19 09:10:19 -0400;revert policy decision of showing all files listing only on debug

==

borg/archiver.py
==================
49d7c24;Antoine Beaupré;2015-10-19 09:10:04 -0400;cosmetic: don't word-wrap needlessly

==

borg/helpers.py
==================
7d31da7;Thomas Waldmann;2015-10-19 12:16:28 +0200;implement cmdline metadata value decoding
code copied & adapted from Archive.load()

==

borg/archive.py
==================
af2f1f7;Thomas Waldmann;2015-10-19 11:57:12 +0200;remove a fixed FIXME
see a few lines below, where it renames the original file to *.beforerecover before creating the repaired copy using the old name.

==

borg/repository.py
==================
894546c;Thomas Waldmann;2015-10-19 11:47:24 +0200;skip the benchmarks by default, especially on travis

==

tox.ini
==================
79482a1;TW;2015-10-19 11:39:15 +0200;Merge pull request #310 from ThomasWaldmann/non-ascii-acls
Non ascii acls
==
==================
a7db210;TW;2015-10-19 10:14:20 +0200;Merge pull request #308 from ThomasWaldmann/test-binary
Test binary, fixes #215
==
==================
9851273;Antoine Beaupré;2015-10-18 21:13:01 -0400;stats tests: vary values to possible catch errors

==

borg/testsuite/helpers.py
==================
f48bbc3;Antoine Beaupré;2015-10-18 21:07:28 -0400;move defaults up in alternate implementation, use nameduple

==

borg/helpers.py
==================
158e6b5;Antoine Beaupré;2015-10-18 21:06:56 -0400;cosmetic: pep8 and io is actually just out

==

borg/testsuite/helpers.py
==================
4c6915c;Antoine Beaupré;2015-10-18 21:06:37 -0400;fix typos and remove debug code

==

borg/archiver.py
borg/testsuite/helpers.py
==================
1c0fb82;Antoine Beaupré;2015-10-18 20:54:39 -0400;check for the stream --progress uses, not stdin

==

borg/archiver.py
==================
d602558;Thomas Waldmann;2015-10-19 02:32:29 +0200;acls (darwin): use helper functions safe_encode/safe_decode
also: rewrite one bytes-based function to work more similar than all other acl-processing functions.

==

borg/platform_darwin.pyx
==================
213075e;Thomas Waldmann;2015-10-19 01:43:46 +0200;acls (freebsd): use helper functions safe_encode/safe_decode

==

borg/platform_freebsd.pyx
==================
259f867;Thomas Waldmann;2015-10-19 01:31:06 +0200;acls (linux): helper functions safe_encode/safe_decode

==

borg/helpers.py
borg/platform_linux.pyx
==================
5a2aa7b;Thomas Waldmann;2015-10-19 01:09:58 +0200;acls (linux): make tests as they should be
TODO: can this be done without creating a user/group "übel" with uid 666 gid 666?

==

borg/testsuite/platform.py
==================
e818026;Thomas Waldmann;2015-10-19 00:28:53 +0200;acls (linux): remove int() cast
it seems like the (non-numerical) name or group might get into fields[3] if the name -> uid or group -> gid mapping is unknown.

==

borg/platform_linux.pyx
==================
1f14d1d;Thomas Waldmann;2015-10-19 00:01:19 +0200;acls (linux): use surrogatescape error handling for acl_append_numeric_ids and acl_numeric_ids
surrogatescape will decode/encode invalid utf-8 sequences (if we do not get utf-8) in a round-tripping way.

==

borg/platform_linux.pyx
==================
63ed5d9;Thomas Waldmann;2015-10-18 23:43:24 +0200;acls (posix platforms): use surrogatescape error handling for posix_acl_use_stored_uid_gid
surrogatescape will decode/encode invalid utf-8 sequences (if we do not get utf-8) in a round-tripping way.

==

borg/helpers.py
==================
b2cffe0;Thomas Waldmann;2015-10-18 23:33:29 +0200;acls (linux): use surrogatescape error handling, fix test
surrogatescape will decode/encode invalid utf-8 sequences (if we do not get utf-8) in a round-tripping way.

==

borg/platform_linux.pyx
borg/testsuite/platform.py
==================
55179fe;Thomas Waldmann;2015-10-18 23:20:01 +0200;acls (linux): add a test for acl_use_local_uid_gid and fix this function
this has never worked as intended as the function was not using the computed "fields[1]" value at all.
plus there were type issues after that was fixed.

==

borg/platform_linux.pyx
borg/testsuite/platform.py
==================
45b04cd;Thomas Waldmann;2015-10-18 20:54:46 +0200;add non-ascii ACL test (linux)
still failing as the tested code does not yet work with non-ascii ACLs

==

borg/testsuite/platform.py
==================
723590d;Thomas Waldmann;2015-10-18 19:18:24 +0200;fix borg.exe presence detection for python3.2

==

borg/testsuite/archiver.py
==================
60cdb5f;Thomas Waldmann;2015-10-18 18:48:36 +0200;make archiver tests run for the python source as well as for the pyinstaller binary, fixes #215
if the borg.exe binary is not available in PATH, binary tests are skipped.

source tests are run without forking (for better speed, esp. on travis).
binary tests need forking the binary, of course.

for source tests, some tests check for an exception to happen.
for a forked binary, we of course can only check the exit code, which is non-zero in that case.

==

borg/testsuite/archiver.py
==================
0397501;Thomas Waldmann;2015-10-18 16:43:59 +0200;upgrader: fix / reformat comments

==

borg/upgrader.py
==================
3c52f41;TW;2015-10-18 16:36:07 +0200;Merge pull request #299 from anarcat/no-inplace
do not upgrade repositories in place by default
==
==================
10567fb;TW;2015-10-18 14:54:49 +0200;Merge pull request #306 from anarcat/upgrader-index-fixes
fix cascading failure with the index conversion code
==
==================
2c4196e;TW;2015-10-18 14:51:12 +0200;Merge pull request #297 from ThomasWaldmann/help-usage-docs
include the help offered by borg help <topic> in the usage docs, fixes #293
==
==================
1b426c5;TW;2015-10-18 14:50:40 +0200;Merge pull request #300 from ThomasWaldmann/attic-changes
include a list of major changes compared to attic into the README, fixes #224
==
==================
319fcba;Antoine Beaupré;2015-10-17 22:04:00 -0400;fix phrasings in "in place" refactoring

==

borg/archiver.py
borg/testsuite/upgrader.py
==================
8c48015;Antoine Beaupré;2015-10-17 21:59:51 -0400;try to work around Windows idiocy of open files
apparently, we may be able to rewrite an open file if we rename it first.

i have no way to test this, unfortunately

==

borg/upgrader.py
==================
e59f1d5;Antoine Beaupré;2015-10-17 21:56:25 -0400;fix tests: umask is not defined in the repo yet

==

borg/testsuite/upgrader.py
==================
ce72051;Antoine Beaupré;2015-10-17 09:59:54 -0400;rename cache variable to index for clarity

==

borg/upgrader.py
==================
07e7f2d;Antoine Beaupré;2015-10-17 09:58:40 -0400;fixup warning message

==

borg/upgrader.py
==================
fb68c6f;Antoine Beaupré;2015-10-15 18:42:20 -0400;always convert the chunks cache we find
it seems it is possible that the chunks files are copied but *not*
converted. this may have happened here because the conversion was
interrupted, although the specific scenario is still unclear (but it
did happen during manual tests here). therefore reproducing this
problem seems to be difficult, hence the lack of tests for this
specific issue.

since we consider the header replacement code to be safe, that we
always convert shouldn't pose any additional threat to the existing
borg chunk cache.

==

borg/upgrader.py
==================
c4599d8;Antoine Beaupré;2015-10-15 18:39:34 -0400;fix cascading failure with the index conversion code
this resolves bug #something where the index file could not be
converted, completely breaking conversion.

it seems that, during some refactoring, the index conversion code was
completely dropped. this was missed by the unit tests because the repo
can still be opened by the constructor even though the index is
invalid, so tests need improvements there.

==

borg/upgrader.py
==================
2bd2267;anarcat;2015-10-17 21:24:40 -0400;Merge pull request #296 from ThomasWaldmann/one-file-system-option
use --one-file-system (as "du" tool does) instead of --do-not-cross-mountpoints
==
==================
92ac120;Antoine Beaupré;2015-10-16 11:30:41 -0400;default progress display to true if on a tty
this makes --progress a toggle: if there's a terminal, it turns it
off, if there isn't, it forces it on.

==

borg/archiver.py
==================
e4f3251;Antoine Beaupré;2015-10-16 11:21:19 -0400;Revert "no need to flush stderr in my tests"
It is actually necessary, for now.

This reverts commit 8fdd1eddf91a3d5dbc013ba6e4a170f8613598c0.

Conflicts:
	borg/helpers.py

==

borg/helpers.py
==================
ce1aaa9;Antoine Beaupré;2015-10-16 11:19:27 -0400;Revert "fix conflict between --stats and --progress"
the columns handling fixed that isssue more elegantly

This reverts commit 7f777784194b2625272a368c85c0712eb01df2fb.

Conflicts:
	borg/helpers.py

==

borg/helpers.py
==================
0d8525a;Antoine Beaupré;2015-10-16 02:01:56 -0400;add missing lines

==

borg/archiver.py
==================
d666c86;Antoine Beaupré;2015-10-16 01:54:04 -0400;adjust display of --stats
it was broken by recent commits.

also remove the __format__() anti-pattern from cache as well.

==

borg/archive.py
borg/cache.py
borg/helpers.py
borg/testsuite/helpers.py
==================
28d0a9c;Antoine Beaupré;2015-10-16 01:38:53 -0400;human-readable representation of stats

==

borg/helpers.py
borg/testsuite/helpers.py
==================
66bfc6f;Antoine Beaupré;2015-10-16 01:13:47 -0400;get rid of print_() function
this function was over-coupling the cache system and the statistics
module. they are now almost decoupled insofar as the cache system has
its own rendering system now that is called separately.

furthermore, we have a much more flexible formatting system that is
used coherently between --progress and --stats

the degenerate case here is if we want to change the label in the
statistics summary: in this case we need to override the default
__str__() representation to insert our own label.

==

borg/archiver.py
borg/helpers.py
borg/testsuite/helpers.py
==================
118ee86;Antoine Beaupré;2015-10-16 00:55:53 -0400;remove custom microformat from stats
i saw the errors in my ways: __format__ is only to customize the
"format mini-language", what comes after ":" in a new string
format. unfortunately, we cannot easily refer to individual fields in
there, short of re-implementing a new formatting language, which seems
silly.

instead, we use properties to extract human-readable versions of the
statistics. more intuitive and certainly a more common pattern than
the exotic __format__().

also add unit tests to prove this all works

==

borg/helpers.py
borg/testsuite/helpers.py
==================
6b547e6;Antoine Beaupré;2015-10-15 22:26:02 -0400;no need to flush stderr in my tests

==

borg/helpers.py
==================
75c993b;Antoine Beaupré;2015-10-15 22:23:53 -0400;simplify progress display
we stop enforcing a minimum width for fields, it changes only on
logarithmic boundaries, so not a big problem. string conversion is
implicit

this gives us a little more width for the path

==

borg/helpers.py
==================
ecae163;Antoine Beaupré;2015-10-15 22:20:40 -0400;use all available columns for path in progress
we use the new get_terminal_size() function, with a fallback for
Python 3.2. we default to 80 columns.

then we generate the stats bit and fill the rest with the path, as
previously, but with a possibly larger field.

note that this works with resizes in my test (uxterm)

==

borg/helpers.py
==================
7f28244;Antoine Beaupré;2015-10-15 21:38:43 -0400;fix conflict between --stats and --progress
the --stats output would be slightly garbled by --progress, because of
the \r that is output at the last line...

example:

    initializing cache
    reading files cache
    processing files
    ------------------------------------------------------------------------------ s/twotone
    Archive name: 2015-10-15-test

==

borg/helpers.py
==================
e8cf28f;Antoine Beaupré;2015-10-15 21:22:45 -0400;only show all files found in debug
a single -v flag shouldn't flood the console with all the files in the
path specified, it makes -v basically useless

this way, -v can also be used with --progress to have nicer output:

initializing cache
reading files cache
processing files
  5.20 GB O   2.66 GB C  25.13 MB D 27576 N baz/...

==

borg/archiver.py
==================
d8f8076;Antoine Beaupré;2015-10-15 21:20:58 -0400;factor out status output so it is consistent
as it was, surrogates were not always removed, for example

we may also want to output at different levels or control if we want
to print unchanged files and so on

==

borg/archiver.py
==================
b120e5f;Antoine Beaupré;2015-10-15 21:16:31 -0400;output more progress information
without this, there would be a solid 20 seconds here without any sort
of output on the console, regardless of the verbosity level. this
makes nice incremental messages telling the user that borg is not
stalled (or waiting for a lock, for that matter)

the "processing files" message is a little clunky, as we somewhat
abuse the cache to figure out if we are just starting... but it helps
if there are problems reading the actual files: it tells us the
initialization is basically complete and we're going ahead with the
reading of all the files.

==

borg/archive.py
borg/cache.py
==================
3827c2b;Antoine Beaupré;2015-10-15 21:13:59 -0400;also show the number of files processed in --progress

==

borg/archiver.py
borg/helpers.py
==================
3eebea8;Antoine Beaupré;2015-10-15 21:12:04 -0400;explain what the --progress flag does exactly
an alternative to this would be to use more than a letter in the
output, for example:

 orig: 16.82 GB comp: 9.44 GB dedup: 25.86 MB home/

==

borg/archiver.py
==================
6712bdf;Thomas Waldmann;2015-10-17 22:27:59 +0200;include a list of major changes compared to attic into the README, fixes #224

==

README.rst
==================
908e944;Thomas Waldmann;2015-10-17 21:53:09 +0200;include the help offered by borg help <topic> in the usage docs, fixes #293
it's not pretty yet, but better than nothing.

==

docs/usage.rst
setup.py
==================
fc78b44;Thomas Waldmann;2015-10-17 20:55:07 +0200;use --one-file-system (as "du" tool does) instead of --do-not-cross-mountpoints
the old name still works, but emits a deprecation warning suggesting the new name.

this is a followup to 4fd06e2634e9583762606eae0f27a6a569afcd60, which added "-x" (as seen in "du").

==

borg/archiver.py
==================
0e9c524;TW;2015-10-17 20:06:23 +0200;Merge pull request #292 from anarcat/rename-usage
add missing rename usage to docs, closes #279
==
==================
2dda41d;TW;2015-10-17 20:06:02 +0200;Merge pull request #294 from anarcat/x-option
add -x flag, common to GNU utilities
==
==================
b0f66e8;TW;2015-10-17 20:05:36 +0200;Merge pull request #295 from yagebu/master
docs: restructure installation.rst + add OS X install instructions
==
==================
462bb41;Jakob Schnitzer;2015-10-16 11:08:02 +0200;docs: AUTHORS: one borg in the title is enough

==

AUTHORS
==================
7cc3bec;Jakob Schnitzer;2015-10-16 10:59:38 +0200;docs: restructure installation.rst, add OSX instructions
Moved the list of dependencies to the corresponding subsection.
Collected all preparation steps under one heading.
Added link to the Arch Linux AUR package.
Install docs for OS X.

==

docs/global.rst.inc
docs/installation.rst
==================
eacb0b9;Antoine Beaupré;2015-10-17 12:29:52 -0400;Merge branch 'logging-refactor' into upstream

==
==================
4fd06e2;Antoine Beaupré;2015-10-15 12:05:37 -0400;add -x flag, common to GNU utilities
it should also probably be --one-file-system for coherence with du(1)

==

borg/archiver.py
==================
e6c2359;Antoine Beaupré;2015-10-17 12:13:59 -0400;add missing rename usage to docs, closes #279

==

docs/usage.rst
==================
34d0e06;Antoine Beaupré;2015-10-15 19:01:22 -0400;make sure hardlink copy doesn't break perms

==

borg/testsuite/upgrader.py
==================
4be9c29;Antoine Beaupré;2015-10-15 18:14:44 -0400;os.link signature is the same as shutil.copy, use it directly

==

borg/upgrader.py
==================
aaf72e3;Antoine Beaupré;2015-10-15 18:12:12 -0400;do not skip all attic tests, some work without now

==

borg/testsuite/upgrader.py
==================
6d457ae;Antoine Beaupré;2015-10-15 18:02:24 -0400;do not upgrade repositories in place by default
instead, we perform the equivalent of `cp -al` on the repository to
keep a backup, and then rewrite the files, breaking the hardlinks as
necessary.

it has to be confirmed that the rest of Borg will also break hardlinks
when operating on files in the repository. if Borg operates in place
on any files of the repository, it could jeoperdize the backup, so
this needs to be verified. I believe that most files are written to a
temporary file and moved into place, however, so the backup should be
safe.

the rationale behind the backup copy is that we want to be extra
careful with user's data by default. the old behavior is retained
through the `--inplace`/`-i` commandline flag. plus, this way we don't
need to tell users to go through extra steps (`cp -a`, in particular)
before running the command.

also, it can take a long time to do the copy of the attic repository
we wish to work on. since `cp -a` doesn't provide progress
information, the new default behavior provides a nicer user experience
of giving an overall impression of the upgrade progress, while
retaining compatibility with Attic by default (in a separate
repository, of course).

this makes the upgrade command much less scary to use and hopefully
will convert drones to the borg collective.

the only place where the default inplace behavior is retained is in
the header_replace() function, to avoid breaking the cache conversion
code and to keep API stability and semantic coherence ("replace" by
defaults means in place).

==

borg/archiver.py
borg/testsuite/upgrader.py
borg/upgrader.py
==================
e7f25d7;Thomas Waldmann;2015-10-16 01:18:37 +0200;docs: use zlib,6 compression in some examples, fixes #275
This is what attic used by default, but borgbackup defaults to "no compression".

I just adjusted the command invocation, so we can keep the example output
(which shows that stuff was compressed).

Also: add FAQ item about compression.

==

README.rst
docs/faq.rst
docs/usage.rst
==================
9b10e8a;Thomas Waldmann;2015-10-16 00:52:23 +0200;if borg.exe is not present, do not try to test it

==

borg/testsuite/archiver.py
==================
1a24811;Thomas Waldmann;2015-10-16 00:18:46 +0200;move cmd fixture to archiver test module

==

borg/testsuite/archiver.py
borg/testsuite/benchmark.py
==================
4b7c027;Thomas Waldmann;2015-10-16 00:12:02 +0200;benchmarks: test with both the binary and the python code
we use forking mode always and either execute python with the archiver module or the "borg.exe" binary.
the cmd fixture alternates between 'python' and 'binary' mode and calls exec_cmd accordingly.

==

borg/testsuite/archiver.py
borg/testsuite/benchmark.py
==================
a967706;TW;2015-10-15 10:58:20 +0200;Merge pull request #270 from ThomasWaldmann/benchmark
integrate pytest-benchmark, test create, extract, list, delete, info,…
==
==================
ba7e365;TW;2015-10-15 10:56:48 +0200;Merge pull request #273 from yagebu/master
docs: Some small fixes
==
==================
7efab2f;Thomas Waldmann;2015-10-14 01:00:25 +0200;benchmark tests: improve comments

==

borg/testsuite/benchmark.py
==================
f8b5368;Thomas Waldmann;2015-10-14 00:54:32 +0200;use pytest-benchmark from pypi

==

requirements.d/development.txt
==================
da926f2;Jakob Schnitzer;2015-10-13 17:25:52 +0200;docs: fix code blocks in installation.rst
In one case removed the |project_name| and |git_url| variables to fix
the display of the code block. Shouldn't be problematic, as they are not
used consistently in this document anyway.

Put two notes in their own nice '.. note::' blocks.

==

docs/installation.rst
==================
45a96fb;Jakob Schnitzer;2015-10-13 17:02:15 +0200;docs: change name of API section
from 'Borg Backup API documentation' to 'API Documentation'

It is pretty clear which software the API docs are for imho.

==

setup.py
==================
fb62435;Jakob Schnitzer;2015-10-13 16:50:27 +0200;docs: remove 'Additional Notes' from TOC, fix markup
What's covered in the 'Additional Notes' section of the documentation
hardly seems important enough to deserve its own entry in the sidebar.

==

docs/usage.rst
==================
b42bbc6;Jakob Schnitzer;2015-10-13 16:31:25 +0200;docs: fix code blocks

==

docs/quickstart.rst
docs/usage.rst
==================
256f89e;Antoine Beaupré;2015-10-13 08:35:12 -0400;add back logo, see #272
it's ugly as hell, but at least we have some logo there. keeping the issue opened for improvements

==

docs/_static/favicon.ico
docs/conf.py
==================
97a9855;anarcat;2015-10-13 08:27:38 -0400;Merge pull request #268 from anarcat/rtd-theme
switch to default rtd theme
==
==================
f31b4a6;Antoine Beaupré;2015-10-12 23:36:31 -0400;fix headings in README
this makes it consistent with the rest of the documentation

==

README.rst
==================
6b604ac;Antoine Beaupré;2015-10-12 23:29:45 -0400;Merge remote-tracking branch 'origin/master' into rtd-theme
Conflicts:
	README.rst

==
==================
e59045f;Antoine Beaupré;2015-10-12 23:27:59 -0400;move links from the sidebar to the readme
it seems sidebar links are not supported by the RTD theme just yet: https://github.com/snide/sphinx_rtd_theme/issues/254

==

README.rst
docs/_themes/local/sidebarlogo.html
docs/_themes/local/sidebarusefullinks.html
docs/_themes/local/static/favicon.ico
docs/_themes/local/static/local.css_t
docs/_themes/local/theme.conf
==================
08d9609;Thomas Waldmann;2015-10-12 00:52:52 +0200;pytest-benchmark: use git master code, fixes py32 issues

==

.travis/install.sh
requirements.d/development.txt
requirements.d/travis.txt
==================
0b9dcbf;Thomas Waldmann;2015-10-11 21:20:56 +0200;Merge branch 'master' of github.com:borgbackup/borg

==
==================
8eaf460;Thomas Waldmann;2015-10-11 21:20:29 +0200;setup.py: fix bug related to BORG_LZ4_PREFIX processing

==

setup.py
==================
07d9132;Thomas Waldmann;2015-10-11 17:41:25 +0200;travis: use tox -r so it rebuilds the tox envs
it seems to keep .tox envs even if one removes stuff from requirements file.
if that stuff causes troubles, as here with pytest-benchmark, the troubles stay...

==

.travis/run.sh
==================
9dccc80;Thomas Waldmann;2015-10-11 17:06:12 +0200;create a separate requirements file for travis - without pytest-benchmark
pytest-benchmark (and its dependency "statistics") needs py 3.3+.

we do not want to run benchmarks on travis anyway, but even its presence
makes trouble due to this, so we just remove it from there again.

as --benchmark-skip is also removed from tox configuration, this means benchmarks
are run by default when pytest-benchmark is installed.

==

.travis/install.sh
requirements.d/travis.txt
tox.ini
==================
a9b1e59;Thomas Waldmann;2015-10-11 16:25:43 +0200;upgrade pytest-benchmark to a4

==

requirements.d/development.txt
==================
a5a6ba0;Thomas Waldmann;2015-10-11 16:07:11 +0200;integrate pytest-benchmark, test create, extract, list, delete, info, check, help, fixes #146
Instead of "realistic data", I chose the test data to be either all-zero (all-ascii-zero to be precise)
or all-random and benchmark them separately.
So we can better determine the cause (deduplication or storage) in case we see some performance regression.

"help" is benchmarked to see the minimum runtime when it basically does nothing.

also:
- refactor archiver execution core functionality into exec_cmd() so it can be used more flexibly
- tox: usually we want to skip benchmarks, only run them if requested manually
- install pytest-benchmark - run tox with "-r" to have it installed into your .tox envs

==

borg/testsuite/archiver.py
borg/testsuite/benchmark.py
requirements.d/development.txt
tox.ini
==================
4d0fa95;TW;2015-10-10 01:25:53 +0200;Merge pull request #267 from anarcat/docs-fixes
API doc fixes
==
==================
3c535b9;Antoine Beaupré;2015-10-09 16:09:25 -0400;switch to default rtd theme
this still doesn't quite work: our sidebar is gone, so no more useful
links and related projects. we also loose the link to github and the
RTD popup, although the latter still needs to be confirmed on RTD
infra

==

docs/conf.py
==================
da2ec79;Antoine Beaupré;2015-10-09 15:54:02 -0400;fix homepage URL in all remaining places
we update the documentation to mention the automatic updates, and also
remove the hack in the makefile to update the github.io pages, which
are gone.

==

README.rst
docs/Makefile
docs/development.rst
setup.py
==================
2f9bdfe;Antoine Beaupré;2015-10-09 14:29:16 -0400;fix API generation
properly generate the module name

==

setup.py
==================
ff04a65;Antoine Beaupré;2015-10-09 14:25:29 -0400;remove trailing quote

==

setup.py
==================
dbc183f;Antoine Beaupré;2015-10-09 14:13:58 -0400;drop support for Python 2

==

borg/testsuite/logger.py
==================
bdbdbdd;Antoine Beaupré;2015-10-09 12:44:31 -0400;Merge remote-tracking branch 'origin/master' into logging-refactor
Conflicts:
	borg/archive.py
	borg/archiver.py
	borg/cache.py
	borg/key.py

==
==================
fd41408;Antoine Beaupré;2015-10-09 12:34:02 -0400;move progress information out of tests and back in converter
this was a remnant of when i was writing the converter/upgrader code,
and was destined to be a general progress message in the migration
process. i removed a more technical, internal debugging message in
exchange

==

borg/testsuite/upgrader.py
borg/upgrader.py
==================
efa88ef;Antoine Beaupré;2015-10-09 12:11:42 -0400;fix tests: they expect check to spew output
our default verbosity shows only warnings, we'd have to tweak tests to be verbose for this to work

This reverts commit 27be46a5badec15ca08afd8f158904e9dc3f8544.

==

borg/archive.py
borg/archiver.py
==================
1c61f87;Antoine Beaupré;2015-10-08 17:20:52 -0400;remove debugging code and fix all have_cython calls

==

borg/cache.py
borg/fuse.py
setup.py
==================
80e53fb;Antoine Beaupré;2015-10-08 17:16:11 -0400;it's a function, call it as such

==

borg/remote.py
==================
d684515;Antoine Beaupré;2015-10-08 17:14:25 -0400;more debug

==

setup.py
==================
d6109b6;Antoine Beaupré;2015-10-08 17:09:33 -0400;re-enable cython as late as possible

==

setup.py
==================
a1dad8c;Antoine Beaupré;2015-10-08 17:06:48 -0400;try to mock msgpack altogether to fix RTD again
it seems that msgpack is a hard depends in archive...

==

borg/archive.py
==================
a869ab0;Antoine Beaupré;2015-10-08 17:03:35 -0400;try to fix RTD build *again* *again*

==

borg/cache.py
borg/fuse.py
borg/remote.py
==================
e8ae96b;Antoine Beaupré;2015-10-08 17:01:42 -0400;try to fix RTD build *again*

==

borg/archive.py
borg/key.py
==================
f2c56fb;Antoine Beaupré;2015-10-08 16:57:36 -0400;try to fix build on RTD *again*

==

borg/helpers.py
==================
80f82ef;anarcat;2015-10-08 16:54:44 -0400;Merge pull request #262 from anarcat/rtfd-fixup
fix build on readthedocs.org
==
==================
3f68399;Antoine Beaupré;2015-10-08 16:52:49 -0400;style: wrap multiline strings elegantly

==

borg/cache.py
borg/helpers.py
==================
a42a5e3;Antoine Beaupré;2015-10-08 16:47:55 -0400;fix all logger pep8 warnings except long lines

==

borg/logger.py
borg/testsuite/logger.py
==================
8075a13;Antoine Beaupré;2015-10-08 16:40:25 -0400;fix typo

==

borg/logger.py
==================
b1eafe7;Antoine Beaupré;2015-10-08 16:40:59 -0400;remove status that is best reflected in VCS

==

borg/logger.py
==================
2d4b735;Antoine Beaupré;2015-10-08 16:31:47 -0400;remove unintended changes

==

borg/archiver.py
borg/cache.py
borg/helpers.py
borg/key.py
==================
27be46a;Antoine Beaupré;2015-10-08 16:31:22 -0400;tweak some levels

==

borg/archive.py
borg/archiver.py
==================
423ff45;Antoine Beaupré;2015-10-08 15:34:44 -0400;rename cython detection function
"have" has clearer semantics than "detect"

==

borg/archive.py
borg/archiver.py
borg/helpers.py
borg/key.py
borg/repository.py
==================
7ba4d47;Antoine Beaupré;2015-10-08 15:29:50 -0400;clarify the class name part

==

docs/usage.rst
==================
2f803b6;Antoine Beaupré;2015-10-08 15:28:53 -0400;fix typo, split sentence

==

docs/usage.rst
setup.py
==================
ff483fe;Antoine Beaupré;2015-10-08 15:26:40 -0400;fix logical inversion in the semantics of detect_cython()

==

borg/helpers.py
==================
f98998f;Antoine Beaupré;2015-10-08 15:26:40 -0400;fix logical inversion in the semantics of detect_cython()

==

borg/archive.py
borg/archiver.py
borg/helpers.py
borg/key.py
borg/repository.py
==================
03b6b24;TW;2015-10-08 20:59:35 +0200;Merge pull request #263 from anarcat/venv-docs
fix virtualenv path in .gitignore
==
==================
2e9bd5a;Antoine Beaupré;2015-10-08 14:57:32 -0400;cosmetic: s/api/doc/

==

setup.py
==================
6c5a773;Antoine Beaupré;2015-10-08 10:37:19 -0400;force build-ext build
it seems that what worked in the debug branch is not working in the
main branch, even though the commit IDs are exactly the same. the RTD environment doesn't seem really reliable...

besides, we want to build extensions before the rest, so should run it
first, in order to have msgpack loaded.

==

setup.py
==================
86487d1;Antoine Beaupré;2015-10-08 10:26:02 -0400;use build_py to fix build on RTD
it seems that our subcommands are ignored over there, for some mysterious reason.

==

setup.py
==================
1c997ea;anarcat;2015-10-08 09:00:10 -0400;Merge pull request #261 from anarcat/docs-readme
bunch of docs reshuffling
==
==================
824f9c7;Antoine Beaupré;2015-10-08 08:54:49 -0400;cosmetic: s/cmdfile/doc/

==

setup.py
==================
6f9e04b;Antoine Beaupré;2015-10-08 08:29:02 -0400;generalise the cython check hack
instead of applying this only to usage generation, use it as a generic
mechanism to disable loading of Cython code.

it may be incomplete: there may be other places where Cython code is
loaded that is not checked, but that is sufficient to build the usage
docs. the environment variable used is documented as such in the
docs/usage.rst.

we also move the check to a helper function and document it
better. this has the unfortunate side effect of moving includes
around, but I can't think of a better way.

==

borg/archive.py
borg/archiver.py
borg/helpers.py
borg/key.py
borg/repository.py
docs/usage.rst
setup.py
==================
da02f37;Antoine Beaupré;2015-10-08 08:24:46 -0400;Revert "main website becomes RTD, main website link is pointless"
Instead, we put the readthedocs.org site as main website.

This reverts commit 8fe56f001cfeeb027162b38da14cfec9f6038754.

==

docs/_themes/local/sidebarusefullinks.html
==================
7ccf6b3;Antoine Beaupré;2015-10-08 08:23:37 -0400;simplify RTD env check

==

setup.py
==================
8190e33;Antoine Beaupré;2015-10-08 08:22:52 -0400;faster and cleaner rtd check for cython

==

setup.py
==================
45d9c6b;Antoine Beaupré;2015-10-08 08:21:52 -0400;fix formatting

==

setup.py
==================
c93d975;Antoine Beaupré;2015-10-08 08:20:59 -0400;remove debugging code

==

setup.py
==================
712170c;Antoine Beaupré;2015-10-07 22:39:18 -0400;fix virtualenv path in .gitignore
the current instructions create a dirty tree that `git add .` would
commit into git. this is error prone and somewhat unclean.

i found it preferable to change the `.gitignore` than to change the instructions, since there are probably `borg-env` environments lying around everywhere already.

==

.gitignore
==================
9cbc868;Antoine Beaupré;2015-10-07 22:24:30 -0400;make tests and build work again in usage using environment
this is such a crude hack it is totally embarrassing....

the proper solution would probably be to move the `build_parser()`
function out of `Archiver` completely, but this is such an undertaking
that i doubt it is worth doing since we're looking at switching to
click anyways.

the main problem in moving build_parser() out is that it references
`self` all the time, so it *needs* an archiver context that it can
reuse. we could make the function static and pass self in there by
hand, but it seems like almost a worse hack... and besides, we would
need to load the archiver in order to do that, which would break usage
all over again...

==

borg/archive.py
borg/archiver.py
borg/helpers.py
borg/key.py
borg/repository.py
setup.py
==================
8fe56f0;Antoine Beaupré;2015-10-07 21:10:09 -0400;main website becomes RTD, main website link is pointless

==

docs/_themes/local/sidebarusefullinks.html
==================
13d3568;Antoine Beaupré;2015-10-07 21:07:12 -0400;move usage generation to setup.py
this is an unfortunate rewrite of the manpage creation code mentionned
in #208. ideally, this would be rewritten into a class that can
generate both man pages and .rst files.

==

borg/archiver.py
docs/Makefile
setup.py
==================
4787424;Antoine Beaupré;2015-10-07 19:55:56 -0400;move API generation to setup.py

==

docs/Makefile
setup.py
==================
28cbc6c;Antoine Beaupré;2015-10-07 19:16:49 -0400;fix build on RTFD
first off, this required ticking the `Install your project inside a
virtualenv using setup.py install` box in the advanced config.

then, i had to disable all the C extensions build and disable some
checks, based on whether we are running on RTD or not.

still missing: usage builds and possibly other stuff that is in our
Makefile and not in setup.py.

==

setup.py
==================
6cd6e28;Antoine Beaupré;2015-10-07 18:37:35 -0400;clarify which systems have binaries

==

README.rst
==================
5f4db64;Antoine Beaupré;2015-10-07 18:33:43 -0400;fix README links so they work in github

==

README.rst
==================
60afc03;Antoine Beaupré;2015-10-07 18:33:31 -0400;move authors to a stub, include LICENSE

==

AUTHORS
docs/authors.rst
==================
e2f3527;Antoine Beaupré;2015-10-07 18:15:30 -0400;don't duplicate OS list
we merge the "easy installation" and "platforms" paragraphs together in a neater phrasing

==

README.rst
==================
ef5d8d0;Antoine Beaupré;2015-10-07 18:04:36 -0400;fix link to install docs

==

README.rst
==================
0b8e835;Antoine Beaupré;2015-10-07 17:59:00 -0400;api.rst is autogenerated, ignore it

==

.gitignore
==================
60d04b0;Antoine Beaupré;2015-10-07 17:56:24 -0400;show the README on the homepage
instead of a boring table of contents, try to show our more exciting README file

it's still a wall of text, but at least all the buzzwords and highlights are there

ideally, the table of contents would be in the sidebar, but i don't know how to do that

==

docs/index.rst
docs/intro.rst
==================
715a258;Antoine Beaupré;2015-10-07 17:53:09 -0400;fix syntax errors in changelog

==

docs/changes.rst
==================
1579be3;Antoine Beaupré;2015-10-07 17:52:40 -0400;fix links to changelog and authors

==

README.rst
==================
b87be85;Antoine Beaupré;2015-10-07 17:47:34 -0400;include authors, and move to docs
also keep a symlink for backwards compatibility

==

AUTHORS
docs/authors.rst
docs/index.rst
==================
3f2d3a8;Antoine Beaupré;2015-10-07 17:47:00 -0400;remove unneeded rst boilerplate
include CHANGES.rst directly, use a symlink to keep backwards compat

==

CHANGES.rst
docs/changes.rst
==================
6629772;Antoine Beaupré;2015-10-07 17:36:34 -0400;make readme a little more readable
link to source documents for people that are reading just the README without a web browser
hyperlink to the changes document as well

==

README.rst
==================
047e003;Thomas Waldmann;2015-10-07 16:55:42 +0200;docs: more details about release process, reordered sections

==

docs/development.rst
==================
df20e51;TW;2015-10-07 16:29:26 +0200;Merge pull request #260 from anarcat/releng-docs
some fixes to the release engineering docs
==
==================
cec8e18;Antoine Beaupré;2015-10-07 10:17:35 -0400;gpg can't sign multiple files at once, use a loop

==

docs/development.rst
==================
48c8186;Antoine Beaupré;2015-10-07 10:16:07 -0400;detail what needs to happen in the github release

==

docs/development.rst
==================
bb9b31e;Antoine Beaupré;2015-10-07 10:12:56 -0400;Revert "new proposal: formal release notes"
This reverts commit 4dca50fafab302622eb5c98e0f26a6b34abe8ca6.

Conflicts:
	docs/development.rst

==

docs/development.rst
==================
a49029d;Antoine Beaupré;2015-10-07 10:08:00 -0400;s/look/find/

==

docs/development.rst
==================
ebe2e39;Antoine Beaupré;2015-10-07 10:01:12 -0400;-them

==

docs/development.rst
==================
74338f8;Antoine Beaupré;2015-10-07 09:59:30 -0400;update where twitter is

==

docs/development.rst
==================
d375a69;Antoine Beaupré;2015-10-07 09:53:19 -0400;fix rst formatting warnings

==

docs/development.rst
==================
4dca50f;Antoine Beaupré;2015-10-07 09:44:28 -0400;new proposal: formal release notes
this integrates the ideas in #214 to have a small checklist of things to send in the announcements on the mailing list and on the github release

==

docs/development.rst
==================
2259bc0;Antoine Beaupré;2015-10-07 09:37:59 -0400;more reshuffling of release docs
mention that binaries should be signed
clarify where release milestones
reword all steps to be executive

==

docs/development.rst
==================
ba0aeeb;Antoine Beaupré;2015-10-07 09:28:41 -0400;some fixes to the release engineering docs
link to the locations of different tools when I know them. i marked
the ones I don't know about specially so we can document those as
well.

point to the Github releases for the standalone binaries upload

==

docs/development.rst
==================
04ac82d;Thomas Waldmann;2015-10-07 15:41:17 +0200;do binary releases via "github releases", closes #214

==

docs/_themes/local/sidebarusefullinks.html
docs/installation.rst
==================
30bd38b;Thomas Waldmann;2015-10-07 15:08:09 +0200;update linux glibc requirement (binaries built on debian7 now)

==

docs/installation.rst
==================
6299f2d;Thomas Waldmann;2015-10-07 03:42:08 +0200;docs: pyinstaller 3.0 is released now
this or any later 3.x or git master checkout should work.

==

docs/development.rst
==================
8142307;Thomas Waldmann;2015-10-07 03:39:46 +0200;vagrant: llfuse install on darwin needs pkgconfig installed

==

Vagrantfile
==================
a4967ec;Thomas Waldmann;2015-10-07 03:32:55 +0200;ssh_cmd: fix wrong caller, fixes #255

==

borg/remote.py
==================
190eed6;Thomas Waldmann;2015-10-06 23:28:56 +0200;Vagrant: check out pyinstaller code from master branch
they just recently released 3.0 and that is in master now

==

Vagrantfile
==================
10db8c1;Thomas Waldmann;2015-10-06 22:55:48 +0200;update CHANGES.rst

==

CHANGES.rst
==================
7e49711;TW;2015-10-06 21:55:18 +0200;Merge pull request #254 from ThomasWaldmann/remove-wheels
update website sidebar link also
==
==================
28a85bf;Thomas Waldmann;2015-10-06 21:53:20 +0200;update website sidebar link also

==

docs/_themes/local/sidebarusefullinks.html
==================
efa6a2c;TW;2015-10-06 21:50:19 +0200;Merge pull request #253 from ThomasWaldmann/remove-wheels
remove docs about binary wheels, closes #147
==
==================
ee66c4c;Thomas Waldmann;2015-10-06 21:49:21 +0200;remove docs about binary wheels
we stop supporting them, because there are better alternatives:
- use a distribution package (from your linux distribution), if available
- use a pyinstaller binary provided by us (they include all you need in 1 file and
  thus have better compatibility properties and are easier to install than a wheel)
- install from source (pypi or git) if everything else fails

==

docs/development.rst
docs/installation.rst
==================
8d529f9;TW;2015-10-06 21:06:59 +0200;Merge pull request #252 from ThomasWaldmann/fix-exc-msg
make sure to always give segment and offset in repo IntegrityError ex…
==
==================
8ddc448;Thomas Waldmann;2015-10-06 20:35:22 +0200;make sure to always give segment and offset in repo IntegrityError exception messages
this was only handled correctly at one place, by adding the segment number afterwards.
now the segment number is always included.

==

borg/repository.py
==================
d9e0594;Antoine Beaupré;2015-10-06 12:55:27 -0400;document logger module

==

borg/logger.py
==================
42cc17c;Antoine Beaupré;2015-10-06 12:33:55 -0400;use new logger object initialisation code

==

borg/archive.py
borg/archiver.py
borg/cache.py
borg/helpers.py
borg/key.py
==================
26561a7;Antoine Beaupré;2015-10-06 11:06:50 -0400;factor out logger object initialisation

==

borg/logger.py
borg/testsuite/logger.py
==================
2d0dae4;Antoine Beaupré;2015-10-06 12:22:57 -0400;move logging setup to logger module

==

borg/archiver.py
borg/logger.py
borg/testsuite/logger.py
==================
7908c29;anarcat;2015-10-05 19:53:17 -0400;Merge pull request #249 from anarcat/ssh-env
complete test coverage for SSH args parsing
==
==================
a7b70d8;Antoine Beaupré;2015-10-05 19:22:33 -0400;complete test coverage for SSH args parsing

==

borg/remote.py
borg/testsuite/repository.py
==================
745f9b8;TW;2015-10-06 01:20:48 +0200;Merge pull request #247 from anarcat/xdg
respect XDG_CACHE_HOME
==
==================
974dd58;TW;2015-10-06 01:20:23 +0200;Merge pull request #248 from anarcat/ssh-env
add support for arbitrary SSH commands
==
==================
8f0de2c;Antoine Beaupré;2015-10-05 19:05:27 -0400;fix tests on travis, which seem to set BORG_CACHE_DIR

==

borg/testsuite/helpers.py
==================
a0ef4e2;Antoine Beaupré;2015-10-05 18:54:00 -0400;add support for arbitrary SSH commands (attic#99)
while SSH options can be specified through `~/.ssh/config`, some users
may want to use a completely different SSH command for their backups,
without overriding their $PATH variable. it may also be easier to do
ad-hoc configuration and tests that way.

plus, the POLA tells us that users expects something like this to be
supported by commands that talk to ssh. it is supported by rsync, git
and so on.

==

borg/remote.py
borg/testsuite/repository.py
docs/usage.rst
==================
43a6593;Antoine Beaupré;2015-10-05 18:51:20 -0400;move ssh generation code to a stub, add unit test

==

borg/remote.py
borg/testsuite/repository.py
==================
de2a811;Antoine Beaupré;2015-10-05 18:43:54 -0400;move RemoteRepository defaults to the class
the reasoning behind this is that we may need to test a
RemoteRepository setup outside of the main archiver routines, which
the current default location makes impossible

by moving the umask and remote_path remotes into the RemoteRepository
the (reasonable) defaults are available regardless of the (currently
obscure) initialisation routine, and make unit tests easier to develop
and support

==

borg/archiver.py
borg/remote.py
==================
934f18f;TW;2015-10-06 00:14:31 +0200;Merge pull request #246 from ThomasWaldmann/lock-roster-fix
do not crash on empty lock.roster, fixes #232
==
==================
427ddd6;Antoine Beaupré;2015-10-05 17:50:46 -0400;respect XDG_CACHE_HOME
fixes attic#181

==

borg/helpers.py
borg/testsuite/helpers.py
==================
c50f324;Thomas Waldmann;2015-10-05 23:23:59 +0200;do not crash on empty lock.roster, fixes #232

==

borg/locking.py
==================
6f637be;Thomas Waldmann;2015-10-05 02:27:24 +0200;LoggedIO: deduplicated code, improved checks and error handling in read()
Code shared by read() and iter_objects() was moved into _read().

Compared to read()'s previous state, this improved:
- fixed size check to avoid read with negative size
- exception handler for struct unpack
- checking for short read
- more precise exception messages

==

borg/repository.py
==================
97189dd;Antoine Beaupré;2015-10-03 15:08:55 -0400;add missing sys import, fixing build

==

borg/upgrader.py
==================
e414203;Antoine Beaupré;2015-10-03 14:20:53 -0400;convert upgrade code to logger as well

==

borg/testsuite/upgrader.py
borg/upgrader.py
==================
2441313;Antoine Beaupré;2015-10-03 14:23:53 -0400;Merge remote-tracking branch 'origin/master' into logging-refactor
Conflicts:
	borg/archiver.py

==
==================
4474db3;TW;2015-10-03 19:46:51 +0200;Merge pull request #242 from ThomasWaldmann/delete-cache-only
implement borg delete --cache-only repo, attic #123
==
==================
51dc66d;Thomas Waldmann;2015-10-03 19:29:45 +0200;implement borg delete --cache-only repo, attic #123
it deletes just the local cache for the given repository, not the repo itself.

==

borg/archiver.py
==================
adac324;TW;2015-10-03 19:19:22 +0200;Merge pull request #240 from ThomasWaldmann/cache-config-check
fix multiple issues with the cache config version check, fixes #234
==
==================
23bfe4d;TW;2015-10-03 19:12:52 +0200;Merge pull request #238 from ThomasWaldmann/index-archive-optional
temporary hack to avoid using lots of disk space for chunks.archive.d
==
==================
1207e1a;TW;2015-10-03 19:05:39 +0200;Merge pull request #231 from anarcat/attic-converter
attic to borg one time converter
==
==================
5409cba;Antoine Beaupré;2015-10-03 12:56:03 -0400;also copy files cache verbatim
it seems the file cache does *not* have the ATTIC magic header (nor
does it have one in borg), so we don't need to edit the file - we just
copy it like a regular file.

while i'm here, simplify the cache conversion loop: it's no use
splitting the copy and the edition since the latter is so fast, just
do everything in one loop, which makes it much easier to read.

==

borg/upgrader.py
==================
fded221;Antoine Beaupré;2015-10-03 12:46:23 -0400;mention borg delete borg
this makes it clear how to start from scratch, in case the chunk cache
was failed to be copied and so on.

==

borg/archiver.py
==================
c91c5d0;Antoine Beaupré;2015-10-03 12:36:52 -0400;rename convert command to upgrade
convert is too generic for the Attic conversion: we may have other
converters, from other, more foreign systems that will require
different options and different upgrade mechanisms that convert could
never cover appropriately. we are more likely to use an approach
similar to "git fast-import" instead here, and have the conversion
tools be external tool that feed standard data into borg during
conversion.

upgrade seems like a more natural fit: Attic could be considered like
a pre-historic version of Borg that requires invasive changes for borg
to be able to use the repository. we may require such changes in the
future of borg as well: if we make backwards-incompatible changes to
the repository layout or data format, it is possible that we require
such changes to be performed on the repository before it is usable
again. instead of scattering those conversions all over the code, we
should simply have assertions that check the layout is correct and
point the user to upgrade if it is not.

upgrade should eventually automatically detect the repository format
or version and perform appropriate conversions. Attic is only the
first one. we still need to implement an adequate API for
auto-detection and upgrade, only the seeds of that are present for now.

of course, changes to the upgrade command should be thoroughly
documented in the release notes and an eventual upgrade manual.

==

borg/archiver.py
borg/converter.py
borg/testsuite/converter.py
borg/testsuite/upgrader.py
borg/upgrader.py
==================
48b7c8c;Antoine Beaupré;2015-10-03 11:52:12 -0400;avoid checking for non-existent files
if there's no attic cache, it's no use checking for individual files

this also makes the code a little clearer

also added comments

==

borg/converter.py
==================
6905412;Antoine Beaupré;2015-10-03 11:49:01 -0400;style fixes (pep8, append, file builtin)

==

borg/converter.py
==================
3773681;Antoine Beaupré;2015-10-03 11:07:37 -0400;rewire cache copy mechanisms
we separate the conversion and the copy in order to be able to copy
arbitrary files from attic without converting them. this allows us to
copy the config file cleanly without attempting to rewrite its magic
number

==

borg/converter.py
==================
2c66e7c;Antoine Beaupré;2015-10-03 10:49:29 -0400;make percentage a real percentage

==

borg/converter.py
==================
bf3cf21;Thomas Waldmann;2015-10-03 14:12:16 +0200;docs: add warning about prune

==

docs/quickstart.rst
docs/usage.rst
==================
2c13027;Thomas Waldmann;2015-10-03 03:21:56 +0200;apt-get install: add -y

==

Vagrantfile
==================
3143839;Thomas Waldmann;2015-10-03 03:10:12 +0200;use Debian 7 (wheezy) VMs to do the linux binary builds

==

Vagrantfile
==================
f25888b;Antoine Beaupré;2015-10-02 16:04:35 -0400;restore box removed by mistake

==

borg/archiver.py
==================
35aaeef;Antoine Beaupré;2015-10-02 16:00:42 -0400;remove spurious output

==

borg/archive.py
==================
8193c41;Antoine Beaupré;2015-10-02 15:56:21 -0400;add and use string representation of archive for stats

==

borg/archive.py
borg/archiver.py
==================
e5a0936;Antoine Beaupré;2015-10-02 15:55:10 -0400;add formatters for Cache and Statistics objects
this greatly simplifies the display of those objects, as the
__format__() parameter allows for arbitrary display of the internal
fields of both objects

this will allow us to display those summaries without having to pass a
label to the string representation. we can also print the objects
directly without formatting at all.

==

borg/cache.py
borg/helpers.py
==================
893242e;Thomas Waldmann;2015-10-02 18:11:10 +0200;fix multiple issues with the cache config version check, fixes #234
- issue #234: handle exception when config file is empty is really not a borg cache config
- there was a unused %s in the Exception string
- error msg was wrong when version check failed - this IS a borg cache, but not of expected version

==

borg/cache.py
==================
b09cdb4;Antoine Beaupré;2015-10-02 11:22:38 -0400;don't add module name on standard messages
too much clutter

==

borg/archiver.py
==================
2f78b8a;Antoine Beaupré;2015-10-02 11:16:28 -0400;remove stray comment

==

borg/archiver.py
==================
1819ada;Antoine Beaupré;2015-10-02 11:16:21 -0400;log level tweaking: stats should not be a warning
we should find other ways of forcing that to be shown, it seems

==

borg/archiver.py
==================
ca6c526;Antoine Beaupré;2015-10-02 11:13:01 -0400;restore some print statements
the heuristics i used are the following:

 1. if we are prompting the use, use print on stderr (input() may
    produce some stuff on stdout, but it's outside the scope of this
    patch). we do not want those prompts to end up on the standard
    output in case we are piping stuff around

 2. if the command is primarily producing output for the user on the
    console (`list`, `info`, `help`), we simply print on the default
    file descriptor.

 3. everywhere else, we use the logging module with varying levels of
    verbosity, as appropriate.

==

borg/archiver.py
borg/cache.py
borg/key.py
==================
c9b1131;Antoine Beaupré;2015-10-02 10:58:08 -0400;use a module-specific logger instead of global one
that way we have one logger per module, and we can pick and choose
which module we want verbose, for example

==

borg/archive.py
borg/archiver.py
borg/cache.py
borg/helpers.py
borg/key.py
borg/repository.py
borg/testsuite/logger.py
==================
8978515;Thomas Waldmann;2015-10-02 16:56:31 +0200;temporary hack to avoid using lots of disk space for chunks.archive.d

==

borg/cache.py
==================
aef71ac;Thomas Waldmann;2015-10-02 16:25:57 +0200;Merge branch 'master' of github.com:borgbackup/borg

==
==================
ea5d004;Antoine Beaupré;2015-10-02 10:12:13 -0400;also document the cache locations

==

borg/archiver.py
==================
ad85f64;Antoine Beaupré;2015-10-02 10:10:50 -0400;whitespace

==

borg/archiver.py
==================
6904058;Antoine Beaupré;2015-10-02 10:10:43 -0400;update docs to reflect that cache is converted

==

borg/archiver.py
==================
d4d1b41;Antoine Beaupré;2015-10-02 09:44:53 -0400;remove needless autouse

==

borg/testsuite/converter.py
==================
41e9942;Antoine Beaupré;2015-10-02 09:43:51 -0400;follow naming of tested module

==

borg/testsuite/convert.py
borg/testsuite/converter.py
==================
081b91b;Antoine Beaupré;2015-10-02 09:43:10 -0400;remove needless paren

==

borg/converter.py
==================
3e7fa0d;Antoine Beaupré;2015-10-01 16:41:17 -0400;also copy the cache config file to workaround #234

==

borg/converter.py
==================
8022e56;Antoine Beaupré;2015-10-01 16:27:19 -0400;don't clobber existing borg cache

==

borg/converter.py
==================
55f79b4;Antoine Beaupré;2015-10-01 16:24:28 -0400;complete cache conversion code
we need to create the borg cache directory

dry run was ignored, fixed.

process cache before segment, because we want to do the faster stuff first

==

borg/converter.py
==================
28a033d;Antoine Beaupré;2015-10-01 16:03:52 -0400;remove debug output that clobbers segment spinner

==

borg/converter.py
==================
4f9a411;Antoine Beaupré;2015-10-01 16:01:17 -0400;remove unneeded fixture decorator

==

borg/testsuite/convert.py
==================
022de5b;Antoine Beaupré;2015-10-01 16:01:01 -0400;untested file/chunks cache conversion
i couldn't figure out how to generate a cache set directly, Archiver is a pain...

==

borg/converter.py
==================
7c32f55;Antoine Beaupré;2015-10-01 15:43:16 -0400;repository index conversion

==

borg/converter.py
borg/testsuite/convert.py
==================
a7902e5;Antoine Beaupré;2015-10-01 14:29:09 -0400;cosmetic: show 100% when done, not n-1/n%

==

borg/converter.py
==================
35b2195;Antoine Beaupré;2015-10-01 14:28:49 -0400;only write magic num if necessary
this could allow speeding up conversions resumed after interruption

==

borg/converter.py
==================
180dfcb;Antoine Beaupré;2015-10-01 14:23:43 -0400;remove needless indentation

==

borg/converter.py
==================
6a72252;Antoine Beaupré;2015-10-01 14:22:29 -0400;release lock properly if segment conversion crashes

==

borg/converter.py
==================
1b540d9;Antoine Beaupré;2015-10-01 14:20:29 -0400;convert more print() statements to logging
we use logging.warning in info and list, but print() more usage bits.

we also now support logging.debug() and by default are more silent

==

borg/archive.py
borg/archiver.py
borg/helpers.py
==================
d27da99;TW;2015-10-01 19:52:15 +0200;Merge pull request #230 from anarcat/api
add automatically generated API
==
==================
09ffbb1;Antoine Beaupré;2015-10-01 13:41:42 -0400;convert most print() calls to logging
the logging level varies: most is logging.info(), in some place
logging.warning() or logging.error() are used when the condition is
clearly an error or warning. in other cases, we keep using print, but
force writing to sys.stderr, unless we interact with the user.

there were 77 calls to print before this commit, now there are 7, most
of which in the archiver module, which interacts directly with the
user. in one case there, we still use print() only because logging is
not setup properly yet during argument parsing.

it could be argued that commands like info or list should use print
directly, but we have converted them anyways, without ill effects on
the unit tests

unit tests still use print() in some places

this switches all informational output to stderr, which should help
with, if not fix jborg/attic#312 directly

==

borg/archive.py
borg/archiver.py
borg/cache.py
borg/helpers.py
borg/key.py
borg/repository.py
==================
c996fd8;Antoine Beaupré;2015-10-01 12:39:08 -0400;just call print() once in the odd print_() function
this will help when we want to refactor output functions

this function should definitely be replaced by a __repr__() or
__str__() however

==

borg/helpers.py
==================
3bb3bd4;Antoine Beaupré;2015-10-01 12:36:53 -0400;add percentage progress

==

borg/converter.py
==================
5c649a0;Thomas Waldmann;2015-10-01 18:21:45 +0200;Merge branch 'master' of github.com:borgbackup/borg

==
==================
0d457bc;Antoine Beaupré;2015-10-01 11:25:12 -0400;clarify what to do about the cache warning

==

borg/converter.py
==================
946aca9;Antoine Beaupré;2015-10-01 11:25:02 -0400;avoid flooding the console
instead we add progress information

==

borg/converter.py
==================
6c318a0;Antoine Beaupré;2015-10-01 11:12:23 -0400;re-pep8

==

borg/testsuite/convert.py
==================
7f6fd1f;Antoine Beaupré;2015-10-01 11:11:30 -0400;add docs for all converter test code

==

borg/testsuite/convert.py
==================
a08bcb2;Antoine Beaupré;2015-10-01 11:10:00 -0400;refactor common code
we get rid of repo_open() which doesn't same much typing, and add a validator for keys

==

borg/testsuite/convert.py
==================
f5cb0f4;Antoine Beaupré;2015-10-01 10:41:31 -0400;rewrite convert tests with pytest fixtures

==

borg/testsuite/convert.py
==================
98e4e6b;Antoine Beaupré;2015-10-01 09:35:17 -0400;lock repository when converting segments

==

borg/converter.py
==================
58815bc;Antoine Beaupré;2015-10-01 09:23:17 -0400;fix commandline dispatch for converter

==

borg/archiver.py
==================
57801a2;Antoine Beaupré;2015-10-01 09:03:41 -0400;keep tests simple by always adding attic depends
note that we do not depend on attic to build borg, just to do those
tests. if attic goes away, we could eventually do this another way or
just stop testing this altogether.

==

tox.ini
==================
79d9aeb;Antoine Beaupré;2015-10-01 09:00:49 -0400;use permanently instead of irrevocably, which is less common

==

borg/archiver.py
==================
b9c474d;Antoine Beaupré;2015-10-01 08:59:01 -0400;pep8: put pytest skip marker after imports

==

borg/testsuite/convert.py
==================
4a85f2d;Antoine Beaupré;2015-10-01 08:58:00 -0400;fix most pep8 warnings
* limit all lines to 80 chars
* remove spaces around parameters
* missing blank lines

==

borg/testsuite/convert.py
==================
5f6eb87;Antoine Beaupré;2015-10-01 08:50:06 -0400;much nicer validation checking

==

borg/testsuite/convert.py
==================
d5198c5;Antoine Beaupré;2015-10-01 08:47:23 -0400;split out depends in imports

==

borg/testsuite/convert.py
==================
d665163;Antoine Beaupré;2015-10-01 08:46:30 -0400;use builtin NotImplementedError instead of writing our own
NotImplemented didn't work with pytest.raise(), i didn't know about NotImplementedError, thanks tw

==

borg/archiver.py
borg/converter.py
borg/testsuite/convert.py
==================
ef0ed40;Antoine Beaupré;2015-10-01 08:44:17 -0400;fix typo

==

borg/converter.py
==================
5b8cb63;Antoine Beaupré;2015-10-01 08:43:05 -0400;remove duplicate code with the unit test

==

borg/converter.py
==================
dbd4ac7;Antoine Beaupré;2015-10-01 08:41:44 -0400;add missing colon

==

borg/converter.py
==================
c2913f5;Antoine Beaupré;2015-10-01 08:40:56 -0400;style: don't use continue for nothing

==

borg/converter.py
==================
efbad39;Antoine Beaupré;2015-10-01 08:36:20 -0400;help text review: magic s/number/string/, s/can/must/

==

borg/archiver.py
borg/converter.py
==================
a81755f;Antoine Beaupré;2015-10-01 08:34:18 -0400;use triple-double-quoted instead of single-double-quoted
at the request of TW, see #231

==

borg/archiver.py
borg/converter.py
==================
50fe290;TW;2015-10-01 10:52:09 +0200;Merge pull request #229 from anarcat/rmapi
remove api file introduced by mistake in #228
==
==================
c990829;Antoine Beaupré;2015-10-01 00:51:19 -0400;add attic dependency for build as a separate factor
this way we don't depend on attic for regular build, but we can still see proper test coverage

==

tox.ini
==================
bcd94b9;Antoine Beaupré;2015-10-01 00:32:34 -0400;split up keyfile, segments and overall testing in converter

==

borg/testsuite/convert.py
==================
1ba856d;Antoine Beaupré;2015-10-01 00:15:25 -0400;refactor: group test repo subroutine

==

borg/testsuite/convert.py
==================
1b29699;Antoine Beaupré;2015-10-01 00:15:12 -0400;cosmetic: reorder

==

borg/testsuite/convert.py
==================
a5f32b0;Antoine Beaupré;2015-09-30 23:50:46 -0400;add convert command

==

borg/archiver.py
==================
f35e8e1;Antoine Beaupré;2015-09-30 23:50:35 -0400;add dry run support to converter

==

borg/converter.py
borg/testsuite/convert.py
==================
e554365;Antoine Beaupré;2015-09-30 23:28:07 -0400;remove unused import

==

borg/converter.py
==================
77ed6de;Antoine Beaupré;2015-09-30 23:27:55 -0400;skip converter tests if attic isn't installed

==

borg/testsuite/convert.py
==================
c30df4e;Antoine Beaupré;2015-09-30 23:18:03 -0400;move converter code out of test suite

==

borg/converter.py
borg/testsuite/convert.py
==================
5a16803;Antoine Beaupré;2015-09-30 23:02:21 -0400;remove needless use of self

==

borg/testsuite/convert.py
==================
aa25a21;Antoine Beaupré;2015-09-30 23:01:03 -0400;move conversion code to a separate class for clarity

==

borg/testsuite/convert.py
==================
312c3cf;Antoine Beaupré;2015-09-30 22:53:58 -0400;rewrite converter to avoid using attic code
the unit tests themselves still use attic to generate an attic
repository for testing, but the converter code should now be
standalone

==

borg/testsuite/convert.py
==================
c7af4c7;Antoine Beaupré;2015-09-30 22:43:08 -0400;more debug

==

borg/testsuite/convert.py
==================
2d19881;Antoine Beaupré;2015-09-30 22:41:38 -0400;some debugging code

==

borg/testsuite/convert.py
==================
e88a994;Antoine Beaupré;2015-09-30 22:40:46 -0400;reshuffle and document

==

borg/testsuite/convert.py
==================
9ab1e19;Antoine Beaupré;2015-09-30 22:23:11 -0400;keyfile conversion code

==

borg/testsuite/convert.py
==================
de54228;Antoine Beaupré;2015-09-30 21:08:47 -0400;first stab at an attic-borg converter
for now, just in the test suite, but will be migrated to a separate command

==

borg/testsuite/convert.py
==================
a2cf002;Antoine Beaupré;2015-09-30 18:35:54 -0400;add automatically generated API
this is a crude hack for now, and could use a better table of contents

but at least we have some way of linking and showing the different
internal functions

the next phase here is obviously to document that API through the
addition of docstrings. a static api.rst could also be easier to read,
but maybe that could go through some docstrings as well, to be tested

==

docs/Makefile
docs/conf.py
docs/index.rst
==================
b72d955;Antoine Beaupré;2015-09-30 18:33:27 -0400;remove api file introduced by mistake in #228

==

docs/api.rst
==================
3b1fae6;TW;2015-10-01 00:03:12 +0200;Merge pull request #228 from anarcat/faster-usage
generate usage include files only as needed
==
==================
50e7d0f;Antoine Beaupré;2015-09-30 17:42:18 -0400;more human-readable output in usage generation

==

docs/Makefile
docs/api.rst
==================
e3433f4;Antoine Beaupré;2015-09-30 17:30:13 -0400;generate usage include files only as needed
right now, the update_usage script regenerates the usage files at
every call

by moving this into the makefile, we make those files be generated
only when the source file change, which makes testing docs much faster

==

docs/Makefile
docs/update_usage.sh
==================
967963e;Thomas Waldmann;2015-09-30 17:42:20 +0200;Vagrantfile: remove usage, it is in the development docs now

==

Vagrantfile
==================
bc9679f;Thomas Waldmann;2015-09-30 17:38:51 +0200;development docs: update / fix / add Vagrant section
thanks to level323 for the vagrant docs

==

docs/development.rst
==================
ba5fa0b;Thomas Waldmann;2015-09-30 17:13:22 +0200;update / improve / reformat FAQ
- reduce redundancy (platforms are documented in README.rst)
- reformat to 80 chars width
- clarify checkpoints
- remove workarounds for stuff that was fixed

==

docs/faq.rst
==================
6aca469;Thomas Waldmann;2015-09-30 16:10:50 +0200;fix segment entry header size check, attic issue #352
it only checked for too big sizes, but not for too small ones.
that made it die with a ValueError and not raise the appropriate IntegrityError
that gets handled in check() and triggers the repair attempt for the segment.

==

borg/repository.py
==================
a3d967b;Thomas Waldmann;2015-09-28 00:41:40 +0200;hint to single-file pyinstaller binaries from README

==

README.rst
==================
507752f;Thomas Waldmann;2015-09-28 00:33:20 +0200;update CHANGES

==

CHANGES.rst
==================
524ca29;Thomas Waldmann;2015-09-28 00:22:20 +0200;document binary and non-binary requirements

==

docs/installation.rst
==================
4a71613;Thomas Waldmann;2015-09-28 00:05:52 +0200;modularize Vagrantfile, use centos6 boxes for building the binaries
for building binaries that run everywhere, we need to love old stuff like centos6,
because it has the oldest glibc version which we want to support.

use 768MB for 64bit machines (not 512)

==

Vagrantfile
==================
86502d2;Thomas Waldmann;2015-09-26 14:24:37 +0200;docs: explain --read-special in more detail, fixes #220

==

docs/usage.rst
==================
22f335e;Thomas Waldmann;2015-09-21 21:48:46 +0200;docs: add how to build wheels and standalone binaries

==

docs/development.rst
==================
7dbe2b8;Thomas Waldmann;2015-09-21 21:28:18 +0200;docs: add a note about the single-file binaries

==

docs/installation.rst
==================
c557613;Thomas Waldmann;2015-09-21 21:20:33 +0200;vagrant: darwin: give configure options so libpython gets build
it is needed by pyinstaller to build the borg binary

==

Vagrantfile
==================
9dc98ee;Thomas Waldmann;2015-09-20 22:22:40 +0200;vagrant: add py3.4 for precise/trusty, install pyinstaller
also: source .profile so the PATH is ok

==

Vagrantfile
==================
4410f1c;Thomas Waldmann;2015-09-19 22:38:00 +0200;docs: must run make html after tagging, so the html titel says correct version

==

docs/development.rst
==================
688488d;Thomas Waldmann;2015-09-19 22:20:41 +0200;docs: must run make html before release

==

docs/development.rst
==================
507d90f;Thomas Waldmann;2015-09-19 22:17:46 +0200;MANIFEST.in: add some more excludes

==

MANIFEST.in
==================
d4de0fd;Thomas Waldmann;2015-09-19 21:44:40 +0200;remove remainders of versioneer, typo fix.

==

MANIFEST.in
setup.cfg
setup.py
==================
0f68f1c;Thomas Waldmann;2015-09-19 21:35:02 +0200;add docs about release process

==

docs/development.rst
==================
6ef7a9b;Thomas Waldmann;2015-09-19 20:57:02 +0200;update CHANGES for 0.26 release

==

CHANGES.rst
==================
fb8d1cc;Thomas Waldmann;2015-09-19 20:31:26 +0200;also mention libattr
ACLs are implemented as xattrs, so libattr is pulled in as a dependency of libacl.

==

docs/global.rst.inc
docs/installation.rst
==================
5de30e9;Thomas Waldmann;2015-09-19 19:02:03 +0200;update CHANGES

==

CHANGES.rst
==================
07ff905;TW;2015-09-19 18:56:06 +0200;Merge pull request #212 from ThomasWaldmann/match-counting
Match counting
==
==================
ab76176;Thomas Waldmann;2015-09-19 18:38:44 +0200;fix: patterns might be None

==

borg/archiver.py
==================
e0a08c5;Thomas Waldmann;2015-09-19 18:16:47 +0200;borg extract: warn if a include pattern never matched, fixes #209

==

borg/archiver.py
==================
15b003e;Thomas Waldmann;2015-09-19 18:03:53 +0200;add a string representation for Include/ExcludePattern
it just gives the original string that was used.

==

borg/helpers.py
==================
08417b5;Thomas Waldmann;2015-09-19 17:48:41 +0200;implement counters for Include/ExcludePatterns

==

borg/helpers.py
==================
aed6cc9;Thomas Waldmann;2015-09-19 16:58:02 +0200;be more clear about pruning, attic issue #132

==

borg/archiver.py
==================
44d1a32;TW;2015-09-19 16:32:03 +0200;Merge pull request #211 from ThomasWaldmann/archivename_validation
archive names with slashes are invalid, attic issue #180
==
==================
cad0515;Thomas Waldmann;2015-09-19 16:09:20 +0200;archive names with slashes are invalid, attic issue #180
for borg mount's FUSE filesystem, we use the archive name as a directory name,
thus slashes are not allowed.

==

borg/archiver.py
borg/helpers.py
borg/testsuite/helpers.py
==================
375717c;Thomas Waldmann;2015-09-18 00:02:44 +0200;tests: work around strange mtime granularity issue on netbsd, fixes #204
not sure where the problem is:
it seems to announce it supports st_mtime_ns, but if one uses it and
has a file with ...123ns, i t gets restored as ...000ns.

Then I tried setting st_mtime_ns_round to -3, but it still failed with +1000ns difference.

Maybe rounding is incorrect and it should be truncating?
Issue with granularity could be in python, in netbsd (netbsd platform code), in ffs filesystem, ...

==

borg/testsuite/__init__.py
==================
48634d4;Thomas Waldmann;2015-09-17 22:41:49 +0200;tests: ignore st_rdev if file is not a block/char device, fixes #203

==

borg/testsuite/__init__.py
==================
ff64b4c;Thomas Waldmann;2015-09-16 11:53:53 +0200;be more precise about OpenBSD/NetBSD support
xattrs/ACLs need platform specific code and new have none (yet) for them.

==

README.rst
docs/faq.rst
==================
f138d06;Thomas Waldmann;2015-09-16 11:44:53 +0200;more platform support, works on py 3.5
xattrs and ACLs on OpenBSD and NetBSD need development or adaptation of
the platform-specific code.

==

README.rst
docs/faq.rst
setup.py
tox.ini
==================
41860ef;Thomas Waldmann;2015-09-15 23:52:17 +0200;test setup: stay away from the setgid mode bit
for vagrant testing on misc. platforms, we can't know the group /
we can't have the same group everywhere.

but the OS won't let us set setgid bit if the file does not have our group.
on netbsd, the created file somehow happens to have group "wheel",
but vagrant is not in group wheel.

==

borg/testsuite/archiver.py
==================
e8571c1;Thomas Waldmann;2015-09-15 23:45:12 +0200;vagrant: more docs, some fixes

==

Vagrantfile
==================
56bf8b7;Thomas Waldmann;2015-09-15 18:27:16 +0200;add .vagrant to .gitignore

==

.gitignore
==================
dc0938f;Thomas Waldmann;2015-09-15 14:46:26 +0200;vagrant: add netbsd (needs more work)
there's a problem with the shell:
- either it is no login shell, then e.g. PKG_PATH is not set (sh)
- or it is not found (no bash here)
- or it is not compatible enough (csh)

depending on what shell is configured, one or the other vagrant mode / feature
does not work.

==

Vagrantfile
==================
cf9ba87;Thomas Waldmann;2015-09-15 00:41:32 +0200;test setup: do not set the sticky bit on a regular file
sticky bit only has a function on directories.
openbsd does not let one set sticky on files.
other systems seem to just ignore it.

==

borg/testsuite/archiver.py
==================
bc5949a;Thomas Waldmann;2015-09-14 17:36:04 +0200;chunker: add a check whether the POSIX_FADV_DONTNEED constant is defined
on openbsd, it isn't.

==

borg/_chunker.c
==================
568963e;Thomas Waldmann;2015-09-14 17:35:04 +0200;vagrant: added openbsd

==

Vagrantfile
==================
a9ee793;Thomas Waldmann;2015-09-14 02:44:17 +0200;update CHANGES

==

CHANGES.rst
==================
13ded3d;Thomas Waldmann;2015-09-14 01:26:20 +0200;xattr tests: ignore security.selinux attribute showing up

==

borg/testsuite/xattr.py
==================
4030b4d;TW;2015-09-13 23:56:44 +0200;Merge pull request #201 from ThomasWaldmann/vagrant
Vagrant updates
==
==================
7bbe17f;Thomas Waldmann;2015-09-13 23:39:34 +0200;vagrant: add centos 7 / 64 vm

==

Vagrantfile
==================
39a335f;Thomas Waldmann;2015-09-13 18:17:13 +0200;Merge branch 'master' into vagrant

==
==================
98c464f;Thomas Waldmann;2015-09-13 18:05:03 +0200;vagrant: refine darwin, use osxfuse 3.0.x

==

Vagrantfile
==================
5eb0496;Thomas Waldmann;2015-09-13 18:03:43 +0200;setup.py: add the place where we link the lz4 header/lib on the darwin vagrant VM

==

setup.py
==================
5a2744d;TW;2015-09-13 03:22:17 +0200;Merge pull request #200 from ThomasWaldmann/vagrant
Vagrant
==
==================
b47f496;Thomas Waldmann;2015-09-13 01:22:44 +0200;use vagrant to create test installations
debian/ubuntu 32/64 bit
freebsd
darwin

note: darwin is starting up, but no ssh/rsync yet

==
==================
c578419;Thomas Waldmann;2015-09-13 01:21:45 +0200;omit support files from coverage metrics

==

.coveragerc
==================
e6ccd0e;TW;2015-09-13 01:18:59 +0200;Merge pull request #199 from ThomasWaldmann/fix-argparse
add a argparse.py (from py 3.2.6) that is not broken
==
==================
bc2cfdf;Thomas Waldmann;2015-09-13 01:01:48 +0200;fix the other argparse import also

==

borg/helpers.py
==================
2b31184;Thomas Waldmann;2015-09-13 00:58:57 +0200;add a argparse.py (from py 3.2.6) that is not broken
also: remove previois attempt to fix this, installing pypi argparse into virtualenv does not work.

==

borg/archiver.py
borg/support/__init__.py
borg/support/argparse.py
setup.py
==================
7774d4f;Thomas Waldmann;2015-09-13 00:36:17 +0200;ext3 seems to need a bit more space for a sparse file
but it is still sparse, just needed some adjustment

==

borg/testsuite/archiver.py
==================
15786d2;TW;2015-09-12 23:43:05 +0200;Merge pull request #198 from tgharold/obtaining-char-from-temporary-python-value
Fix for Obtaining char from temporary python value
==
==================
03579dd;Thomas Harold;2015-09-12 17:21:49 -0400;Obtaining 'char *' from temporary Python value
Old code causes a compile error on Mint 17.2
==

borg/hashindex.pyx
==================
de39683;Thomas Waldmann;2015-09-12 23:13:16 +0200;Merge branch 'master' into vagrant

==
==================
31fdba0;Thomas Harold;2015-09-12 17:11:13 -0400;Merge pull request #1 from borgbackup/master
Pull latest upstream master
==
==================
6c61900;Thomas Waldmann;2015-09-12 22:44:23 +0200;pull fixed argparse from pypi in case we have a buggy python
see argparse 1.4.0 changelog for details

==

setup.py
==================
cff7dff;Thomas Waldmann;2015-09-12 19:38:38 +0200;detect lz4.h header file location
use similar code as for openssl headers

==

docs/usage.rst
setup.py
==================
d74da7c;Thomas Waldmann;2015-09-12 19:26:46 +0200;llfuse 0.41 install troubles on some platforms, require < 0.41
UnicodeDecodeError exception due to non-ascii llfuse setup.py

==

docs/installation.rst
==================
e8f4fe0;Thomas Waldmann;2015-09-12 19:19:52 +0200;pkg-config is needed for llfuse installation

==

docs/installation.rst
==================
bc021d4;Thomas Waldmann;2015-09-12 19:16:45 +0200;do not test lzma level 9 compression
got a MemoryError in a vagrant VM, level 9 needs a lot of memory...

==

borg/testsuite/compress.py
==================
1fa00c2;Thomas Waldmann;2015-09-12 19:13:17 +0200;use vagrant to do easy cross-platform testing

==

Vagrantfile
==================
02fff76;TW;2015-09-11 02:13:58 +0200;Merge pull request #173 from ThomasWaldmann/faster-cache-sync
Faster cache sync
==
==================
26bde96;Thomas Waldmann;2015-09-10 23:12:55 +0200;Merge branch 'master' into faster-cache-sync

==
==================
1eecb02;Thomas Waldmann;2015-09-10 23:12:12 +0200;cython code: add some int types to get rid of unspecific python add / subtract operations
they somehow pull in some floating point error code that led to a undefined
symbol FPE_... when using the borgbackup wheel on some non-ubuntu/debian linux
platform.

==

borg/chunker.pyx
borg/crypto.pyx
==================
638204f;TW;2015-09-10 22:58:20 +0200;Merge pull request #193 from edgewood/osxPathNormalization
Normalize paths before pattern matching on OS X
==
==================
13ddfdf;Ed Blackman;2015-09-09 15:00:58 -0400;Move pattern normalization decision into decorator
Using a decorator moves the duplicate code in the init methods into a
single decorator method, while still retaining the same runtime overhead
(zero for for the non-OSX path, one extra function call plus the call to
unicodedata.normalize for OSX).  The pattern classes are much visually
cleaner, and duplicate code limited to two lines normalizing the pattern
on OSX.

Because the decoration happens at class init time (vs instance init time
for the previous approach), the OSX and non-OSX test cases can no longer
be called in the same run, so I also removed the OSX test case monkey
patching and uncommented the platform skipif decorator.

==

borg/helpers.py
borg/testsuite/helpers.py
==================
cc13f3d;Ed Blackman;2015-09-09 13:48:46 -0400;Express non-ascii pattern platform skips better
including correcting thinko in the commented-out OSX-only test

==

borg/testsuite/helpers.py
==================
d510ff7;Ed Blackman;2015-09-09 13:41:34 -0400;Merge non-ascii Include and ExcludePattern tests
to parallel the OSX non-ascii tests

==

borg/testsuite/helpers.py
==================
d9fb1d2;Ed Blackman;2015-09-08 23:33:34 -0400;Normalize paths before pattern matching on OS X
The OS X file system HFS+ stores path names as Unicode, and converts
them to a variant of Unicode NFD for storage.  Because path names will
always be in this canonical form, it's not friendly to require users to
match this form exactly.  Convert paths from the repository and patterns
from the command line to NFD before comparing them.

Unix (and Windows, I think) file systems don't convert path names into a
canonical form, so users will continue to have to exactly match the path
name they want, because there could be two paths with the same character
visually that are actually composed of different byte sequences.

==

borg/helpers.py
borg/testsuite/helpers.py
==================
da5923e;TW;2015-09-08 19:04:34 +0200;Merge pull request #192 from ThomasWaldmann/create-dryrun
implement borg create --dry-run, attic issue #267
==
==================
1aacdda;Thomas Waldmann;2015-09-08 03:12:45 +0200;implement borg create --dry-run, attic issue #267
also: fix verbose mode display of stdin backup

==

borg/archive.py
borg/archiver.py
borg/testsuite/archiver.py
==================
16e5f24;Thomas Waldmann;2015-09-06 23:51:03 +0200;update CHANGES

==

CHANGES.rst
==================
f852175;TW;2015-09-06 23:49:12 +0200;Merge pull request #187 from ThomasWaldmann/mount-relative-dir
use absolute path, attic issue #200, attic issue #137
==
==================
13f2064;Thomas Waldmann;2015-09-06 23:26:47 +0200;use absolute path, attic issue #200, attic issue #137
the daemonize code changes the cwd, thus a relative repo path can't work.

borg mount repo mnt  # did not work
borg mount --foreground repo mnt  # did work
borg mount /abs/path/repo mnt  # did work

==

borg/repository.py
==================
68928e4;TW;2015-09-06 22:22:19 +0200;Merge pull request #186 from ThomasWaldmann/chunker_small_fixes
Chunker small fixes
==
==================
e244fe2;Thomas Waldmann;2015-09-06 22:06:52 +0200;change 2 more chunker vars to off_t
so they get 64bit on 32bit platforms.

==

borg/_chunker.c
==================
32e276c;Thomas Waldmann;2015-09-06 22:03:42 +0200;Merge branch 'chunker_small_fixes' of https://github.com/sourcejedi/borg into chunker_small_fixes

==
==================
947fc09;TW;2015-09-06 21:51:24 +0200;Merge pull request #183 from ThomasWaldmann/borg-repo-envvar
BORG_REPO env var support
==
==================
70d97c4;TW;2015-09-06 21:38:31 +0200;Merge pull request #180 from ThomasWaldmann/read-device
read special files as if they were regular files, update docs, closes #79
==
==================
3ab068b;TW;2015-09-06 21:35:53 +0200;Merge pull request #181 from ThomasWaldmann/hash-collision
detect inconsistency / corruption / hash collision, closes #170
==
==================
18e428f;TW;2015-09-06 21:33:24 +0200;Merge pull request #185 from ThomasWaldmann/fix-182
fix reaction to "no" answer at delete repo prompt, fixes #182
==
==================
f5069c4;Thomas Waldmann;2015-09-06 21:11:52 +0200;fix reaction to "no" answer at delete repo prompt, fixes #182

==

borg/archiver.py
==================
817ce18;Thomas Waldmann;2015-09-06 20:19:28 +0200;fix repository arg default

==

borg/archiver.py
==================
b3f5231;Thomas Waldmann;2015-09-06 18:18:24 +0200;BORG_REPO env var support
sets the default repository to use, e.g. like:

export BORG_REPO=/mnt/backup/repo
borg init
borg create ::archive
borg list
borg mount :: /mnt
fusermount -u /mnt
borg delete ::archive

==

borg/archiver.py
borg/helpers.py
borg/testsuite/helpers.py
docs/usage.rst
==================
a912c02;Thomas Waldmann;2015-09-06 01:10:43 +0200;detect inconsistency / corruption / hash collision, closes #170
added a check that compares the size of the new chunk with the stored size of the
already existing chunk in storage that has the same id_hash value.
raise an exception if there is a size mismatch.

this could happen if:

- the stored size is somehow incorrect (corruption or software bug)
- we found a hash collision for the id_hash (for sha256, this is very unlikely)

==

borg/cache.py
==================
0b10357;Thomas Waldmann;2015-09-06 00:29:46 +0200;read special files as if they were regular files, update docs, closes #79
do not use the files cache for such special files

==

borg/archiver.py
borg/cache.py
docs/usage.rst
==================
54ccbc5;Thomas Waldmann;2015-08-30 15:15:15 +0200;chunks index resync: do all in one pass
if we do not have a cached archive index: fetch and build and merge it
if we have one: merge it

==

borg/cache.py
==================
22dd925;Thomas Waldmann;2015-08-30 03:03:48 +0200;chunks index archive: remove all tar and compression related stuff and just use separate files in a directory
the compression was quite cpu intensive and didn't work that great anyway.
now the disk space usage is a bit higher, but it is much faster and less hard on the cpu.

disk space needs grow linearly with the amount and size of the archives, this
is a problem esp. if one has many and/or big archives (but this problem existed
before also because compression was not as effective as I believed).

the tar archive always needed a complete rebuild (and thus: decompression
and recompression) because deleting outdated archive indexes was not
possible in the tar file.

now we just have a directory chunks.archive.d and keep archive index files
there for all archives we already know.
if an archive does not exist any more in the repo, we just delete its index file.
if an archive is unknown still, we fetch the infos and build a new index file.

when merging, we avoid growing the hash table from zero, but just start
with the first archive's index as basis for merging.

==

borg/cache.py
==================
f7210c7;Thomas Waldmann;2015-08-29 23:34:58 +0200;remove cpu intensive compression methods for the chunks.archive
also remove the comment about how good xz compresses - while that was true for smaller index files,
it seems to be less effective with bigger ones. maybe just an issue with compression dict size.

==

borg/cache.py
==================
17c4394;TW;2015-08-29 16:46:41 +0200;Merge pull request #161 from RonnyPfannschmidt/setuptools-scm
replace versioneer with setuptools_scm
==
==================
ab545ae;Thomas Waldmann;2015-08-29 14:10:31 +0200;CHANGES: release 0.25.0

==

CHANGES.rst
==================
2332ee4;Thomas Waldmann;2015-08-29 13:35:58 +0200;remove docs/misc/create_compression.txt
outdated - it just showed different levels of zlib compression,
but not we additionally have "lzma", "lz4" and "none" compression.
the "usage" and "internals" docs give some hints about them, too.

==

docs/misc/create_compression.txt
==================
31e97d5;Thomas Waldmann;2015-08-29 12:52:18 +0200;remove x bits from repository.py

==

borg/repository.py
==================
d2e5ce9;Thomas Waldmann;2015-08-29 05:41:41 +0200;add FAQ entry about OS X commandline vs. HFS+ encoding issue, see #143.
a real fix for this is in development, but needs some time.

==

docs/faq.rst
==================
273c043;Thomas Waldmann;2015-08-29 05:02:05 +0200;update CHANGES

==

CHANGES.rst
==================
d779057;Thomas Waldmann;2015-08-29 04:46:13 +0200;fix issue with negative "all archives" size, fixes #165
This fixes a infrequent problem when (refcount * chunksize) overflowed a int32_t.
chunksize is always <= 8MiB and usually rather ~64KiB (with default chunker params).
Thus, this happened only for high refcounts and/or unusually big chunks.

==

borg/_hashindex.c
==================
1a949ea;Thomas Waldmann;2015-08-29 04:23:57 +0200;docs: internals: improve structure and formatting

==

docs/internals.rst
==================
ddd0e27;Thomas Waldmann;2015-08-29 04:16:03 +0200;docs: improve faq and support section

==

docs/faq.rst
docs/support.rst
==================
c823554;Thomas Waldmann;2015-08-29 04:00:22 +0200;docs: usage: improved formatting, cosmetic changes

==

borg/archiver.py
docs/usage.rst
==================
e4dc482;Thomas Waldmann;2015-08-29 03:39:53 +0200;docs: quickstart: key modes, cosmetic changes

==

docs/installation.rst
docs/quickstart.rst
==================
8a48351;Thomas Waldmann;2015-08-29 03:01:39 +0200;docs: theme: use a lighter green

==

docs/_themes/local/static/local.css_t
==================
cebb61d;Thomas Waldmann;2015-08-29 02:55:09 +0200;docs: add pypi, wheel, dist package based install docs

==

docs/installation.rst
==================
79d7f49;Thomas Waldmann;2015-08-29 01:17:19 +0200;docs: split install into system-specific preparations and generic instructions

==

docs/installation.rst
==================
ee58d4f;Thomas Waldmann;2015-08-29 00:45:54 +0200;docs: be more specific about Debian/Ubuntu release

==

docs/installation.rst
==================
acf5ddc;TW;2015-08-29 00:26:38 +0200;Merge pull request #166 from ThomasWaldmann/fix-restore-xattrs
Fix restore xattrs
==
==================
9ebc53a;Thomas Waldmann;2015-08-29 00:11:04 +0200;restore_xattrs: ignore if setxattr fails with EACCES,  fixes #162
e.g.:
- setting any security.* key is expected to fail with EACCES if one is not root.
- issue #162 on our issue tracker: user was root, but due to some specific scenario
  involving docker and selinux, setting security.selinux key fails even when running as root

not sure if it is the best solution to silently ignore this, but some lines below this change
failure to do a chown is also silently ignored (happens e.g. when restoring a file not owned
by the current user as a non-root user).

==

borg/archive.py
==================
ea8f3bd;Thomas Waldmann;2015-08-28 23:22:26 +0200;restore_xattrs: minor cleanup / simplification
if we use {} as default for item.get(), we do not need the "if" as iteration over an empty dict won't do anything.
also fixes too deep indentation the original code had.

==

borg/archive.py
==================
8b6ca0d;Ronny Pfannschmidt;2015-08-22 15:54:40 +0200;propperly handle borg._version using setuptools_scm

==

.gitignore
borg/__init__.py
borg/_version.py
setup.py
==================
c7023ed;Ronny Pfannschmidt;2015-08-22 14:58:06 +0200;replace versioneer with setuptools_scm

==

setup.py
versioneer.py
==================
034e347;Thomas Waldmann;2015-08-21 01:10:34 +0200;travis: use requirements file

==

.travis/install.sh
==================
fdc18eb;Thomas Waldmann;2015-08-21 00:25:24 +0200;support docs: write some words about BountySource

==

CHANGES.rst
docs/support.rst
==================
2402a22;Thomas Waldmann;2015-08-20 23:39:40 +0200;update docs about fakeroot

==

CHANGES.rst
docs/development.rst
==================
3d974d2;Thomas Waldmann;2015-08-20 23:27:24 +0200;update CHANGES

==

CHANGES.rst
==================
1e11e24;Thomas Waldmann;2015-08-20 22:37:38 +0200;document locking system

==

docs/internals.rst
==================
59a4429;Alan Jenkins;2015-08-20 17:48:59 +0100;chunker - cast from size_t to off_t can now be removed
Sorry, this should really have been part of the previous commit -
it's why I noticed a problem.

==

borg/_chunker.c
==================
0a2bd8d;Thomas Waldmann;2015-08-20 18:40:24 +0200;lock roster: catch file not found in remove() method and ignore it

==

borg/locking.py
==================
ce3e67c;Alan Jenkins;2015-08-20 17:19:48 +0100;chunker - fix 4GB files on 32-bit systems
From code inspection - effect not actually tested.

==

borg/_chunker.c
==================
7c6f3ec;Alan Jenkins;2015-08-20 15:55:12 +0100;Initialize chunker fd to -1, so it's not equal to STDIN_FILENO (0)

==

borg/_chunker.c
==================
d3d78f7;Thomas Waldmann;2015-08-20 05:33:51 +0200;call fadvise DONTNEED for the byterange we actually have read, fixes #158
avoid throwing away potential readahead data the OS might have read into the cache.

==

borg/_chunker.c
==================
0926c28;Per Guth;2015-08-17 17:10:37 +0200;docs: installation: korora/fedora -> `lz4-devel`

==

docs/installation.rst
==================
8cf0ead;Per Guth;2015-08-17 12:53:15 +0200;docs: added `favicon.ico`

==

docs/_themes/local/static/favicon.ico
docs/conf.py
==================
7f0fe83;Thomas Waldmann;2015-08-17 11:52:05 +0200;Merge branch 'master' of github.com:borgbackup/borg

==
==================
93a89d9;Thomas Waldmann;2015-08-17 11:50:47 +0200;ChunkerParams: fix parameter order
the parser for the --chunker-params argument had a wrong parameter order.
fixed the order so it conforms to the help text and the docs.
also added some tests for it and a text for the ValueError exception.

==

borg/helpers.py
borg/testsuite/helpers.py
==================
1c7b5b2;Per Guth;2015-08-17 11:31:42 +0200;minor change in copyright notice

==

docs/conf.py
==================
b180158;Thomas Waldmann;2015-08-16 14:51:15 +0200;generalize hashindex code for any key length
currently, we only use sha256 hashes as key, so key length is always 32.
but instead of hardcoding 32 everywhere, using key_length is just better
readable and also more flexible for the future.

==

borg/hashindex.pyx
==================
608c093;Thomas Waldmann;2015-08-15 20:52:14 +0200;borg list --short, remove requirement for fakeroot, xfail a test
borg list --short just spills out the list of files / dirs - better for some tests
and also useful on the commandline for interactive use.

the tests previously needed fakeroot because in the test setup it always
made calls to mknod and chown, which require (fake)root.
now, the tests adapt to whether it detects (fake)root or not - to run the
the tests completely, you still need fakeroot, but it won't fail all the archiver
tests just due to failing test setup.

also, a test not working correctly due to fakeroot was found:
it should detect whether a read-only repo is usable, but it failed to do that
because with (fake)root, there is no "read only" (at least not via taking away
 the w permission bits).

==

borg/archiver.py
borg/testsuite/archiver.py
==================
738ed5d;Thomas Waldmann;2015-08-15 17:07:09 +0200;2 small archiver testsuite fixes
environment context manager: if a env var was not present before, it should not be present afterwards

teardown: cd out of the tmpdir before deleting it

==

borg/testsuite/archiver.py
==================
e5b647f;Thomas Waldmann;2015-08-15 16:15:10 +0200;minor lrucache test fix

==

borg/testsuite/lrucache.py
==================
986b70c;Thomas Waldmann;2015-08-15 16:06:09 +0200;Merge branch 'lrucache' of https://github.com/sourcejedi/borg

==
==================
fffe509;TW;2015-08-15 16:03:34 +0200;Merge pull request #129 from ThomasWaldmann/compression
compression flexibility, new none, lz4 and lzma compression
==
==================
e1de3dc;Thomas Waldmann;2015-08-15 15:49:11 +0200;integrate compression branch changes into change history for 0.25

==

CHANGES.rst
==================
1d16e7a;Thomas Waldmann;2015-08-15 15:45:15 +0200;compression: update / refine docs

==

README.rst
docs/internals.rst
docs/quickstart.rst
docs/support.rst
docs/usage.rst
==================
bf75773;Thomas Waldmann;2015-08-14 23:24:04 +0200;Merge branch 'master' into compression

==
==================
a6b6712;Thomas Waldmann;2015-08-14 23:00:04 +0200;deprecate the numeric --compression argument, rename null compression to none, update CHANGES

==

CHANGES.rst
borg/archiver.py
borg/compress.pyx
borg/helpers.py
borg/key.py
borg/testsuite/compress.py
borg/testsuite/helpers.py
==================
02b3fbb;Alan Jenkins;2015-08-14 14:44:32 +0100;lrucache: change test case to py.test
I re-wrote lrucache (and it seems like no-one had looked at it much
before :).  I was told my test function would have been simpler in
native py.test, so let's have a go converting it all.

We can avoid any reference to unittest, because lrucache doesn't write
files so it doesn't need any of our custom assertion helpers.

==

borg/testsuite/lrucache.py
==================
0ee7824;Alan Jenkins;2015-08-14 11:59:26 +0100;lrucache: test added code
Tests saved my butt, so I'd better contribute :).

These tests have been tested - substituting a null dispose function
causes an immediate failure.

==

borg/testsuite/lrucache.py
==================
5e0013c;Alan Jenkins;2015-08-14 10:59:21 +0100;Merge branch 'master' into lrucache

==
==================
76f6737;Alan Jenkins;2015-08-14 10:14:17 +0100;lrucache: cleanup (-10 lines)
dict.pop() will raise KeyError for us if necessary.  I was confused
because we used to have lrucache.pop() with a bug, that returned None
instead.

Great catch by @ThomasWaldmann.

==

attic/lrucache.py
==================
db29826;Alan Jenkins;2015-08-13 11:02:00 +0100;Cleanup error-raising in added code
At least one programmer is confused by my abuse of KeyError()
as a sentinel value.  Let's call the sentinel value _NotFound
instead, and let's avoid re-creating it on each call.

I have a new favourite line of code, "if item is _NotFound" :).
Thanks to @ThomasWaldmann for all these review suggestions.

==

attic/lrucache.py
==================
9ba7daa;Alan Jenkins;2015-08-12 23:30:26 +0100;lrucache - simpler _not_ to inherit from dict
We need to make sure dispose() is always called when necessary.
Using inheritance it's just too easy to forget a method,
that we needed to override.

I also find it confusing when an override method calls another
method, and you have yet to see whether the latter method is
overridden or not.  It didn't help that most of these methods
are actually operator overloads.

This turns out to require _less_ code :-).
(Admittedly the code could have been reduced a bit anyway
because python3's super() can be called without any arguments).

==

attic/lrucache.py
attic/testsuite/lrucache.py
==================
e3f671c;Alan Jenkins;2015-08-12 23:13:34 +0100;We forgot to close files which fell out the lrucache
The initializer now takes a dispose function.  lrucache
claims ownership of the items it contains and will dispose
deleted items.  Ownership can naturally be reclaimed by calling
pop() for the item.

==

attic/lrucache.py
attic/repository.py
attic/testsuite/lrucache.py
==================
3100fac;Thomas Waldmann;2015-08-12 17:03:30 +0200;fix archiver test to not expect backup of the UF_NODUMP file, try 2

==

borg/testsuite/archiver.py
==================
0481424;Thomas Waldmann;2015-08-12 16:41:30 +0200;fix archiver test to not expect backup of the UF_NODUMP file

==

borg/testsuite/archiver.py
==================
2194d98;Thomas Waldmann;2015-08-12 16:04:41 +0200;update CHANGES

==

CHANGES.rst
==================
b512827;Thomas Waldmann;2015-08-12 15:57:54 +0200;Merge branch 'honor_nodump' of https://github.com/jeffrizzo/attic

==
==================
02ccf37;Thomas Waldmann;2015-08-12 15:16:44 +0200;Merge branch 'minor' of https://github.com/sourcejedi/attic

==
==================
0488743;Alan Jenkins;2015-08-12 11:32:12 +0100;recover_segment(): don't assume we have an fd for segment
Suggested by @ThomasWaldmann.  Avoiding a complex assumption
should make the code easier to understand and maintain.

(Technically we do have an fd for the segment, because
the only caller opens the segment and checks it before
calling for repair.)

==

attic/repository.py
==================
d83b919;Alan Jenkins;2015-08-12 11:20:02 +0100;Style fix in added code
PEP8 says to prefer "is not None"

==

attic/repository.py
==================
8300efb;Thomas Waldmann;2015-08-12 04:28:31 +0200;remote: pragma: no cover for the stuff we can't test

==

borg/remote.py
==================
4d8949e;Thomas Waldmann;2015-08-12 04:09:36 +0200;archiver: more tests

==

borg/archiver.py
borg/testsuite/archiver.py
==================
feff0f0;Thomas Waldmann;2015-08-12 03:15:44 +0200;install docs: replace hack for llfuse with proper solution
found out why it could not install llfuse into virtual env: it always complained about
not being able to find fuse.pc - which is part of libfuse-dev / fuse-devel and was missing.

once one adds the fuse dev stuff, llfuse installs to virtual env without problems.

==

docs/installation.rst
==================
b16dc03;Thomas Waldmann;2015-08-12 02:27:41 +0200;tests for CompressionSpec

==

borg/testsuite/helpers.py
==================
e06b0b3;Thomas Waldmann;2015-08-12 01:04:03 +0200;use C99's uintmax_t and %ju format
whatever size_t and off_t is, should even fit in there

==

borg/_hashindex.c
==================
3321a88;Alan Jenkins;2015-08-10 22:37:32 +0100;io.write_commit() already implies io.close_segment()

==

attic/repository.py
==================
57845c0;Alan Jenkins;2015-08-10 16:48:19 +0100;Clean up fds of segments we delete (during compaction)
When we delete a segment, let's close its fd as well.
Note as well wasting the fd, this was forcing the
filesystem to preserve the deleted file until we exited.

I noticed roughly 20 open fds of deleted files when
attic saved 10G of data.

==

attic/repository.py
==================
1724241;Thomas Waldmann;2015-08-10 20:45:15 +0200;README: mention lzma and lz4 compression

==

README.rst
==================
8b1d46c;Thomas Waldmann;2015-08-10 20:36:21 +0200;docs: more about compression

==

docs/internals.rst
docs/quickstart.rst
docs/usage.rst
==================
abe2958;Thomas Waldmann;2015-08-10 00:03:19 +0200;install lz4 from brew

==

.travis/install.sh
==================
8af3aa3;Thomas Waldmann;2015-08-09 23:51:46 +0200;merged master

==
==================
8223790;Thomas Waldmann;2015-08-09 22:32:14 +0200;added some sidebar links

==

docs/_themes/local/sidebarusefullinks.html
==================
1e35f5c;Thomas Waldmann;2015-08-09 21:22:55 +0200;minor fixes to CHANGES

==

CHANGES.rst
==================
69456e0;Thomas Waldmann;2015-08-09 19:02:35 +0200;cache sync: change progress output to separate lines
printing without \n plus sys.stdout.flush() didn't work as expected.

==

borg/cache.py
==================
197ca9c;Thomas Waldmann;2015-08-09 16:19:53 +0200;C merge code: cast to correct pointer type, silences warning

==

borg/_hashindex.c
==================
955ac9c;Thomas Waldmann;2015-08-09 14:26:54 +0200;get rid of testsuite.mock, directly import from mock
this was left over from times when we either used mock from stdlib
or pypi mock. but as we only use pypi mock now, the indirection is
not needed any more.

==

borg/testsuite/archive.py
borg/testsuite/archiver.py
borg/testsuite/mock.py
borg/testsuite/repository.py
==================
4c668a8;Thomas Waldmann;2015-08-09 14:16:56 +0200;update docs copyright (to be same as project copyright)

==

docs/conf.py
==================
7ffdfe1;Thomas Waldmann;2015-08-09 14:10:53 +0200;update CHANGES

==

CHANGES.rst
==================
74e5860;Thomas Waldmann;2015-08-09 13:47:36 +0200;document that passphrase(-only) mode is deprecated

==

CHANGES.rst
borg/archiver.py
==================
e74c87d;Thomas Waldmann;2015-08-09 12:52:39 +0200;update borg check help

==

borg/archiver.py
==================
80ee8b9;Thomas Waldmann;2015-08-09 12:43:57 +0200;fix the repair mode
if one used --last (or since shortly: gave an archive name), verify_chunks (old method name) was
not called because it requires all archives having been checked.

the problem was that also the final manifest.write() and repository.commit() was done in that method,
so all other repair work did not get committed in that case.

I moved these calls that to a separate finish() method.

==

borg/archive.py
==================
4f6c43b;Thomas Waldmann;2015-08-09 00:36:17 +0200;document what borg check does, fixes #138

==

borg/archive.py
borg/archiver.py
==================
03f39c2;Thomas Waldmann;2015-08-08 22:11:40 +0200;borg check: give a named single archive to it, fixes #139

==

borg/archive.py
borg/archiver.py
==================
35b0f38;Thomas Waldmann;2015-08-08 21:14:13 +0200;cache sync: show progress indication
sync can take quite long, so show what we are doing.

==

borg/cache.py
==================
cce0d20;Thomas Waldmann;2015-08-08 20:52:05 +0200;test whether borg extract can process unusual filenames

==

borg/testsuite/archiver.py
==================
616d16a;Thomas Waldmann;2015-08-08 20:50:21 +0200;add help string for --no-files-cache, fixes #140

==

borg/archiver.py
==================
60e3496;Thomas Waldmann;2015-08-08 19:22:25 +0200;codecov: fixes for env vars and osx

==

.travis/upload_coverage.sh
==================
a9027a0;Thomas Waldmann;2015-08-08 19:12:14 +0200;coverage: omit some infrastructure / generated files

==

.coveragerc
==================
40801d7;Thomas Waldmann;2015-08-08 19:03:37 +0200;remove old unittest discover / runner code, we use py.test now

==

borg/testsuite/__init__.py
borg/testsuite/run.py
==================
6164640;Thomas Waldmann;2015-08-08 02:34:42 +0200;add codecov.io badge

==

README.rst
==================
5864bd7;Thomas Waldmann;2015-08-08 01:55:46 +0200;fix test coverage / codecov.io, use xcode6.4

==

.coveragerc
.gitignore
.travis.yml
.travis/install.sh
.travis/upload_coverage.sh
requirements.d/development.txt
tox.ini
==================
ba75356;Thomas Waldmann;2015-08-07 15:17:07 +0200;add OS X to travis

==

.travis.yml
.travis/install.sh
.travis/run.sh
.travis/upload_coverage.sh
==================
a1e039b;Thomas Waldmann;2015-08-06 23:32:53 +0200;reimplement the chunk index merging in C
the python code could take a rather long time and likely most of it was converting stuff from python to C and back.

==

borg/_hashindex.c
borg/cache.py
borg/hashindex.pyx
borg/testsuite/hashindex.py
==================
7e21d95;Thomas Waldmann;2015-08-06 16:40:38 +0200;fix CHANGES.rst filename in MANIFEST.in

==

MANIFEST.in
==================
58d57df;Thomas Waldmann;2015-08-06 16:39:50 +0200;improve README.rst

==

README.rst
==================
dcdcbda;Thomas Waldmann;2015-08-06 15:17:07 +0200;try if readthedocs finds the borg package this way

==

docs/conf.py
==================
e3baeef;Thomas Waldmann;2015-08-06 13:10:56 +0200;docs: reorganize sidebar, prev/next at top

==

docs/conf.py
==================
d65ca51;Thomas Waldmann;2015-08-06 12:59:51 +0200;deduplicate and refactor the docs
README.rst (shown on github and also at the start of the html docs) shall
be like an elevator speech - convince readers in a very short time.
this is most important, everything else can come after we got the reader's interest.

include README into docs to avoid duplication.
also include CHANGES into docs.
add developer docs, move examples from tox.ini there
add separate support docs
remove glossary, most of what was there can be understood by an admin from context
move attic and compatibility note to the end

==

CHANGES
CHANGES.rst
README.rst
docs/changes.rst
docs/development.rst
docs/foreword.rst
docs/index.rst
docs/intro.rst
docs/support.rst
tox.ini
==================
5b441f7;Thomas Waldmann;2015-08-04 13:30:35 +0200;some small Cython code improvements, thanks to Stefan Behnel

==

borg/hashindex.pyx
==================
45e3c3d;Thomas Waldmann;2015-08-04 13:22:04 +0200;add some compatibility notes about the umask

==

CHANGES
==================
8e717c5;Thomas Waldmann;2015-08-04 12:49:13 +0200;updated CHANGES

==

CHANGES
==================
175a6d7;Thomas Waldmann;2015-08-04 12:31:06 +0200;simplify umask code
in a similar way as the remote_path code was implemented:
just patch the RemoteRepository class object

==

borg/archiver.py
borg/helpers.py
borg/remote.py
==================
741715c;TW;2015-08-04 12:12:28 +0200;Merge pull request #134 from ThomasWaldmann/remotepath
implement --remote-path to allow non-default-path borg locations
==
==================
7164624;Thomas Waldmann;2015-08-04 09:53:26 +0200;implement --remote-path to allow non-default-path borg locations

==

borg/archiver.py
borg/remote.py
==================
d567537;TW;2015-08-04 09:23:15 +0200;Merge pull request #133 from ThomasWaldmann/umask
implement --umask M
==
==================
9f1d92c;Thomas Waldmann;2015-08-03 23:48:56 +0200;implement --umask M
affects local and remote umask, secure by default M == 077

==

borg/archiver.py
borg/helpers.py
borg/remote.py
borg/testsuite/archiver.py
==================
4c0012b;Thomas Waldmann;2015-08-03 00:31:33 +0200;add lzma compression
needs python 3.3+, on 3.2 it won't be available.

==

borg/archiver.py
borg/compress.pyx
borg/helpers.py
borg/testsuite/compress.py
==================
946507a;Thomas Waldmann;2015-08-02 22:24:02 +0200;fix travis to install liblz4-dev from ppa
it is not available in ubuntu 12.04 by default.

==

.travis.yml
==================
a15daf3;Thomas Waldmann;2015-08-02 18:21:28 +0200;add liblz4-dev to travis installation packages

==

.travis.yml
==================
8997766;Thomas Waldmann;2015-08-02 18:10:30 +0200;integrate compress code, new compression spec parser for commandline
New null and lz4 compression.
Giving -C 0 now uses null compression, not zlib level 0 any more
(null has almost zero overhead while zlib-level0 still had to package everything into zlib frames).
Giving -C 10 uses new lz4 compression, super fast compression and even faster decompression.
See borg create --help (and --compression argument).

fix some issues, clean up, optimize:
CNULL: always return bytes
LZ4: deal with getting memoryviews
Compressor: give bytes to detect(), avoid memoryviews
for lz4, always use same COMPR_BUFFER, avoid memory management costs.
check --chunker-params CHUNK_MAX_EXP upper limit

==

borg/archiver.py
borg/compress.pyx
borg/helpers.py
borg/key.py
==================
746984c;Thomas Waldmann;2015-08-02 01:21:41 +0200;compress: add tests, zlib and null compression, ID header and autodetection

==

borg/compress.pyx
borg/testsuite/compress.py
==================
27de1b0;Thomas Waldmann;2015-08-01 15:07:54 +0200;add a wrapper around liblz4

==

.gitignore
borg/compress.pyx
docs/global.rst.inc
docs/installation.rst
setup.py
==================
3be55be;Thomas Waldmann;2015-07-30 15:21:13 +0200;chunker: n needs to be a signed size_t
... as it is also used for the read() return value, which can be negative in case of errors.

==

borg/_chunker.c
==================
9d21e4a;Thomas Waldmann;2015-07-29 21:48:57 +0200;docs: add some words about resource usage (fixed wording)

==

docs/usage.rst
==================
1e097bf;Thomas Waldmann;2015-07-29 21:39:20 +0200;docs: add some words about resource usage

==

docs/usage.rst
==================
ebc04b0;Jeff Rizzo;2015-07-28 15:01:42 -0700;Check for lchflags properly.

==

attic/archiver.py
==================
e11a4a5;Jeff Rizzo;2015-07-28 12:30:25 -0700;Check the UF_NODUMP flag properly.

==

attic/archiver.py
==================
8119124;Jeff Rizzo;2015-07-28 11:39:00 -0700;Don't process an entry if the nodump flag is set.

==

attic/archiver.py
==================
300c735;Thomas Waldmann;2015-07-27 23:02:52 +0200;be more verbose about the great deduplication algorithm

==

README.rst
==================
729cc4d;Thomas Waldmann;2015-07-27 22:27:13 +0200;document how to backup raw disk

==

docs/usage.rst
==================
60dfde2;Per Guth;2015-07-27 14:45:32 +0200;Reference to BorgWeb

==

README.rst
==================
30d47cb;Per Guth;2015-07-27 14:41:43 +0200;Fixed *ALL* the links!

==

README.rst
==================
bcdfda7;Per Guth;2015-07-27 14:38:03 +0200;Linked "issue #1" to issue #1.

==

README.rst
==================
c8d55e7;TW;2015-07-26 17:42:30 +0200;Merge pull request #115 from ThomasWaldmann/delete-repo
repo delete: add destroy to allowed rpc methods, fixes issue #114
==
==================
1955450;Thomas Waldmann;2015-07-26 17:38:16 +0200;repo delete: add destroy to allowed rpc methods, fixes issue #114
also: add test, automate YES confirmation for testing

==

borg/archiver.py
borg/remote.py
borg/testsuite/archiver.py
==================
fde952a;Thomas Waldmann;2015-07-26 15:37:36 +0200;.gitignore: add nuitka and cache stuff

==

.gitignore
==================
fb998cb;Thomas Waldmann;2015-07-26 14:47:18 +0200;docs: add note about how to run borg from virtual env

==

docs/installation.rst
==================
859c33d;Thomas Waldmann;2015-07-25 19:07:24 +0200;docs: add solutions for (ll)fuse installation problems

==

docs/installation.rst
==================
12a50bc;Thomas Waldmann;2015-07-25 18:38:16 +0200;tested and updated cygwin docs, thanks to fvia

==

docs/installation.rst
==================
02d3376;TW;2015-07-25 17:07:45 +0200;Merge pull request #112 from ioggstream/testing-borg
add development.txt and modify tox.ini
==
==================
0b226ae;Roberto Polli;2015-07-25 15:39:42 +0200;add development.txt and modify tox.ini

==

requirements.d/development.txt
tox.ini
==================
59c519b;Thomas Waldmann;2015-07-25 15:37:30 +0200;remove outdated locking problem warning

==

docs/quickstart.rst
==================
ed2548c;Thomas Waldmann;2015-07-20 16:16:32 +0200;add a __main__.py to nuitka works

==

borg/__main__.py
==================
2907dd0;Thomas Waldmann;2015-07-17 22:55:28 +0200;add BountySource link

==

docs/_themes/local/sidebarusefullinks.html
==================
ebd6fd5;TW;2015-07-16 23:54:35 +0200;Merge pull request #101 from tgharold/tgharold-patch-1
Fix format issue in installation.rst for Cygwin
==
==================
e3472a2;Thomas Harold;2015-07-16 16:40:33 -0400;Fix format issue in installation.rst for Cygwin
Fixed formatting issue in installation.rst where packages were listed all on one line.
==

docs/installation.rst
==================
e17ca51;Thomas Waldmann;2015-07-15 13:54:25 +0200;Update CHANGES

==

CHANGES
==================
9cb038a;TW;2015-07-15 13:43:44 +0200;Merge pull request #99 from ThomasWaldmann/attic_issue_232
fix Traceback when running check --repair, attic issue #232
==
==================
e4a41c8;Thomas Waldmann;2015-07-15 13:32:05 +0200;fix Traceback when running check --repair, attic issue #232
This fix is maybe not perfect yet, but maybe better than nothing.

A comment by Ernest0x (see https://github.com/jborg/attic/issues/232 ):

@ThomasWaldmann your patch did the job.
attic check --repair did the repairing and attic delete deleted the archive.
Thanks.

That said, however, I am not sure if the best place to put the check is where
you put it in the patch. For example, the check operation uses a custom msgpack
unpacker class named "RobustUnpacker", which it does try to check for correct
format (see the comment: "Abort early if the data does not look like a
serialized dict"), but it seems it does not catch my case. The relevant code
in 'cache.py', on the other hand, uses msgpack's Unpacker class.

==

borg/archive.py
borg/cache.py
==================
9b9c808;Thomas Waldmann;2015-07-15 11:30:25 +0200;fixed some minor issues found by pycharm/pytest-flakes

==

borg/archive.py
docs/conf.py
==================
cc88d17;Thomas Waldmann;2015-07-15 11:14:53 +0200;fix typos

==

borg/remote.py
borg/repository.py
borg/testsuite/archiver.py
==================
8885fa0;TW;2015-07-15 00:12:39 +0200;Merge pull request #96 from ThomasWaldmann/keyfile-in-repo
repo key mode (and deprecate passphrase mode), fixes #85
==
==================
50c0bb0;Thomas Waldmann;2015-07-15 00:05:18 +0200;Merge branch 'master' into keyfile-in-repo

==
==================
b644565;Thomas Waldmann;2015-07-15 00:01:07 +0200;repo key mode (and deprecate passphrase mode), fixes #85
see usage.rst change for a description and why this is needed

==

borg/archiver.py
borg/key.py
borg/remote.py
borg/repository.py
borg/testsuite/archive.py
docs/usage.rst
==================
f330b4b;Thomas Waldmann;2015-07-14 21:31:35 +0200;some doc updates, see below
faq about redundancy / integrity
compression is optional
having borg installed on backup server is optional (but faster)
cygwin installation tipps
do not document passphrase encryption mode example, use keyfile mode

==

docs/faq.rst
docs/foreword.rst
docs/index.rst
docs/installation.rst
docs/usage.rst
==================
3c34ef8;Thomas Waldmann;2015-07-14 20:25:10 +0200;clarify that borg extract uses the cwd as extraction target

==

docs/usage.rst
==================
b5bdb52;Thomas Waldmann;2015-07-14 00:43:35 +0200;update internals doc about chunker params, memory usage and compression

==

docs/internals.rst
==================
b2f460d;Thomas Waldmann;2015-07-13 23:20:46 +0200;fix filenames used for locking, update docs about locking

==

borg/cache.py
borg/locking.py
borg/repository.py
docs/internals.rst
==================
b539169;Thomas Waldmann;2015-07-13 23:03:09 +0200;update CHANGES

==

CHANGES
==================
b3f135c;TW;2015-07-13 19:27:24 +0200;Merge pull request #94 from ThomasWaldmann/locking
New Locking code
==
==================
43bc1d5;Thomas Waldmann;2015-07-13 18:45:49 +0200;improved tox configuration, documented there how to invoke it
the usage of some py.test features in the previous locking changesets somehow broke the test environment.

it seems to help to point py.test to some specific package or module (and not just invoke "py.test" without arguments).

==

tox.ini
==================
2deb520;Thomas Waldmann;2015-07-13 16:45:18 +0200;locking code: extract timeout/sleep code into reusable TimeoutTimer class

==

borg/locking.py
borg/testsuite/locking.py
==================
e4c519b;Thomas Waldmann;2015-07-13 12:22:49 +0200;new locking code
exclusive locking by atomic mkdir fs operation
on top of that, shared (read) locks and exclusive (write) locks using a json roster.

==

borg/cache.py
borg/locking.py
borg/repository.py
borg/testsuite/locking.py
borg/testsuite/repository.py
==================
434dac0;Thomas Waldmann;2015-07-12 03:19:23 +0200;move locking code to own module, same for locking tests
fix imports, no other changes.

==

borg/cache.py
borg/helpers.py
borg/locking.py
borg/repository.py
borg/testsuite/helpers.py
borg/testsuite/locking.py
borg/testsuite/repository.py
==================
dda78d1;TW;2015-07-12 23:38:54 +0200;Merge pull request #93 from ThomasWaldmann/mockfix
Mockfix
==
==================
d8e9a9b;Thomas Waldmann;2015-07-12 23:29:34 +0200;skip test_crash_before_compact test for RemoteRepository
it was silently failing until recently. and it can't work the way it is on RemoteRepository.
it's still active (and now even really working) for the (local) Repository tests.

==

borg/testsuite/repository.py
==================
414dba3;Thomas Waldmann;2015-07-12 23:08:44 +0200;remove usage of evil / broken unittest.mock, use mock from pypi
see testsuite.mock docstring for more details.

one test shows brokenness right now that was hidden / silent until now.

==

borg/testsuite/mock.py
borg/testsuite/repository.py
tox.ini
==================
6ed0864;TW;2015-07-12 15:28:40 +0200;Merge pull request #90 from RonnyPfannschmidt/entrypoints
use entrypoints instead of scripts, for better use of the wheel format and modern installs
==
==================
922a1f6;Ronny Pfannschmidt;2015-07-12 15:07:24 +0200;never fall back to distutils, any sane install method uses setuptools

==

setup.py
==================
45e89ad;Ronny Pfannschmidt;2015-07-12 15:00:47 +0200;switch to entrypoints

==

scripts/borg
setup.py
==================
f6ba79d;TW;2015-07-12 00:28:12 +0200;Merge pull request #89 from ThomasWaldmann/RepoCache
create a RepositoryCache implementation that can cope with any amount…
==
==================
bd354d7;Thomas Waldmann;2015-07-12 00:18:49 +0200;create a RepositoryCache implementation that can cope with any amount of data, fixes attic #326
the old code blows up with an integer OverflowError when the cache file goes beyond 2GiB size.
the new code just reuses the Repository implementation as a local temporary key/value store.

still an issue: if the place where the temporary RepositoryCache is stored (usually /tmp) can't
cope with the cache size and runs full.

if you copy data from a fuse mount, the cache size is the copied deduplicated data size.
so, if you have lots of data to extract (more than your /tmp can hold), rather do not use fuse!

besides fuse mounts, this also affects attic check and cache sync (in these cases, only the
metadata size counts, but even that can go beyond 2GiB for some people).

==

borg/remote.py
borg/repository.py
==================
afae720;Thomas Waldmann;2015-07-11 20:08:22 +0200;document environment variables

==

docs/usage.rst
==================
d1bb892;Thomas Waldmann;2015-07-11 19:45:37 +0200;fix placement of return codes docs

==

docs/usage.rst
==================
05b21e3;Thomas Waldmann;2015-07-11 19:27:00 +0200;document return codes

==

docs/usage.rst
==================
4b81f38;TW;2015-07-11 18:39:42 +0200;Merge pull request #88 from ThomasWaldmann/py3style
style and cosmetic fixes, no semantic changes
==
==================
0580f2b;Thomas Waldmann;2015-07-11 18:31:49 +0200;style and cosmetic fixes, no semantic changes
use simpler super() syntax of python 3.x

remove fixed errors/warnings' codes from setup.cfg flake8 configuration

fix file exclusion list for flake8

==

borg/archive.py
borg/cache.py
borg/fuse.py
borg/helpers.py
borg/key.py
borg/lrucache.py
borg/remote.py
borg/testsuite/__init__.py
borg/testsuite/archiver.py
borg/testsuite/helpers.py
borg/testsuite/platform.py
setup.cfg
setup.py
==================
13f4006;TW;2015-07-11 17:33:50 +0200;Merge pull request #87 from ThomasWaldmann/tmpfile
use borg-tmp as prefix for temporary files / directories
==
==================
a59211f;Thomas Waldmann;2015-07-11 17:22:12 +0200;use borg-tmp as prefix for temporary files / directories
also: remove some unused temp dir. code

==

borg/archive.py
borg/cache.py
borg/fuse.py
borg/remote.py
borg/xattr.py
==================
bd5e1ff;TW;2015-07-04 13:50:28 +0200;Merge pull request #75 from ThomasWaldmann/master
update AUTHORS
==
==================
729a48f;TW;2015-07-03 00:04:59 +0200;Merge pull request #76 from JaCoB1123/internals-compression
Update docs/internals.rst to mention compression changes
==
==================
8de8073;Jan Bader;2015-07-02 23:23:45 +0200;Improve wording

==

docs/internals.rst
==================
028e124;Jan Bader;2015-07-02 23:21:28 +0200;Update internals to reflect new --compression argument

==

docs/internals.rst
==================
95828c5;Thomas Waldmann;2015-07-02 23:05:14 +0200;update AUTHORS
I merged some pull requests of other developers into borg and now added
them to the developers / contributors list, with permission.

In general, feel free to add yourself to the list if you contributed something
to borg - just make a pull request including your addition to AUTHORS.

That's way easier for me than having to ask whether you want to be in there
and how precisely... - just write your entry yourself!

==

AUTHORS
==================
77577b7;Thomas Waldmann;2015-06-29 23:30:36 +0200;add related projects, fix web site url

==

docs/_themes/local/sidebarusefullinks.html
==================
9ead409;Thomas Waldmann;2015-06-29 23:07:07 +0200;we are now on #borgbackup on chat.freenode.net
it seems like there is currently no bureaucracy required, freenode web site says group registration is suspended.
i also asked on the freenode channel, they said just make sure you are right here and use it. so we do that now.

==

docs/index.rst
==================
4068fc1;Thomas Waldmann;2015-06-28 14:02:38 +0200;clarify help text, fixes #73

==

borg/archiver.py
==================
562f3c7;TW;2015-06-27 22:17:02 +0200;Merge pull request #72 from ThomasWaldmann/loggedio-exceptions
Loggedio exceptions
==
==================
08688fb;Thomas Waldmann;2015-06-27 22:02:26 +0200;Merge branch 'master' into loggedio-exceptions
Conflicts:
	borg/repository.py

==
==================
3303619;TW;2015-06-26 01:19:29 +0200;Merge pull request #69 from ThomasWaldmann/fix-prune-options
the short prune options without "keep-" are deprecated, so do not sug…
==
==================
6709ec5;TW;2015-06-26 00:30:56 +0200;Merge pull request #68 from ThomasWaldmann/improve-exit-logging
improve at-end error logging
==
==================
b92dd1b;Thomas Waldmann;2015-06-26 00:04:35 +0200;the short prune options without "keep-" are deprecated, so do not suggest them

==

borg/archiver.py
==================
89db9b8;Thomas Waldmann;2015-06-25 23:57:38 +0200;improve at-end error logging
always use archiver.print_error, so it goes to sys.stderr

always say "Error: ..." for errors

for rc != 0 always say "Exiting with failure status ..."

catch all exceptions subclassing Exception, so we can log them in same way and set exit_code=1

==

borg/archiver.py
==================
e4c4d45;TW;2015-06-25 22:41:43 +0200;Merge pull request #67 from ThomasWaldmann/zlib-compression-level
borg create --compression 0..9 for variable compression
==
==================
6964799;Thomas Waldmann;2015-06-25 22:16:23 +0200;borg create --compression 0..9 for variable compression

==

borg/archiver.py
borg/key.py
docs/misc/create_compression.txt
==================
2944bbe;Thomas Waldmann;2015-06-21 02:36:22 +0200;update CHANGES

==

CHANGES
==================
a487e16;TW;2015-06-21 02:11:54 +0200;Merge pull request #62 from ThomasWaldmann/chunker-params
Chunker params, fixes #16
==
==================
41a37e7;Thomas Waldmann;2015-06-21 02:11:02 +0200;add a misc docs directory, add a usecase for --chunker-params

==

docs/misc/create_chunker-params.txt
==================
54e8dd8;Thomas Waldmann;2015-06-21 01:46:41 +0200;misc chunker parameter changes
- use power-of-2 sizes / n bit hash mask so one can give them more easily
- chunker api: give seed first, so we can give *chunker_params after it
- fix some tests that aren't possible with 2^N
- make sparse file extraction zero detection flexible for variable chunk max size

==

borg/archive.py
borg/archiver.py
borg/chunker.pyx
borg/testsuite/archiver.py
borg/testsuite/chunker.py
docs/usage.rst
==================
44ec864;TW;2015-06-20 14:32:19 +0200;Merge pull request #60 from ThomasWaldmann/chunk-counts
determine and report chunk counts in chunks index
==
==================
3b9b976;Thomas Waldmann;2015-06-20 01:20:46 +0200;borg create --chunker-params=...

==

borg/archive.py
borg/archiver.py
borg/helpers.py
==================
6d0a004;Thomas Waldmann;2015-06-19 23:53:23 +0200;determine and report chunk counts in chunks index
borg info repo::archive now reports unique chunks count, total chunks count

also: use index->key_size instead of hardcoded value

==

borg/_hashindex.c
borg/hashindex.pyx
borg/helpers.py
==================
b41b7d0;TW;2015-06-18 23:35:56 +0200;Merge pull request #59 from ThomasWaldmann/fix-no-remote-borg
better Exception msg if there is no Borg installed on the remote repo…
==
==================
2743ab1;Thomas Waldmann;2015-06-18 23:18:05 +0200;better Exception msg if there is no Borg installed on the remote repository server
(still a bit ugly to get even 2 tracebacks)

==

borg/remote.py
==================
9eaaaed;TW;2015-06-15 15:07:54 +0200;Merge pull request #55 from pguth/patch-1
Update installation.rst
==
==================
e168b41;Per Guth;2015-06-15 14:40:11 +0200;Update installation.rst

==

docs/installation.rst
==================
041357e;Per Guth;2015-06-15 14:39:04 +0200;Update installation.rst
Replicated Ubuntus dependency list.
==

docs/installation.rst
==================
1dc00e7;Per Guth;2015-06-15 13:09:39 +0200;Update installation.rst
please test on fresh installation.
==

docs/installation.rst
==================
9880ac7;Thomas Waldmann;2015-06-12 00:11:16 +0200;README: mention pytest

==

README.rst
==================
98a0157;Thomas Waldmann;2015-06-12 00:05:35 +0200;forgot to list some 0.23.0 stuff in CHANGES

==

CHANGES
==================
c7da105;Thomas Waldmann;2015-06-11 23:04:31 +0200;add AUTHORS to MANIFEST.in, so it gets included in releases

==

MANIFEST.in
==================
a3b5a1b;Thomas Waldmann;2015-06-11 22:56:53 +0200;add first borg release version number to CHANGES

==

CHANGES
==================
e92d94c;Thomas Waldmann;2015-06-11 22:54:33 +0200;rephrase compatibility note

==

README.rst
==================
f5cb49f;TW;2015-06-11 22:41:00 +0200;Merge pull request #52 from ThomasWaldmann/doc-update
Doc update
==
==================
d1f56d4;Thomas Waldmann;2015-06-11 22:29:02 +0200;update AUTHORS

==

AUTHORS
==================
21cfdde;Thomas Waldmann;2015-06-11 22:26:02 +0200;adjust docs theme colours for note divs

==

docs/_themes/local/static/local.css_t
==================
dd78e1a;Thomas Waldmann;2015-06-11 22:18:12 +0200;improve docs, usage help, changelog

==

CHANGES
borg/archiver.py
docs/faq.rst
docs/installation.rst
==================
edd0d49;TW;2015-06-10 00:31:25 +0200;Merge pull request #49 from ThomasWaldmann/improve-internals-docs
improve internals docs
==
==================
83f520c;Thomas Waldmann;2015-06-07 02:15:13 +0200;improve internals docs

==

docs/internals.rst
==================
c97a353;TW;2015-06-05 23:30:08 +0200;Merge pull request #47 from ThomasWaldmann/magic-length
don't hardcode MAGIC length
==
==================
6142616;Thomas Waldmann;2015-06-02 02:41:23 +0200;don't hardcode MAGIC length

==

borg/_hashindex.c
borg/repository.py
==================
3dce753;Thomas Waldmann;2015-06-02 02:30:07 +0200;LoggedIO: better error checks / exceptions / exception handling
It doesn't just say "error reading segment X", but also what went wrong and at what offset.

==

borg/repository.py
==================
8a5ddcf;TW;2015-05-31 22:08:57 +0200;Merge pull request #42 from ThomasWaldmann/micro-opts
Micro opts
==
==================
646cdca;Thomas Waldmann;2015-05-31 21:53:37 +0200;"extract" micro optimization: first check for regular files, then for directories, check for fifos late
regular files are most common, more than directories. fifos are rare.

was no big issue, the calls are cheap, but also no big issue to just fix the order.

==

borg/archive.py
==================
ed1e5e9;Thomas Waldmann;2015-05-31 21:23:36 +0200;"create" micro optimization: do not check for sockets early
they are rare, so it's pointless to check for them first.

seen the stat..S_ISSOCK in profiling results with high call count.
was no big issue, that call is cheap, but also no big issue to just fix the order.

==

borg/archiver.py
==================
6937115;TW;2015-05-31 19:27:23 +0200;Merge pull request #33 from ThomasWaldmann/quick-sync
speed up chunks cache sync, fixes #18
==
==================
a3f4d19;Thomas Waldmann;2015-05-23 17:07:22 +0200;speed up chunks cache sync, fixes #18
Re-synchronize chunks cache with repository.

If present, uses a compressed tar archive of known backup archive
indices, so it only needs to fetch infos from repo and build a chunk
index once per backup archive.

If out of sync, the tar gets rebuilt from known + fetched chunk infos,
so it has complete and current information about all backup archives.

Finally, it builds the master chunks index by merging all indices from
the tar.

Note: compression (esp. xz) is very effective in keeping the tar
            relatively small compared to the files it contains.

Use python >= 3.3 to get better compression with xz,
there's a fallback to bz2 or gz when xz is not supported.

==

borg/cache.py
==================
95744a1;TW;2015-05-31 19:09:19 +0200;Merge pull request #40 from ThomasWaldmann/one-memcpy-less
One memcpy less
==
==================
8d7fe49;TW;2015-05-31 18:47:25 +0200;Merge pull request #39 from ThomasWaldmann/master
updates by jborg, more error msg improvements, open in binary mode
==
==================
072326f;Thomas Waldmann;2015-05-31 18:41:23 +0200;chunker: get rid of read_buf
if we have a OS file handle, we can directly read to the final destination - one memcpy less.
if we have a Python file object, we get a Python bytes object as read result (can't save the memcpy here).

==

borg/_chunker.c
==================
926454c;Thomas Waldmann;2015-05-31 17:57:45 +0200;explicitely specify binary mode to open binary files
on POSIX OSes, it doesn't make a difference, but it is cleaner and also good for portability.

==

borg/_hashindex.c
borg/cache.py
borg/testsuite/archiver.py
==================
776bb9f;Thomas Waldmann;2015-05-31 17:48:19 +0200;hashindex: improve error messages

==

borg/_hashindex.c
==================
91e10fe;Thomas Waldmann;2015-05-31 17:37:02 +0200;Merge branch 'master' of github.com:jborg/attic

==
==================
374fb94;TW;2015-05-26 02:16:45 +0200;Merge pull request #38 from ThomasWaldmann/fast-list-archives
efficient archive list from manifest, fixes attic #167
==
==================
d067bc3;Thomas Waldmann;2015-05-26 02:04:41 +0200;efficient archive list from manifest
a lot of speedup for:
"list <repo>", "delete <repo>" list, "prune" - esp. for slow connections to remote repositories.

the previous method used metadata from the archive itself, which is (in total) rather large.
so if you had many archives and a slow (remote) connection, it was very slow.

but there is a lot easier way: just use the archives list from the repository manifest - we already
have it anyway and it also has name, id and timestamp for all archives - and that's all we need.

I defined a ArchiveInfo namedtuple that has same element names as seen as attribute names
of the Archive object, so as long as name, id, ts is enough, it can be used in its place.

==

borg/archive.py
borg/archiver.py
borg/helpers.py
==================
2b34810;Jonas Borgström;2015-05-24 21:48:03 +0200;hashindex: Fix hashindex ARM memory alignment issue
Closes #309

==

CHANGES
attic/_hashindex.c
==================
74409e4;Thomas Waldmann;2015-05-23 17:10:45 +0200;Merge github.com:borgbackup/borg

==
==================
8d0c531;Thomas Waldmann;2015-05-23 00:40:30 +0200;remove gh-pages Makefile target (not used)

==

docs/Makefile
==================
10a27da;TW;2015-05-23 00:17:56 +0200;Merge pull request #31 from ThomasWaldmann/master
faq updates, website update automation
==
==================
cd3a769;Thomas Waldmann;2015-05-23 00:15:58 +0200;faq: markup fixes, typos

==

docs/faq.rst
==================
f6442fe;Thomas Waldmann;2015-05-23 00:12:17 +0200;automate updating the borgbackup.github.io repo/website
cd docs ; make gh-io

==

docs/Makefile
==================
9d1560f;Thomas Waldmann;2015-05-22 23:56:29 +0200;faq: updates, fixes

==

docs/faq.rst
==================
7e9fefd;Thomas Waldmann;2015-05-22 23:28:55 +0200;updated CHANGES

==

CHANGES
==================
da8a600;TW;2015-05-22 23:05:08 +0200;Merge pull request #25 from anarcat/fork-faq
explain the reason behind the fork
==
==================
e5e9f9a;TW;2015-05-22 22:58:12 +0200;Merge pull request #30 from ThomasWaldmann/master
tags and a glob fix
==
==================
0ad2ab2;Thomas Waldmann;2015-05-22 22:55:35 +0200;a bit too much glob there in setup.py, removed

==

setup.py
==================
1edd5da;Antoine Beaupré;2015-05-22 16:09:46 -0400;try to clarify link

==

docs/faq.rst
==================
ef373b1;Antoine Beaupré;2015-05-22 16:09:38 -0400;uppercase borg

==

docs/faq.rst
==================
7df45d7;Thomas Waldmann;2015-05-22 21:52:12 +0200;Merged CHANGES from tag '0.16'

==
==================
b6cc2fe;TW;2015-05-22 21:40:34 +0200;Merge pull request #29 from ThomasWaldmann/master
use py.test, add cfg for flake8
==
==================
e1c7da1;Thomas Waldmann;2015-05-22 20:40:43 +0200;add flake8 configuration (style checker)
currently adjusted in a way it does not throw errors and warnings with
the source as it is now.

issues will get fixed over time and the exclude list shall get shorter.

==

setup.cfg
==================
906ea62;Thomas Waldmann;2015-05-22 20:23:37 +0200;use py.test for testing, document it
locally (via tox) and also on travis ci.

==

.travis.yml
docs/installation.rst
setup.cfg
tox.ini
==================
cf1d7b6;TW;2015-05-22 19:54:15 +0200;Merge pull request #27 from ThomasWaldmann/master
rename pkg dir, fix tox 2.0 compat
==
==================
b5b1af2;Thomas Waldmann;2015-05-22 19:30:56 +0200;tox >= 2.0 needs passenv in tox.ini, so that fakeroot can work
tox 2.x does not inherit environment vars by default.

==

tox.ini
==================
5e98400;Thomas Waldmann;2015-05-22 19:21:41 +0200;fix all references to package name
use relative imports if possible
reorder imports (1. stdlib 2. dependencies 3. borg 4. borg.testsuite)

==

.gitattributes
.travis.yml
MANIFEST.in
borg/_version.py
borg/archive.py
borg/archiver.py
borg/cache.py
borg/fuse.py
borg/helpers.py
borg/key.py
borg/platform.py
borg/platform_darwin.pyx
borg/platform_freebsd.pyx
borg/platform_linux.pyx
borg/remote.py
borg/testsuite/__init__.py
borg/testsuite/archive.py
borg/testsuite/archiver.py
borg/testsuite/chunker.py
borg/testsuite/crypto.py
borg/testsuite/hashindex.py
borg/testsuite/helpers.py
borg/testsuite/key.py
borg/testsuite/lrucache.py
borg/testsuite/platform.py
borg/testsuite/repository.py
borg/testsuite/run.py
borg/testsuite/xattr.py
docs/conf.py
scripts/borg
setup.py
tox.ini
==================
78bfc58;Thomas Waldmann;2015-05-22 17:48:54 +0200;rename package directory to borg

==

attic/__init__.py
attic/_chunker.c
attic/_hashindex.c
attic/_version.py
attic/archive.py
attic/archiver.py
attic/cache.py
attic/chunker.pyx
attic/crypto.pyx
attic/fuse.py
attic/hashindex.pyx
attic/helpers.py
attic/key.py
attic/lrucache.py
attic/platform.py
attic/platform_darwin.pyx
attic/platform_freebsd.pyx
attic/platform_linux.pyx
attic/remote.py
attic/repository.py
attic/testsuite/__init__.py
attic/testsuite/archive.py
attic/testsuite/archiver.py
attic/testsuite/chunker.py
attic/testsuite/crypto.py
attic/testsuite/hashindex.py
attic/testsuite/helpers.py
attic/testsuite/key.py
attic/testsuite/lrucache.py
attic/testsuite/mock.py
attic/testsuite/platform.py
attic/testsuite/repository.py
attic/testsuite/run.py
attic/testsuite/xattr.py
attic/xattr.py
borg/__init__.py
borg/_chunker.c
borg/_hashindex.c
borg/_version.py
borg/archive.py
borg/archiver.py
borg/cache.py
borg/chunker.pyx
borg/crypto.pyx
borg/fuse.py
borg/hashindex.pyx
borg/helpers.py
borg/key.py
borg/lrucache.py
borg/platform.py
borg/platform_darwin.pyx
borg/platform_freebsd.pyx
borg/platform_linux.pyx
borg/remote.py
borg/repository.py
borg/testsuite/__init__.py
borg/testsuite/archive.py
borg/testsuite/archiver.py
borg/testsuite/chunker.py
borg/testsuite/crypto.py
borg/testsuite/hashindex.py
borg/testsuite/helpers.py
borg/testsuite/key.py
borg/testsuite/lrucache.py
borg/testsuite/mock.py
borg/testsuite/platform.py
borg/testsuite/repository.py
borg/testsuite/run.py
borg/testsuite/xattr.py
borg/xattr.py
==================
622e05b;Antoine Beaupré;2015-05-21 21:55:29 -0400;add more information about the objectives of borg

==

docs/faq.rst
==================
22acb80;Antoine Beaupré;2015-05-21 21:49:44 -0400;explain the reason behind the fork

==

docs/faq.rst
==================
756e284;TW;2015-05-17 23:20:50 +0200;Merge pull request #19 from ThomasWaldmann/master
toplevel error handler: show tracebacks
==
==================
6c74cae;Thomas Waldmann;2015-05-17 23:08:21 +0200;Merge branch 'print_exc' of ../attic

==
==================
d7cd3bb;Jonas Borgström;2015-05-16 22:49:28 +0200;hashindex: Improve error messages
This should make ENOSPC issues like #298 easier to identify

==

CHANGES
attic/_hashindex.c
==================
7b61f6a;Jonas Borgström;2015-05-16 21:35:31 +0200;Updated CHANGES

==

CHANGES
==================
321b4d1;Jonas Borgström;2015-05-16 21:22:53 +0200;Merge pull request #308 from jdchristensen/patch-1
Use --keep-monthly instead of --monthly in usage.rst
==
==================
10c0f4e;TW;2015-05-15 19:45:59 +0200;Merge pull request #15 from ThomasWaldmann/master
better docs
==
==================
afc2dab;Thomas Waldmann;2015-05-15 19:22:52 +0200;docs: more borg (or project_name)

==

docs/quickstart.rst
docs/usage.rst
==================
56fd965;Thomas Waldmann;2015-05-15 18:35:14 +0200;docs: make clear that remote repos used via ssh need a remote borg

==

docs/usage.rst
==================
839b69b;TW;2015-05-15 01:52:33 +0200;Merge pull request #13 from ThomasWaldmann/master
misc. minor docs fixes
==
==================
37c923d;Thomas Waldmann;2015-05-15 01:50:45 +0200;misc. minor docs fixes

==

docs/conf.py
docs/faq.rst
docs/index.rst
==================
67590aa;Dan Christensen;2015-05-14 19:34:08 -0400;Use --keep-monthly instead of --monthly in usage.rst

==

docs/usage.rst
==================
420214b;TW;2015-05-15 01:07:53 +0200;Merge pull request #12 from ThomasWaldmann/master
fix small doc bug in prune examples, fix attic #306
==
==================
ff0c264;Thomas Waldmann;2015-05-15 01:07:04 +0200;fix small doc bug in prune examples, fix attic #306
--monthly is old/deprecated, --keep-monthly is new way.

==

docs/usage.rst
==================
a69ee0b;TW;2015-05-15 00:44:00 +0200;Merge pull request #11 from ThomasWaldmann/master
merge attic pr #228
==
==================
ee42ba5;Thomas Waldmann;2015-05-15 00:26:11 +0200;attic PR #228 - Merge branch 'fix_ro_target' of ../attic

==
==================
62e272b;TW;2015-05-14 21:06:45 +0200;Merge pull request #10 from ThomasWaldmann/doc-misc
docs: install docs, faq improvements, other minor changes
==
==================
f30d05f;Thomas Waldmann;2015-05-14 20:47:08 +0200;docs: install docs, faq improvements, other minor changes

==

docs/faq.rst
docs/index.rst
docs/installation.rst
docs/quickstart.rst
==================
17cb997;TW;2015-05-14 19:01:20 +0200;Merge pull request #8 from ThomasWaldmann/doc-specialfiles
improve docs about what is preserved and what not
==
==================
c3370a5;Thomas Waldmann;2015-05-14 18:48:14 +0200;improve docs about what is preserved and what not
UNIX domain sockets: explain why not, see attic issue #259
Symlinks: say that they are backed up as is and not followed, replacement for attic PR #294
Sparse files: explain what the "simple" in simple sparse file support means.

Plus some other explanations / mentions that were missing.

==

docs/faq.rst
==================
f392ed6;TW;2015-05-14 17:56:04 +0200;Merge pull request #7 from ThomasWaldmann/improve-docs
Documentation for 'attic serve'
==
==================
7cbff69;Thomas Waldmann;2015-05-14 17:36:53 +0200;Documentation for 'attic serve'
Thanks to @lfam (attic PR #277 )!

Note: As I already had refactored a lot of these pathes you changed, it was easier
to just cherry pick the hunks with the other changes and apply them manually.

==

docs/quickstart.rst
docs/update_usage.sh
docs/usage.rst
==================
b007916;TW;2015-05-14 17:18:00 +0200;Merge pull request #6 from ThomasWaldmann/master
merged attic PR #286 - sigusr1 / sigint handler to print current file infos
==
==================
4ce7541;Thomas Waldmann;2015-05-14 16:46:44 +0200;merged attic PR #286 - sigusr1 / sigint handler to print current file infos

==

attic/archiver.py
==================
7fee5db;Thomas Waldmann;2015-05-14 12:04:38 +0200;add python version classifiers

==

setup.py
==================
5f4e928;Thomas Waldmann;2015-05-14 11:44:58 +0200;add FreeBSD to platforms list in setup.py
it already was present in the classifiers.

==

setup.py
==================
3d5b1cf;Thomas Waldmann;2015-05-14 02:12:36 +0200;updated CHANGES about the name change

==

CHANGES
==================
e939172;Thomas Waldmann;2015-05-14 02:03:42 +0200;prefix issues numbers referring to attic issue tracker with "attic #"

==

CHANGES
==================
673fda3;Thomas Waldmann;2015-05-14 01:25:18 +0200;upgrade versioneer to 0.14, makes PEP440 compliant version numbers now

==

MANIFEST.in
attic/_version.py
setup.py
versioneer.py
==================
c32f4b6;Thomas Waldmann;2015-05-14 00:37:09 +0200;integrate CHANGES-borg.txt into CHANGES and README.rst

==

CHANGES
CHANGES-borg.txt
README.rst
==================
247677d;Thomas Waldmann;2015-05-13 18:51:01 +0200;updated CHANGES-borg.txt

==

CHANGES-borg.txt
==================
a962c19;Thomas Waldmann;2015-05-13 18:45:25 +0200;renamed CHANGES-merge.txt to -borg

==

CHANGES-borg.txt
CHANGES-merge.txt
==================
31fce54;Thomas Waldmann;2015-05-09 22:31:21 +0200;rename cli level test method

==

attic/testsuite/archiver.py
==================
d84bbb7;Thomas Waldmann;2015-05-09 20:52:04 +0200;rename fuse base class

==

attic/archiver.py
attic/fuse.py
==================
0b3710b;Thomas Waldmann;2015-05-09 20:47:50 +0200;rename test base class

==

attic/testsuite/__init__.py
attic/testsuite/archive.py
attic/testsuite/archiver.py
attic/testsuite/chunker.py
attic/testsuite/crypto.py
attic/testsuite/hashindex.py
attic/testsuite/helpers.py
attic/testsuite/key.py
attic/testsuite/lrucache.py
attic/testsuite/platform.py
attic/testsuite/repository.py
attic/testsuite/xattr.py
==================
159315e;Thomas Waldmann;2015-05-09 20:12:23 +0200;use BORG_* as file MAGIC, adapt tests

==

attic/_hashindex.c
attic/key.py
attic/repository.py
attic/testsuite/hashindex.py
attic/testsuite/key.py
==================
35d06af;Thomas Waldmann;2015-05-09 19:41:03 +0200;get rid of some .borg, be consistent with the backup repo name and path
it's pretty useless to have .borg as a directory extension, especially
since there is a README in there stating that this is a borg repo.

conistency:
"backup" is always used as relative backup repository path
"/mnt/backup" is always used as absolute repository path

==

README.rst
attic/archiver.py
attic/testsuite/helpers.py
docs/index.rst
docs/quickstart.rst
docs/usage.rst
==================
cb5c9b6;Thomas Waldmann;2015-05-09 18:40:55 +0200;fork: s/attic/borg/g, fix URLs, add new section to AUTHORS
use borg instead attic except at the places where it was used:
- as toplevel package name, directory name, file name
- to refer to original attic

remove sphinx upload make command, will be replaced by github.io site later

remove references to binary downloads and linux packages for now

remove some software name references, fix grammar

use borgbackup rather than borg-backup (or borg) in URLs,
less name collision issues, better search results, no validity issues with "-"

==

AUTHORS
LICENSE
README.rst
attic/_version.py
attic/archiver.py
attic/cache.py
attic/fuse.py
attic/helpers.py
attic/key.py
attic/remote.py
attic/repository.py
attic/testsuite/archiver.py
attic/testsuite/helpers.py
attic/testsuite/key.py
docs/Makefile
docs/_themes/attic/sidebarlogo.html
docs/_themes/attic/sidebarusefullinks.html
docs/_themes/attic/static/attic.css_t
docs/_themes/attic/theme.conf
docs/_themes/local/sidebarlogo.html
docs/_themes/local/sidebarusefullinks.html
docs/_themes/local/static/local.css_t
docs/_themes/local/theme.conf
docs/conf.py
docs/faq.rst
docs/foreword.rst
docs/global.rst.inc
docs/index.rst
docs/installation.rst
docs/internals.rst
docs/quickstart.rst
docs/update_usage.sh
docs/usage.rst
scripts/attic
scripts/borg
setup.py
==================
f9d9048;Thomas Waldmann;2015-05-10 16:36:10 +0200;merged master

==
==================
a24d0f4;Jonas Borgström;2015-05-08 17:41:50 +0200;Fix typo preventing the security confirmation prompt from working
Closes #303

==

CHANGES
attic/cache.py
attic/testsuite/archiver.py
==================
c79b535;Jonas Borgström;2015-04-27 22:35:06 +0200;Improve installatoin instructions.
Specifically refer to pip3 instead of pip to avoid potential
confusion.

Also mention virtualenv

==

docs/global.rst.inc
docs/index.rst
docs/installation.rst
==================
ca385e5;Thomas Waldmann;2015-04-27 00:48:28 +0200;Merge branch 'sparse_files' into merge

==
==================
5fcaac1;Thomas Waldmann;2015-04-27 00:48:09 +0200;do not test for sparse file on Mac OS X

==

attic/testsuite/archiver.py
==================
64e8ea7;Jonas Borgström;2015-04-21 22:29:10 +0200;Improve handling of systems with improperly configured file system encoding
Closes #289

==

CHANGES
attic/archive.py
attic/archiver.py
==================
354b3d3;Thomas Waldmann;2015-04-21 21:02:42 +0200;Merge branch 'master' into merge

==
==================
a44eecb;Thomas Waldmann;2015-04-21 20:51:17 +0200;Merge branch 'issue_183' into merge

==
==================
38dd086;Thomas Waldmann;2015-04-21 20:50:19 +0200;Revert "fix "attic info" all archives stats, fixes #183"
Fixed by jborg in master in a different way.

This reverts commit 212777d716a96a6a7ac76f751e1bcc86ee8511df.

==

attic/archive.py
attic/archiver.py
==================
bbe200f;Thomas Waldmann;2015-04-21 11:34:13 +0200;fix incomplete merge of delete_repo branch

==

attic/repository.py
==================
ed9475d;Jonas Borgström;2015-04-20 00:07:26 +0200;Fix cache object reference

==

attic/archive.py
==================
29646a6;Jonas Borgström;2015-04-20 00:05:12 +0200;Merge pull request #258 from ThomasWaldmann/platform_linux_optimize
linux: remove duplicate os.fsencode calls
==
==================
35458ff;Jonas Borgström;2015-04-20 00:01:02 +0200;Merge pull request #288 from ThomasWaldmann/no_os.uname
use sys.platform everywhere, fixes #188
==
==================
80dad2d;Thomas Waldmann;2015-04-19 23:54:44 +0200;use sys.platform everywhere, fixes #188
os.uname is UNIX-only, sys.platform is portable.

note:
- this doesn't implicate attic will now work on windows.
- windows is untested / unsupported and there might be a lot of other issues left.
- attic's xattr module already used sys.platform, so this is better for internal consistency also.

==

attic/platform.py
setup.py
==================
dd0c69a;Jonas Borgström;2015-04-19 23:45:05 +0200;Fix "All archives" output for attic info
Closes #183

==

CHANGES
attic/archive.py
attic/cache.py
==================
04d50c7;Jonas Borgström;2015-04-19 23:24:14 +0200;Removed some unused imports

==

attic/archive.py
attic/helpers.py
==================
b7e6efb;Jonas Borgström;2015-04-19 23:21:46 +0200;Added missing import of parse_timestamp

==

attic/archive.py
==================
b61ba51;Jonas Borgström;2015-04-19 23:09:10 +0200;More user friendly error message when repository key file is not found
Closes #236

==

CHANGES
attic/key.py
==================
af9f1c2;Jonas Borgström;2015-04-19 22:42:52 +0200;Fix parsing of iso8601 timestamps with zero microseconds
Closes #282

==

CHANGES
attic/archive.py
attic/helpers.py
attic/testsuite/helpers.py
==================
b2147c1;Thomas Waldmann;2015-04-19 19:56:48 +0200;updated CHANGES-merge.txt

==

CHANGES-merge.txt
==================
82681d6;Thomas Waldmann;2015-04-19 18:54:19 +0200;PR #287 - Merge branch 'issue_183' into merge

==
==================
212777d;Thomas Waldmann;2015-04-19 18:50:10 +0200;fix "attic info" all archives stats, fixes #183
the problem was that calc_stats() dirties cache.chunks by decrementing
the chunk reference counters (so it can compute the deduplicated size
of the archive correctly).

the fix is to create a local Cache instance inside calc_stats, so the dirty cache
instance can not be used elsewhere.

also:
fix internal consistency of calc_stats function: always use "cache" (not "self.cache").
minor cosmetic pep8 fixes

==

attic/archive.py
attic/archiver.py
==================
310f9b7;Thomas Waldmann;2015-04-18 21:43:47 +0200;PR #285 - Merge branch 'archive_timestamp' into merge

==
==================
0ffee1f;Thomas Waldmann;2015-04-18 21:36:10 +0200;implement --timestamp, iso8601-like utc timestamp string or reference file/dir
note: this needs bug #282 to be fixed first, because it will create timestamps with microseconds==0.

==

attic/archive.py
attic/archiver.py
attic/helpers.py
==================
99d1515;Thomas Waldmann;2015-04-18 01:16:26 +0200;PR #284 updated - Merge branch 'sparse_files' into merge

==
==================
ee80db4;Thomas Waldmann;2015-04-17 22:28:40 +0200;add commandline argument --sparse
default is to not create sparse files.

if you give --sparse, it will create a hole in the sparse output file when a all-zero chunk is extracted.

==

attic/archive.py
attic/archiver.py
attic/testsuite/archiver.py
==================
fc97099;Thomas Waldmann;2015-04-15 23:04:34 +0200;Merge branch 'master' into merge

==
==================
e815d6d;Jonas Borgström;2015-04-15 21:45:14 +0200;acl/xattr: Be less strict about unknown platforms
Closes #239

==

CHANGES
attic/platform.py
attic/xattr.py
==================
848666e;Jonas Borgström;2015-04-15 21:35:56 +0200;cache: Treat EOFError as a negative _confirm answer

==

attic/cache.py
==================
118fb1a;Thomas Waldmann;2015-04-15 19:05:58 +0200;PR #226 - Merge branch 'delete_repo' into merge

==
==================
b6ed1c7;Thomas Waldmann;2015-04-15 16:43:07 +0200;PR #284 - Merge branch 'sparse_files' into merge

==
==================
a2bf2ae;Thomas Waldmann;2015-04-15 16:29:18 +0200;simple sparse file support, made chunk buffer size flexible
Implemented sparse file support to remove this blocker for people backing up lots of
huge sparse files (like VM images). Attic could not support this use case yet as it would
have restored all files to their fully expanded size, possibly running out of disk space if
the total expanded size would be bigger than the available space.

Please note that this is a very simple implementation of sparse file support - at backup time,
it does not do anything special (it just reads all these zero bytes, chunks, compresses and
encrypts them as usual). At restore time, it detects chunks that are completely filled with zeros
and does a seek on the output file rather than a normal data write, so it creates a hole in
a sparse file. The chunk size for these all-zero chunks is currently 10MiB, so it'll create holes
of multiples of that size (depends also a bit on fs block size, alignment, previously written data).

Special cases like sparse files starting and/or ending with a hole are supported.

Please note that it will currently always create sparse files at restore time if it detects all-zero
chunks.

Also improved:
I needed a constant for the max. chunk size, so I introduced CHUNK_MAX (see also
existing CHUNK_MIN) for the maximum chunk size (which is the same as the chunk
buffer size).

Attic still always uses 10MiB chunk buffer size now, but it could be changed now more easily.

==

attic/_chunker.c
attic/archive.py
attic/chunker.pyx
attic/testsuite/archiver.py
attic/testsuite/chunker.py
==================
2f71b39;Thomas Waldmann;2015-04-15 03:06:50 +0200;PR #283 - Merge branch 'fix-missing-microseconds' of https://github.com/camh-/attic into merge

==
==================
3a382e9;Thomas Waldmann;2015-04-15 02:41:55 +0200;Merge branch 'master' into merge

==
==================
bbc8886;Jonas Borgström;2015-04-13 23:29:00 +0200;Updated CHANGES
Closes #163.

==

CHANGES
==================
27012a5;Jonas Borgström;2015-04-13 23:28:10 +0200;Merge remote-tracking branch 'adept/patch-1'

==
==================
70af748;Jonas Borgström;2015-04-13 23:12:30 +0200;Added Thomas Waldmann to AUTHORS and updated CHANGES

==

AUTHORS
CHANGES
==================
8227e47;Jonas Borgström;2015-04-13 23:08:05 +0200;Merge remote-tracking branch 'tw/fix_pipe'

==
==================
20026e5;Jonas Borgström;2015-04-13 22:44:14 +0200;Fix incorrect behaviour with two character directory names.
Independetely found and fixed by both Thomas Waldemann and
Cam Hutchison. Closes #265 and #268.

==

CHANGES
attic/helpers.py
attic/testsuite/helpers.py
==================
7198929;Jonas Borgström;2015-04-13 22:35:09 +0200;cache: Warn user before accessing relocated repositories
This also closes #225

==

CHANGES
attic/cache.py
attic/helpers.py
attic/testsuite/archiver.py
attic/testsuite/helpers.py
==================
9f99aa1;Cam Hutchison;2015-04-06 22:17:38 +1000;archive: Fix parsing with missing microseconds.
Archive timestamps are stored as the output of datetime.isoformat().
This function omits microseconds in the string output if the
microseconds are zero (as documented and explained at
https://bugs.python.org/issue7342).

Parsing of timestamps assumes there are always microseconds present
after a decimal point. This is not always true. Handle this case where
it is not true by explicitly using '0' microseconds when not present.

This commit fixes #282

==

attic/archive.py
==================
0295ef8;Cam Hutchison;2015-04-08 21:09:58 +1000;archive: Add testcases for microsecond handling.
datetime.isoformat() has different output depending on whether
microseconds are zero or not. Add test cases to ensure we handle both
cases correctly in an archive.

==

attic/testsuite/archive.py
==================
a6f8d51;Thomas Waldmann;2015-04-11 17:08:17 +0200;updated PR #279 - Merge branch 'fadvise' into merge

==
==================
57071ce;Thomas Waldmann;2015-04-11 17:04:10 +0200;repo writes: call posix_fadvise between fsync and close
less calls to posix_fadvise (which seem to force a write-cache sync-to-disk and
wait for that to complete) - if we call it after we synced anyway, we don't lose time.

also: fixed a bug in the os.fsync call, it needs the fileno.

==

attic/repository.py
==================
3653acd;Thomas Waldmann;2015-04-11 02:51:33 +0200;PR #279 - Merge branch 'fadvise' into merge

==
==================
874f5c4;Thomas Waldmann;2015-04-11 02:40:22 +0200;use posix_fadvise for repo writes also

==

attic/repository.py
==================
c7d232c;Thomas Waldmann;2015-04-11 01:09:03 +0200;use posix_fadvise to avoid spoiling the OS cache
note:
 - we call this frequently AFTER re-filling the chunker buffer,
so even big input files have little cache impact.
- there is still some cache impact due to output files caching,
if the repository is on a locally mounted filesystem.

==

attic/_chunker.c
==================
7ad1093;Thomas Waldmann;2015-04-08 18:43:53 +0200;let chunker optionally work with os-level file descriptor
this safes some back-and-forth between C and Python code and also some memory
management overhead as we can always reuse the same read_buf instead of letting
Python allocate and free a up to 10MB big buffer for each buffer filling read.

we can't use os-level file descriptors all the time though, as chunkify gets also invoked
on objects like BytesIO that are not backed by a os-level file.

Note: this changeset is also a preparation for O_DIRECT support which can be
 implemented a lot easier on C level.

==

attic/_chunker.c
attic/archive.py
attic/chunker.pyx
==================
233d1f7;Thomas Waldmann;2015-04-07 18:05:36 +0200;Merge security fix from master. Merge branch 'master' into merge

==
==================
78f9ad1;Jonas Borgström;2015-04-06 23:07:10 +0200;Require approval before accessing previously unknown unencrypted repositories
Closes #271

==

CHANGES
attic/archiver.py
attic/cache.py
attic/testsuite/archiver.py
==================
4be5f31;Thomas Waldmann;2015-04-05 18:11:16 +0200;Merge branch 'fix_atime' into merge

==
==================
1bf5e9e;Thomas Waldmann;2015-04-04 11:05:52 +0200;Merge PR #265 - fixes bug #268 - Merge branch 'fix_safe_re' of https://github.com/lealanko/attic into merge

==
==================
89e9528;Lauri Alanko;2015-04-03 00:19:33 +0300;Escape ".." in path regexp properly.

==

attic/helpers.py
==================
14d91a2;Thomas Waldmann;2015-04-01 23:12:06 +0200;show tracebacks in top-level exception handler for easier debugging
sure it is "prettier" without, but a lot of useful information for debugging is lost if the traceback is not shown.

even for KeyboardInterrupt:

it may have some bad reason when one has to use Ctrl-C - if attic was stuck somewhere, we want to know where it was.

==

attic/archiver.py
==================
e706d1e;Thomas Waldmann;2015-04-01 02:13:26 +0200;PR #258 - Merge branch 'platform_linux_optimize' into merge

==
==================
570b8f8;Thomas Waldmann;2015-04-01 02:11:36 +0200;linux: remove duplicate os.fsencode calls

==

attic/platform_linux.pyx
==================
dc58cf9;Thomas Waldmann;2015-03-26 01:36:43 +0100;PR #254 - Merge branch 'tests_32bit_platform' into merge

==
==================
8b2b91f;Thomas Waldmann;2015-03-26 01:23:25 +0100;Fix test setup for 32bit platforms, partial fix for #196

==

attic/testsuite/archiver.py
==================
d43cb4b;Thomas Waldmann;2015-03-24 22:08:06 +0100;refactor _open_rb code a bit, so it is more consistent / regular

==

attic/archive.py
==================
3d2a3d1;Thomas Waldmann;2015-03-24 07:19:01 +0100;PR #251 - Merge branch 'rename_archive' into merge

==
==================
9f6840d;Thomas Waldmann;2015-03-24 07:11:00 +0100;implement attic rename repo::oldname newname
I extracted the inner part of Archive.load into a new _load_meta method
that does not modify self and does not decode, so I could simply reuse it.

==

attic/archive.py
attic/archiver.py
attic/testsuite/archiver.py
==================
8a60f05;Thomas Waldmann;2015-03-24 04:30:13 +0100;PR #250 - Merge branch 'progress_indication' into merge

==
==================
231721d;Thomas Waldmann;2015-03-24 04:24:54 +0100;implemented create --progress
shows original, compressed and deduped size plus path name.

output is 79 chars wide, so 80x24 terminal does not wrap/scroll.

long path names are shortened (in a rather simplistic way).

output happens when a new item is started, but not more often than 5/s
(thus, not every pathname is shown)

at the end, the output line is cleared but not scrolled, so it basically vanishes.

==

attic/archive.py
attic/archiver.py
attic/helpers.py
==================
2c2dd21;Thomas Waldmann;2015-03-22 15:58:08 +0100;PR #224 - Merge branch 'issue_55' into merge

==
==================
6d67379;Thomas Waldmann;2015-03-22 15:52:43 +0100;refactor indicator (status) and item processing
process_item was used only for dirs and fifo, replaced it by process_dir and process_fifo,
so the status can be generated there (as it is done for the other item types).

==

attic/archive.py
attic/archiver.py
==================
22ae80e;Thomas Waldmann;2015-03-22 14:55:02 +0100;add condensed description of the changes in merge branch

==

CHANGES-merge.txt
==================
57b1b3d;Thomas Waldmann;2015-03-21 02:22:51 +0100;PR #246 - Merge branch 'remote_exceptions' into merge

==
==================
c679f1a;Thomas Waldmann;2015-03-21 02:17:19 +0100;catch all Exceptions, transmit traceback back from remote
before this changesets, most informations about exceptions/tracebacks
on the remote side were lost. now they are transmitted and displayed,
together with the remote attic version.

==

attic/archiver.py
attic/remote.py
==================
dd8ff50;Thomas Waldmann;2015-03-20 02:34:10 +0100;PR #245 - Merge branch 'fix_exceptions' into merge
Conflicts:
	attic/archive.py

==
==================
2da70c7;Thomas Waldmann;2015-03-20 02:31:39 +0100;fix some exception handlers
don't catch "Exception" when OSError was meant (otherwise e.errno is not there anyway)
don't use bare "except:" if one can avoid (copied code fragment from similar handler)

==

attic/archive.py
attic/repository.py
==================
f31897b;Thomas Waldmann;2015-03-20 01:43:04 +0100;PR #244 - Merge branch 'fix_atime' into merge

==
==================
8fba904;Thomas Waldmann;2015-03-20 01:40:51 +0100;fix noatime mode, fixes #243
added "nonlocal euid" - without this, euid just gets redefined in inner scope instead of assigned to outer scope
added check for euid 0 - if we run as root, we always have permissions (not just if we are file owner)

note: due to caching and OS behaviour on linux, the bug was a bit tricky to reproduce
and also the fix was a bit tricky to test.

one needs strictatime mount option to enfore traditional atime updating.

for repeated tests, always change file contents (e.g. from /dev/urandom) or attic's caching
will prevent that the file gets read ("accessed") again.

check atimes with ls -lu

i could reproduce code was broken and is fixed with this changeset. and root now doesn't touch any atimes.

==

attic/archive.py
==================
fd16deb;Thomas Waldmann;2015-03-18 18:21:21 +0100;PR #235 - Merge branch 'fix_xattr' into merge

==
==================
767e795;Thomas Waldmann;2015-03-18 18:21:04 +0100;dummy acl implementation for unsupported platforms
the API_VERSION there was not in sync (and that was even true, as "st" was missing in acl_get()) - fixed.

==

attic/platform.py
==================
f1af650;Thomas Waldmann;2015-03-18 17:48:48 +0100;PR #235 - Merge branch 'fix_xattr' into merge

==
==================
1fe844a;Thomas Waldmann;2015-03-18 17:45:05 +0100;dummy xattr implementation for unsupported platforms
raising "Unsupported platform" (and making attic completely unusable) just because there is no xattr support isn't necessary.

==

attic/xattr.py
==================
c4f3068;Thomas Waldmann;2015-03-18 15:30:53 +0100;PR #241 - Merge branch 'patch-1' of https://github.com/adept/attic into merge

==
==================
6be2734;Dmitry Astapov;2015-03-18 12:42:28 +0000;Do not create items_buffer and chunker unless we are creating new archive
Listing repositories with lots of archives on low-memory systems would cause attic to run out of memory due to items_buffer and chunker being created for each visited archive.

See https://github.com/jborg/attic/issues/163
==

attic/archive.py
==================
3daaceb;Thomas Waldmann;2015-03-18 03:22:38 +0100;PR #238 - Merge branch 'fix_fuse_error_msg' into merge

==
==================
ee1dc89;Thomas Waldmann;2015-03-18 02:33:34 +0100;fix misleading hint the fuse ImportError handler gave, fixes #237

==

attic/archiver.py
==================
b7cefac;Thomas Waldmann;2015-03-18 00:23:41 +0100;Merge branch 'python_cleanup' into merge
Conflicts:
	attic/archiver.py
	attic/remote.py

==
==================
e9aacad;Thomas Waldmann;2015-03-17 23:54:05 +0100;remove unused imports

==

attic/_version.py
attic/helpers.py
attic/repository.py
==================
4ef6125;Thomas Waldmann;2015-03-17 23:47:21 +0100;cleanup pep8 issues found by pycharm

==

attic/_version.py
attic/archive.py
attic/archiver.py
attic/helpers.py
attic/key.py
attic/platform.py
attic/remote.py
attic/repository.py
attic/testsuite/archiver.py
attic/testsuite/crypto.py
attic/testsuite/helpers.py
attic/testsuite/repository.py
attic/testsuite/xattr.py
setup.py
==================
3a33d57;Thomas Waldmann;2015-03-17 23:23:56 +0100;triple-double-quotes for docstrings

==

attic/repository.py
attic/testsuite/helpers.py
==================
a21da5d;Thomas Waldmann;2015-03-17 23:16:12 +0100;no bare except

==

attic/archive.py
attic/fuse.py
==================
dee9869;Thomas Waldmann;2015-03-17 23:09:14 +0100;use "with" with open()

==

attic/testsuite/archiver.py
==================
fec5572;Thomas Waldmann;2015-03-17 23:03:36 +0100;no Class(object) in py3

==

attic/cache.py
attic/key.py
attic/remote.py
attic/repository.py
attic/testsuite/helpers.py
attic/testsuite/key.py
==================
2f5e5e0;Thomas Waldmann;2015-03-15 00:22:01 +0100;PR #235 - Merge branch 'fix_xattr' into merge

==
==================
6116fa7;Thomas Waldmann;2015-03-15 00:20:50 +0100;give specific path to xattr.is_enabled(), disable symlink setattr call that always fails

==

attic/testsuite/archiver.py
attic/xattr.py
==================
89ffe98;Thomas Waldmann;2015-03-14 20:53:06 +0100;PR #234 - Merge branch 'fix_pipe' into merge

==
==================
cbbe0fc;Thomas Waldmann;2015-03-14 19:45:01 +0100;serve: use os.write(stdout_fd, ...), fixes #233
this way, serve() is more consistent with the other code, which always uses os.read/write (not sys.std*.buffer.read/write).

also: reduce code duplication a bit.

==

attic/remote.py
==================
615ca87;Thomas Waldmann;2015-03-12 20:07:46 +0100;Merge branch 'msgpack_corruption' into merge

==
==================
4c7d076;Thomas Waldmann;2015-03-12 20:06:53 +0100;as msgpack-python 0.4.6 is released now, just use that.

==

setup.py
==================
60ac104;Thomas Waldmann;2015-03-11 03:12:37 +0100;PR #231 - Merge branch 'check_last_N' of https://github.com/ThomasWaldmann/attic into merge

==
==================
90c50e3;Thomas Waldmann;2015-03-11 03:04:12 +0100;implement check --last N
Note: of course it can only check for orphaned objects, if it has processed all archives in the repo.
Thus this check is skipped as soon as you give --last N option.

The numbers shown in progress indicator are (N,T).
N is the number of the currently checked archive (starts at T as it first checks latest archive).
T is the total number of archives.

==

attic/archive.py
attic/archiver.py
==================
97b5154;Thomas Waldmann;2015-03-10 01:11:18 +0100;check: sort archives in reverse time order

==

attic/archive.py
==================
f1fe5be;Thomas Waldmann;2015-03-09 23:38:19 +0100;PR #230 - Merge branch 'msgpack_corruption' of https://github.com/ThomasWaldmann/attic into merge

==
==================
a67d421;Thomas Waldmann;2015-03-09 23:35:56 +0100;avoid defect python-msgpack releases, fixes #171, fixes #185

==

setup.py
==================
8aebdd6;Thomas Waldmann;2015-03-09 22:08:15 +0100;PR #229 - Merge branch 'fix_127' of https://github.com/ThomasWaldmann/attic into merge

==
==================
becae42;Thomas Waldmann;2015-03-09 21:59:10 +0100;check unpacked data from RPC for tuple type and correct length, fixes #127

==

attic/remote.py
==================
3b744d2;Thomas Waldmann;2015-03-09 20:45:31 +0100;fix Repository._active_txn state when lock upgrade fails

==

attic/repository.py
==================
954b26f;Thomas Waldmann;2015-03-09 17:01:29 +0100;RPCError: include the exception args we get from remote
Without this, you just got "RCPError: AttributeError", now you get (e.g.):

RPCError: AttributeError(b"'Repository' object has no attribute 'segments'",)

==

attic/remote.py
==================
67eaa9d;Thomas Waldmann;2015-03-09 16:21:15 +0100;PR #225 - Merge branch 'fix_cache_close' of https://github.com/ThomasWaldmann/attic into merge

==
==================
6e6819e;Thomas Waldmann;2015-03-09 16:02:06 +0100;attic delete: add repository + local cache deletion

==

attic/archiver.py
attic/cache.py
attic/remote.py
attic/repository.py
==================
d3fe74d;Thomas Waldmann;2015-03-09 15:17:56 +0100;Cache: do not try to release the lock twice
If Cache was already closed and __del__ was called, it called close() again
and crashed when trying to release the lock again.

==

attic/cache.py
==================
9841af5;Thomas Waldmann;2015-03-08 19:18:21 +0100;better attic create -v output
Added a indicator character to the left for (A)dded, (M)odified, (U)nchanged status
of regular files. Lowercase indicators are for special files.

You may or may not want to use grep to filter out U and d.

==

attic/archive.py
attic/archiver.py
==================
d9cfca8;Thomas Waldmann;2015-03-08 15:09:01 +0100;PR #223 - Merge branch 'fix_45' of https://github.com/ThomasWaldmann/attic into merge

==
==================
4633931;Thomas Waldmann;2015-03-08 15:01:24 +0100;add global option --no-cache-files to lower memory consumption
When given, attic does not use the "files" cache. Saves about 240B RAM per file
(that sounds only a little, but consider that backups nowadays are often millions of files).

So try this if attic eats more memory than you have as RAM (usually means paging or
MemoryErrors). Of course, saving memory is not for free. In my one experiment, run time
increased from 3.5 to 23 minutes (my system has enough RAM).

==

attic/archiver.py
attic/cache.py
==================
084f6e1;Thomas Waldmann;2015-03-08 04:20:13 +0100;PR #222 - Merge branch 'issue_189' of https://github.com/ThomasWaldmann/attic into merge

==
==================
be29e5f;Thomas Waldmann;2015-03-08 04:19:25 +0100;fix traceback when trying to do unsupported passphrase change, fixes #189

==

attic/key.py
==================
c8b23b5;Thomas Waldmann;2015-03-08 02:37:43 +0100;PR #221 - Merge branch 'issue_139' of https://github.com/ThomasWaldmann/attic into merge

==
==================
e425545;Thomas Waldmann;2015-03-08 02:32:33 +0100;datetime does not like the year 10.000, fixes issue #139

==

attic/archiver.py
==================
70e907f;Thomas Waldmann;2015-03-07 00:09:51 +0100;PR #184 - Merge branch 'fuse-filesizes' of https://github.com/dnnr/attic into merge

==
==================
0d2cd28;Thomas Waldmann;2015-03-06 23:50:15 +0100;PR #214 - Merge branch 'crypto_cleanup' of https://github.com/thomaswaldmann/attic into merge

==
==================
29449e4;Thomas Waldmann;2015-03-06 23:28:00 +0100;PR #208 - Merge branch 'stdin_stdout_support' of https://github.com/thomaswaldmann/attic into merge

==
==================
fbaa505;Thomas Waldmann;2015-03-06 23:18:08 +0100;PR #206 - Merge branch 'fixes' of https://github.com/thomaswaldmann/attic into merge

==
==================
8c4d290;Thomas Waldmann;2015-03-06 22:55:53 +0100;PR #173 - Merge branch 'rpc-whitelist' of https://github.com/dnnr/attic into merge

==
==================
a5fe616;Thomas Waldmann;2015-03-06 22:35:16 +0100;PR #150 - Merge branch 'normalize_paths' of https://github.com/wavexx/attic into merge

==
==================
edb8f21;Thomas Waldmann;2015-03-06 21:57:06 +0100;PR #198 - Merge https://github.com/evanhempel/attic into merge

==
==================
7555792;Thomas Waldmann;2015-03-06 21:50:29 +0100;PR #191 - Merge https://github.com/rpodgorny/attic into merge

==
==================
2fbef26;Thomas Waldmann;2015-03-06 21:46:02 +0100;PR #156 - Merge branch 'doc-multi' of https://github.com/anarcat/attic into merge

==
==================
9e77251;Thomas Waldmann;2015-03-06 21:44:47 +0100;PR #155 - Merge branch 'doc-encryption' of https://github.com/anarcat/attic into merge

==
==================
c191ab1;Thomas Waldmann;2015-03-06 21:36:44 +0100;PR #153 - Merge branch 'dependencies' of https://github.com/anarcat/attic into merge

==
==================
dd641dd;Thomas Waldmann;2015-03-06 21:32:31 +0100;PR #152 - Merge branch 'patch-1' of https://github.com/anarcat/attic into merge

==
==================
effab97;anarcat;2015-03-05 09:06:20 -0500;clarify that simultaneous backups may be a problem

==

docs/faq.rst
==================
ecee5a0;anarcat;2015-03-05 09:00:06 -0500;PDKF is a key derivation function
do not use the word "encryption", as it is actually closer to "hashing" anyways.
==

docs/internals.rst
==================
5f882e9;anarcat;2015-03-05 08:57:52 -0500;clarify the index memory usage analysis
it seems I extracted that data from [this mailing list post][] which
in turn takes it from [this github comment][].

 [this mailing list post]: http://librelist.com/browser/attic/2014/5/6/questions-and-suggestions-about-inner-working-of-attic/
 [this github comment]: https://github.com/jborg/attic/issues/26#issuecomment-35439254
==

docs/internals.rst
==================
0ba8635;anarcat;2015-03-05 08:51:26 -0500;clarify that 4095 bytes is not a typo
i am actually assuming this right now, i haven't double-checked
==

docs/internals.rst
==================
87cb4a4;anarcat;2015-03-05 08:48:23 -0500;expand on the chunk id hash mechanism
according to @ThomasWaldmann, the algorithm varies according to whether encryption is enabled.
==

docs/internals.rst
==================
8f8a035;anarcat;2015-03-05 08:41:48 -0500;fix a bunch of typos
this should fix the comments identified as `typo` and other small quirks found by @ThomasWaldmann.
==

docs/internals.rst
==================
1f4077d;Thomas Waldmann;2015-03-03 20:18:28 +0100;crypto.pyx: adapt to strange requirements found in the openssl docs
https://www.openssl.org/docs/crypto/EVP_aes_256_cbc.html

EVP_DecryptInit_ex(), EVP_DecryptUpdate() and EVP_DecryptFinal_ex() are the corresponding decryption operations. EVP_DecryptFinal() will return an error code if padding is enabled and the final block is not correctly formatted. The parameters and restrictions are identical to the encryption operations except that if padding is enabled the decrypted data buffer out passed to EVP_DecryptUpdate() should have sufficient room for (inl + cipher_block_size) bytes unless the cipher block size is 1 in which case inl bytes is sufficient.

I doubt this is correct, but let's rather be defensive here.

==

attic/crypto.pyx
==================
5503205;Thomas Waldmann;2015-03-03 20:11:28 +0100;crypto.pyx: cosmetic changes, added comments

==

attic/crypto.pyx
==================
6c7c2e2;Thomas Waldmann;2015-03-03 19:19:28 +0100;cleanup crypto.pyx, make it easier to adapt to other modes
There were some small issues:

 a) it never called EVP_EncryptFinal_ex.
For CTR mode, this had no visible consequences as EVP_EncryptUpdate already yielded all ciphertext.
For cleanliness and to have correctness even in other modes, the missing call was added.

b) decrypt = encrypt hack
This is a nice hack to abbreviate, but it only works for modes without padding and without authentication.
For cleanliness and to have correctness even in other modes, the missing usage of the decrypt api was added.

c) outl == inl assumption
Again, True for CTR mode, but not for padding or authenticating modes.
Fixed so it computes the ciphertext / plaintext length based on api return values.

Other changes:
As encrypt and decrypt API calls are different even for initialization/reset, added a is_encrypt flag.

Defensive output buffer allocation. Added the length of one extra AES block (16bytes) so it would
work even with padding modes. 16bytes are needed because a full block of padding might get
added when the plaintext was a multiple of aes block size.

These changes are based on some experimental code I did for aes-cbc and aes-gcm.
While we likely won't ever want aes-cbc in attic (maybe gcm though?), I think it is cleaner
to not make too many mode specific assumptions and hacks, but just use the API as it
was meant to be used.

==

attic/crypto.pyx
attic/key.py
attic/testsuite/crypto.py
==================
aab900b;Thomas Waldmann;2015-03-01 05:07:29 +0100;extract: if --stdout is given, write all extracted binary data to stdout

==

attic/archive.py
attic/archiver.py
==================
a3f335e;Thomas Waldmann;2015-03-01 04:29:44 +0100;create: if "-" is given as path, read binary from stdin

==

attic/archive.py
attic/archiver.py
==================
db7ce09;Thomas Waldmann;2015-02-28 03:43:08 +0100;fix typos / spelling

==

attic/_version.py
attic/repository.py
attic/testsuite/__init__.py
==================
8ffd4c4;Thomas Waldmann;2015-02-28 03:24:30 +0100;convert docstrings to triple-double-quoted

==

attic/repository.py
attic/testsuite/helpers.py
==================
a8ce0b8;Thomas Waldmann;2015-02-28 03:09:01 +0100;remove unused imports

==

attic/_version.py
attic/helpers.py
attic/repository.py
attic/testsuite/helpers.py
==================
7476851;Thomas Waldmann;2015-02-28 02:45:21 +0100;do os.fsync like recommended in the python docs (gets a fileno, not file object, also do a flush first)

==

attic/helpers.py
attic/repository.py
==================
0e5ef37;Thomas Waldmann;2015-02-28 02:33:35 +0100;add .idea/ to gitignore, so PyCharm stuff does not get accidentally added/committed

==

.gitignore
==================
b425950;Evan Hempel;2015-02-12 20:32:20 -0500;Extra debug information for 'fread failed'

==

attic/_hashindex.c
==================
939e754;Radek Podgorny;2015-02-04 00:04:22 +0100;add more .c files to .gitigore

==

.gitignore
==================
bffc419;Daniel Danner;2015-01-23 16:43:45 +0100;FUSE: reflect deduplication in allocated blocks
Instead of giving all files a fixed block count of 1, this assigns each
deduplicated chunk to a certain file. In effect, the cumulative file
size that is shown in the mountpoint accurately reflects the amount of
actual disk space needed for the repository (barring metadata overhead).

Although the block assignment is done arbitrarily, depending on the
user's access pattern, the sizes will be consistent within the entire
mount point. This facilitates the use of tools like du and ncdu for
inspecting the actual disk usage in a repository as opposed to just
looking at the original, uncompressed, non-deduplicated file sizes.

==

attic/fuse.py
==================
046b196;Daniel Danner;2015-01-11 14:06:59 +0100;Only allow whitelisted RPC calls in server mode
Without this check, the client is able to call any method of
RepositoryServer and Repository, potentially circumventing
restrict_to_paths or even run arbitrary code.

==

attic/remote.py
attic/testsuite/repository.py
==================
4ab4ecc;Jonas Borgström;2015-01-06 22:28:04 +0100;hashindex: Fix issue with file sizes larger than 2GB.
See: http://librelist.com/browser//attic/2015/1/6/does-attic-have-an-upper-data-size-limit/

==

CHANGES
attic/_hashindex.c
==================
df6324b;Jonas Borgström;2015-01-04 22:25:11 +0100;Include missing pyx files in dist file.
Closes #168

==

CHANGES
MANIFEST.in
==================
77bd65a;Jonas Borgström;2015-01-03 23:14:13 +0100;Merge pull request #165 from brodul/docs
Fix documentation 'snapshot' to 'checkpoint'
==
==================
b5a9085;Jonas Borgström;2015-01-03 23:12:47 +0100;Fix Python 3.2 compatibility issue with noatime open().
Closes #164.

==

CHANGES
attic/archive.py
==================
6d64a1c;Andraz Brodnik;2014-12-25 13:21:42 +0100;Fix documentation 'snapshot' to 'checkpoint'
In the code the string `checkpoint` is appended.
./attic/archive.py:137

==

docs/faq.rst
==================
f342621;Jonas Borgström;2014-12-17 23:19:22 +0100;Preparing release

==

CHANGES
==================
add59e4;Jonas Borgström;2014-12-17 21:55:33 +0100;Prepare for future payload format change

==

attic/key.py
==================
b7718f0;anarcat;2014-12-17 10:11:02 -0500;Update internals.rst

==

docs/internals.rst
==================
2676c5f;Antoine Beaupré;2014-12-16 11:16:30 -0500;document that multiple clients can backup to a single remote
answer comes from author here: http://librelist.com/browser//attic/2014/11/11/backing-up-multiple-servers-into-a-single-repository/#e96345aa5a3469a87786675d65da492b

this should address the last remaining issue in #60

==

docs/faq.rst
==================
e80e6c4;Antoine Beaupré;2014-12-16 10:59:12 -0500;better titles

==

docs/internals.rst
==================
b7c2673;Antoine Beaupré;2014-12-16 10:59:02 -0500;fix formatting issues

==

docs/global.rst.inc
docs/internals.rst
==================
d58b6dd;Antoine Beaupré;2014-12-16 10:55:03 -0500;fix reference errors and remove reference to source code

==

docs/internals.rst
==================
688ba10;Antoine Beaupré;2014-12-16 10:35:48 -0500;reorder to be more logical and more gentle

==

docs/internals.rst
==================
ddca3b8;Antoine Beaupré;2014-12-16 10:30:57 -0500;add a more gentle introduction

==

docs/internals.rst
==================
1fde2a9;Antoine Beaupré;2014-12-16 10:20:52 -0500;add more details on how encryption works

==

docs/internals.rst
==================
fd56bf0;Antoine Beaupré;2014-12-16 10:20:23 -0500;document the repo config file and more storage properties
again taken from the mailing list, mostly

==

docs/internals.rst
==================
3f27c36;Antoine Beaupré;2014-12-16 10:04:35 -0500;document more internals, based on mailing list discussion
this should address #27, #28 and #29 at least at a basic level

it is mostly based on the mailing list discussion mentionned in #27,
with some reformatting and merging of different posts.

==

docs/global.rst.inc
docs/internals.rst
==================
9f0ed2a;Antoine Beaupré;2014-12-16 10:03:20 -0500;clarify some bits I missed

==

docs/global.rst.inc
docs/index.rst
docs/internals.rst
==================
a8ab9c3;Antoine Beaupré;2014-12-16 09:10:21 -0500;document key files in a new Internals page
this is still incomplete as it only describes key files, but doesn't
clearly say how chunks are encrypted or decrypted.

this address parts of #29 but eventually that document should also
cover #27, #28 and maybe #45

==

docs/global.rst.inc
docs/internals.rst
==================
ac87360;Antoine Beaupré;2014-12-15 22:02:43 -0500;document better different dependencies
this is written with recent Ubuntu and Debian in mind, but should be
working everywhere. the idea here is to make sure anyone can install
this without knowning too much about ACLs or anything similar.

closes #135

==

docs/global.rst.inc
docs/installation.rst
==================
7d2ec79;anarcat;2014-12-15 21:53:05 -0500;document that hardlinks and symlinks are supported
it seems that hardlinks are supported, but were not explicitely documented in the documentation. the FAQ seems like the right place to do this. closes #133.
==

docs/faq.rst
==================
15c8a63;Yuri D'Elia;2014-12-14 19:15:54 +0100;Normalize source/exclude paths before matching
This normalizes the file names in the dot directory when specified explicitly,
along with exclude/include patterns.

This fixes several mismatches when including relative paths that involve the
current directory.

==

attic/archiver.py
attic/helpers.py
attic/testsuite/archiver.py
==================
e9c27e8;Jonas Borgström;2014-12-14 14:30:41 +0100;Added missing changelog entry

==

CHANGES
==================
18641ae;Jonas Borgström;2014-12-14 14:24:57 +0100;xattr: Fix issue with empty (0 bytes) xattr values.
Closes #106

==

attic/testsuite/xattr.py
attic/xattr.py
==================
53f6738;Jonas Borgström;2014-12-08 21:48:36 +0100;Merge pull request #111 from c4rlo/patch-1
fix typo in comment
==
==================
5d96434;Jonas Borgström;2014-12-08 21:48:04 +0100;Merge pull request #113 from c4rlo/noatime
open files with O_NOATIME if possible
==
==================
7e15abd;Jonas Borgström;2014-11-22 14:35:51 +0100;hashindex: Fix issue with indicies larger than 2GB

==

attic/_hashindex.c
==================
5c699b3;Jonas Borgström;2014-11-20 21:29:29 +0100;Merge pull request #129 from kannes/master
fixing two typos
==
==================
aee2983;kannes;2014-11-19 13:09:53 +0100;fixing two typos

==

docs/quickstart.rst
==================
ca177ab;Jonas Borgström;2014-11-12 20:01:43 +0100;Merge pull request #126 from dfries/master
limit create file permissions
==
==================
f22b62c;David Fries;2014-10-31 17:28:45 -0500;limit create file permissions
Be safe by default, create files so that other users can't read them,
at least until the original permissions are set.

==

CHANGES
attic/archiver.py
==================
678fdd1;Jonas Borgström;2014-10-27 22:00:56 +0100;Fix "Number of files" output for attic info.
Closes #124

==

CHANGES
attic/archiver.py
attic/testsuite/archiver.py
==================
547fa0a;Jonas Borgström;2014-10-10 21:01:55 +0200;Speed up initial repository access
Use os.listdir() instead of os.walk() to avoid unnecessary
stat() calls.

Closes #119

==

attic/repository.py
==================
7b9d129;Jonas Borgström;2014-10-09 20:43:58 +0200;Remove dead code

==

attic/helpers.py
==================
5a69f58;Jonas Borgström;2014-10-09 20:41:47 +0200;Introduce a separate exception for missing repository objects

==

attic/remote.py
attic/repository.py
attic/testsuite/repository.py
==================
f4804c0;Carlo Teubner;2014-08-30 14:10:41 +0100;open files with O_NOATIME if possible

==

attic/archive.py
==================
ec73e45;c4rlo;2014-09-07 13:54:18 +0100;fix typo in comment

==

attic/fuse.py
==================
21e03af;Jonas Borgström;2014-08-08 23:34:27 +0200;Fix minor location parser bug.
Make sure the entire input is parsed.

==

attic/helpers.py
attic/testsuite/helpers.py
==================
9f64e39;Jonas Borgström;2014-08-03 15:04:41 +0200;Reuse chunker buffer between files.

==

attic/_chunker.c
attic/archive.py
attic/chunker.pyx
attic/helpers.py
attic/testsuite/chunker.py
==================
193fb1f;Jonas Borgström;2014-08-02 22:15:21 +0200;Added support for stripping leading path segments
closes #95

==

CHANGES
attic/archiver.py
attic/testsuite/__init__.py
attic/testsuite/archiver.py
==================
8f4e0f7;Jonas Borgström;2014-08-01 15:50:18 +0200;acl: Added workaround for old Linux systems
Really old Linux systems do not have extended_file_no_follow()

==

CHANGES
attic/archive.py
attic/helpers.py
attic/platform_darwin.pyx
attic/platform_freebsd.pyx
attic/platform_linux.pyx
attic/testsuite/platform.py
==================
0741aef;Jonas Borgström;2014-08-01 14:48:49 +0200;Add MacPorts' path to the default openssl search path
Closes #101

==

CHANGES
setup.py
==================
1b0e21b;Jonas Borgström;2014-07-10 15:44:29 +0200;Fixed typo

==

attic/archive.py
==================
2f72b9f;Jonas Borgström;2014-07-10 15:32:12 +0200;HashIndex: Switch to a non-mmap based implementation
This eliminates unnecessary IO on low memory systems

==

CHANGES
attic/_hashindex.c
attic/archive.py
attic/cache.py
attic/hashindex.pyx
attic/helpers.py
attic/remote.py
attic/repository.py
attic/testsuite/archiver.py
attic/testsuite/hashindex.py
attic/testsuite/repository.py
==================
4b2dae2;Jonas Borgström;2014-07-01 21:28:07 +0200;Fix incorrect detect of follow_symlinks support
This only affects system with Python 3.3+ and a really old libc

==

attic/archive.py
==================
7a950be;Jonas Borgström;2014-06-29 14:28:02 +0200;Preparing release

==

CHANGES
==================
7ce3290;Jonas Borgström;2014-06-29 14:24:45 +0200;docs: Added link to prebuilt Linux binaries.

==

docs/conf.py
docs/installation.rst
==================
15065db;Jonas Borgström;2014-06-13 20:07:01 +0200;Fix sporadic "Resource temporarily unavailable" error
Issue reported on the mailing list while backing up to a remote
repository on OS X over a slow uplink.

==

CHANGES
attic/remote.py
==================
95162ce;Jonas Borgström;2014-06-05 15:11:46 +0200;buzhash: One more test case
Test with more than 31 bytes to make sure our BARREL_SHIFT macro
works correctly.

==

attic/testsuite/chunker.py
==================
df85e72;Jonas Borgström;2014-06-03 23:10:52 +0200;Fix file cache save bug

==

attic/cache.py
==================
243481f;Jonas Borgström;2014-06-03 22:00:34 +0200;Fix test suite breakage

==

attic/cache.py
==================
80a2a41;Jonas Borgström;2014-06-03 21:39:26 +0200;Revert "Reduce memory usage when backing up many small files"
The memory usage should be reduced a fair bit by #90 so this
might not be needed anymore. Or at least not enabled by default

==

CHANGES
attic/cache.py
==================
7f9fe03;Jonas Borgström;2014-06-03 21:19:02 +0200;cache: Reduce file cache memory usage (#90)
The memory usage is reduced at the expence of extra msgpack
packing/unpacking. Hopefully this is a good tradeoff.

Ideally the entire cache should be replaced with a radix tree
but that will have to wait a bit.

==

CHANGES
attic/cache.py
==================
64cd663;Jonas Borgström;2014-05-31 15:39:51 +0200;Avoid deadlock problems
Explicitly use write locks, instead of read locks (that are later
upgraded) unless we know we will never modify the repository

==

attic/archiver.py
attic/helpers.py
attic/repository.py
attic/testsuite/helpers.py
attic/testsuite/repository.py
==================
af3e78e;Jonas Borgström;2014-05-31 15:17:06 +0200;Really fix EDEADLK bug

==

attic/helpers.py
==================
9178d76;Jonas Borgström;2014-05-31 15:13:49 +0200;Fix py3.2 specific EDEADLK related bug.

==

CHANGES
attic/helpers.py
==================
3ab53b7;Jonas Borgström;2014-05-18 18:28:26 +0200;Fix crash on extreme mtime timestamps (year 2400+)
Closes #81

==

CHANGES
attic/archive.py
attic/archiver.py
attic/helpers.py
attic/testsuite/archiver.py
attic/testsuite/helpers.py
==================
11687fb;Jonas Borgström;2014-05-13 23:18:32 +0200;crypto: store EVP_CIPHER_CTX on the stack

==

attic/crypto.pyx
==================
0b4e324;Cyril Roussillon;2014-05-13 19:52:42 +0200;chunker: optimized the barrel shift
move the modulo out of the barrel shift and use 32bits variables so
that the compiler recognizes it and uses the "rol*" asm instructions.

Before: 245 MiB/s
After: 338 MiB/s

CPU: Intel(R) Core(TM) i5-3320M CPU @ 2.60GHz

Modification by Jonas: commit message formatting and added
Cyril Roussillon to AUTHORS

==

AUTHORS
attic/_chunker.c
==================
7e258c8;Jonas Borgström;2014-05-13 22:27:57 +0200;crypto: Improved AES performance
attic.crypto now uses the OpenSSL EVP API for AES encryption.
This API uses AES-NI instructions when available resulting in
a significant AES encryption performance improvement:

Before: 80MiB/s
After: 1931MiB/s

Message size: 64kiB
CPU: Intel(R) Core(TM) i5-3320M CPU @ 2.60GHz

==

CHANGES
attic/crypto.pyx
attic/helpers.py
==================
8cc9c02;Jonas Borgström;2014-05-03 23:27:01 +0200;Update faq regarding acl support
Closes #66

==

docs/faq.rst
==================
dd5c0aa;Jonas Borgström;2014-05-03 23:22:55 +0200;acl: make darwin acl code numeric_owner aware

==

attic/platform_darwin.pyx
attic/testsuite/platform.py
==================
47c6141;Jonas Borgström;2014-05-03 15:10:11 +0200;Experimental OS X ACL support (#66)

==

CHANGES
attic/platform.py
attic/platform_darwin.pyx
attic/testsuite/platform.py
setup.py
==================
db0381e;Jonas Borgström;2014-05-03 14:21:10 +0200;Add python 3.4 to the tox environment list

==

tox.ini
==================
055a409;Jonas Borgström;2014-05-03 13:34:40 +0200;Reduce memory usage when backing up many small files
Closes #69.

==

CHANGES
attic/cache.py
==================
a87a019;Jonas Borgström;2014-05-01 14:56:21 +0200;cachedir: Add CACHEDIR.TAG file to attic cache dirs

==

AUTHORS
CHANGES
attic/archiver.py
attic/helpers.py
==================
bc48488;Jonas Borgström;2014-05-01 14:38:16 +0200;Merge pull request #74 from jbms/cachedir-support
Cachedir support
==
==================
c90c6c9;Jonas Borgström;2014-05-01 14:08:12 +0200;travis: Enable python 3.4

==

.travis.yml
==================
1d5410a;Jeremy Maitin-Shepard;2014-04-30 14:27:04 -0700;Add --exclude-caches option, for excluding CACHEDIR.TAG directories
See http://www.brynosaurus.com/cachedir/spec.html

==

attic/archiver.py
attic/helpers.py
attic/testsuite/archiver.py
==================
1955484;Jeremy Maitin-Shepard;2014-04-30 14:43:32 -0700;testsuite/archiver.py: Fix misspelling regual -> regular

==

attic/testsuite/archiver.py
==================
c502481;Jonas Borgström;2014-04-29 23:07:41 +0200;fix typo

==

attic/xattr.py
==================
1b779c8;Jonas Borgström;2014-04-29 22:29:26 +0200;Linux ACL support improvements

==

attic/platform_linux.pyx
attic/testsuite/platform.py
attic/xattr.py
==================
4bcc1b8;Jonas Borgström;2014-04-27 14:29:03 +0200;Fix Cython issue on Linux

==

attic/platform_linux.pyx
attic/testsuite/platform.py
==================
8c25d02;Jonas Borgström;2014-04-27 14:17:09 +0200;Experimental FreeBSD ACL support (nfs4 and posix) (#66)

==

CHANGES
attic/helpers.py
attic/platform.py
attic/platform_freebsd.pyx
attic/platform_linux.pyx
setup.py
==================
54e757e;Jonas Borgström;2014-04-13 23:41:04 +0200;acl: Remove acl comments

==

attic/platform_linux.pyx
==================
29f95bb;Jonas Borgström;2014-04-13 21:52:49 +0200;Use a dedicated file for bsdflags tests

==

attic/testsuite/archiver.py
==================
337892c;Jonas Borgström;2014-04-13 20:44:24 +0200;travis: forgot to use sudo when installing packages

==

.travis.yml
==================
14808b7;Jonas Borgström;2014-04-13 20:34:32 +0200;Fix Python3.2 compatibility

==

.travis.yml
attic/platform.py
setup.py
==================
0ad5253;Jonas Borgström;2014-04-13 20:26:46 +0200;Experimental Linux ACL support (#66)

==

CHANGES
attic/archive.py
attic/helpers.py
attic/platform.py
attic/platform_linux.pyx
attic/testsuite/platform.py
setup.py
==================
ebb5971;Jonas Borgström;2014-04-08 21:55:21 +0200;Added note about BSDFlags to CHANGES

==

CHANGES
==================
8bf3bb1;Jonas Borgström;2014-04-08 21:52:26 +0200;Added support for backup and restore of bsdflags (OS X and FreeBSD)
This improves our Backup-Bouncer score (#56)

==

attic/archive.py
attic/testsuite/__init__.py
attic/testsuite/archiver.py
==================
4bbde41;Jonas Borgström;2014-04-08 21:22:57 +0200;Fix bug where xattrs on symlinks were not correctly restored

==

CHANGES
attic/archive.py
attic/testsuite/archiver.py
==================
e2452c3;Jonas Borgström;2014-04-08 21:20:33 +0200;docs: Make font link protocol agnostic

==

docs/_themes/attic/sidebarlogo.html
==================
588a49c;Jonas Borgström;2014-04-07 19:58:15 +0200;Preparing for release

==

CHANGES
==================
02a8172;Jonas Borgström;2014-04-06 22:47:22 +0200;docs: More improvements

==

attic/archiver.py
docs/index.rst
docs/quickstart.rst
docs/usage.rst
==================
ead1511;Jonas Borgström;2014-04-06 15:16:25 +0200;docs: More documentation improvements

==

attic/archiver.py
docs/update_usage.sh
docs/usage.rst
==================
2b91d66;Jonas Borgström;2014-04-06 14:03:14 +0200;docs: quickstart improvements

==

docs/quickstart.rst
==================
7231315;Jonas Borgström;2014-04-05 21:08:11 +0200;docs: added to questions to the faq
closes #64

==

docs/_themes/attic/static/attic.css_t
docs/faq.rst
==================
f685eb1;Jonas Borgström;2014-04-05 20:24:46 +0200;docs: New layout and some initial documentation improvements

==

docs/_themes/attic/sidebarlogo.html
docs/_themes/attic/static/attic.css_t
docs/index.rst
docs/quickstart.rst
==================
ccb7ea9;Jonas Borgström;2014-03-30 22:57:16 +0200;prune: Use the local time zone (not UTC) when interpreting time

==

CHANGES
attic/helpers.py
==================
9ae3d10;Jonas Borgström;2014-03-30 22:46:57 +0200;cache: Properly clean up txn.tmp after a failed commit

==

attic/cache.py
==================
37cc63f;Jonas Borgström;2014-03-30 22:35:13 +0200;Fix one more -Werror=declaration-after-statement issue

==

attic/_hashindex.c
==================
16ab296;Jonas Borgström;2014-03-30 22:26:13 +0200;Merge pull request #62 from tungd/master
Fix for ISO C90 compliance

This fixes a "-Werror=declaration-after-statement" related compile issue with Python 3.4
==
==================
6d77808;Tung Dao;2014-03-30 22:43:31 +0700;Fix for ISO C90 compliance

==

attic/_chunker.c
==================
1db4ba5;Jonas Borgström;2014-03-28 22:56:40 +0100;Make sure key files end with a new line

==

attic/key.py
==================
8080f18;Jonas Borgström;2014-03-28 22:51:09 +0100;mount: Improve fuse filesystem memory efficiency
Closes #59

==

CHANGES
attic/archiver.py
attic/fuse.py
==================
3b80688;Jonas Borgström;2014-03-27 22:43:06 +0100;mount: Load archive metadata on demand

==

attic/fuse.py
==================
af26248;Jonas Borgström;2014-03-26 22:42:20 +0100;mount: Use RepositoryCache
This makes a full repository mount a bit faster but it's still
too slow and memory hungry.

==

attic/archive.py
attic/cache.py
attic/fuse.py
attic/remote.py
==================
8e078b5;Jonas Borgström;2014-03-26 21:47:01 +0100;Initial (naive) full repository fuse mount support

==

attic/archiver.py
attic/fuse.py
attic/testsuite/archiver.py
==================
a9fc62c;Jonas Borgström;2014-03-24 21:28:59 +0100;Added option to restrict remote repository access to specific path(s)
With this option remote repository access can be restricted to a
specific path for a specific ssh key using the following line
in ~/.ssh/authorized_keys::

command="attic serve --restrict-to-path /data/clientA" ssh-rsa clientA's key
command="attic serve --restrict-to-path /data/clientB" ssh-rsa clientB's key

Closes #51.

==

CHANGES
attic/archiver.py
attic/remote.py
attic/testsuite/archiver.py
==================
3d53e00;Jonas Borgström;2014-03-22 20:31:27 +0100;Added Johann Klähn to AUTHORS

==

AUTHORS
==================
8e43ebc;Jonas Borgström;2014-03-22 20:29:13 +0100;Merge pull request #57 from kljohann/help
accept names of other commands in help command
==
==================
f47353e;Johann Klähn;2014-03-21 22:12:15 +0100;accept names of other commands in help command

==

attic/archiver.py
==================
8a1ebe0;Jonas Borgström;2014-03-19 22:32:07 +0100;Added '--stats' option to attic prune and attic delete

==

CHANGES
attic/archive.py
attic/archiver.py
attic/cache.py
attic/helpers.py
==================
839dd94;Jonas Borgström;2014-03-19 21:58:25 +0100;prune: Delete all archives in a single transaction
This will improve performance and make the whole operation atomic

==

attic/archive.py
attic/archiver.py
==================
80e7e63;Jonas Borgström;2014-03-19 21:52:49 +0100;Make --stats output 78 characters wide

==

attic/archiver.py
attic/helpers.py
==================
92c333c;Jonas Borgström;2014-03-18 22:04:08 +0100;Add a method to detect out of date binary extension modules

==

attic/archiver.py
attic/chunker.pyx
attic/crypto.pyx
attic/hashindex.pyx
attic/helpers.py
==================
e398d5f;Jonas Borgström;2014-03-18 21:42:03 +0100;Include "all archives" size information in "--stats" output.
Closes #54

==

CHANGES
attic/_hashindex.c
attic/archiver.py
attic/hashindex.pyx
attic/helpers.py
==================
c3ca453;Jonas Borgström;2014-03-13 22:29:47 +0100;cache: Speed up cache rebuild by caching archive metadata requests

==

attic/archive.py
attic/cache.py
attic/remote.py
==================
c20aba8;Jonas Borgström;2014-03-12 21:00:30 +0100;docs: Add link to Slackware packages

==

docs/global.rst.inc
docs/index.rst
docs/installation.rst
==================
0e39acf;Jonas Borgström;2014-03-10 22:50:38 +0100;crypto: convert attic.crypto into a cython module
This will give a slight performance boost and make the openssl
detection/linking more robust.

==

attic/crypto.py
attic/crypto.pyx
attic/testsuite/crypto.py
setup.py
==================
8101017;Jonas Borgström;2014-03-10 22:05:23 +0100;tox: Make sure mock is installed in the py32 env

==

tox.ini
==================
fe9e2e3;Jonas Borgström;2014-03-09 22:39:44 +0100;website: github ribbon should be a https link

==

docs/_themes/attic/sidebarusefullinks.html
==================
10ef7fe;Jonas Borgström;2014-03-09 15:12:07 +0100;Move website to attic-backup.org

==

README.rst
docs/Makefile
docs/_themes/attic/sidebarusefullinks.html
docs/update_usage.sh
setup.py
==================
e3610c4;Jonas Borgström;2014-03-07 15:12:01 +0100;Preparing release

==

CHANGES
==================
90fe318;Jonas Borgström;2014-03-06 20:05:13 +0100;Attempt to make the archive metadata resync more robust

==

attic/archive.py
attic/testsuite/repository.py
==================
66a84c0;Jonas Borgström;2014-03-06 12:05:22 +0100;check: Fix a check --repair issue and added more tests

==

attic/repository.py
attic/testsuite/repository.py
==================
9dce236;Jonas Borgström;2014-03-05 20:00:27 +0100;archive checkpoint: Reset timer after the checkpoint has been committed

==

attic/archive.py
==================
3193af5;Jonas Borgström;2014-03-05 19:58:29 +0100;Remove explicit flush calls since line_buffering is enabled.

==

attic/archive.py
attic/archiver.py
attic/repository.py
==================
11c08f4;Jonas Borgström;2014-03-04 22:02:35 +0100;check: No progreess output to stderr during archives check

==

attic/archive.py
==================
55a26e5;Jonas Borgström;2014-03-04 21:56:37 +0100;check: replace --phase with --repository/archives-only

==

attic/archiver.py
attic/testsuite/archiver.py
==================
477e1a3;Jonas Borgström;2014-03-04 21:21:58 +0100;check: Make sure all non-critical output is sent to stdout

==

attic/archiver.py
attic/repository.py
==================
a68e48b;Jonas Borgström;2014-03-04 21:15:52 +0100;check: Make item stream resync a bit more robust

==

attic/archive.py
attic/testsuite/archive.py
==================
7be0ad6;Jonas Borgström;2014-03-01 15:00:21 +0100;Make the manifest rebuild code more robust
Try to make sure we've actually found msgpack data before feeding
it into msgpack.

==

attic/archive.py
attic/testsuite/archiver.py
==================
3982c34;Jonas Borgström;2014-02-26 23:13:48 +0100;Improve attic check documentation
Closes #24.

==

attic/archive.py
attic/archiver.py
attic/remote.py
attic/repository.py
attic/testsuite/archiver.py
docs/usage.rst
==================
678fb2c;Jonas Borgström;2014-02-26 20:27:08 +0100;testsuite: Fix test test_prune_repository

==

attic/testsuite/archiver.py
==================
1b42da1;Jonas Borgström;2014-02-26 20:26:37 +0100;Merge remote-tracking branch 'jdchristensen/prune-docs-info'

==
==================
fd2f3ea;Jonas Borgström;2014-02-25 12:33:23 +0100;Fix UnicodeEncodeError on verbose output of unicode paths
We can't assume that the stdout encoding is not less restrictive
than the filesystem encoding.

==

attic/archiver.py
==================
78c2ef6;Dan Christensen;2014-02-24 19:46:56 -0500;When -v is specified with prune, also show the timestamp of each archive, which is helpful for debugging.  Unify this with the formatting done by "attic list".  The spacing is chosen so that the attic prune output is 79 characters wide when the archive names are at most 36 characters.

==

attic/archiver.py
attic/helpers.py
==================
4c4018e;Dan Christensen;2014-02-24 19:32:18 -0500;Update prune documentation to use new command line options, and also to say that the time that matters is the time each backup completes.

==

attic/archiver.py
docs/usage.rst
==================
a229db0;Jonas Borgström;2014-02-24 23:37:21 +0100;check: More code cleanup

==

attic/archive.py
==================
9e8a944;Jonas Borgström;2014-02-24 22:43:17 +0100;check: archive metadata recovery improvements

==

attic/archive.py
attic/testsuite/archive.py
attic/testsuite/archiver.py
==================
c1e1d6e;Jonas Borgström;2014-02-24 12:59:38 +0100;repository: Fixed a potential infinite loop in recover_segment

==

attic/repository.py
==================
88ff981;Jonas Borgström;2014-02-23 13:15:57 +0100;Ignore xattr errors during extract if not supported by the filesystem
Closes #46.

==

CHANGES
attic/archive.py
==================
6425d16;Jonas Borgström;2014-02-21 20:20:17 +0100;repository: Fix potential race condition
If we crash between compact_segments() and write_index() and the
transaction deletes objects that are newer than the current index
might become undeleted.

==

attic/repository.py
attic/testsuite/repository.py
==================
bd22bc8;Jonas Borgström;2014-02-20 23:08:32 +0100;Automatically replay segments to rebuild missing repository index

==

attic/repository.py
attic/testsuite/mock.py
attic/testsuite/repository.py
==================
ea70050;Jonas Borgström;2014-02-20 12:41:12 +0100;Merge pull request #43 from jdchristensen/prune-dry-run
Add --dry-run option to prune.
==
==================
5d2d3f1;Dan Christensen;2014-02-19 21:33:05 -0500;Add --dry-run option to prune.

==

attic/archiver.py
attic/testsuite/archiver.py
==================
e458f85;Jonas Borgström;2014-02-19 22:46:15 +0100;Added command line deprecation functionality
The following deprecations are currently handled:

- attic verify -> attic extract --dry-run
- attic prune --hourly|daily|... -> attic prune --keep-X

==

CHANGES
attic/archiver.py
attic/testsuite/archiver.py
docs/quickstart.rst
==================
052e4f2;Jonas Borgström;2014-02-18 23:10:32 +0100;Remove some autogenerated files

==

.gitignore
docs/usage/change-passphrase.rst.inc
docs/usage/check.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/verify.rst.inc
==================
d551b13;Jonas Borgström;2014-02-18 23:09:12 +0100;Use StableDict in a few more places

==

attic/archive.py
attic/helpers.py
attic/testsuite/archiver.py
==================
7b31f23;Jonas Borgström;2014-02-18 21:33:06 +0100;Replace verify command with "extract --dry-run"
closes #25

==

CHANGES
attic/archive.py
attic/archiver.py
attic/helpers.py
attic/remote.py
attic/testsuite/archiver.py
docs/update_usage.sh
docs/usage.rst
==================
30daa23;Jonas Borgström;2014-02-18 21:16:36 +0100;Minor cleanup

==

attic/archive.py
attic/repository.py
==================
7bcb0f9;Jonas Borgström;2014-02-17 21:16:04 +0100;Slightly lower the number of file descriptors kept open
This is needed to support old version of sftp-server that only
support 100 open file descriptors. Closes #40.

==

attic/repository.py
==================
893120e;Jonas Borgström;2014-02-17 18:25:25 +0100;attic check performance improvement and minor progress reporting changes

==

attic/archive.py
attic/archiver.py
attic/hashindex.pyx
attic/helpers.py
attic/repository.py
attic/testsuite/archiver.py
==================
c394a31;Jonas Borgström;2014-02-16 23:36:48 +0100;Improved archive metadata deduplication.

==

CHANGES
attic/archive.py
attic/helpers.py
attic/testsuite/helpers.py
==================
f942b07;Jonas Borgström;2014-02-16 22:39:51 +0100;Added --exclude-from to CHANGES

==

CHANGES
==================
d44fa85;Jonas Borgström;2014-02-16 22:37:12 +0100;Fix exception during "attic create" with repeated files
Closes #39

==

CHANGES
attic/cache.py
attic/testsuite/archiver.py
==================
32e773c;Jonas Borgström;2014-02-16 22:21:18 +0100;Implemented archive metadata checking and repair

==

attic/archive.py
attic/archiver.py
attic/cache.py
attic/helpers.py
attic/repository.py
attic/testsuite/archive.py
attic/testsuite/archiver.py
==================
0d24819;Jonas Borgström;2014-02-10 21:51:25 +0100;Implemented Repository.list()

==

attic/remote.py
attic/repository.py
attic/testsuite/repository.py
==================
bbf490b;Jonas Borgström;2014-02-10 21:32:18 +0100;More repository check/repair improvements

==

attic/repository.py
attic/testsuite/repository.py
==================
2254884;Jonas Borgström;2014-02-10 12:50:57 +0100;Merge pull request #38 from jdchristensen/quickstart
Quickstart and --weekly doc fixes
==
==================
a79acdd;Dan Christensen;2014-02-09 16:15:49 -0500;Correct --weekly help to say weekly, not daily.

==

attic/archiver.py
==================
2d4382b;Dan Christensen;2014-02-09 16:15:27 -0500;Updates to quickstart.rst, including sshfs locking warning

==

docs/quickstart.rst
==================
ab1cf32;Jonas Borgström;2014-02-09 22:05:33 +0100;Implemented hashindex.iteritems(marker=X)

==

attic/hashindex.pyx
attic/testsuite/hashindex.py
==================
1e4fd4e;Jonas Borgström;2014-02-09 21:25:05 +0100;PyBuffer_FromMemory should be a static function

==

attic/_chunker.c
==================
66fe7e5;Jonas Borgström;2014-02-09 20:35:00 +0100;Removed redundant is_a_terminal function and minor check fixes.

==

attic/archiver.py
attic/helpers.py
attic/repository.py
==================
14dd041;Jonas Borgström;2014-02-09 20:30:57 +0100;Merge remote-tracking branch 'jdchristensen/help'

==
==================
1809ea2;Jonas Borgström;2014-02-09 15:52:36 +0100;More attic check --repair improvements

==

attic/archiver.py
attic/remote.py
attic/repository.py
attic/testsuite/repository.py
==================
33b58ea;Jonas Borgström;2014-02-09 00:17:32 +0100;Initial check --repair support

==

attic/archiver.py
attic/remote.py
attic/repository.py
attic/testsuite/archiver.py
attic/testsuite/repository.py
==================
5898b3b;Jonas Borgström;2014-02-09 16:04:32 +0100;Merge remote-tracking branch 'jdchristensen/prune-within'
Conflicts:
	attic/archiver.py

==
==================
b5483b7;Dan Christensen;2014-02-08 15:37:27 -0500;Add a --within option to the prune command.

==

attic/archiver.py
attic/helpers.py
attic/testsuite/helpers.py
==================
9d19550;Dan Christensen;2014-02-08 12:44:48 -0500;Add support for --exclude-from.

==

attic/archiver.py
attic/helpers.py
attic/testsuite/archiver.py
==================
020c4f8;Dan Christensen;2014-02-08 11:51:44 -0500;return self.exit_code from do_help

==

attic/archiver.py
==================
989a864;Dan Christensen;2014-02-08 11:45:36 -0500;Escape the backslash in the help text.

==

attic/archiver.py
==================
c0cb266;Dan Christensen;2014-02-08 09:44:31 -0500;On help on patterns.

==

attic/archiver.py
==================
2252616;Jonas Borgström;2014-02-08 13:31:51 +0100;Repository code cleanup

==

attic/repository.py
attic/testsuite/archiver.py
attic/testsuite/repository.py
==================
c22bc30;Jonas Borgström;2014-02-08 13:04:17 +0100;Merge pull request #33 from jdchristensen/exclude
fix include/exclude bugs and add more tests
==
==================
4da8466;Dan Christensen;2014-02-07 18:10:52 -0500;Fix a doc typo.

==

attic/helpers.py
==================
b76a40c;Dan Christensen;2014-02-07 18:04:21 -0500;Simplify the ExcludePattern logic further, and explain.

==

attic/helpers.py
==================
8cc74be;Dan Christensen;2014-02-07 16:27:18 -0500;Simplify IncludePattern and add a few more tests to PatternTestCase.

==

attic/helpers.py
attic/testsuite/helpers.py
==================
db96325;Dan Christensen;2014-02-07 16:04:06 -0500;Add one more test to PatternTestCase.

==

attic/testsuite/helpers.py
==================
9c5e3d4;Dan Christensen;2014-02-07 15:54:24 -0500;Fix minor bugs in IncludePattern and ExcludePattern, and speed up ExcludePattern by storing a compiled regular expression.

==

attic/helpers.py
==================
59c8008;Dan Christensen;2014-02-07 15:51:27 -0500;Add more tests to PatternTestCase.  The first two fail with the current code.

==

attic/testsuite/helpers.py
==================
4271ffa;Jonas Borgström;2014-02-05 22:49:12 +0100;Only cleanup partial transactions if an existing transaction is found

==

attic/remote.py
attic/repository.py
attic/testsuite/repository.py
==================
e4a28f2;Jonas Borgström;2014-02-05 20:30:53 +0100;Remove flush=True argument from print() since it is Python3.3+

==

attic/repository.py
==================
5abd254;Jonas Borgström;2014-02-05 20:18:31 +0100;Fixed repository check progress reporting.

==

attic/archiver.py
attic/repository.py
==================
7a7cc2b;Jonas Borgström;2014-02-05 00:07:03 +0100;Removed some dead code.

==

attic/repository.py
==================
faedaf8;Jonas Borgström;2014-02-04 23:49:10 +0100;Basic repository consistency check functionality.
Still no archive metadata validation or repair functionality.

==

CHANGES
attic/archiver.py
attic/hashindex.pyx
attic/helpers.py
attic/remote.py
attic/repository.py
attic/testsuite/archiver.py
attic/testsuite/repository.py
docs/update_usage.sh
docs/usage.rst
docs/usage/check.rst.inc
==================
b5037cf;Jonas Borgström;2014-02-04 11:17:13 -0800;Merge pull request #32 from jdchristensen/docs2
Docs2: update lots of documentation
==
==================
400ea33;Dan Christensen;2014-02-03 21:48:22 -0500;Update README.rst.

==

README.rst
==================
0b9969d;Dan Christensen;2014-02-03 21:26:36 -0500;Various minor documentation updates: mention sshfs, Linux packages, minor changes to prose, etc.

==

docs/global.rst.inc
docs/index.rst
docs/installation.rst
docs/quickstart.rst
==================
6b639e4;Dan Christensen;2014-02-03 20:11:47 -0500;Update prune docs and a few other things in usage.rst.

==

attic/archiver.py
docs/usage.rst
docs/usage/prune.rst.inc
==================
3290aa9;Jonas Borgström;2014-02-03 23:03:25 +0100;Update README.rst with the correct way to run the test suite

==

README.rst
==================
7109318;Jonas Borgström;2014-02-03 21:07:03 +0100;Added AUTHORS file

==

AUTHORS
==================
e857d4c;Jonas Borgström;2014-02-03 12:04:31 -0800;Merge pull request #30 from jdchristensen/prune_split
Clean up and correct prune_split; add tests
==
==================
d3ff6ac;Dan Christensen;2014-02-02 23:45:53 -0500;Clean-up helpers.prune_split

==

attic/helpers.py
==================
13863e6;Dan Christensen;2014-02-02 23:44:04 -0500;Correct a theoretical bug in helpers.prune_split

==

attic/helpers.py
==================
c45aedf;Dan Christensen;2014-02-02 23:42:10 -0500;Add tests for helpers.prune_split, one of which fails.

==

attic/testsuite/helpers.py
==================
50cabd5;Jonas Borgström;2014-01-30 22:16:21 +0100;Fix deadlock when extracting 0 sized files from remote repositories

==

CHANGES
attic/remote.py
attic/testsuite/archiver.py
==================
2068e7c;Jonas Borgström;2014-01-30 20:33:29 +0100;Properly apply --exclude wildcards to the full path.
Closes #5

==

CHANGES
attic/helpers.py
attic/testsuite/helpers.py
==================
1520a91;Jonas Borgström;2014-01-30 20:32:43 +0100;Add a "fork me on Github" ribbon.

==

docs/_themes/attic/sidebarusefullinks.html
==================
0a7c51e;Jonas Borgström;2014-01-29 21:34:21 +0100;Improve endianness code portability

==

attic/_hashindex.c
attic/hashindex.pyx
==================
5bde1c8;Jonas Borgström;2014-01-28 22:40:07 +0100;Make source code endianness agnostic
Closes #1

==

CHANGES
attic/_hashindex.c
attic/hashindex.pyx
==================
9c80089;Jonas Borgström;2014-01-26 12:51:56 +0100;Documentation update.
Added links to Debian, Ubuntu and Arch linux packages and
added a comment about Cython dependency when installing from git.

Closes #21.

==

docs/global.rst.inc
docs/index.rst
docs/installation.rst
==================
3bfe93d;Jonas Borgström;2014-01-23 22:14:20 +0100;Prepare release

==

CHANGES
==================
d023f2a;Jonas Borgström;2014-01-23 22:13:08 +0100;Remove peek concept and fix fuse issue

==

attic/archive.py
attic/archiver.py
attic/fuse.py
==================
c26d63b;Jonas Borgström;2014-01-23 21:46:53 +0100;Removed some unused imports

==

attic/archiver.py
==================
1ee159a;Jonas Borgström;2014-01-23 21:43:20 +0100;Improved remote repository exception handling.

==

attic/remote.py
==================
b41914a;Jonas Borgström;2014-01-22 22:10:36 +0100;Verify archive metadata version before syncing cache.

==

attic/cache.py
==================
bd5b72a;Jonas Borgström;2014-01-22 20:58:48 +0100;Improved remote repository performance and reliability

==

CHANGES
attic/archive.py
attic/cache.py
attic/remote.py
attic/repository.py
attic/testsuite/archive.py
==================
c973040;Jonas Borgström;2014-01-09 22:10:21 +0100;Improve libcrypto detection
Closes #23.

==

CHANGES
attic/crypto.py
==================
3a064ab;Jonas Borgström;2014-01-03 14:47:02 +0100;Fix sorting of segment names to ignore NFS left over files.
Closes #17.

==

CHANGES
LICENSE
attic/repository.py
docs/conf.py
==================
57dfe37;Jonas Borgström;2013-12-31 04:59:59 -0800;Merge pull request #20 from Ernest0x/empty_segment_fix
Consider segment incomplete if segment file is empty or too small
==
==================
c933639;Petros Moisiadis;2013-12-30 17:21:47 +0200;Consider segment incomplete if segment file is empty or too small
This fixes an IOError that could be raised when trying to seek() to
a negative file offset, because (for any reason) a segment file was
empty (or too small).

==

attic/repository.py
==================
e9fd2bc;Jonas Borgström;2013-12-17 07:59:03 -0800;Merge pull request #16 from Ernest0x/fix_repository_errors
Added missing repository path/url when raising DoesNotExist and AlreadyExists exceptions
==
==================
4e68f98;Petros Moisiadis;2013-12-17 16:53:10 +0200;Added missing repository path/url when raising DoesNotExist and AlreadyExists exceptions

==

attic/remote.py
attic/repository.py
==================
87749e4;Jonas Borgström;2013-12-15 21:36:20 +0100;Fix timezone issue on python 3.2

==

attic/helpers.py
==================
f3e9fa2;Jonas Borgström;2013-12-15 21:25:32 +0100;Fix incorrect display of time
Closes #13

==

CHANGES
attic/archive.py
attic/helpers.py
==================
7bacfa2;Jonas Borgström;2013-12-15 20:35:29 +0100;Improved error handling/reporting.
Closes #12.

==

CHANGES
attic/archive.py
attic/archiver.py
attic/cache.py
attic/helpers.py
attic/remote.py
attic/repository.py
attic/testsuite/helpers.py
==================
a56652f;Jonas Borgström;2013-12-14 20:44:20 +0100;Use lockf() instead of flock() when locking repository/cache
This is a reworked version of Petros Moisiadis' original pull request
since some extra effort is needed to support access to read-only
repositories.

==

CHANGES
attic/cache.py
attic/helpers.py
attic/repository.py
attic/testsuite/helpers.py
==================
29d184d;Brian Johnson;2013-11-27 11:07:35 -0500;Let ssh figure out port/user if not specified so we don't override .ssh/config
Modified by Jonas Borgström:
- Added CHANGES entry
- Fixed broken unit test

==

CHANGES
attic/helpers.py
attic/remote.py
attic/testsuite/helpers.py
==================
a579b79;Jonas Borgström;2013-10-18 21:00:20 +0200;Remove unused imports

==

attic/archiver.py
attic/lrucache.py
attic/testsuite/archiver.py
==================
b5b0b7b;Jonas Borgström;2013-10-10 22:24:06 +0200;Add two additional tests.

==

attic/testsuite/hashindex.py
attic/testsuite/repository.py
==================
9e9ece6;Jonas Borgström;2013-10-04 22:06:16 +0200;Attic 0.8.1

==

CHANGES
attic/_hashindex.c
==================
7e7c725;Jonas Borgström;2013-10-03 21:02:48 +0200;Attic 0.8

==

CHANGES
==================
530dfd1;Jonas Borgström;2013-10-03 21:00:54 +0200;Documentation update

==

docs/usage.rst
docs/usage/init.rst.inc
==================
baaeb7e;Jonas Borgström;2013-10-02 20:42:26 +0200;Fix hashindex resize issue
closes #6

==

attic/_hashindex.c
attic/testsuite/__init__.py
attic/testsuite/hashindex.py
==================
0c278ad;Jonas Borgström;2013-09-01 22:13:46 +0200;Fix copy-paste error in xattr.py

==

attic/xattr.py
==================
8a29017;Jonas Borgström;2013-08-17 14:46:24 +0200;Don't use os.listxattr even if available.

==

attic/testsuite/__init__.py
attic/xattr.py
==================
a84613f;Jonas Borgström;2013-08-17 12:38:35 +0200;Fix xattr issue when backing up sshfs filesystems (Closes #4).

==

CHANGES
attic/xattr.py
==================
033dfe1;Jonas Borgström;2013-08-17 12:35:43 +0200;More code cleanup

==

attic/crypto.py
==================
ae4ddac;Jonas Borgström;2013-08-12 22:47:25 +0200;Minor cleanup of remote code

==

attic/archive.py
attic/remote.py
==================
3a9425f;Jonas Borgström;2013-08-12 15:12:14 +0200;Added .gitattributes

==

.gitattributes
==================
b92a620;Jonas Borgström;2013-08-12 14:39:14 +0200;Crypto code cleanup and test improvements.

==

attic/crypto.py
attic/key.py
attic/testsuite/archiver.py
attic/testsuite/key.py
==================
ee77ce8;Jonas Borgström;2013-08-12 13:39:46 +0200;Added more robust test for AES counter uniqueness

==

attic/crypto.py
attic/testsuite/archiver.py
==================
16d9e55;Jonas Borgström;2013-08-11 22:18:56 +0200;Support access of read only repositories

==

CHANGES
attic/_hashindex.c
attic/hashindex.pyx
attic/repository.py
attic/testsuite/archiver.py
==================
012e0d4;Jonas Borgström;2013-08-10 13:02:20 +0200;New syntax to enable repository encryption

==

CHANGES
attic/archiver.py
attic/key.py
docs/quickstart.rst
==================
5fa5380;Jonas Borgström;2013-08-09 23:23:00 +0200;Detect and abort if repository is older than the cache

==

CHANGES
attic/archiver.py
attic/cache.py
attic/helpers.py
==================
b2346b7;Jonas Borgström;2013-08-09 13:03:48 +0200;Hide internal "serve" command from "Available commands".

==

attic/archiver.py
==================
9ebeb0f;Jonas Borgström;2013-08-06 21:35:43 +0200;Documentation: Added info about mailing list

==

README.rst
docs/conf.py
docs/global.rst.inc
docs/index.rst
==================
3b4875c;Jonas Borgström;2013-08-05 22:45:24 +0200;Start using versioneer for version numbers

==

MANIFEST.in
attic/__init__.py
attic/_version.py
attic/archiver.py
docs/conf.py
setup.py
versioneer.py
==================
781a955;Jonas Borgström;2013-08-05 22:43:50 +0200;Remove nature.css and make sure docs folder is included by sdist

==

MANIFEST.in
docs/_static/nature.css
==================
05a14c3;Jonas Borgström;2013-08-05 20:54:27 +0200;Attic 0.7

==

CHANGES
README.rst
attic/__init__.py
==================
7815ed5;Jonas Borgström;2013-08-05 20:38:37 +0200;Fix xattr issue on OS X.

==

attic/testsuite/archiver.py
attic/xattr.py
==================
a51a10a;Jonas Borgström;2013-08-04 22:50:34 +0200;More documentation improvements.

==

docs/_themes/attic/static/attic.css_t
docs/conf.py
docs/foreword.rst
docs/index.rst
docs/quickstart.rst
docs/terminology.rst
docs/update_usage.sh
docs/usage.rst
docs/usage/change-passphrase.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/verify.rst.inc
==================
a35339f;Jonas Borgström;2013-08-04 21:23:12 +0200;Renamed commands.rst to usage.rst

==

docs/commands.rst
docs/index.rst
docs/update_usage.sh
docs/usage.rst
docs/usage/change-passphrase.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/verify.rst.inc
==================
f230a96;Jonas Borgström;2013-08-04 13:43:35 +0200;Update homepage url and make version number pep440 compliant

==

attic/__init__.py
attic/archiver.py
setup.py
==================
af059fb;Jonas Borgström;2013-08-03 13:34:14 +0200;Make sure all paths included in an archive are relative and local

==

attic/archive.py
attic/archiver.py
attic/helpers.py
attic/testsuite/__init__.py
attic/testsuite/archiver.py
attic/testsuite/helpers.py
==================
b6c8392;Jonas Borgström;2013-07-31 20:51:01 +0200;More documentation work

==

attic/archiver.py
docs/Makefile
docs/_static/nature.css
docs/_themes/attic/sidebarlogo.html
docs/_themes/attic/static/attic.css_t
docs/commands.rst
docs/conf.py
docs/detailedusage.rst
docs/faq.rst
docs/foreword.rst
docs/generalusage.rst
docs/global.rst.inc
docs/index.rst
docs/installation.rst
docs/quickstart.rst
docs/update_usage.sh
docs/usage.rst
docs/usage/change-passphrase.rst.inc
docs/usage/create.rst.inc
docs/usage/delete.rst.inc
docs/usage/extract.rst.inc
docs/usage/info.rst.inc
docs/usage/init.rst.inc
docs/usage/list.rst.inc
docs/usage/mount.rst.inc
docs/usage/prune.rst.inc
docs/usage/verify.rst.inc
==================
e016a4e;Jonas Borgström;2013-08-01 13:23:15 +0200;A new Attic sphinx theme

==

docs/_themes/attic/sidebarlogo.html
docs/_themes/attic/sidebarusefullinks.html
docs/_themes/attic/static/attic.css_t
docs/_themes/attic/theme.conf
docs/conf.py
docs/index.rst
==================
41c18f9;Jonas Borgström;2013-07-30 21:51:21 +0200;Document ATTIC_PASSPHRASE

==

docs/faq.rst
docs/generalusage.rst
==================
2e237ad;Jonas Borgström;2013-07-30 14:52:02 +0200;Improved mtime precisoin checking for FUSE.

==

attic/fuse.py
attic/testsuite/__init__.py
attic/testsuite/archiver.py
==================
43a4bf6;Jonas Borgström;2013-07-30 13:54:04 +0200;Updated documentation

==

docs/global.rst.inc
docs/installation.rst
docs/update_usage.sh
docs/usage.rst
==================
df5e4a5;Jonas Borgström;2013-07-29 21:09:31 +0200;Fix Python 3.2 issue on FreeBSD

==

attic/archive.py
attic/testsuite/__init__.py
attic/xattr.py
==================
88618e4;Jonas Borgström;2013-07-29 14:30:26 +0200;Fix mtime precision checks for python < 3.3

==

attic/testsuite/__init__.py
==================
8e03738;Jonas Borgström;2013-07-29 13:57:43 +0200;More robust mtime precision checks

==

attic/helpers.py
attic/testsuite/__init__.py
==================
2be5867;Jonas Borgström;2013-07-28 14:55:48 +0200;Ported to FreeBSD

==

CHANGES
attic/crypto.py
attic/xattr.py
setup.py
==================
f049b3d;Jonas Borgström;2013-07-28 13:38:41 +0200;Fix xattr on OS X

==

attic/xattr.py
==================
2281af5;Jonas Borgström;2013-07-27 22:33:43 +0200;Rewrote xattr support

==

attic/archive.py
attic/fuse.py
attic/testsuite/__init__.py
attic/testsuite/archiver.py
attic/testsuite/xattr.py
attic/xattr.py
==================
6c5f494;Jonas Borgström;2013-07-27 14:44:12 +0200;fuse: allow additional mount options using "-o foo,bar"

==

attic/archiver.py
attic/fuse.py
==================
6267774;Jonas Borgström;2013-07-27 14:31:28 +0200;Make fuse fs work on OS X

==

attic/fuse.py
attic/testsuite/archiver.py
==================
beed6b3;Jonas Borgström;2013-07-26 13:23:33 +0200;Simplify wait_for_mount()

==

attic/testsuite/__init__.py
==================
99f64df;Jonas Borgström;2013-07-26 13:18:57 +0200;archiver test case improvements.

==

attic/testsuite/__init__.py
attic/testsuite/archiver.py
==================
e8e3289;Jonas Borgström;2013-07-25 23:18:34 +0200;travis: Don't try to use fuse since it's not available

==

.travis.yml
==================
f4acace;Jonas Borgström;2013-07-25 23:08:03 +0200;travis: install libattr1-dev

==

.travis.yml
==================
071dfc2;Jonas Borgström;2013-07-25 23:01:05 +0200;travis: install libfuse-dev and fuse-utils

==

.travis.yml
==================
0b19df3;Jonas Borgström;2013-07-25 22:54:19 +0200;Added initial fuse test case

==

.travis.yml
attic/fuse.py
attic/testsuite/archiver.py
==================
023da55;Jonas Borgström;2013-07-25 21:34:26 +0200;Master is 0.7dev

==

CHANGES
attic/__init__.py
==================
5d1e9dc;Jonas Borgström;2013-07-24 13:23:51 +0200;Daemonize by default when mounting fuse filesystem

==

attic/archiver.py
attic/fuse.py
attic/helpers.py
==================
bcc99aa;Jonas Borgström;2013-07-24 13:05:47 +0200;More code cleanup

==

attic/archiver.py
attic/fuse.py
==================
eabe7c7;Jonas Borgström;2013-07-23 13:40:54 +0200;More memory efficient implementation

==

attic/fuse.py
==================
f4b12a3;Jonas Borgström;2013-07-23 13:07:48 +0200;Added hard links support

==

attic/fuse.py
==================
4f88eac;Jonas Borgström;2013-07-23 10:44:29 +0200;fuse: added xattr support

==

attic/fuse.py
==================
961890a;Jonas Borgström;2013-07-22 00:41:06 +0200;Initial fuse attempt

==

attic/archiver.py
attic/fuse.py
==================
5df3e91;Jonas Borgström;2013-07-19 13:22:22 +0200;Bump version number to 0.6.1

==

attic/__init__.py
docs/global.rst.inc
==================
576daaf;Jonas Borgström;2013-07-19 13:13:54 +0200;call fd.flush() to make sure mtime isn't modified on fd.close()

==

CHANGES
attic/archive.py
==================
e2648ae;Jonas Borgström;2013-07-09 20:59:20 +0200;Bump version number to 0.6

==

CHANGES
attic/__init__.py
==================
b718a44;Jonas Borgström;2013-07-08 23:38:27 +0200;Project rename

==

.travis.yml
README.rst
attic/__init__.py
attic/_chunker.c
attic/_hashindex.c
attic/archive.py
attic/archiver.py
attic/cache.py
attic/chunker.pyx
attic/crypto.py
attic/hashindex.pyx
attic/helpers.py
attic/key.py
attic/lrucache.py
attic/remote.py
attic/repository.py
attic/testsuite/__init__.py
attic/testsuite/archiver.py
attic/testsuite/chunker.py
attic/testsuite/crypto.py
attic/testsuite/hashindex.py
attic/testsuite/helpers.py
attic/testsuite/key.py
attic/testsuite/lrucache.py
attic/testsuite/repository.py
attic/testsuite/run.py
attic/testsuite/xattr.py
attic/xattr.py
darc/__init__.py
darc/_chunker.c
darc/_hashindex.c
darc/archive.py
darc/archiver.py
darc/cache.py
darc/chunker.pyx
darc/crypto.py
darc/hashindex.pyx
darc/helpers.py
darc/key.py
darc/lrucache.py
darc/remote.py
darc/repository.py
darc/testsuite/__init__.py
darc/testsuite/archiver.py
darc/testsuite/chunker.py
darc/testsuite/crypto.py
darc/testsuite/hashindex.py
darc/testsuite/helpers.py
darc/testsuite/key.py
darc/testsuite/lrucache.py
darc/testsuite/repository.py
darc/testsuite/run.py
darc/testsuite/xattr.py
darc/xattr.py
docs/Makefile
docs/conf.py
docs/faq.rst
docs/generalusage.rst
docs/global.rst.inc
docs/index.rst
docs/installation.rst
docs/update_usage.sh
docs/usage.rst
scripts/attic
scripts/darc
setup.py
tox.ini
==================
a5a73ca;Jonas Borgström;2013-07-08 21:57:25 +0200;Fix reST syntax
[ci skip]

==

README.rst
==================
a9272ce;Jonas Borgström;2013-07-08 21:19:50 +0200;Update documentation

==

MANIFEST.in
README.rst
docs/global.rst.inc
docs/index.rst
docs/installation.rst
==================
e578d28;Jonas Borgström;2013-07-08 14:00:22 +0200;Remove hashing from PlaintextKey.
Not needed since silent disk corruption will be detected
by the repository segment checksum.

==

darc/key.py
==================
a887fa2;Jonas Borgström;2013-07-05 16:57:36 +0200;Verify hash before decompressing with PlaintextKey

==

darc/key.py
==================
0c1d6e8;Jonas Borgström;2013-07-05 15:49:07 +0200;Fix usage.rst syntax

==

docs/update_usage.sh
docs/usage.rst
==================
701a940;Jonas Borgström;2013-07-05 12:36:49 +0200;Inline comments not supported in tox.ini

==

tox.ini
==================
1cb5cff;Jonas Borgström;2013-07-05 12:33:38 +0200;Add MANIFEST.in

==

MANIFEST.in
==================
f827b99;Jonas Borgström;2013-07-05 12:32:56 +0200;Improved documentation.

==

COPYING
LICENSE
README
README.rst
darc/archiver.py
docs/Makefile
docs/definitions.rst
docs/detailedusage.rst
docs/generalusage.rst
docs/index.rst
docs/terminology.rst
docs/update_usage.sh
docs/usage.rst
setup.py
==================
2ca0631;Jonas Borgström;2013-07-04 12:10:11 +0200;Use less precision when comparing mtime on systems not supporting st_mtime_ns

==

darc/testsuite/archiver.py
==================
3721f04;Jonas Borgström;2013-07-04 11:59:15 +0200;Skip xattr tests unless xattr is enabled on host

==

darc/testsuite/archiver.py
darc/testsuite/xattr.py
darc/xattr.py
==================
7dd937f;Jonas Borgström;2013-07-04 11:58:12 +0200;Remove attempts to enable user_xattr
[no ci]

==

.travis.yml
==================
f4f9138;Jonas Borgström;2013-07-03 23:41:25 +0200;Try /home/travis next

==

.travis.yml
==================
2a7753c;Jonas Borgström;2013-07-03 23:32:42 +0200;Try /home instead

==

.travis.yml
==================
36e6f35;Jonas Borgström;2013-07-03 23:29:40 +0200;Enable xattr on the current fs instead of /

==

.travis.yml
==================
4321b01;Jonas Borgström;2013-07-03 23:22:32 +0200;Use sudo to run apt-get

==

.travis.yml
==================
7c18073;Jonas Borgström;2013-07-03 23:06:49 +0200;Use fakeroot when running tests and enable user_xattr

==

.travis.yml
==================
5ad2839;Jonas Borgström;2013-07-03 23:00:11 +0200;Enable shortcut for the RemoteRepositoryTestCase

==

darc/testsuite/repository.py
==================
40e2890;Jonas Borgström;2013-07-03 22:52:16 +0200;Use pip install -e instead of setup.py install

==

.travis.yml
==================
46491eb;Jonas Borgström;2013-07-03 22:46:46 +0200;Added  .travis.yml

==

.travis.yml
==================
6d23825;Jonas Borgström;2013-07-03 22:38:17 +0200;updated README

==

README
==================
6052a1e;Jonas Borgström;2013-07-03 22:38:07 +0200;Minor docs tweaks

==

docs/definitions.rst
docs/faq.rst
docs/generalusage.rst
docs/index.rst
docs/installation.rst
==================
f3295cf;Jonas Borgström;2013-07-03 22:30:04 +0200;Add testsuite shortcut to make remote repository testing more robust.

==

darc/remote.py
darc/testsuite/archiver.py
==================
8bdda86;Jonas Borgström;2013-07-03 13:08:48 +0200;Removed unused include and added missing close()-call.

==

darc/_hashindex.c
==================
07270cf;Jonas Borgström;2013-07-03 12:19:16 +0200;Various hashindex improvements

==

darc/_hashindex.c
darc/hashindex.pyx
darc/testsuite/hashindex.py
==================
7e06d30;Jonas Borgström;2013-06-30 22:32:27 +0200;Rework how exclude patterns work

==

darc/archive.py
darc/archiver.py
darc/helpers.py
darc/testsuite/archiver.py
darc/testsuite/helpers.py
==================
445b862;Jonas Borgström;2013-06-30 21:30:17 +0200;Added more installation documentation.

==

docs/global.rst.inc
docs/index.rst
docs/installation.rst
==================
a32c565;Jonas Borgström;2013-06-29 23:56:44 +0200;Docs improvements

==

docs/Makefile
docs/conf.py
docs/definitions.rst
docs/faq.rst
docs/generalusage.rst
docs/global.rst.inc
docs/index.rst
docs/make.bat
==================
a5376ea;Jonas Borgström;2013-06-29 14:22:05 +0200;Added hashindex test cases and removed unused BandIndex

==

darc/hashindex.pyx
darc/testsuite/hashindex.py
==================
175f4bb;Jonas Borgström;2013-06-28 13:31:57 +0200;Don't print a traceback when remote host closes connection

==

darc/archiver.py
darc/remote.py
==================
0b69711;Jonas Borgström;2013-06-28 12:38:54 +0200;Add a endianness check to _hashindex.c until the code is big endian safe

==

darc/_hashindex.c
==================
cda6d4e;Jonas Borgström;2013-06-27 22:48:49 +0200;Minor setup.py fix

==

setup.py
==================
bf4b13d;Jonas Borgström;2013-06-27 22:10:15 +0200;More xattr code cleanup

==

darc/testsuite/xattr.py
darc/xattr.py
setup.py
tox.ini
==================
4ff095c;Jonas Borgström;2013-06-27 21:56:14 +0200;xattr testsuite improvments

==

darc/crypto.py
darc/testsuite/xattr.py
darc/xattr.py
==================
0bc8dec;Jonas Borgström;2013-06-27 21:10:29 +0200;Port xattr.py to OS X

==

darc/archive.py
darc/crypto.py
darc/hashindex.pyx
darc/xattr.py
==================
263b7f6;Jonas Borgström;2013-06-27 13:28:59 +0200;Switch to our own xattr implementation

==

darc/archive.py
darc/testsuite/archiver.py
darc/testsuite/xattr.py
darc/xattr.py
docs/index.rst
setup.py
==================
00bdfa1;Jonas Borgström;2013-06-26 22:00:23 +0200;Add py3.2 compatible unhexlify to helpers.py

==

darc/cache.py
darc/helpers.py
darc/repository.py
darc/testsuite/key.py
tox.ini
==================
f6e9da9;Jonas Borgström;2013-06-26 21:20:31 +0200;Fix argparse py33 issue

==

darc/archiver.py
darc/testsuite/archiver.py
==================
7875ab3;Jonas Borgström;2013-06-26 13:55:41 +0200;Move cache dir to ~/.cache/darc

==

darc/archiver.py
darc/helpers.py
==================
9630714;Jonas Borgström;2013-06-26 13:41:42 +0200;Fix location parsing issue with short paths

==

darc/helpers.py
darc/testsuite/helpers.py
==================
cbfdedc;Jonas Borgström;2013-06-26 13:30:55 +0200;Added makefile target to update gh-pages branch

==

docs/Makefile
==================
06db9e8;Jonas Borgström;2013-06-25 12:39:22 +0200;Various sphinx related fixes

==

darc/__init__.py
docs/conf.py
setup.py
tox.ini
==================
9421b64;Jonas Borgström;2013-06-24 22:41:05 +0200;Test case refactoring

==

darc/cache.py
darc/crypto.py
darc/helpers.py
darc/key.py
darc/lrucache.py
darc/remote.py
darc/repository.py
darc/test.py
darc/testsuite/__init__.py
darc/testsuite/archiver.py
darc/testsuite/chunker.py
darc/testsuite/crypto.py
darc/testsuite/helpers.py
darc/testsuite/key.py
darc/testsuite/lrucache.py
darc/testsuite/repository.py
darc/testsuite/run.py
setup.py
tox.ini
==================
8a2f555;Jonas Borgström;2013-06-24 13:53:02 +0200;Packaging improvements

==

.gitignore
COPYING
darc/__init__.py
fake_pyrex/Pyrex/Distutils/__init__.py
fake_pyrex/Pyrex/Distutils/build_ext.py
fake_pyrex/Pyrex/__init__.py
fake_pyrex/README
setup.cfg
setup.py
tox.ini
==================
2f3489e;Jonas Borgström;2013-06-22 23:08:53 +0200;Bump passphrase pbkdf interations count to 100,000.
Other test improvements

==

darc/key.py
==================
5992926;Jonas Borgström;2013-06-22 21:24:17 +0200;Buffer might already be full when chunker_fill is called.

==

darc/_chunker.c
==================
8cc92d8;Jonas Borgström;2013-06-22 19:51:07 +0200;Avoid unnecessary reads when we've already reached EOF.

==

darc/_chunker.c
==================
c330529;Jonas Borgström;2013-06-22 13:35:16 +0200;Make sure the path hashed by the files cache is absolute

==

darc/archive.py
==================
6fb7ac4;Jonas Borgström;2013-06-22 13:33:21 +0200;Fix include/exclude filter issue

==

darc/archive.py
darc/test.py
==================
0e5bed3;Jonas Borgström;2013-06-20 13:42:10 +0200;Various key file improvements

==

darc/key.py
==================
e22fcdc;Jonas Borgström;2013-06-20 12:48:54 +0200;Forgot to add repository.py

==

darc/repository.py
==================
c4ec578;Jonas Borgström;2013-06-20 12:44:58 +0200;Rename store -> repository

==

darc/archive.py
darc/archiver.py
darc/cache.py
darc/helpers.py
darc/key.py
darc/remote.py
darc/store.py
darc/test.py
docs/index.rst
==================
eec876e;Jonas Borgström;2013-06-18 21:34:22 +0200;Fix setup.py issue when Cython is not available

==

setup.py
==================
76e3cd6;Jonas Borgström;2013-06-16 23:28:09 +0200;Replace pycrypto with ctype wrapped libcrypto

==

darc/crypto.py
darc/key.py
darc/test.py
==================
ad08664;Jonas Borgström;2013-06-15 20:56:27 +0200;Switch to st_mtime_ns when available

==

darc/archive.py
darc/archiver.py
darc/cache.py
darc/helpers.py
darc/test.py
==================
1fdc5ea;Jonas Borgström;2013-06-03 13:45:48 +0200;Port to Python 3.2+

==

darc/_chunker.c
darc/archive.py
darc/archiver.py
darc/cache.py
darc/hashindex.pyx
darc/helpers.py
darc/key.py
darc/lrucache.py
darc/remote.py
darc/store.py
darc/test.py
setup.py
==================
bda6bc4;Jonas Borgström;2013-06-02 15:55:23 +0200;Use buffer instead of string slicing to reduce memory usage.

==

darc/key.py
darc/remote.py
darc/test.py
==================
9944733;Jonas Borgström;2013-06-01 14:17:16 +0200;Remove const usage from pyx files to not confuse older cython versions.

==

darc/chunker.pyx
==================
3e54338;Jonas Borgström;2013-05-28 14:35:55 +0200;Use Cython for all native code

==

.gitignore
darc/_chunker.c
darc/_hashindex.c
darc/_speedups.c
darc/archive.py
darc/chunker.pyx
darc/hashindex.h
darc/hashindex.pyx
darc/remote.py
darc/test.py
setup.py
==================
b994203;Jonas Borgström;2013-05-18 23:03:16 +0200;chmod should be called before chown to avoid SUID and SGRP reset.

==

darc/archive.py
darc/test.py
==================
1dc1411;Jonas Borgström;2013-05-17 14:30:39 +0200;Add msgpack-python >= 0.3 compatibility

==

darc/archive.py
darc/cache.py
darc/remote.py
==================
49744c0;Jonas Borgström;2012-12-18 21:58:58 +0100;Improved AES counter storage

==

darc/helpers.py
darc/key.py
==================
5b28d42;Jonas Borgström;2012-12-18 20:38:16 +0100;Switch to a buzhash (cyclic polynomial) chunkify implementation

==

darc/_speedups.c
darc/archive.py
darc/test.py
==================
19cb905;Jonas Borgström;2012-12-18 19:51:34 +0100;LRUCache: added missing .pop() implementation

==

darc/lrucache.py
==================
09744e5;Jonas Borgström;2012-12-10 20:48:39 +0100;Improved test coverage and end of year weekly pruning bug fix

==

darc/archive.py
darc/archiver.py
darc/cache.py
darc/key.py
darc/test.py
==================
da0e3c4;Jonas Borgström;2012-12-09 23:06:33 +0100;Improved error handling.

==

darc/archive.py
darc/archiver.py
darc/remote.py
darc/store.py
darc/test.py
==================
0cc09fb;Jonas Borgström;2012-12-07 11:17:23 +0100;mknod needs st_rdev, not st_dev.

==

darc/archive.py
==================
491c560;Jonas Borgström;2012-12-06 23:26:52 +0100;Fix tyop

==

darc/archiver.py
==================
8bb522f;Jonas Borgström;2012-12-06 23:04:01 +0100;Improved handling of already existing destination files

==

darc/archive.py
darc/archiver.py
darc/test.py
==================
e48d7aa;Jonas Borgström;2012-12-06 22:58:57 +0100;Make sure stdin and stdout are non-blocking to avoid dead locks

==

darc/remote.py
==================
e80e600;Jonas Borgström;2012-12-06 22:57:55 +0100;Simpler and faster LRUCache implementation

==

darc/lrucache.py
==================
f289332;Jonas Borgström;2012-12-04 23:02:10 +0100;Added support for unencrypted and passphrase encrypted stores

==

darc/archiver.py
darc/helpers.py
darc/key.py
darc/test.py
==================
938901d;Jonas Borgström;2012-11-30 22:43:38 +0100;Fix issue with delete only transactions

==

darc/store.py
==================
177569d;Jonas Borgström;2012-11-30 21:47:35 +0100;Fix remote store cache issue

==

darc/archive.py
darc/lrucache.py
darc/remote.py
darc/store.py
darc/test.py
==================
3fc4b69;Jonas Borgström;2012-11-29 20:38:03 +0100;Fix info subcommand bug

==

darc/archive.py
==================
7245575;Jonas Borgström;2012-11-28 21:17:00 +0100;Pipeline improvements and minor code cleanup.

==

darc/archive.py
darc/remote.py
==================
514ab1f;Jonas Borgström;2012-11-28 21:14:54 +0100;Code cleanup and minor performance boost.

==

darc/cache.py
==================
46c6793;Jonas Borgström;2012-11-28 00:03:35 +0100;Improved remote store request pipelining.

==

darc/archive.py
darc/archiver.py
darc/remote.py
darc/store.py
==================
475e97c;Jonas Borgström;2012-10-17 12:27:45 +0200;Fix pattern adjustment bug

==

darc/helpers.py
==================
8b054a1;Jonas Borgström;2012-10-17 11:40:23 +0200;Remote store rewrite. No more paramiko.

==

darc/archive.py
darc/archiver.py
darc/cache.py
darc/helpers.py
darc/remote.py
darc/store.py
==================
93add06;Jonas Borgström;2012-07-31 14:43:52 +0200;Fix unicode issue with getcwd on non-darwin platforms

==

darc/archive.py
==================
12786a8;Jonas Borgström;2012-07-31 14:43:32 +0200;Fix a few minor coding style issues

==

darc/helpers.py
==================
d58784d;Jonas Borgström;2012-03-03 14:02:22 +0100;Fix device node restore issues

==

darc/archive.py
darc/archiver.py
darc/helpers.py
==================
f7e499c;Jonas Borgström;2012-03-03 13:56:51 +0100;Make specifying paths when running create optional.

==

darc/archiver.py
==================
78ab5bd;Jonas Borgström;2012-03-01 22:35:43 +0100;Add support for character and block device files

==

darc/archive.py
darc/archiver.py
==================
9d508c9;Jonas Borgström;2012-03-01 22:35:11 +0100;Avoid filesystem snapshot related race condition with mtimes

==

darc/cache.py
==================
4ddbf0d;Jonas Borgström;2012-02-29 23:59:17 +0100;Implemented --numeric-owner

==

darc/archive.py
darc/archiver.py
==================
3a70789;Jonas Borgström;2012-02-29 23:31:08 +0100;switch from bdkdf.py to pycrypto 2.5

==

darc/key.py
==================
da3e7a7;Jonas Borgström;2012-02-29 23:30:24 +0100;setup.py: switch from setuptools to pure distutils

==

scripts/darc
setup.py
==================
2d72123;Jonas Borgström;2012-02-28 23:03:21 +0100;Compact segments in order to avoid left over commit tags

==

darc/store.py
==================
d7e8765;Jonas Borgström;2012-02-07 20:39:22 +0100;Make sure stdout is blocking for "darc serve".
Fixes ssh issue on CentOS

==

darc/remote.py
==================
c4e022a;Jonas Borgström;2012-02-04 17:32:46 +0100;Added new option "--do-not-cross-mountpoints"

==

darc/archiver.py
==================
b755a4f;Jonas Borgström;2011-11-22 21:52:31 +0100;Remove "--really" option from prune. It's was a bit silly

==

darc/archiver.py
darc/test.py
==================
44b3757;Jonas Borgström;2011-11-22 21:47:17 +0100;Rename purge command to prune

==

darc/archiver.py
darc/helpers.py
darc/test.py
docs/index.rst
==================
1d525b4;Jonas Borgström;2011-11-06 21:40:29 +0100;Bumped version number

==

.gitignore
darc/__init__.py
docs/conf.py
setup.cfg
setup.py
==================
c0d7934;Jonas Borgström;2011-11-06 17:33:55 +0100;Added fake_pyrex/README

==

fake_pyrex/README
==================
4fc4bb0;Jonas Borgström;2011-11-06 17:28:32 +0100;Updated README

==

README
==================
d130fa2;Jonas Borgström;2011-11-06 16:59:14 +0100;Improved documentation

==

docs/index.rst
==================
6ffa7e8;Jonas Borgström;2011-11-05 21:13:15 +0100;Fix setuptools Cython issue

==

fake_pyrex/Pyrex/Distutils/__init__.py
fake_pyrex/Pyrex/Distutils/build_ext.py
fake_pyrex/Pyrex/__init__.py
setup.py
==================
be8a14b;Jonas Borgström;2011-11-05 19:42:28 +0100;Initial documentation

==

.gitignore
docs/Makefile
docs/conf.py
docs/index.rst
docs/make.bat
==================
fbdc11e;Jonas Borgström;2011-11-01 21:00:21 +0100;change-password improvements

==

darc/archiver.py
==================
2e4e8f1;Jonas Borgström;2011-10-31 21:18:28 +0100;More pep8 fixes

==

darc/helpers.py
==================
ddc1d02;Jonas Borgström;2011-10-31 21:14:16 +0100;Make change-password accept both store and key file paths

==

darc/archiver.py
==================
4c98c5e;Jonas Borgström;2011-10-29 17:01:07 +0200;Various pylint fixes

==

darc/archive.py
darc/archiver.py
darc/key.py
darc/store.py
darc/test.py
==================
f282fd6;Jonas Borgström;2011-10-27 22:17:47 +0200;Added "change-password" subcommand

==

darc/archiver.py
darc/helpers.py
darc/key.py
==================
9e5b13d;Jonas Borgström;2011-09-12 21:51:23 +0200;Added protocol negotiation support

==

darc/remote.py
==================
217da79;Jonas Borgström;2011-09-12 21:34:09 +0200;Added generic callback support

==

darc/archive.py
darc/archiver.py
darc/remote.py
darc/store.py
==================
e9ef5de;Jonas Borgström;2011-09-12 21:33:32 +0200;Run function tests on remote stores as well

==

darc/test.py
==================
ab75e74;Jonas Borgström;2011-09-11 12:51:55 +0200;Prompt for "Key password" not "Keychain password"

==

darc/key.py
==================
0165e4a;Jonas Borgström;2011-09-10 17:32:05 +0200;Some argsparse reorganization

==

darc/archiver.py
==================
55d049c;Jonas Borgström;2011-09-10 17:19:02 +0200;Added support for archive checkpoints

==

darc/archive.py
darc/archiver.py
darc/test.py
==================
f56b6bf;Jonas Borgström;2011-09-05 21:30:21 +0200;Lazy transactions

==

darc/store.py
==================
f9bdd72;Jonas Borgström;2011-09-05 21:20:17 +0200;Fixed remote store issue

==

darc/remote.py
==================
ef8c4a0;Jonas Borgström;2011-09-04 23:02:47 +0200;Storage rewrite and more compact encryption envelope

==

darc/__init__.py
darc/archive.py
darc/archiver.py
darc/cache.py
darc/helpers.py
darc/key.py
darc/remote.py
darc/store.py
darc/test.py
==================
3a00547;Jonas Borgström;2011-08-21 22:17:00 +0200;Added "--hourly" option to "purge" subcommand

==

darc/archiver.py
darc/test.py
==================
80cbdcd;Jonas Borgström;2011-08-21 21:35:00 +0200;Make the manifest format more extensible

==

darc/archive.py
darc/cache.py
darc/test.py
==================
52c02ce;Jonas Borgström;2011-08-20 18:11:23 +0200;Include Cython output in sdist

==

setup.py
==================
4f7f1fd;Jonas Borgström;2011-08-18 22:23:05 +0200;Store: rename bands to segments

==

darc/store.py
darc/test.py
==================
58b736b;Jonas Borgström;2011-08-17 21:26:20 +0200;Fix issue with object overwrites and sequential transactions

==

darc/store.py
==================
c791bf5;Jonas Borgström;2011-08-16 22:17:27 +0200;Fix typo

==

darc/archiver.py
==================
143a393;Jonas Borgström;2011-08-16 22:02:42 +0200;Make purge selection more stable and logic

==

darc/archiver.py
darc/helpers.py
==================
bb7b64a;Jonas Borgström;2011-08-16 20:47:38 +0200;Make verify handle failures better

==

darc/archive.py
==================
885dc88;Jonas Borgström;2011-08-16 20:40:24 +0200;Remove store commit race condition

==

darc/store.py
==================
bb6e4fb;Jonas Borgström;2011-08-15 22:32:26 +0200;Rework store design to use a single namespace

==

darc/__init__.py
darc/archive.py
darc/archiver.py
darc/cache.py
darc/helpers.py
darc/key.py
darc/remote.py
darc/store.py
==================
9e9d7c4;Jonas Borgström;2011-08-14 20:06:30 +0200;Prepare for future journal support

==

darc/_hashindex.c
==================
ebbab77;Jonas Borgström;2011-08-14 14:50:56 +0200;Fix cache rollback logic race condition

==

darc/cache.py
==================
1c207d5;Jonas Borgström;2011-08-12 08:49:01 +0200;More purge improvements

==

darc/archiver.py
darc/helpers.py
==================
86a4353;Jonas Borgström;2011-08-11 21:18:13 +0200;Improved purging algorithm

==

darc/archive.py
darc/archiver.py
darc/helpers.py
==================
833baae;Jonas Borgström;2011-08-08 20:55:09 +0200;Remove python 2.7 requirement for format_timedelta

==

darc/helpers.py
==================
996fd10;Jonas Borgström;2011-08-07 20:00:18 +0200;Added fingerprint and number of files to sats/info output

==

darc/archive.py
darc/archiver.py
darc/helpers.py
==================
2c328be;Jonas Borgström;2011-08-07 19:44:13 +0200;Ignore unix sockets

==

darc/archiver.py
==================
8616df7;Jonas Borgström;2011-08-07 17:10:21 +0200;Added creation time stats output using the --stats flag

==

darc/archive.py
darc/archiver.py
darc/cache.py
darc/helpers.py
==================
9feef66;Jonas Borgström;2011-08-07 14:04:14 +0200;Purge improvements: New options yearly and prefix

==

darc/archive.py
darc/archiver.py
darc/helpers.py
==================
e0615df;Jonas Borgström;2011-08-07 12:38:43 +0200;Defer directory attr restoration to avoid permission problems

==

darc/archive.py
darc/archiver.py
==================
ddade83;Jonas Borgström;2011-08-07 12:37:17 +0200;Improved utf-8 support on non darwin platforms

==

darc/archive.py
darc/archiver.py
darc/helpers.py
==================
66885c3;Jonas Borgström;2011-08-06 23:37:44 +0200;Do datetime to date conversion using the local time zone

==

darc/archiver.py
==================
5443441;Jonas Borgström;2011-08-06 23:33:06 +0200;Initial implementation of subcommand "purge"

==

darc/archive.py
darc/archiver.py
==================
bf08c09;Jonas Borgström;2011-08-06 13:14:08 +0200;Improved error handling

==

darc/archive.py
darc/key.py
==================
1d09141;Jonas Borgström;2011-08-06 13:01:58 +0200;Bring function tests back to life

==

darc/archive.py
darc/archiver.py
darc/cache.py
darc/helpers.py
darc/key.py
darc/remote.py
darc/store.py
darc/test.py
==================
59e33ab;Jonas Borgström;2011-08-05 15:53:01 +0200;Ignore IOErrors from xattr module

==

darc/archive.py
==================
a4f61d1;Jonas Borgström;2011-08-05 15:52:09 +0200;Fixed remote store upstream performance issue

==

darc/remote.py
==================
64a3185;Jonas Borgström;2011-08-04 15:27:52 +0200;More user friendly key file handling

==

darc/archiver.py
darc/helpers.py
darc/key.py
==================
60298e1;Jonas Borgström;2011-08-03 17:54:03 +0200;Restored python 2.5 compatibility

==

darc/remote.py
==================
ed529f4;Jonas Borgström;2011-08-03 17:31:22 +0200;Updated cache regeneration logic

==

darc/cache.py
==================
748401e;Jonas Borgström;2011-08-02 23:20:46 +0200;Deduplicate the items stream the same way as ordinary files

==

darc/archive.py
darc/store.py
==================
2d6df64;Jonas Borgström;2011-08-02 21:45:21 +0200;More optimizations

==

darc/archive.py
darc/helpers.py
darc/remote.py
==================
2d47afe;Jonas Borgström;2011-07-31 18:37:27 +0200;Optimize list and verify for remote stores

==

darc/archive.py
darc/archiver.py
==================
95a9a45;Jonas Borgström;2011-07-31 18:22:58 +0200;Fixed remote store race condition

==

darc/remote.py
==================
8dc057a;Jonas Borgström;2011-07-30 22:51:16 +0200;Remove potential busy wait for remote stores

==

darc/remote.py
==================
6c77ce5;Jonas Borgström;2011-07-30 22:50:59 +0200;Improved stats and delete performace on remote stores

==

darc/archive.py
darc/archiver.py
==================
b294ceb;Jonas Borgström;2011-07-30 21:13:48 +0200;Switch to pure AES256 encryption and improved metadata storage

==

darc/__init__.py
darc/archive.py
darc/archiver.py
darc/cache.py
darc/hashindex.pyx
darc/helpers.py
darc/key.py
darc/keychain.py
darc/oaep.py
darc/store.py
==================
d130754;Jonas Borgström;2011-07-18 00:00:03 +0200;Avoid generating zero byte chunks at the end of files

==

darc/_speedups.c
==================
3f20f8e;Jonas Borgström;2011-07-17 23:53:23 +0200;Asynchronous extract and verify mode

==

darc/archive.py
darc/archiver.py
darc/remote.py
darc/store.py
==================
8727129;Jonas Borgström;2011-07-17 22:31:37 +0200;More remote store improvements

==

darc/archive.py
darc/cache.py
darc/helpers.py
darc/remote.py
darc/store.py
==================
ea1c599;Jonas Borgström;2011-07-06 22:23:41 +0200;Another minor cache bug

==

darc/cache.py
==================
c125ecc;Jonas Borgström;2011-07-06 22:16:07 +0200;Some experimental remote store optimizations

==

darc/archive.py
darc/remote.py
darc/store.py
==================
1711a45;Jonas Borgström;2011-07-06 22:11:01 +0200;Fix issue with truncated file cache file

==

darc/cache.py
==================
f7ebd19;Jonas Borgström;2011-07-05 21:29:15 +0200;Improved remote upstream performance

==

darc/remote.py
darc/store.py
==================
0680c0a;Jonas Borgström;2011-07-02 20:39:35 +0200;Open cache/files on demand

==

darc/cache.py
==================
785ba39;Jonas Borgström;2011-07-02 20:39:22 +0200;Fix store test case

==

darc/store.py
==================
9683b2e;Jonas Borgström;2011-07-02 20:14:45 +0200;Verify object ns and id when reading bands

==

darc/store.py
==================
b608bf7;Jonas Borgström;2011-07-02 19:46:41 +0200;Remove sub command "init". Stores are now auto-created

==

darc/archiver.py
darc/store.py
darc/test.py
==================
e8ed99f;Jonas Borgström;2011-07-02 19:25:29 +0200;Added --include/--exclude options to verify sub command

==

darc/archiver.py
==================
0f7d5a6;Jonas Borgström;2011-07-01 22:12:21 +0200;Fix datetime parsing logic

==

darc/archive.py
==================
43cb736;Jonas Borgström;2011-07-01 22:07:36 +0200;Python 2.5 compatible timestamp parsing

==

darc/archive.py
==================
5f75b41;Jonas Borgström;2011-07-01 22:01:24 +0200;Process files in alphabetical order

==

darc/archiver.py
==================
650bd69;Jonas Borgström;2011-07-01 21:54:39 +0200;Decode hardlink source path before linking

==

darc/archive.py
==================
3eb211b;Jonas Borgström;2011-07-01 21:53:38 +0200;Default to 'utf-8' as stderr and stdout encoding

==

darc/archiver.py
==================
885823f;Jonas Borgström;2011-06-23 22:49:16 +0200;Added a few missing dependencies

==

setup.py
==================
fae9433;Jonas Borgström;2011-06-23 22:47:51 +0200;Various fixes to support Python 2.5

==

darc/archive.py
darc/cache.py
darc/helpers.py
darc/keychain.py
darc/store.py
darc/test.py
==================
9e11ae5;Jonas Borgström;2011-06-23 22:41:06 +0200;Added missing path prefix strip for hard links

==

darc/archive.py
==================
af95b7c;Jonas Borgström;2011-06-19 20:34:46 +0200;Store stat data even for hard links to make file listing prettier

==

darc/archive.py
darc/archiver.py
==================
fa6a45c;Jonas Borgström;2011-06-18 11:26:20 +0200;Handle crash between commit and delete_bands

==

darc/_hashindex.c
darc/hashindex.h
darc/hashindex.pyx
darc/store.py
==================
fc5d57e;Jonas Borgström;2011-06-18 11:25:29 +0200;Chunks cache should be cleared before sync()

==

darc/cache.py
==================
0629afc;Jonas Borgström;2011-06-16 21:55:54 +0200;Sort archive listing in chronological order

==

darc/archive.py
darc/archiver.py
darc/helpers.py
==================
731af54;Jonas Borgström;2011-01-04 23:16:55 +0100;Fix store and cache dir auto ignore

==

darc/archiver.py
darc/cache.py
==================
366d4ac;Jonas Borgström;2011-01-04 23:00:39 +0100;Create ~/.darc/ directory if missing

==

darc/archiver.py
darc/cache.py
==================
811bbb3;Jonas Borgström;2011-01-04 22:37:27 +0100;Fix paramiko password prompting

==

darc/remote.py
==================
0e3ba20;Jonas Borgström;2010-12-29 20:18:22 +0100;Fix hashindex_lookup corner case (infinite loop)

==

darc/_hashindex.c
==================
666db4b;Jonas Borgström;2010-12-21 21:29:09 +0100;New cache implementation

==

darc/archive.py
darc/archiver.py
darc/cache.py
darc/hashindex.pyx
darc/store.py
==================
ef032d3;Jonas Borgström;2010-12-19 12:46:42 +0100;Transaction safe band cleanup

==

darc/helpers.py
darc/store.py
==================
2ce4539;Jonas Borgström;2010-12-17 22:14:36 +0100;_hashindex.c: Log errors to stderr

==

darc/_hashindex.c
==================
9458977;Jonas Borgström;2010-12-17 22:13:10 +0100;Store crc32 hash in band headers

==

darc/store.py
==================
008409c;Jonas Borgström;2010-12-16 22:56:04 +0100;Rewritten and optimized chunkifier

==

darc/_speedups.c
==================
399e4f6;Jonas Borgström;2010-12-16 21:34:58 +0100;Create buffers instead of strings

==

darc/_speedups.c
==================
af61466;Jonas Borgström;2010-12-16 20:23:22 +0100;New hashindex implementation.

==

darc/_hashindex.c
darc/hashindex.h
darc/hashindex.py
darc/hashindex.pyx
darc/test.py
setup.py
==================
f9e63e3;Jonas Borgström;2010-12-08 22:57:26 +0100;New "bands" store index

==

darc/hashindex.py
darc/store.py
darc/test.py
==================
a308ac8;Jonas Borgström;2010-12-07 21:45:21 +0100;Store compaction performance improvements

==

darc/store.py
==================
d1bd664;Jonas Borgström;2010-12-07 21:31:09 +0100;HashIndex format change

==

darc/store.py
==================
ecc8b1e;Jonas Borgström;2010-12-06 21:46:29 +0100;Reworked packer format again

==

darc/__init__.py
darc/archive.py
darc/cache.py
darc/keychain.py
darc/store.py
==================
658cced;Jonas Borgström;2010-12-05 17:57:17 +0100;Minor format simplification

==

darc/archive.py
darc/cache.py
==================
e71b709;Jonas Borgström;2010-12-04 21:07:02 +0100;Added numpy dependency

==

setup.py
==================
a04ad26;Jonas Borgström;2010-12-04 21:03:02 +0100;New filesystem based store implementation

==

darc/__init__.py
darc/archive.py
darc/archiver.py
darc/cache.py
darc/lrucache.py
darc/store.py
darc/test.py
==================
c9aca63;Jonas Borgström;2010-11-29 21:08:37 +0100;Split large archive item packages into multiple smaller ones

==

darc/archive.py
darc/archiver.py
==================
198b3f9;Jonas Borgström;2010-11-23 14:46:53 +0100;Memory usage improvments

==

darc/archive.py
darc/archiver.py
darc/cache.py
darc/test.py
==================
84b4b08;Jonas Borgström;2010-11-23 12:55:42 +0100;Fix hardlink bug and added corresponding test case

==

darc/archive.py
darc/test.py
==================
231c06f;Jonas Borgström;2010-11-23 12:50:09 +0100;Move walk_path logic into archiver.py for better error handling

==

darc/archiver.py
==================
2a631bb;Jonas Borgström;2010-11-23 12:49:09 +0100;Minor refactoring to reuse existing id string objects when possible

==

darc/archive.py
darc/cache.py
==================
9f5e029;Jonas Borgström;2010-11-23 12:41:04 +0100;Improved IncludePattern match logic

==

darc/helpers.py
==================
81e2430;Jonas Borgström;2010-11-23 12:38:10 +0100;Only use 31 bits for chunification seed

==

darc/keychain.py
==================
58f51f1;Jonas Borgström;2010-11-17 22:40:39 +0100;Various remote store improvements

==

darc/archiver.py
darc/remote.py
==================
f300051;Jonas Borgström;2010-11-17 21:28:13 +0100;Added support for ssh://user@host/path and file:///file locations

==

darc/archiver.py
darc/helpers.py
darc/remote.py
==================
1a9f196;Jonas Borgström;2010-11-16 22:55:51 +0100;More tolerant remote side stderr output handling

==

darc/remote.py
==================
20935f8;Jonas Borgström;2010-11-15 22:18:47 +0100;Experimental remote store support

==

darc/archiver.py
darc/cache.py
darc/remote.py
darc/store.py
setup.py
==================
d15d57b;Jonas Borgström;2010-11-09 20:49:21 +0100;Auto ignore darc cache and store directories when creating archives

==

darc/archiver.py
darc/cache.py
darc/helpers.py
==================
9f94924;Jonas Borgström;2010-11-09 20:48:20 +0100;Fixed typo

==

darc/keychain.py
==================
cc9e81c;Jonas Borgström;2010-11-09 20:29:29 +0100;Removed trailing comma

==

setup.py
==================
480c946;Jonas Borgström;2010-11-08 22:07:24 +0100;Rework the way the encryption works to make it more tamper proof

==

darc/keychain.py
==================
6665275;Jonas Borgström;2010-11-04 23:04:09 +0100;Fix extract command verbose output

==

darc/archiver.py
==================
b8e9cf1;Jonas Borgström;2010-11-04 23:00:50 +0100;Removed unused exported functions

==

darc/_speedups.c
==================
4f86304;Jonas Borgström;2010-11-04 21:21:04 +0100;Handle unprintable characters when printing to stdout and stderr.

==

darc/archiver.py
==================
330315b;Jonas Borgström;2010-11-04 21:19:01 +0100;Chunkifier improvements. Including tin foil hat compliant seeding.

==

darc/_speedups.c
darc/archive.py
darc/chunkifier.py
darc/keychain.py
==================
dafd75f;Jonas Borgström;2010-11-03 19:46:21 +0100;Handle special case where RSA.encrypt returns cipher text shorter than 256 bytes.

==

darc/helpers.py
darc/keychain.py
==================
6fe6812;Jonas Borgström;2010-11-02 22:47:39 +0100;Experimental --include/exclude support

==

darc/archiver.py
darc/helpers.py
darc/test.py
==================
9f6d228;Jonas Borgström;2010-11-02 20:59:57 +0100;Improved keychain tests

==

darc/test.py
==================
bee4c86;Jonas Borgström;2010-11-02 18:33:53 +0100;Various bug fixes

==

darc/archive.py
darc/archiver.py
darc/keychain.py
==================
9e35c56;Jonas Borgström;2010-11-01 23:06:56 +0100;Fixed linux xattr issue

==

darc/archive.py
darc/test.py
==================
d70993f;Jonas Borgström;2010-10-31 22:21:59 +0100;Merge CryptoManager and KeyChain into Keychain

==

darc/archive.py
darc/archiver.py
darc/cache.py
darc/crypto.py
darc/keychain.py
==================
869f720;Jonas Borgström;2010-10-31 21:55:09 +0100;Various changes

==

.gitignore
darc/archive.py
darc/archiver.py
darc/crypto.py
darc/test.py
==================
1a1d8f8;Jonas Borgström;2010-10-31 20:33:55 +0100;Added xattr dependency

==

setup.py
==================
8d8816e;Jonas Borgström;2010-10-31 20:33:37 +0100;Removed doc directory

==

doc/design.txt
==================
fe663e3;Jonas Borgström;2010-10-31 20:31:56 +0100;Added xattr support

==

darc/archive.py
darc/test.py
==================
68bd3d3;Jonas Borgström;2010-10-31 20:12:32 +0100;Added FIFO support and improved tests

==

darc/archive.py
darc/archiver.py
darc/helpers.py
darc/test.py
==================
b5275ca;Jonas Borgström;2010-10-30 13:44:25 +0200;Remove logging usage

==

darc/archive.py
darc/archiver.py
darc/cache.py
darc/crypto.py
darc/helpers.py
darc/test.py
==================
ae7b0ea;Jonas Borgström;2010-10-30 13:24:23 +0200;Added argparse as a dependency

==

setup.py
==================
4c178e0;Jonas Borgström;2010-10-27 21:01:57 +0200;Various improvements.

==

darc/archiver.py
darc/cache.py
==================
baa0224;Jonas Borgström;2010-10-27 20:40:48 +0200;Added README and fixed time format string typo

==

README
darc/helpers.py
==================
8cdca7a;Jonas Borgström;2010-10-27 20:12:40 +0200;Renamed dedupestore to darc

==

darc/__init__.py
darc/_speedups.c
darc/archive.py
darc/archiver.py
darc/cache.py
darc/chunkifier.py
darc/crypto.py
darc/helpers.py
darc/oaep.py
darc/store.py
darc/test.py
dedupestore/__init__.py
dedupestore/_speedups.c
dedupestore/archive.py
dedupestore/archiver.py
dedupestore/cache.py
dedupestore/chunkifier.py
dedupestore/crypto.py
dedupestore/helpers.py
dedupestore/oaep.py
dedupestore/store.py
dedupestore/test.py
doc/design.txt
setup.py
==================
e405eb4;Jonas Borgström;2010-10-27 19:30:21 +0200;More fixes.

==

dedupestore/archive.py
dedupestore/archiver.py
dedupestore/cache.py
dedupestore/helpers.py
==================
5fd716b;Jonas Borgström;2010-10-26 22:34:25 +0200;Prettier list output

==

dedupestore/archive.py
dedupestore/helpers.py
==================
e650e19;Jonas Borgström;2010-10-26 21:48:43 +0200;Added "init" subcommand

==

dedupestore/archiver.py
dedupestore/store.py
dedupestore/test.py
==================
e5fad31;Jonas Borgström;2010-10-26 21:25:25 +0200;Store cleanup

==

dedupestore/archiver.py
dedupestore/bandstore.py
dedupestore/cache.py
dedupestore/store.py
dedupestore/test.py
==================
9d20d44;Jonas Borgström;2010-10-26 21:03:47 +0200;Minor code cleanup

==

dedupestore/archive.py
==================
a9e2dd6;Jonas Borgström;2010-10-26 20:50:30 +0200;Cache code cleanup

==

dedupestore/cache.py
==================
e181829;Jonas Borgström;2010-10-25 22:31:18 +0200;Initial rough implementation of chunkification cache

==

dedupestore/archive.py
dedupestore/cache.py
==================
00a9808;Jonas Borgström;2010-10-25 20:38:15 +0200;Prettier archive contents listing

==

dedupestore/archive.py
dedupestore/crypto.py
==================
be469ba;Jonas Borgström;2010-10-25 20:22:20 +0200;Keychain improvements.

==

dedupestore/archive.py
dedupestore/archiver.py
dedupestore/crypto.py
dedupestore/test.py
==================
f1f54b7;Jonas Borgström;2010-10-25 19:57:54 +0200;Info output improvements.

==

dedupestore/archive.py
dedupestore/archiver.py
==================
ad2ccff;Jonas Borgström;2010-10-25 19:52:12 +0200;Minor OAEP changes.

==

dedupestore/oaep.py
==================
a8deb8c;Jonas Borgström;2010-10-25 19:51:47 +0200;Split Archive into METADATA, ITEMS and CHUNKS

==

dedupestore/__init__.py
dedupestore/archive.py
dedupestore/archiver.py
dedupestore/cache.py
==================
3fe1c1e;Jonas Borgström;2010-10-25 19:17:48 +0200;Fix archive listing

==

dedupestore/archive.py
dedupestore/archiver.py
==================
4723bdd;Jonas Borgström;2010-10-24 22:16:00 +0200;More robust lchown code

==

dedupestore/archive.py
==================
57a79f5;Jonas Borgström;2010-10-24 22:13:34 +0200;Added keychain chpass

==

dedupestore/archiver.py
dedupestore/crypto.py
==================
6c672b1;Jonas Borgström;2010-10-24 22:07:54 +0200;Store username in archive

==

dedupestore/archive.py
==================
a3d2d5c;Jonas Borgström;2010-10-24 22:00:46 +0200;Added "keychain restrict" command

==

dedupestore/archiver.py
dedupestore/crypto.py
==================
25c3022;Jonas Borgström;2010-10-24 21:47:00 +0200;Added keychain encryption

==

dedupestore/archive.py
dedupestore/archiver.py
dedupestore/crypto.py
==================
f5f8065;Jonas Borgström;2010-10-24 20:18:18 +0200;Verify cindex integrity on archive open

==

dedupestore/archive.py
dedupestore/cache.py
dedupestore/crypto.py
==================
4805625;Jonas Borgström;2010-10-23 23:01:12 +0200;Added keychain and switched to MODE_CTR

==

dedupestore/archive.py
dedupestore/archiver.py
dedupestore/crypto.py
dedupestore/test.py
==================
3bb4745;Jonas Borgström;2010-10-23 21:38:42 +0200;More cryptography work.

==

dedupestore/archive.py
dedupestore/cache.py
dedupestore/crypto.py
dedupestore/helpers.py
==================
b168850;Jonas Borgström;2010-10-23 19:41:31 +0200;Renamed crypt.py to crypto.py

==

dedupestore/archive.py
dedupestore/archiver.py
dedupestore/cache.py
dedupestore/crypt.py
dedupestore/crypto.py
==================
ec1be2d;Jonas Borgström;2010-10-23 17:38:08 +0200;Simple OAEP implementation

==

dedupestore/oaep.py
==================
1ab4ebf;Jonas Borgström;2010-10-22 00:10:51 +0200;Initial AES encryption support

==

dedupestore/archive.py
dedupestore/archiver.py
dedupestore/cache.py
dedupestore/crypt.py
dedupestore/helpers.py
==================
a9f37b9;Jonas Borgström;2010-10-21 21:30:10 +0200;Port cache to pack/unpack

==

dedupestore/cache.py
==================
f0240fb;Jonas Borgström;2010-10-21 21:21:43 +0200;Cache redesign and encryption preparation

==

dedupestore/archive.py
dedupestore/archiver.py
dedupestore/cache.py
dedupestore/helpers.py
==================
e26b3e9;Jonas Borgström;2010-10-20 23:04:30 +0200;Fix typo

==

dedupestore/archive.py
==================
afdabb6;Jonas Borgström;2010-10-20 22:53:58 +0200;Hard link support and some stat restore fixes

==

dedupestore/archive.py
==================
63c9966;Jonas Borgström;2010-10-20 21:08:46 +0200;More cleanup work

==

dedupestore/archive.py
dedupestore/archiver.py
dedupestore/cache.py
==================
cf7d12b;Jonas Borgström;2010-10-20 20:28:29 +0200;Initial cache redesign

==

dedupestore/archive.py
dedupestore/cache.py
==================
32c8158;Jonas Borgström;2010-10-20 19:59:15 +0200;Code re-organization

==

dedupestore/archive.py
dedupestore/archiver.py
dedupestore/cache.py
==================
0839e6b;Jonas Borgström;2010-10-19 22:03:47 +0200;Implemented, mode, owner and ctime/mtime support

==

dedupestore/archiver.py
dedupestore/helpers.py
==================
7e288c0;Jonas Borgström;2010-10-19 21:12:12 +0200;Code cleanup

==

dedupestore/archiver.py
dedupestore/helpers.py
==================
5cb2d80;Jonas Borgström;2010-10-19 21:08:42 +0200;More bandstore optimizations

==

dedupestore/archiver.py
dedupestore/bandstore.py
dedupestore/cache.py
dedupestore/test.py
==================
a1bbe57;Jonas Borgström;2010-10-19 19:07:35 +0200;Fix corner case bug in chunify()

==

dedupestore/_speedups.c
dedupestore/chunkifier.py
setup.py
==================
8d25f18;Jonas Borgström;2010-10-19 00:14:12 +0200;Various sha-related performance improvements.

==

dedupestore/archiver.py
==================
52870eb;Jonas Borgström;2010-10-19 00:00:52 +0200;bandstore: More robust band cleaning

==

dedupestore/archiver.py
dedupestore/bandstore.py
==================
be649e8;Jonas Borgström;2010-10-18 19:43:54 +0200;Added symlink support

==

dedupestore/archiver.py
dedupestore/test.py
==================
54b0c9c;Jonas Borgström;2010-10-18 19:03:30 +0200;Python 2.6 compatibility

==

dedupestore/archiver.py
==================
b99ea11;Jonas Borgström;2010-10-17 22:42:52 +0200;Various banded store improvements.

==

dedupestore/bandstore.py
==================
a8ff436;Jonas Borgström;2010-10-17 22:04:50 +0200;Switched to msgpack and some bandedstore improvements.

==

dedupestore/__init__.py
dedupestore/archiver.py
dedupestore/bandstore.py
dedupestore/cache.py
dedupestore/test.py
==================
e72c558;Jonas Borgström;2010-10-17 18:05:46 +0200;Fix cache recreation bug

==

dedupestore/archiver.py
dedupestore/cache.py
==================
6eb65d0;Jonas Borgström;2010-10-17 17:44:41 +0200;Switched to using avro serialization for archives

==

dedupestore/__init__.py
dedupestore/archiver.py
dedupestore/cache.py
==================
5cd5d76;Jonas Borgström;2010-10-16 11:45:36 +0200;Added basic unit tests.

==

dedupestore/archiver.py
dedupestore/test.py
==================
03b0e85;Jonas Borgström;2010-10-15 22:29:36 +0200;Move pretty_size to helpers.py

==

dedupestore/archiver.py
dedupestore/helpers.py
==================
cbb62fd;Jonas Borgström;2010-10-15 22:22:29 +0200;Removed unused store implementations

==

dedupestore/fsstore.py
dedupestore/sqlitestore.py
==================
98b1b5e;Jonas Borgström;2010-10-15 22:18:22 +0200;Switch from sha1 to sha256

==

dedupestore/archiver.py
dedupestore/cache.py
==================
4bbd093;Jonas Borgström;2010-10-15 20:46:17 +0200;Added dedupestore "console script"

==

.gitignore
dedupestore/helpers.py
setup.py
==================
767335e;Jonas Borgström;2010-10-15 20:35:49 +0200;Use argparse instead of optparse

==

dedupestore/archiver.py
==================
885d267;Jonas Borgström;2010-10-15 19:56:38 +0200;Various bandstore improvements

==

dedupestore/bandstore.py
==================
f576c25;Jonas Borgström;2010-10-15 19:33:15 +0200;Fix cache reinitalization.

==

dedupestore/cache.py
==================
d0d8dc5;Jonas Borgström;2010-10-13 23:28:40 +0200;Improved robustness

==

dedupestore/archiver.py
dedupestore/cache.py
doc/design.txt
==================
af8c943;Jonas Borgström;2010-10-13 22:18:54 +0200;bandedstore: Handle aborted transactions better

==

.gitignore
dedupestore/bandstore.py
==================
2eea138;Jonas Borgström;2010-10-13 22:07:55 +0200;Use smarter chunkifier algorithm (same as git and rsyncable gzip)

==

dedupestore/_speedups.c
dedupestore/archiver.py
dedupestore/cache.py
dedupestore/chunkifier.py
==================
4e476d7;Jonas Borgström;2010-05-26 21:41:55 +0200;An almost working banded store impl

==

dedupestore/archiver.py
dedupestore/bandstore.py
==================
62a4a37;Jonas Borgström;2010-05-10 22:35:46 +0200;An experimental sqlite based storage implementation.

==

dedupestore/archiver.py
dedupestore/cache.py
dedupestore/fsstore.py
dedupestore/sqlitestore.py
dedupestore/store.py
==================
3d89bf7;Jonas Borgström;2010-04-22 22:34:33 +0200;More accurate archive stats display

==

dedupestore/archiver.py
==================
ddd32ef;Jonas Borgström;2010-04-18 22:51:54 +0200;Fixed a chunk refcounting bug

==

dedupestore/cache.py
==================
36d15b7;Jonas Borgström;2010-04-18 22:34:21 +0200;Initial archive stats implementation.

==

dedupestore/archiver.py
dedupestore/cache.py
==================
357cad4;Jonas Borgström;2010-04-18 22:08:12 +0200;Nothing much.

==

dedupestore/archiver.py
dedupestore/cache.py
dedupestore/chunkifier.py
setup.py
==================
eedf969;Jonas Borgström;2010-03-29 21:40:09 +0200;Fixed archive delete bug.

==

dedupestore/archiver.py
==================
42ff0a8;Jonas Borgström;2010-03-15 21:23:34 +0100;Store more chunk metadata in the archive.

==

dedupestore/archiver.py
dedupestore/cache.py
==================
98f738f;Jonas Borgström;2010-03-09 22:27:37 +0100;Some code refactoring.

==

dedupestore/_speedups.c
dedupestore/archiver.py
dedupestore/chunkifier.py
==================
723c636;Jonas Borgström;2010-03-06 18:25:35 +0100;Various code refactoring.

==

dedupestore/__init__.py
dedupestore/archiver.py
dedupestore/cache.py
dedupestore/store.py
==================
7252c32;Jonas Borgström;2010-03-03 23:27:40 +0100;A working c based chunkify implementation. Result: A 20+x speedup. YAY

==

dedupestore/_speedups.c
==================
c1a6a4f;Jonas Borgström;2010-03-03 22:52:57 +0100;Partial C implementation of chunkifier

==

dedupestore/_speedups.c
dedupestore/chunkifier.py
==================
3ce990b;Jonas Borgström;2010-03-02 20:21:13 +0100;Implemented checksum and roll_checksum in C. About 30% Performance boost. Yay!

==

dedupestore/_speedups.c
dedupestore/chunkifier.py
==================
61cbaf8;Jonas Borgström;2010-03-01 23:39:14 +0100;Implemented checksum() in _speedups.c

==

dedupestore/_speedup.c
dedupestore/_speedups.c
setup.py
==================
60126b6;Jonas Borgström;2010-03-01 23:02:40 +0100;Some code refactoring.

==

dedupestore/archiver.py
dedupestore/chunkifier.py
==================
ef4a035;Jonas Borgström;2010-03-01 22:16:07 +0100;Smarter buffer handling.

==

dedupestore/chunkifier.py
==================
8416de6;Jonas Borgström;2010-03-01 22:04:43 +0100;Rename.

==

dedupestore/_speedup.c
dedupestore/archiver.py
dedupestore/chunkifier.py
dedupestore/store.py
dedupstore/_chunkifier.c
dedupstore/archiver.py
dedupstore/chunkifier.py
dedupstore/store.py
setup.py
==================
b1cf8b1;Jonas Borgström;2010-03-01 19:53:33 +0100;Better buffer handling.

==

dedupstore/chunkifier.py
==================
41a4842;Jonas Borgström;2010-02-28 21:34:56 +0100;Switched to an inter based python implementation of chunkify.

==

dedupstore/chunkifier.py
==================
f647315;Jonas Borgström;2010-02-28 21:13:21 +0100;Various fixes.

==

dedupstore/archiver.py
==================
aebf3cc;Jonas Borgström;2010-02-28 20:22:45 +0100;Some ext experimentation.

==

dedupstore/_chunkifier.c
setup.py
==================
6c73f5d;Jonas Borgström;2010-02-28 16:20:19 +0100;Renamed chunker to chunkifier.

==

dedupstore/archiver.py
dedupstore/chunker.py
dedupstore/chunkifier.py
==================
0cca830;Jonas Borgström;2010-02-28 12:03:37 +0100;Some chunker fixes.

==

dedupstore/archiver.py
dedupstore/chunker.py
==================
9f955bf;Jonas Borgström;2010-02-28 00:32:24 +0100;Working variable length file chunking.

==

dedupstore/archiver.py
dedupstore/chunker.py
==================
bc959eb;Jonas Borgström;2010-02-27 23:23:39 +0100;Started added suppor for a using variable length chunks.

==

dedupstore/archiver.py
dedupstore/chunker.py
==================
e4807b1;Jonas Borgström;2010-02-24 23:24:19 +0100;Improved optparse usage and implemented list archive(s) and verify_archive

==

dedupstore/archiver.py
dedupstore/store.py
==================
5cbafdf;Jonas Borgström;2010-02-24 20:38:27 +0100;Switched to a namespace base object store implementation.

==

dedupstore/archiver.py
dedupstore/store.py
==================
e65ed86;Jonas Borgström;2010-02-23 22:12:22 +0100;Initial optparse implementation.

==

dedupstore/archiver.py
==================
575efb5;Jonas Borgström;2010-02-23 21:34:28 +0100;Switch from Repository to Store.

==

dedupstore/archiver.py
dedupstore/repository.py
dedupstore/store.py
==================
1e2ecae;Jonas Borgström;2010-02-22 23:17:49 +0100;New object store implementation.

==

dedupstore/store.py
==================
1d76aab;Jonas Borgström;2010-02-22 21:29:31 +0100;Persist cache info.

==

dedupstore/archiver.py
dedupstore/repository.py
==================
246e3fa;Jonas Borgström;2010-02-21 10:59:26 +0100;Added a uuid base id to repositoty.

==

dedupstore/archiver.py
dedupstore/repository.py
==================
21069cc;Jonas Borgström;2010-02-20 22:28:46 +0100;First on-disk archive format.

==

dedupstore/archiver.py
dedupstore/repository.py
==================
695d569;Jonas Borgström;2010-02-20 18:23:46 +0100;Started work on archiver.py

==

dedupstore/archiver.py
dedupstore/repository.py
==================
02c2490;Jonas Borgström;2010-02-15 21:38:17 +0100;Implemented Repository.commit() and Repository.apply_txn()

==

dedupstore/repository.py
==================
7d6aa37;Jonas Borgström;2010-02-14 14:44:18 +0100;Initial import.

==

dedupstore/repository.py
doc/design.txt
